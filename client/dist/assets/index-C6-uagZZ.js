function LM(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in n)){const a=Object.getOwnPropertyDescriptor(s,r);a&&Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();var HCe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k3(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function UM(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}),t}var _v={exports:{}},Gm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zk;function RM(){if(Zk)return Gm;Zk=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,a){var i=null;if(a!==void 0&&(i=""+a),r.key!==void 0&&(i=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:n,type:s,key:i,ref:r!==void 0?r:null,props:a}}return Gm.Fragment=e,Gm.jsx=t,Gm.jsxs=t,Gm}var eF;function $M(){return eF||(eF=1,_v.exports=RM()),_v.exports}var F=$M(),Ov={exports:{}},hn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tF;function _M(){if(tF)return hn;tF=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;function d(j){return j===null||typeof j!="object"?null:(j=f&&j[f]||j["@@iterator"],typeof j=="function"?j:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,w={};function v(j,ue,Q){this.props=j,this.context=ue,this.refs=w,this.updater=Q||m}v.prototype.isReactComponent={},v.prototype.setState=function(j,ue){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ue,"setState")},v.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function b(){}b.prototype=v.prototype;function C(j,ue,Q){this.props=j,this.context=ue,this.refs=w,this.updater=Q||m}var N=C.prototype=new b;N.constructor=C,g(N,v.prototype),N.isPureReactComponent=!0;var I=Array.isArray,L={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function H(j,ue,Q,V,Z,le){return Q=le.ref,{$$typeof:n,type:j,key:ue,ref:Q!==void 0?Q:null,props:le}}function U(j,ue){return H(j.type,ue,void 0,void 0,void 0,j.props)}function O(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function z(j){var ue={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Q){return ue[Q]})}var T=/\/+/g;function R(j,ue){return typeof j=="object"&&j!==null&&j.key!=null?z(""+j.key):ue.toString(36)}function W(){}function K(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(W,W):(j.status="pending",j.then(function(ue){j.status==="pending"&&(j.status="fulfilled",j.value=ue)},function(ue){j.status==="pending"&&(j.status="rejected",j.reason=ue)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function re(j,ue,Q,V,Z){var le=typeof j;(le==="undefined"||le==="boolean")&&(j=null);var ce=!1;if(j===null)ce=!0;else switch(le){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(j.$$typeof){case n:case e:ce=!0;break;case h:return ce=j._init,re(ce(j._payload),ue,Q,V,Z)}}if(ce)return Z=Z(j),ce=V===""?"."+R(j,0):V,I(Z)?(Q="",ce!=null&&(Q=ce.replace(T,"$&/")+"/"),re(Z,ue,Q,"",function(xe){return xe})):Z!=null&&(O(Z)&&(Z=U(Z,Q+(Z.key==null||j&&j.key===Z.key?"":(""+Z.key).replace(T,"$&/")+"/")+ce)),ue.push(Z)),1;ce=0;var pe=V===""?".":V+":";if(I(j))for(var ye=0;ye<j.length;ye++)V=j[ye],le=pe+R(V,ye),ce+=re(V,ue,Q,le,Z);else if(ye=d(j),typeof ye=="function")for(j=ye.call(j),ye=0;!(V=j.next()).done;)V=V.value,le=pe+R(V,ye++),ce+=re(V,ue,Q,le,Z);else if(le==="object"){if(typeof j.then=="function")return re(K(j),ue,Q,V,Z);throw ue=String(j),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return ce}function P(j,ue,Q){if(j==null)return j;var V=[],Z=0;return re(j,V,"","",function(le){return ue.call(Q,le,Z++)}),V}function Y(j){if(j._status===-1){var ue=j._result;ue=ue(),ue.then(function(Q){(j._status===0||j._status===-1)&&(j._status=1,j._result=Q)},function(Q){(j._status===0||j._status===-1)&&(j._status=2,j._result=Q)}),j._status===-1&&(j._status=0,j._result=ue)}if(j._status===1)return j._result.default;throw j._result}var J=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function te(){}return hn.Children={map:P,forEach:function(j,ue,Q){P(j,function(){ue.apply(this,arguments)},Q)},count:function(j){var ue=0;return P(j,function(){ue++}),ue},toArray:function(j){return P(j,function(ue){return ue})||[]},only:function(j){if(!O(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},hn.Component=v,hn.Fragment=t,hn.Profiler=r,hn.PureComponent=C,hn.StrictMode=s,hn.Suspense=l,hn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,hn.__COMPILER_RUNTIME={__proto__:null,c:function(j){return L.H.useMemoCache(j)}},hn.cache=function(j){return function(){return j.apply(null,arguments)}},hn.cloneElement=function(j,ue,Q){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var V=g({},j.props),Z=j.key,le=void 0;if(ue!=null)for(ce in ue.ref!==void 0&&(le=void 0),ue.key!==void 0&&(Z=""+ue.key),ue)!$.call(ue,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&ue.ref===void 0||(V[ce]=ue[ce]);var ce=arguments.length-2;if(ce===1)V.children=Q;else if(1<ce){for(var pe=Array(ce),ye=0;ye<ce;ye++)pe[ye]=arguments[ye+2];V.children=pe}return H(j.type,Z,void 0,void 0,le,V)},hn.createContext=function(j){return j={$$typeof:i,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:a,_context:j},j},hn.createElement=function(j,ue,Q){var V,Z={},le=null;if(ue!=null)for(V in ue.key!==void 0&&(le=""+ue.key),ue)$.call(ue,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(Z[V]=ue[V]);var ce=arguments.length-2;if(ce===1)Z.children=Q;else if(1<ce){for(var pe=Array(ce),ye=0;ye<ce;ye++)pe[ye]=arguments[ye+2];Z.children=pe}if(j&&j.defaultProps)for(V in ce=j.defaultProps,ce)Z[V]===void 0&&(Z[V]=ce[V]);return H(j,le,void 0,void 0,null,Z)},hn.createRef=function(){return{current:null}},hn.forwardRef=function(j){return{$$typeof:o,render:j}},hn.isValidElement=O,hn.lazy=function(j){return{$$typeof:h,_payload:{_status:-1,_result:j},_init:Y}},hn.memo=function(j,ue){return{$$typeof:u,type:j,compare:ue===void 0?null:ue}},hn.startTransition=function(j){var ue=L.T,Q={};L.T=Q;try{var V=j(),Z=L.S;Z!==null&&Z(Q,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(te,J)}catch(le){J(le)}finally{L.T=ue}},hn.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},hn.use=function(j){return L.H.use(j)},hn.useActionState=function(j,ue,Q){return L.H.useActionState(j,ue,Q)},hn.useCallback=function(j,ue){return L.H.useCallback(j,ue)},hn.useContext=function(j){return L.H.useContext(j)},hn.useDebugValue=function(){},hn.useDeferredValue=function(j,ue){return L.H.useDeferredValue(j,ue)},hn.useEffect=function(j,ue,Q){var V=L.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return V.useEffect(j,ue)},hn.useId=function(){return L.H.useId()},hn.useImperativeHandle=function(j,ue,Q){return L.H.useImperativeHandle(j,ue,Q)},hn.useInsertionEffect=function(j,ue){return L.H.useInsertionEffect(j,ue)},hn.useLayoutEffect=function(j,ue){return L.H.useLayoutEffect(j,ue)},hn.useMemo=function(j,ue){return L.H.useMemo(j,ue)},hn.useOptimistic=function(j,ue){return L.H.useOptimistic(j,ue)},hn.useReducer=function(j,ue,Q){return L.H.useReducer(j,ue,Q)},hn.useRef=function(j){return L.H.useRef(j)},hn.useState=function(j){return L.H.useState(j)},hn.useSyncExternalStore=function(j,ue,Q){return L.H.useSyncExternalStore(j,ue,Q)},hn.useTransition=function(){return L.H.useTransition()},hn.version="19.1.0",hn}var nF;function NS(){return nF||(nF=1,Ov.exports=_M()),Ov.exports}var Ee=NS(),Qv={exports:{}},Km={},Mv={exports:{}},Hv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sF;function OM(){return sF||(sF=1,function(n){function e(P,Y){var J=P.length;P.push(Y);e:for(;0<J;){var te=J-1>>>1,j=P[te];if(0<r(j,Y))P[te]=Y,P[J]=j,J=te;else break e}}function t(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var Y=P[0],J=P.pop();if(J!==Y){P[0]=J;e:for(var te=0,j=P.length,ue=j>>>1;te<ue;){var Q=2*(te+1)-1,V=P[Q],Z=Q+1,le=P[Z];if(0>r(V,J))Z<j&&0>r(le,V)?(P[te]=le,P[Z]=J,te=Z):(P[te]=V,P[Q]=J,te=Q);else if(Z<j&&0>r(le,J))P[te]=le,P[Z]=J,te=Z;else break e}}return Y}function r(P,Y){var J=P.sortIndex-Y.sortIndex;return J!==0?J:P.id-Y.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();n.unstable_now=function(){return i.now()-o}}var l=[],u=[],h=1,f=null,d=3,m=!1,g=!1,w=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function I(P){for(var Y=t(u);Y!==null;){if(Y.callback===null)s(u);else if(Y.startTime<=P)s(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(u)}}function L(P){if(w=!1,I(P),!g)if(t(l)!==null)g=!0,$||($=!0,R());else{var Y=t(u);Y!==null&&re(L,Y.startTime-P)}}var $=!1,H=-1,U=5,O=-1;function z(){return v?!0:!(n.unstable_now()-O<U)}function T(){if(v=!1,$){var P=n.unstable_now();O=P;var Y=!0;try{e:{g=!1,w&&(w=!1,C(H),H=-1),m=!0;var J=d;try{t:{for(I(P),f=t(l);f!==null&&!(f.expirationTime>P&&z());){var te=f.callback;if(typeof te=="function"){f.callback=null,d=f.priorityLevel;var j=te(f.expirationTime<=P);if(P=n.unstable_now(),typeof j=="function"){f.callback=j,I(P),Y=!0;break t}f===t(l)&&s(l),I(P)}else s(l);f=t(l)}if(f!==null)Y=!0;else{var ue=t(u);ue!==null&&re(L,ue.startTime-P),Y=!1}}break e}finally{f=null,d=J,m=!1}Y=void 0}}finally{Y?R():$=!1}}}var R;if(typeof N=="function")R=function(){N(T)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,K=W.port2;W.port1.onmessage=T,R=function(){K.postMessage(null)}}else R=function(){b(T,0)};function re(P,Y){H=b(function(){P(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_next=function(P){switch(d){case 1:case 2:case 3:var Y=3;break;default:Y=d}var J=d;d=Y;try{return P()}finally{d=J}},n.unstable_requestPaint=function(){v=!0},n.unstable_runWithPriority=function(P,Y){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var J=d;d=P;try{return Y()}finally{d=J}},n.unstable_scheduleCallback=function(P,Y,J){var te=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?te+J:te):J=te,P){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=J+j,P={id:h++,callback:Y,priorityLevel:P,startTime:J,expirationTime:j,sortIndex:-1},J>te?(P.sortIndex=J,e(u,P),t(l)===null&&P===t(u)&&(w?(C(H),H=-1):w=!0,re(L,J-te))):(P.sortIndex=j,e(l,P),g||m||(g=!0,$||($=!0,R()))),P},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(P){var Y=d;return function(){var J=d;d=Y;try{return P.apply(this,arguments)}finally{d=J}}}}(Hv)),Hv}var rF;function QM(){return rF||(rF=1,Mv.exports=OM()),Mv.exports}var Pv={exports:{}},Ea={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aF;function MM(){if(aF)return Ea;aF=1;var n=NS();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(l,u,h){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:f==null?null:""+f,children:l,containerInfo:u,implementation:h}}var i=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Ea.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ea.createPortal=function(l,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(l,u,null,h)},Ea.flushSync=function(l){var u=i.T,h=s.p;try{if(i.T=null,s.p=2,l)return l()}finally{i.T=u,s.p=h,s.d.f()}},Ea.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,s.d.C(l,u))},Ea.prefetchDNS=function(l){typeof l=="string"&&s.d.D(l)},Ea.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var h=u.as,f=o(h,u.crossOrigin),d=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?s.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:d,fetchPriority:m}):h==="script"&&s.d.X(l,{crossOrigin:f,integrity:d,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Ea.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=o(u.as,u.crossOrigin);s.d.M(l,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&s.d.M(l)},Ea.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,f=o(h,u.crossOrigin);s.d.L(l,h,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Ea.preloadModule=function(l,u){if(typeof l=="string")if(u){var h=o(u.as,u.crossOrigin);s.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else s.d.m(l)},Ea.requestFormReset=function(l){s.d.r(l)},Ea.unstable_batchedUpdates=function(l,u){return l(u)},Ea.useFormState=function(l,u,h){return i.H.useFormState(l,u,h)},Ea.useFormStatus=function(){return i.H.useHostTransitionStatus()},Ea.version="19.1.0",Ea}var iF;function HM(){if(iF)return Pv.exports;iF=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Pv.exports=MM(),Pv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oF;function PM(){if(oF)return Km;oF=1;var n=QM(),e=NS(),t=HM();function s(A){var c="https://react.dev/errors/"+A;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+A+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function a(A){var c=A,p=A;if(A.alternate)for(;c.return;)c=c.return;else{A=c;do c=A,(c.flags&4098)!==0&&(p=c.return),A=c.return;while(A)}return c.tag===3?p:null}function i(A){if(A.tag===13){var c=A.memoizedState;if(c===null&&(A=A.alternate,A!==null&&(c=A.memoizedState)),c!==null)return c.dehydrated}return null}function o(A){if(a(A)!==A)throw Error(s(188))}function l(A){var c=A.alternate;if(!c){if(c=a(A),c===null)throw Error(s(188));return c!==A?null:A}for(var p=A,y=c;;){var B=p.return;if(B===null)break;var E=B.alternate;if(E===null){if(y=B.return,y!==null){p=y;continue}break}if(B.child===E.child){for(E=B.child;E;){if(E===p)return o(B),A;if(E===y)return o(B),c;E=E.sibling}throw Error(s(188))}if(p.return!==y.return)p=B,y=E;else{for(var G=!1,ie=B.child;ie;){if(ie===p){G=!0,p=B,y=E;break}if(ie===y){G=!0,y=B,p=E;break}ie=ie.sibling}if(!G){for(ie=E.child;ie;){if(ie===p){G=!0,p=E,y=B;break}if(ie===y){G=!0,y=E,p=B;break}ie=ie.sibling}if(!G)throw Error(s(189))}}if(p.alternate!==y)throw Error(s(190))}if(p.tag!==3)throw Error(s(188));return p.stateNode.current===p?A:c}function u(A){var c=A.tag;if(c===5||c===26||c===27||c===6)return A;for(A=A.child;A!==null;){if(c=u(A),c!==null)return c;A=A.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),N=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function R(A){return A===null||typeof A!="object"?null:(A=T&&A[T]||A["@@iterator"],typeof A=="function"?A:null)}var W=Symbol.for("react.client.reference");function K(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===W?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case g:return"Fragment";case v:return"Profiler";case w:return"StrictMode";case L:return"Suspense";case $:return"SuspenseList";case O:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case m:return"Portal";case N:return(A.displayName||"Context")+".Provider";case C:return(A._context.displayName||"Context")+".Consumer";case I:var c=A.render;return A=A.displayName,A||(A=c.displayName||c.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case H:return c=A.displayName||null,c!==null?c:K(A.type)||"Memo";case U:c=A._payload,A=A._init;try{return K(A(c))}catch{}}return null}var re=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},te=[],j=-1;function ue(A){return{current:A}}function Q(A){0>j||(A.current=te[j],te[j]=null,j--)}function V(A,c){j++,te[j]=A.current,A.current=c}var Z=ue(null),le=ue(null),ce=ue(null),pe=ue(null);function ye(A,c){switch(V(ce,c),V(le,A),V(Z,null),c.nodeType){case 9:case 11:A=(A=c.documentElement)&&(A=A.namespaceURI)?Ik(A):0;break;default:if(A=c.tagName,c=c.namespaceURI)c=Ik(c),A=Ek(c,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}Q(Z),V(Z,A)}function xe(){Q(Z),Q(le),Q(ce)}function Me(A){A.memoizedState!==null&&V(pe,A);var c=Z.current,p=Ek(c,A.type);c!==p&&(V(le,A),V(Z,p))}function ze(A){le.current===A&&(Q(Z),Q(le)),pe.current===A&&(Q(pe),Hm._currentValue=J)}var We=Object.prototype.hasOwnProperty,tt=n.unstable_scheduleCallback,dt=n.unstable_cancelCallback,_e=n.unstable_shouldYield,fe=n.unstable_requestPaint,ct=n.unstable_now,lt=n.unstable_getCurrentPriorityLevel,rt=n.unstable_ImmediatePriority,ot=n.unstable_UserBlockingPriority,ut=n.unstable_NormalPriority,At=n.unstable_LowPriority,St=n.unstable_IdlePriority,Rt=n.log,Ht=n.unstable_setDisableYieldValue,Pt=null,Qt=null;function en(A){if(typeof Rt=="function"&&Ht(A),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(Pt,A)}catch{}}var Bt=Math.clz32?Math.clz32:pr,an=Math.log,gt=Math.LN2;function pr(A){return A>>>=0,A===0?32:31-(an(A)/gt|0)|0}var ln=256,Pr=4194304;function bn(A){var c=A&42;if(c!==0)return c;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Gn(A,c,p){var y=A.pendingLanes;if(y===0)return 0;var B=0,E=A.suspendedLanes,G=A.pingedLanes;A=A.warmLanes;var ie=y&134217727;return ie!==0?(y=ie&~E,y!==0?B=bn(y):(G&=ie,G!==0?B=bn(G):p||(p=ie&~A,p!==0&&(B=bn(p))))):(ie=y&~E,ie!==0?B=bn(ie):G!==0?B=bn(G):p||(p=y&~A,p!==0&&(B=bn(p)))),B===0?0:c!==0&&c!==B&&(c&E)===0&&(E=B&-B,p=c&-c,E>=p||E===32&&(p&4194048)!==0)?c:B}function wa(A,c){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&c)===0}function _n(A,c){switch(A){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ql(){var A=ln;return ln<<=1,(ln&4194048)===0&&(ln=256),A}function gs(){var A=Pr;return Pr<<=1,(Pr&62914560)===0&&(Pr=4194304),A}function ja(A){for(var c=[],p=0;31>p;p++)c.push(A);return c}function Va(A,c){A.pendingLanes|=c,c!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function Bs(A,c,p,y,B,E){var G=A.pendingLanes;A.pendingLanes=p,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=p,A.entangledLanes&=p,A.errorRecoveryDisabledLanes&=p,A.shellSuspendCounter=0;var ie=A.entanglements,me=A.expirationTimes,Oe=A.hiddenUpdates;for(p=G&~p;0<p;){var Xe=31-Bt(p),nt=1<<Xe;ie[Xe]=0,me[Xe]=-1;var He=Oe[Xe];if(He!==null)for(Oe[Xe]=null,Xe=0;Xe<He.length;Xe++){var Pe=He[Xe];Pe!==null&&(Pe.lane&=-536870913)}p&=~nt}y!==0&&Jt(A,y,0),E!==0&&B===0&&A.tag!==0&&(A.suspendedLanes|=E&~(G&~c))}function Jt(A,c,p){A.pendingLanes|=c,A.suspendedLanes&=~c;var y=31-Bt(c);A.entangledLanes|=c,A.entanglements[y]=A.entanglements[y]|1073741824|p&4194090}function Rn(A,c){var p=A.entangledLanes|=c;for(A=A.entanglements;p;){var y=31-Bt(p),B=1<<y;B&c|A[y]&c&&(A[y]|=c),p&=~B}}function zo(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function tr(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function Ui(){var A=Y.p;return A!==0?A:(A=window.event,A===void 0?32:Kk(A.type))}function ao(A,c){var p=Y.p;try{return Y.p=A,c()}finally{Y.p=p}}var Lt=Math.random().toString(36).slice(2),Zn="__reactFiber$"+Lt,ys="__reactProps$"+Lt,nr="__reactContainer$"+Lt,Rs="__reactEvents$"+Lt,js="__reactListeners$"+Lt,Ga="__reactHandles$"+Lt,PA="__reactResources$"+Lt,Ka="__reactMarker$"+Lt;function Wa(A){delete A[Zn],delete A[ys],delete A[Rs],delete A[js],delete A[Ga]}function zr(A){var c=A[Zn];if(c)return c;for(var p=A.parentNode;p;){if(c=p[nr]||p[Zn]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(A=Dk(A);A!==null;){if(p=A[Zn])return p;A=Dk(A)}return c}A=p,p=A.parentNode}return null}function jr(A){if(A=A[Zn]||A[nr]){var c=A.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return A}return null}function ba(A){var c=A.tag;if(c===5||c===26||c===27||c===6)return A.stateNode;throw Error(s(33))}function Dr(A){var c=A[PA];return c||(c=A[PA]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Kn(A){A[Ka]=!0}var Ml=new Set,zA={};function oi(A,c){Ri(A,c),Ri(A+"Capture",c)}function Ri(A,c){for(zA[A]=c,A=0;A<c.length;A++)Ml.add(c[A])}var Pu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ch={},ed={};function nm(A){return We.call(ed,A)?!0:We.call(Ch,A)?!1:Pu.test(A)?ed[A]=!0:(Ch[A]=!0,!1)}function jo(A,c,p){if(nm(c))if(p===null)A.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":A.removeAttribute(c);return;case"boolean":var y=c.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){A.removeAttribute(c);return}}A.setAttribute(c,""+p)}}function jA(A,c,p){if(p===null)A.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(c);return}A.setAttribute(c,""+p)}}function $i(A,c,p,y){if(y===null)A.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(p);return}A.setAttributeNS(c,p,""+y)}}var VA,td;function Vo(A){if(VA===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);VA=c&&c[1]||"",td=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+VA+A+td}var Bh=!1;function Hl(A,c){if(!A||Bh)return"";Bh=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch(Pe){var He=Pe}Reflect.construct(A,[],nt)}else{try{nt.call()}catch(Pe){He=Pe}A.call(nt.prototype)}}else{try{throw Error()}catch(Pe){He=Pe}(nt=A())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch(Pe){if(Pe&&He&&typeof Pe.stack=="string")return[Pe.stack,He.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var B=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");B&&B.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=y.DetermineComponentFrameRoot(),G=E[0],ie=E[1];if(G&&ie){var me=G.split(`
`),Oe=ie.split(`
`);for(B=y=0;y<me.length&&!me[y].includes("DetermineComponentFrameRoot");)y++;for(;B<Oe.length&&!Oe[B].includes("DetermineComponentFrameRoot");)B++;if(y===me.length||B===Oe.length)for(y=me.length-1,B=Oe.length-1;1<=y&&0<=B&&me[y]!==Oe[B];)B--;for(;1<=y&&0<=B;y--,B--)if(me[y]!==Oe[B]){if(y!==1||B!==1)do if(y--,B--,0>B||me[y]!==Oe[B]){var Xe=`
`+me[y].replace(" at new "," at ");return A.displayName&&Xe.includes("<anonymous>")&&(Xe=Xe.replace("<anonymous>",A.displayName)),Xe}while(1<=y&&0<=B);break}}}finally{Bh=!1,Error.prepareStackTrace=p}return(p=A?A.displayName||A.name:"")?Vo(p):""}function sm(A){switch(A.tag){case 26:case 27:case 5:return Vo(A.type);case 16:return Vo("Lazy");case 13:return Vo("Suspense");case 19:return Vo("SuspenseList");case 0:case 15:return Hl(A.type,!1);case 11:return Hl(A.type.render,!1);case 1:return Hl(A.type,!0);case 31:return Vo("Activity");default:return""}}function Ss(A){try{var c="";do c+=sm(A),A=A.return;while(A);return c}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function ia(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Sh(A){var c=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function nd(A){var c=Sh(A)?"checked":"value",p=Object.getOwnPropertyDescriptor(A.constructor.prototype,c),y=""+A[c];if(!A.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var B=p.get,E=p.set;return Object.defineProperty(A,c,{configurable:!0,get:function(){return B.call(this)},set:function(G){y=""+G,E.call(this,G)}}),Object.defineProperty(A,c,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(G){y=""+G},stopTracking:function(){A._valueTracker=null,delete A[c]}}}}function Pl(A){A._valueTracker||(A._valueTracker=nd(A))}function sd(A){if(!A)return!1;var c=A._valueTracker;if(!c)return!0;var p=c.getValue(),y="";return A&&(y=Sh(A)?A.checked?"true":"false":A.value),A=y,A!==p?(c.setValue(A),!0):!1}function xa(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var zu=/[\n"\\]/g;function is(A){return A.replace(zu,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function GA(A,c,p,y,B,E,G,ie){A.name="",G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?A.type=G:A.removeAttribute("type"),c!=null?G==="number"?(c===0&&A.value===""||A.value!=c)&&(A.value=""+ia(c)):A.value!==""+ia(c)&&(A.value=""+ia(c)):G!=="submit"&&G!=="reset"||A.removeAttribute("value"),c!=null?Ih(A,G,ia(c)):p!=null?Ih(A,G,ia(p)):y!=null&&A.removeAttribute("value"),B==null&&E!=null&&(A.defaultChecked=!!E),B!=null&&(A.checked=B&&typeof B!="function"&&typeof B!="symbol"),ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?A.name=""+ia(ie):A.removeAttribute("name")}function Nh(A,c,p,y,B,E,G,ie){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(A.type=E),c!=null||p!=null){if(!(E!=="submit"&&E!=="reset"||c!=null))return;p=p!=null?""+ia(p):"",c=c!=null?""+ia(c):p,ie||c===A.value||(A.value=c),A.defaultValue=c}y=y??B,y=typeof y!="function"&&typeof y!="symbol"&&!!y,A.checked=ie?A.checked:!!y,A.defaultChecked=!!y,G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(A.name=G)}function Ih(A,c,p){c==="number"&&xa(A.ownerDocument)===A||A.defaultValue===""+p||(A.defaultValue=""+p)}function Go(A,c,p,y){if(A=A.options,c){c={};for(var B=0;B<p.length;B++)c["$"+p[B]]=!0;for(p=0;p<A.length;p++)B=c.hasOwnProperty("$"+A[p].value),A[p].selected!==B&&(A[p].selected=B),B&&y&&(A[p].defaultSelected=!0)}else{for(p=""+ia(p),c=null,B=0;B<A.length;B++){if(A[B].value===p){A[B].selected=!0,y&&(A[B].defaultSelected=!0);return}c!==null||A[B].disabled||(c=A[B])}c!==null&&(c.selected=!0)}}function rd(A,c,p){if(c!=null&&(c=""+ia(c),c!==A.value&&(A.value=c),p==null)){A.defaultValue!==c&&(A.defaultValue=c);return}A.defaultValue=p!=null?""+ia(p):""}function Eh(A,c,p,y){if(c==null){if(y!=null){if(p!=null)throw Error(s(92));if(re(y)){if(1<y.length)throw Error(s(93));y=y[0]}p=y}p==null&&(p=""),c=p}p=ia(c),A.defaultValue=p,y=A.textContent,y===p&&y!==""&&y!==null&&(A.value=y)}function zl(A,c){if(c){var p=A.firstChild;if(p&&p===A.lastChild&&p.nodeType===3){p.nodeValue=c;return}}A.textContent=c}var kh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ad(A,c,p){var y=c.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?A.setProperty(c,""):c==="float"?A.cssFloat="":A[c]="":y?A.setProperty(c,p):typeof p!="number"||p===0||kh.has(c)?c==="float"?A.cssFloat=p:A[c]=(""+p).trim():A[c]=p+"px"}function id(A,c,p){if(c!=null&&typeof c!="object")throw Error(s(62));if(A=A.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||c!=null&&c.hasOwnProperty(y)||(y.indexOf("--")===0?A.setProperty(y,""):y==="float"?A.cssFloat="":A[y]="");for(var B in c)y=c[B],c.hasOwnProperty(B)&&p[B]!==y&&ad(A,B,y)}else for(var E in c)c.hasOwnProperty(E)&&ad(A,E,c[E])}function Fh(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ko=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ju=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wo(A){return ju.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var Vu=null;function mr(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var jl=null,qo=null;function Xt(A){var c=jr(A);if(c&&(A=c.stateNode)){var p=A[ys]||null;e:switch(A=c.stateNode,c.type){case"input":if(GA(A,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),c=p.name,p.type==="radio"&&c!=null){for(p=A;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+is(""+c)+'"][type="radio"]'),c=0;c<p.length;c++){var y=p[c];if(y!==A&&y.form===A.form){var B=y[ys]||null;if(!B)throw Error(s(90));GA(y,B.value,B.defaultValue,B.defaultValue,B.checked,B.defaultChecked,B.type,B.name)}}for(c=0;c<p.length;c++)y=p[c],y.form===A.form&&sd(y)}break e;case"textarea":rd(A,p.value,p.defaultValue);break e;case"select":c=p.value,c!=null&&Go(A,!!p.multiple,c,!1)}}}var Th=!1;function od(A,c,p){if(Th)return A(c,p);Th=!0;try{var y=A(c);return y}finally{if(Th=!1,(jl!==null||qo!==null)&&(J1(),jl&&(c=jl,A=qo,qo=jl=null,Xt(c),A)))for(c=0;c<A.length;c++)Xt(A[c])}}function va(A,c){var p=A.stateNode;if(p===null)return null;var y=p[ys]||null;if(y===null)return null;p=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(A=A.type,y=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!y;break e;default:A=!1}if(A)return null;if(p&&typeof p!="function")throw Error(s(231,c,typeof p));return p}var li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gu=!1;if(li)try{var io={};Object.defineProperty(io,"passive",{get:function(){Gu=!0}}),window.addEventListener("test",io,io),window.removeEventListener("test",io,io)}catch{Gu=!1}var Ai=null,Dh=null,Ku=null;function ld(){if(Ku)return Ku;var A,c=Dh,p=c.length,y,B="value"in Ai?Ai.value:Ai.textContent,E=B.length;for(A=0;A<p&&c[A]===B[A];A++);var G=p-A;for(y=1;y<=G&&c[p-y]===B[E-y];y++);return Ku=B.slice(A,1<y?1-y:void 0)}function Vl(A){var c=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&c===13&&(A=13)):A=c,A===10&&(A=13),32<=A||A===13?A:0}function oo(){return!0}function Xo(){return!1}function Vr(A){function c(p,y,B,E,G){this._reactName=p,this._targetInst=B,this.type=y,this.nativeEvent=E,this.target=G,this.currentTarget=null;for(var ie in A)A.hasOwnProperty(ie)&&(p=A[ie],this[ie]=p?p(E):E[ie]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?oo:Xo,this.isPropagationStopped=Xo,this}return h(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=oo)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=oo)},persist:function(){},isPersistent:oo}),c}var qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gl=Vr(qa),lo=h({},qa,{view:0,detail:0}),Ad=Vr(lo),Wu,qu,Kl,Xa=h({},lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zu,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==Kl&&(Kl&&A.type==="mousemove"?(Wu=A.screenX-Kl.screenX,qu=A.screenY-Kl.screenY):qu=Wu=0,Kl=A),Wu)},movementY:function(A){return"movementY"in A?A.movementY:qu}}),Ao=Vr(Xa),rm=h({},Xa,{dataTransfer:0}),Wl=Vr(rm),_i=h({},lo,{relatedTarget:0}),KA=Vr(_i),WA=h({},qa,{animationName:0,elapsedTime:0,pseudoElement:0}),am=Vr(WA),Xu=h({},qa,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),im=Vr(Xu),Lh=h({},qa,{data:0}),Yu=Vr(Lh),ud={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rh(A){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(A):(A=Uh[A])?!!c[A]:!1}function Zu(){return Rh}var om=h({},lo,{key:function(A){if(A.key){var c=ud[A.key]||A.key;if(c!=="Unidentified")return c}return A.type==="keypress"?(A=Vl(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Ju[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zu,charCode:function(A){return A.type==="keypress"?Vl(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?Vl(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),ec=Vr(om),qA=h({},Xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tc=Vr(qA),ql=h({},lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zu}),$h=Vr(ql),k=h({},qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),X=Vr(k),de=h({},Xa,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),ve=Vr(de),Le=h({},qa,{newState:0,oldState:0}),Ke=Vr(Le),it=[9,13,27,32],yt=li&&"CompositionEvent"in window,Dt=null;li&&"documentMode"in document&&(Dt=document.documentMode);var nn=li&&"TextEvent"in window&&!Dt,Zt=li&&(!yt||Dt&&8<Dt&&11>=Dt),xn=" ",cs=!1;function ws(A,c){switch(A){case"keyup":return it.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $s(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var _s=!1;function gr(A,c){switch(A){case"compositionend":return $s(c);case"keypress":return c.which!==32?null:(cs=!0,xn);case"textInput":return A=c.data,A===xn&&cs?null:A;default:return null}}function Oi(A,c){if(_s)return A==="compositionend"||!yt&&ws(A,c)?(A=ld(),Ku=Dh=Ai=null,_s=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Zt&&c.locale!=="ko"?null:c.data;default:return null}}var Ya={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qi(A){var c=A&&A.nodeName&&A.nodeName.toLowerCase();return c==="input"?!!Ya[A.type]:c==="textarea"}function _h(A,c,p,y){jl?qo?qo.push(y):qo=[y]:jl=y,c=ry(c,"onChange"),0<c.length&&(p=new Gl("onChange","change",null,p,y),A.push({event:p,listeners:c}))}var Yo=null,Jo=null;function nc(A){vk(A,0)}function Xl(A){var c=ba(A);if(sd(c))return A}function sc(A,c){if(A==="change")return c}var XA=!1;if(li){var sr;if(li){var Yl="oninput"in document;if(!Yl){var YA=document.createElement("div");YA.setAttribute("oninput","return;"),Yl=typeof YA.oninput=="function"}sr=Yl}else sr=!1;XA=sr&&(!document.documentMode||9<document.documentMode)}function JA(){Yo&&(Yo.detachEvent("onpropertychange",rc),Jo=Yo=null)}function rc(A){if(A.propertyName==="value"&&Xl(Jo)){var c=[];_h(c,Jo,A,mr(A)),od(nc,c)}}function Ca(A,c,p){A==="focusin"?(JA(),Yo=c,Jo=p,Yo.attachEvent("onpropertychange",rc)):A==="focusout"&&JA()}function lm(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return Xl(Jo)}function Oh(A,c){if(A==="click")return Xl(c)}function cd(A,c){if(A==="input"||A==="change")return Xl(c)}function ui(A,c){return A===c&&(A!==0||1/A===1/c)||A!==A&&c!==c}var yr=typeof Object.is=="function"?Object.is:ui;function Jl(A,c){if(yr(A,c))return!0;if(typeof A!="object"||A===null||typeof c!="object"||c===null)return!1;var p=Object.keys(A),y=Object.keys(c);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var B=p[y];if(!We.call(c,B)||!yr(A[B],c[B]))return!1}return!0}function Qh(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function Zo(A,c){var p=Qh(A);A=0;for(var y;p;){if(p.nodeType===3){if(y=A+p.textContent.length,A<=c&&y>=c)return{node:p,offset:c-A};A=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Qh(p)}}function Zl(A,c){return A&&c?A===c?!0:A&&A.nodeType===3?!1:c&&c.nodeType===3?Zl(A,c.parentNode):"contains"in A?A.contains(c):A.compareDocumentPosition?!!(A.compareDocumentPosition(c)&16):!1:!1}function oa(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var c=xa(A.document);c instanceof A.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)A=c.contentWindow;else break;c=xa(A.document)}return c}function Lr(A){var c=A&&A.nodeName&&A.nodeName.toLowerCase();return c&&(c==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||c==="textarea"||A.contentEditable==="true")}var eA=li&&"documentMode"in document&&11>=document.documentMode,Ba=null,Mi=null,uo=null,Hi=!1;function Ns(A,c,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Hi||Ba==null||Ba!==xa(y)||(y=Ba,"selectionStart"in y&&Lr(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),uo&&Jl(uo,y)||(uo=y,y=ry(Mi,"onSelect"),0<y.length&&(c=new Gl("onSelect","select",null,c,p),A.push({event:c,listeners:y}),c.target=Ba)))}function Pi(A,c){var p={};return p[A.toLowerCase()]=c.toLowerCase(),p["Webkit"+A]="webkit"+c,p["Moz"+A]="moz"+c,p}var Vs={animationend:Pi("Animation","AnimationEnd"),animationiteration:Pi("Animation","AnimationIteration"),animationstart:Pi("Animation","AnimationStart"),transitionrun:Pi("Transition","TransitionRun"),transitionstart:Pi("Transition","TransitionStart"),transitioncancel:Pi("Transition","TransitionCancel"),transitionend:Pi("Transition","TransitionEnd")},Sa={},ZA={};li&&(ZA=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function co(A){if(Sa[A])return Sa[A];if(!Vs[A])return A;var c=Vs[A],p;for(p in c)if(c.hasOwnProperty(p)&&p in ZA)return Sa[A]=c[p];return A}var ac=co("animationend"),tA=co("animationiteration"),nA=co("animationstart"),sA=co("transitionrun"),eu=co("transitionstart"),ic=co("transitioncancel"),rA=co("transitionend"),el=new Map,tu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tu.push("scrollEnd");function Is(A,c){el.set(A,c),oi(c,[A])}var Ja=new WeakMap;function mn(A,c){if(typeof A=="object"&&A!==null){var p=Ja.get(A);return p!==void 0?p:(c={value:A,source:c,stack:Ss(c)},Ja.set(A,c),c)}return{value:A,source:c,stack:Ss(c)}}var gn=[],es=0,Os=0;function ci(){for(var A=es,c=Os=es=0;c<A;){var p=gn[c];gn[c++]=null;var y=gn[c];gn[c++]=null;var B=gn[c];gn[c++]=null;var E=gn[c];if(gn[c++]=null,y!==null&&B!==null){var G=y.pending;G===null?B.next=B:(B.next=G.next,G.next=B),y.pending=B}E!==0&&hd(p,B,E)}}function aA(A,c,p,y){gn[es++]=A,gn[es++]=c,gn[es++]=p,gn[es++]=y,Os|=y,A.lanes|=y,A=A.alternate,A!==null&&(A.lanes|=y)}function iA(A,c,p,y){return aA(A,c,p,y),nu(A)}function tl(A,c){return aA(A,null,null,c),nu(A)}function hd(A,c,p){A.lanes|=p;var y=A.alternate;y!==null&&(y.lanes|=p);for(var B=!1,E=A.return;E!==null;)E.childLanes|=p,y=E.alternate,y!==null&&(y.childLanes|=p),E.tag===22&&(A=E.stateNode,A===null||A._visibility&1||(B=!0)),A=E,E=E.return;return A.tag===3?(E=A.stateNode,B&&c!==null&&(B=31-Bt(p),A=E.hiddenUpdates,y=A[B],y===null?A[B]=[c]:y.push(c),c.lane=p|536870912),E):null}function nu(A){if(50<Lm)throw Lm=0,ov=null,Error(s(185));for(var c=A.return;c!==null;)A=c,c=A.return;return A.tag===3?A.stateNode:null}var wr={};function hi(A,c,p,y){this.tag=A,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(A,c,p,y){return new hi(A,c,p,y)}function oc(A){return A=A.prototype,!(!A||!A.isReactComponent)}function ho(A,c){var p=A.alternate;return p===null?(p=Gr(A.tag,c,A.key,A.mode),p.elementType=A.elementType,p.type=A.type,p.stateNode=A.stateNode,p.alternate=A,A.alternate=p):(p.pendingProps=c,p.type=A.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=A.flags&65011712,p.childLanes=A.childLanes,p.lanes=A.lanes,p.child=A.child,p.memoizedProps=A.memoizedProps,p.memoizedState=A.memoizedState,p.updateQueue=A.updateQueue,c=A.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=A.sibling,p.index=A.index,p.ref=A.ref,p.refCleanup=A.refCleanup,p}function Mh(A,c){A.flags&=65011714;var p=A.alternate;return p===null?(A.childLanes=0,A.lanes=c,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=p.childLanes,A.lanes=p.lanes,A.child=p.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=p.memoizedProps,A.memoizedState=p.memoizedState,A.updateQueue=p.updateQueue,A.type=p.type,c=p.dependencies,A.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),A}function su(A,c,p,y,B,E){var G=0;if(y=A,typeof A=="function")oc(A)&&(G=1);else if(typeof A=="string")G=bM(A,p,Z.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case O:return A=Gr(31,p,c,B),A.elementType=O,A.lanes=E,A;case g:return nl(p.children,B,E,c);case w:G=8,B|=24;break;case v:return A=Gr(12,p,c,B|2),A.elementType=v,A.lanes=E,A;case L:return A=Gr(13,p,c,B),A.elementType=L,A.lanes=E,A;case $:return A=Gr(19,p,c,B),A.elementType=$,A.lanes=E,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case b:case N:G=10;break e;case C:G=9;break e;case I:G=11;break e;case H:G=14;break e;case U:G=16,y=null;break e}G=29,p=Error(s(130,A===null?"null":typeof A,"")),y=null}return c=Gr(G,p,c,B),c.elementType=A,c.type=y,c.lanes=E,c}function nl(A,c,p,y){return A=Gr(7,A,y,c),A.lanes=p,A}function fd(A,c,p){return A=Gr(6,A,null,c),A.lanes=p,A}function Hh(A,c,p){return c=Gr(4,A.children!==null?A.children:[],A.key,c),c.lanes=p,c.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},c}var oA=[],sl=0,lc=null,dd=0,fi=[],Za=0,ru=null,rl=1,al="";function au(A,c){oA[sl++]=dd,oA[sl++]=lc,lc=A,dd=c}function v1(A,c,p){fi[Za++]=rl,fi[Za++]=al,fi[Za++]=ru,ru=A;var y=rl;A=al;var B=32-Bt(y)-1;y&=~(1<<B),p+=1;var E=32-Bt(c)+B;if(30<E){var G=B-B%5;E=(y&(1<<G)-1).toString(32),y>>=G,B-=G,rl=1<<32-Bt(c)+B|p<<B|y,al=E+A}else rl=1<<E|p<<B|y,al=A}function Ph(A){A.return!==null&&(au(A,1),v1(A,1,0))}function zh(A){for(;A===lc;)lc=oA[--sl],oA[sl]=null,dd=oA[--sl],oA[sl]=null;for(;A===ru;)ru=fi[--Za],fi[Za]=null,al=fi[--Za],fi[Za]=null,rl=fi[--Za],fi[Za]=null}var rr=null,Es=null,$n=!1,lA=null,fo=!1,Am=Error(s(519));function iu(A){var c=Error(s(418,""));throw Ac(mn(c,A)),Am}function C1(A){var c=A.stateNode,p=A.type,y=A.memoizedProps;switch(c[Zn]=A,c[ys]=y,p){case"dialog":Cn("cancel",c),Cn("close",c);break;case"iframe":case"object":case"embed":Cn("load",c);break;case"video":case"audio":for(p=0;p<Rm.length;p++)Cn(Rm[p],c);break;case"source":Cn("error",c);break;case"img":case"image":case"link":Cn("error",c),Cn("load",c);break;case"details":Cn("toggle",c);break;case"input":Cn("invalid",c),Nh(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Pl(c);break;case"select":Cn("invalid",c);break;case"textarea":Cn("invalid",c),Eh(c,y.value,y.defaultValue,y.children),Pl(c)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||c.textContent===""+p||y.suppressHydrationWarning===!0||Nk(c.textContent,p)?(y.popover!=null&&(Cn("beforetoggle",c),Cn("toggle",c)),y.onScroll!=null&&Cn("scroll",c),y.onScrollEnd!=null&&Cn("scrollend",c),y.onClick!=null&&(c.onclick=ay),c=!0):c=!1,c||iu(A)}function il(A){for(rr=A.return;rr;)switch(rr.tag){case 5:case 13:fo=!1;return;case 27:case 3:fo=!0;return;default:rr=rr.return}}function la(A){if(A!==rr)return!1;if(!$n)return il(A),$n=!0,!1;var c=A.tag,p;if((p=c!==3&&c!==27)&&((p=c===5)&&(p=A.type,p=!(p!=="form"&&p!=="button")||Cv(A.type,A.memoizedProps)),p=!p),p&&Es&&iu(A),il(A),c===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(s(317));e:{for(A=A.nextSibling,c=0;A;){if(A.nodeType===8)if(p=A.data,p==="/$"){if(c===0){Es=dl(A.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++;A=A.nextSibling}Es=null}}else c===27?(c=Es,Nc(A.type)?(A=Iv,Iv=null,Es=A):Es=c):Es=rr?dl(A.stateNode.nextSibling):null;return!0}function ei(){Es=rr=null,$n=!1}function B1(){var A=lA;return A!==null&&(mi===null?mi=A:mi.push.apply(mi,A),lA=null),A}function Ac(A){lA===null?lA=[A]:lA.push(A)}var po=ue(null),br=null,ol=null;function AA(A,c,p){V(po,c._currentValue),c._currentValue=p}function mo(A){A._currentValue=po.current,Q(po)}function pd(A,c,p){for(;A!==null;){var y=A.alternate;if((A.childLanes&c)!==c?(A.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),A===p)break;A=A.return}}function md(A,c,p,y){var B=A.child;for(B!==null&&(B.return=A);B!==null;){var E=B.dependencies;if(E!==null){var G=B.child;E=E.firstContext;e:for(;E!==null;){var ie=E;E=B;for(var me=0;me<c.length;me++)if(ie.context===c[me]){E.lanes|=p,ie=E.alternate,ie!==null&&(ie.lanes|=p),pd(E.return,p,A),y||(G=null);break e}E=ie.next}}else if(B.tag===18){if(G=B.return,G===null)throw Error(s(341));G.lanes|=p,E=G.alternate,E!==null&&(E.lanes|=p),pd(G,p,A),G=null}else G=B.child;if(G!==null)G.return=B;else for(G=B;G!==null;){if(G===A){G=null;break}if(B=G.sibling,B!==null){B.return=G.return,G=B;break}G=G.return}B=G}}function uc(A,c,p,y){A=null;for(var B=c,E=!1;B!==null;){if(!E){if((B.flags&524288)!==0)E=!0;else if((B.flags&262144)!==0)break}if(B.tag===10){var G=B.alternate;if(G===null)throw Error(s(387));if(G=G.memoizedProps,G!==null){var ie=B.type;yr(B.pendingProps.value,G.value)||(A!==null?A.push(ie):A=[ie])}}else if(B===pe.current){if(G=B.alternate,G===null)throw Error(s(387));G.memoizedState.memoizedState!==B.memoizedState.memoizedState&&(A!==null?A.push(Hm):A=[Hm])}B=B.return}A!==null&&md(c,A,p,y),c.flags|=262144}function gd(A){for(A=A.firstContext;A!==null;){if(!yr(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function go(A){br=A,ol=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function ar(A){return yd(br,A)}function uA(A,c){return br===null&&go(A),yd(A,c)}function yd(A,c){var p=c._currentValue;if(c={context:c,memoizedValue:p,next:null},ol===null){if(A===null)throw Error(s(308));ol=c,A.dependencies={lanes:0,firstContext:c},A.flags|=524288}else ol=ol.next=c;return p}var Dx=typeof AbortController<"u"?AbortController:function(){var A=[],c=this.signal={aborted:!1,addEventListener:function(p,y){A.push(y)}};this.abort=function(){c.aborted=!0,A.forEach(function(p){return p()})}},S1=n.unstable_scheduleCallback,Lx=n.unstable_NormalPriority,ir={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function um(){return{controller:new Dx,data:new Map,refCount:0}}function jh(A){A.refCount--,A.refCount===0&&S1(Lx,function(){A.controller.abort()})}var Vh=null,cm=0,ou=0,ll=null;function Ux(A,c){if(Vh===null){var p=Vh=[];cm=0,ou=dv(),ll={status:"pending",value:void 0,then:function(y){p.push(y)}}}return cm++,c.then(N1,N1),c}function N1(){if(--cm===0&&Vh!==null){ll!==null&&(ll.status="fulfilled");var A=Vh;Vh=null,ou=0,ll=null;for(var c=0;c<A.length;c++)(0,A[c])()}}function I1(A,c){var p=[],y={status:"pending",value:null,reason:null,then:function(B){p.push(B)}};return A.then(function(){y.status="fulfilled",y.value=c;for(var B=0;B<p.length;B++)(0,p[B])(c)},function(B){for(y.status="rejected",y.reason=B,B=0;B<p.length;B++)(0,p[B])(void 0)}),y}var x=P.S;P.S=function(A,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&Ux(A,c),x!==null&&x(A,c)};var S=ue(null);function D(){var A=S.current;return A!==null?A:fs.pooledCache}function _(A,c){c===null?V(S,S.current):V(S,c.pool)}function q(){var A=D();return A===null?null:{parent:ir._currentValue,pool:A}}var ee=Error(s(460)),ne=Error(s(474)),ae=Error(s(542)),Ae={then:function(){}};function he(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Ce(){}function $e(A,c,p){switch(p=A[p],p===void 0?A.push(c):p!==c&&(c.then(Ce,Ce),c=p),c.status){case"fulfilled":return c.value;case"rejected":throw A=c.reason,Ze(A),A;default:if(typeof c.status=="string")c.then(Ce,Ce);else{if(A=fs,A!==null&&100<A.shellSuspendCounter)throw Error(s(482));A=c,A.status="pending",A.then(function(y){if(c.status==="pending"){var B=c;B.status="fulfilled",B.value=y}},function(y){if(c.status==="pending"){var B=c;B.status="rejected",B.reason=y}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw A=c.reason,Ze(A),A}throw Ue=c,ee}}var Ue=null;function Fe(){if(Ue===null)throw Error(s(459));var A=Ue;return Ue=null,A}function Ze(A){if(A===ee||A===ae)throw Error(s(483))}var Ve=!1;function Se(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ke(A,c){A=A.updateQueue,c.updateQueue===A&&(c.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function qe(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function et(A,c,p){var y=A.updateQueue;if(y===null)return null;if(y=y.shared,(qn&2)!==0){var B=y.pending;return B===null?c.next=c:(c.next=B.next,B.next=c),y.pending=c,c=nu(A),hd(A,null,p),c}return aA(A,y,c,p),nu(A)}function Ye(A,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194048)!==0)){var y=c.lanes;y&=A.pendingLanes,p|=y,c.lanes=p,Rn(A,p)}}function wt(A,c){var p=A.updateQueue,y=A.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var B=null,E=null;if(p=p.firstBaseUpdate,p!==null){do{var G={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};E===null?B=E=G:E=E.next=G,p=p.next}while(p!==null);E===null?B=E=c:E=E.next=c}else B=E=c;p={baseState:y.baseState,firstBaseUpdate:B,lastBaseUpdate:E,shared:y.shared,callbacks:y.callbacks},A.updateQueue=p;return}A=p.lastBaseUpdate,A===null?p.firstBaseUpdate=c:A.next=c,p.lastBaseUpdate=c}var ht=!1;function $t(){if(ht){var A=ll;if(A!==null)throw A}}function ft(A,c,p,y){ht=!1;var B=A.updateQueue;Ve=!1;var E=B.firstBaseUpdate,G=B.lastBaseUpdate,ie=B.shared.pending;if(ie!==null){B.shared.pending=null;var me=ie,Oe=me.next;me.next=null,G===null?E=Oe:G.next=Oe,G=me;var Xe=A.alternate;Xe!==null&&(Xe=Xe.updateQueue,ie=Xe.lastBaseUpdate,ie!==G&&(ie===null?Xe.firstBaseUpdate=Oe:ie.next=Oe,Xe.lastBaseUpdate=me))}if(E!==null){var nt=B.baseState;G=0,Xe=Oe=me=null,ie=E;do{var He=ie.lane&-536870913,Pe=He!==ie.lane;if(Pe?(Ln&He)===He:(y&He)===He){He!==0&&He===ou&&(ht=!0),Xe!==null&&(Xe=Xe.next={lane:0,tag:ie.tag,payload:ie.payload,callback:null,next:null});e:{var Yt=A,jt=ie;He=c;var ns=p;switch(jt.tag){case 1:if(Yt=jt.payload,typeof Yt=="function"){nt=Yt.call(ns,nt,He);break e}nt=Yt;break e;case 3:Yt.flags=Yt.flags&-65537|128;case 0:if(Yt=jt.payload,He=typeof Yt=="function"?Yt.call(ns,nt,He):Yt,He==null)break e;nt=h({},nt,He);break e;case 2:Ve=!0}}He=ie.callback,He!==null&&(A.flags|=64,Pe&&(A.flags|=8192),Pe=B.callbacks,Pe===null?B.callbacks=[He]:Pe.push(He))}else Pe={lane:He,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},Xe===null?(Oe=Xe=Pe,me=nt):Xe=Xe.next=Pe,G|=He;if(ie=ie.next,ie===null){if(ie=B.shared.pending,ie===null)break;Pe=ie,ie=Pe.next,Pe.next=null,B.lastBaseUpdate=Pe,B.shared.pending=null}}while(!0);Xe===null&&(me=nt),B.baseState=me,B.firstBaseUpdate=Oe,B.lastBaseUpdate=Xe,E===null&&(B.shared.lanes=0),vc|=G,A.lanes=G,A.memoizedState=nt}}function Tn(A,c){if(typeof A!="function")throw Error(s(191,A));A.call(c)}function On(A,c){var p=A.callbacks;if(p!==null)for(A.callbacks=null,A=0;A<p.length;A++)Tn(p[A],c)}var fn=ue(null),cn=ue(0);function Pn(A,c){A=gu,V(cn,A),V(fn,c),gu=A|c.baseLanes}function Qn(){V(cn,gu),V(fn,fn.current)}function tn(){gu=cn.current,Q(fn),Q(cn)}var Wn=0,Mt=null,Wt=null,kn=null,Dn=!1,xr=!1,or=!1,Qs=0,Ms=0,Gs=null,di=0;function Mn(){throw Error(s(321))}function Ks(A,c){if(c===null)return!1;for(var p=0;p<c.length&&p<A.length;p++)if(!yr(A[p],c[p]))return!1;return!0}function zi(A,c,p,y,B,E){return Wn=E,Mt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,P.H=A===null||A.memoizedState===null?iE:oE,or=!1,E=p(y,B),or=!1,xr&&(E=lu(c,p,y,B)),cA(A),E}function cA(A){P.H=Q1;var c=Wt!==null&&Wt.next!==null;if(Wn=0,kn=Wt=Mt=null,Dn=!1,Ms=0,Gs=null,c)throw Error(s(300));A===null||Kr||(A=A.dependencies,A!==null&&gd(A)&&(Kr=!0))}function lu(A,c,p,y){Mt=A;var B=0;do{if(xr&&(Gs=null),Ms=0,xr=!1,25<=B)throw Error(s(301));if(B+=1,kn=Wt=null,A.updateQueue!=null){var E=A.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}P.H=T6,E=c(p,y)}while(xr);return E}function hA(){var A=P.H,c=A.useState()[0];return c=typeof c.then=="function"?fA(c):c,A=A.useState()[0],(Wt!==null?Wt.memoizedState:null)!==A&&(Mt.flags|=1024),c}function hs(){var A=Qs!==0;return Qs=0,A}function Gh(A,c,p){c.updateQueue=A.updateQueue,c.flags&=-2053,A.lanes&=~p}function wd(A){if(Dn){for(A=A.memoizedState;A!==null;){var c=A.queue;c!==null&&(c.pending=null),A=A.next}Dn=!1}Wn=0,kn=Wt=Mt=null,xr=!1,Ms=Qs=0,Gs=null}function Aa(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?Mt.memoizedState=kn=A:kn=kn.next=A,kn}function bs(){if(Wt===null){var A=Mt.alternate;A=A!==null?A.memoizedState:null}else A=Wt.next;var c=kn===null?Mt.memoizedState:kn.next;if(c!==null)kn=c,Wt=A;else{if(A===null)throw Mt.alternate===null?Error(s(467)):Error(s(310));Wt=A,A={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},kn===null?Mt.memoizedState=kn=A:kn=kn.next=A}return kn}function Au(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fA(A){var c=Ms;return Ms+=1,Gs===null&&(Gs=[]),A=$e(Gs,A,c),c=Mt,(kn===null?c.memoizedState:kn.next)===null&&(c=c.alternate,P.H=c===null||c.memoizedState===null?iE:oE),A}function Na(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return fA(A);if(A.$$typeof===N)return ar(A)}throw Error(s(438,String(A)))}function dA(A){var c=null,p=Mt.updateQueue;if(p!==null&&(c=p.memoCache),c==null){var y=Mt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(c={data:y.data.map(function(B){return B.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),p===null&&(p=Au(),Mt.updateQueue=p),p.memoCache=c,p=c.data[c.index],p===void 0)for(p=c.data[c.index]=Array(A),y=0;y<A;y++)p[y]=z;return c.index++,p}function Ia(A,c){return typeof c=="function"?c(A):c}function Kh(A){var c=bs();return cc(c,Wt,A)}function cc(A,c,p){var y=A.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=p;var B=A.baseQueue,E=y.pending;if(E!==null){if(B!==null){var G=B.next;B.next=E.next,E.next=G}c.baseQueue=B=E,y.pending=null}if(E=A.baseState,B===null)A.memoizedState=E;else{c=B.next;var ie=G=null,me=null,Oe=c,Xe=!1;do{var nt=Oe.lane&-536870913;if(nt!==Oe.lane?(Ln&nt)===nt:(Wn&nt)===nt){var He=Oe.revertLane;if(He===0)me!==null&&(me=me.next={lane:0,revertLane:0,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),nt===ou&&(Xe=!0);else if((Wn&He)===He){Oe=Oe.next,He===ou&&(Xe=!0);continue}else nt={lane:0,revertLane:Oe.revertLane,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},me===null?(ie=me=nt,G=E):me=me.next=nt,Mt.lanes|=He,vc|=He;nt=Oe.action,or&&p(E,nt),E=Oe.hasEagerState?Oe.eagerState:p(E,nt)}else He={lane:nt,revertLane:Oe.revertLane,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},me===null?(ie=me=He,G=E):me=me.next=He,Mt.lanes|=nt,vc|=nt;Oe=Oe.next}while(Oe!==null&&Oe!==c);if(me===null?G=E:me.next=ie,!yr(E,A.memoizedState)&&(Kr=!0,Xe&&(p=ll,p!==null)))throw p;A.memoizedState=E,A.baseState=G,A.baseQueue=me,y.lastRenderedState=E}return B===null&&(y.lanes=0),[A.memoizedState,y.dispatch]}function bd(A){var c=bs(),p=c.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=A;var y=p.dispatch,B=p.pending,E=c.memoizedState;if(B!==null){p.pending=null;var G=B=B.next;do E=A(E,G.action),G=G.next;while(G!==B);yr(E,c.memoizedState)||(Kr=!0),c.memoizedState=E,c.baseQueue===null&&(c.baseState=E),p.lastRenderedState=E}return[E,y]}function Wh(A,c,p){var y=Mt,B=bs(),E=$n;if(E){if(p===void 0)throw Error(s(407));p=p()}else p=c();var G=!yr((Wt||B).memoizedState,p);G&&(B.memoizedState=p,Kr=!0),B=B.queue;var ie=hc.bind(null,y,B,A);if(pc(2048,8,ie,[A]),B.getSnapshot!==c||G||kn!==null&&kn.memoizedState.tag&1){if(y.flags|=2048,ul(9,Jh(),qh.bind(null,y,B,p,c),null),fs===null)throw Error(s(349));E||(Wn&124)!==0||xd(y,c,p)}return p}function xd(A,c,p){A.flags|=16384,A={getSnapshot:c,value:p},c=Mt.updateQueue,c===null?(c=Au(),Mt.updateQueue=c,c.stores=[A]):(p=c.stores,p===null?c.stores=[A]:p.push(A))}function qh(A,c,p,y){c.value=p,c.getSnapshot=y,E1(c)&&k1(A)}function hc(A,c,p){return p(function(){E1(c)&&k1(A)})}function E1(A){var c=A.getSnapshot;A=A.value;try{var p=c();return!yr(A,p)}catch{return!0}}function k1(A){var c=tl(A,2);c!==null&&qi(c,A,2)}function Xh(A){var c=Aa();if(typeof A=="function"){var p=A;if(A=p(),or){en(!0);try{p()}finally{en(!1)}}}return c.memoizedState=c.baseState=A,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:A},c}function Al(A,c,p,y){return A.baseState=p,cc(A,Wt,typeof y=="function"?y:Ia)}function Rx(A,c,p,y,B){if(O1(A))throw Error(s(485));if(A=c.action,A!==null){var E={payload:B,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(G){E.listeners.push(G)}};P.T!==null?p(!0):E.isTransition=!1,y(E),p=c.pending,p===null?(E.next=c.pending=E,F1(c,E)):(E.next=p.next,c.pending=p.next=E)}}function F1(A,c){var p=c.action,y=c.payload,B=A.state;if(c.isTransition){var E=P.T,G={};P.T=G;try{var ie=p(B,y),me=P.S;me!==null&&me(G,ie),T1(A,c,ie)}catch(Oe){fc(A,c,Oe)}finally{P.T=E}}else try{E=p(B,y),T1(A,c,E)}catch(Oe){fc(A,c,Oe)}}function T1(A,c,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){hm(A,c,y)},function(y){return fc(A,c,y)}):hm(A,c,p)}function hm(A,c,p){c.status="fulfilled",c.value=p,fm(c),A.state=p,c=A.pending,c!==null&&(p=c.next,p===c?A.pending=null:(p=p.next,c.next=p,F1(A,p)))}function fc(A,c,p){var y=A.pending;if(A.pending=null,y!==null){y=y.next;do c.status="rejected",c.reason=p,fm(c),c=c.next;while(c!==y)}A.action=null}function fm(A){A=A.listeners;for(var c=0;c<A.length;c++)(0,A[c])()}function dm(A,c){return c}function Yh(A,c){if($n){var p=fs.formState;if(p!==null){e:{var y=Mt;if($n){if(Es){t:{for(var B=Es,E=fo;B.nodeType!==8;){if(!E){B=null;break t}if(B=dl(B.nextSibling),B===null){B=null;break t}}E=B.data,B=E==="F!"||E==="F"?B:null}if(B){Es=dl(B.nextSibling),y=B.data==="F!";break e}}iu(y)}y=!1}y&&(c=p[0])}}return p=Aa(),p.memoizedState=p.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dm,lastRenderedState:c},p.queue=y,p=sE.bind(null,Mt,y),y.dispatch=p,y=Xh(!1),E=$x.bind(null,Mt,!1,y.queue),y=Aa(),B={state:c,dispatch:null,action:A,pending:null},y.queue=B,p=Rx.bind(null,Mt,B,E,p),B.dispatch=p,y.memoizedState=A,[c,p,!1]}function vd(A){var c=bs();return dc(c,Wt,A)}function dc(A,c,p){if(c=cc(A,c,dm)[0],A=Kh(Ia)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var y=fA(c)}catch(G){throw G===ee?ae:G}else y=c;c=bs();var B=c.queue,E=B.dispatch;return p!==c.memoizedState&&(Mt.flags|=2048,ul(9,Jh(),D1.bind(null,B,p),null)),[y,E,A]}function D1(A,c){A.action=c}function L1(A){var c=bs(),p=Wt;if(p!==null)return dc(c,p,A);bs(),c=c.memoizedState,p=bs();var y=p.queue.dispatch;return p.memoizedState=A,[c,y,!1]}function ul(A,c,p,y){return A={tag:A,create:p,deps:y,inst:c,next:null},c=Mt.updateQueue,c===null&&(c=Au(),Mt.updateQueue=c),p=c.lastEffect,p===null?c.lastEffect=A.next=A:(y=p.next,p.next=A,A.next=y,c.lastEffect=A),A}function Jh(){return{destroy:void 0,resource:void 0}}function Cd(){return bs().memoizedState}function ji(A,c,p,y){var B=Aa();y=y===void 0?null:y,Mt.flags|=A,B.memoizedState=ul(1|c,Jh(),p,y)}function pc(A,c,p,y){var B=bs();y=y===void 0?null:y;var E=B.memoizedState.inst;Wt!==null&&y!==null&&Ks(y,Wt.memoizedState.deps)?B.memoizedState=ul(c,E,p,y):(Mt.flags|=A,B.memoizedState=ul(1|c,E,p,y))}function pm(A,c){ji(8390656,8,A,c)}function U1(A,c){pc(2048,8,A,c)}function mm(A,c){return pc(4,2,A,c)}function uu(A,c){return pc(4,4,A,c)}function R1(A,c){if(typeof c=="function"){A=A();var p=c(A);return function(){typeof p=="function"?p():c(null)}}if(c!=null)return A=A(),c.current=A,function(){c.current=null}}function gm(A,c,p){p=p!=null?p.concat([A]):null,pc(4,4,R1.bind(null,c,A),p)}function ym(){}function wm(A,c){var p=bs();c=c===void 0?null:c;var y=p.memoizedState;return c!==null&&Ks(c,y[1])?y[0]:(p.memoizedState=[A,c],A)}function $1(A,c){var p=bs();c=c===void 0?null:c;var y=p.memoizedState;if(c!==null&&Ks(c,y[1]))return y[0];if(y=A(),or){en(!0);try{A()}finally{en(!1)}}return p.memoizedState=[y,c],y}function cu(A,c,p){return p===void 0||(Wn&1073741824)!==0?A.memoizedState=c:(A.memoizedState=p,A=ZE(),Mt.lanes|=A,vc|=A,p)}function Bd(A,c,p,y){return yr(p,c)?p:fn.current!==null?(A=cu(A,p,y),yr(A,c)||(Kr=!0),A):(Wn&42)===0?(Kr=!0,A.memoizedState=p):(A=ZE(),Mt.lanes|=A,vc|=A,c)}function Zh(A,c,p,y,B){var E=Y.p;Y.p=E!==0&&8>E?E:8;var G=P.T,ie={};P.T=ie,$x(A,!1,c,p);try{var me=B(),Oe=P.S;if(Oe!==null&&Oe(ie,me),me!==null&&typeof me=="object"&&typeof me.then=="function"){var Xe=I1(me,y);Cm(A,c,Xe,Wi(A))}else Cm(A,c,y,Wi(A))}catch(nt){Cm(A,c,{then:function(){},status:"rejected",reason:nt},Wi())}finally{Y.p=E,P.T=G}}function cl(){}function yo(A,c,p,y){if(A.tag!==5)throw Error(s(476));var B=hl(A).queue;Zh(A,B,c,J,p===null?cl:function(){return ef(A),p(y)})}function hl(A){var c=A.memoizedState;if(c!==null)return c;c={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:J},next:null};var p={};return c.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:p},next:null},A.memoizedState=c,A=A.alternate,A!==null&&(A.memoizedState=c),c}function ef(A){var c=hl(A).next.queue;Cm(A,c,{},Wi())}function tf(){return ar(Hm)}function bm(){return bs().memoizedState}function _1(){return bs().memoizedState}function xm(A){for(var c=A.return;c!==null;){switch(c.tag){case 24:case 3:var p=Wi();A=qe(p);var y=et(c,A,p);y!==null&&(qi(y,c,p),Ye(y,c,p)),c={cache:um()},A.payload=c;return}c=c.return}}function vm(A,c,p){var y=Wi();p={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},O1(A)?rE(c,p):(p=iA(A,c,p,y),p!==null&&(qi(p,A,y),aE(p,c,y)))}function sE(A,c,p){var y=Wi();Cm(A,c,p,y)}function Cm(A,c,p,y){var B={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(O1(A))rE(c,B);else{var E=A.alternate;if(A.lanes===0&&(E===null||E.lanes===0)&&(E=c.lastRenderedReducer,E!==null))try{var G=c.lastRenderedState,ie=E(G,p);if(B.hasEagerState=!0,B.eagerState=ie,yr(ie,G))return aA(A,c,B,0),fs===null&&ci(),!1}catch{}finally{}if(p=iA(A,c,B,y),p!==null)return qi(p,A,y),aE(p,c,y),!0}return!1}function $x(A,c,p,y){if(y={lane:2,revertLane:dv(),action:y,hasEagerState:!1,eagerState:null,next:null},O1(A)){if(c)throw Error(s(479))}else c=iA(A,p,y,2),c!==null&&qi(c,A,2)}function O1(A){var c=A.alternate;return A===Mt||c!==null&&c===Mt}function rE(A,c){xr=Dn=!0;var p=A.pending;p===null?c.next=c:(c.next=p.next,p.next=c),A.pending=c}function aE(A,c,p){if((p&4194048)!==0){var y=c.lanes;y&=A.pendingLanes,p|=y,c.lanes=p,Rn(A,p)}}var Q1={readContext:ar,use:Na,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useLayoutEffect:Mn,useInsertionEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useSyncExternalStore:Mn,useId:Mn,useHostTransitionStatus:Mn,useFormState:Mn,useActionState:Mn,useOptimistic:Mn,useMemoCache:Mn,useCacheRefresh:Mn},iE={readContext:ar,use:Na,useCallback:function(A,c){return Aa().memoizedState=[A,c===void 0?null:c],A},useContext:ar,useEffect:pm,useImperativeHandle:function(A,c,p){p=p!=null?p.concat([A]):null,ji(4194308,4,R1.bind(null,c,A),p)},useLayoutEffect:function(A,c){return ji(4194308,4,A,c)},useInsertionEffect:function(A,c){ji(4,2,A,c)},useMemo:function(A,c){var p=Aa();c=c===void 0?null:c;var y=A();if(or){en(!0);try{A()}finally{en(!1)}}return p.memoizedState=[y,c],y},useReducer:function(A,c,p){var y=Aa();if(p!==void 0){var B=p(c);if(or){en(!0);try{p(c)}finally{en(!1)}}}else B=c;return y.memoizedState=y.baseState=B,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:B},y.queue=A,A=A.dispatch=vm.bind(null,Mt,A),[y.memoizedState,A]},useRef:function(A){var c=Aa();return A={current:A},c.memoizedState=A},useState:function(A){A=Xh(A);var c=A.queue,p=sE.bind(null,Mt,c);return c.dispatch=p,[A.memoizedState,p]},useDebugValue:ym,useDeferredValue:function(A,c){var p=Aa();return cu(p,A,c)},useTransition:function(){var A=Xh(!1);return A=Zh.bind(null,Mt,A.queue,!0,!1),Aa().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,c,p){var y=Mt,B=Aa();if($n){if(p===void 0)throw Error(s(407));p=p()}else{if(p=c(),fs===null)throw Error(s(349));(Ln&124)!==0||xd(y,c,p)}B.memoizedState=p;var E={value:p,getSnapshot:c};return B.queue=E,pm(hc.bind(null,y,E,A),[A]),y.flags|=2048,ul(9,Jh(),qh.bind(null,y,E,p,c),null),p},useId:function(){var A=Aa(),c=fs.identifierPrefix;if($n){var p=al,y=rl;p=(y&~(1<<32-Bt(y)-1)).toString(32)+p,c=""+c+"R"+p,p=Qs++,0<p&&(c+="H"+p.toString(32)),c+=""}else p=di++,c=""+c+"r"+p.toString(32)+"";return A.memoizedState=c},useHostTransitionStatus:tf,useFormState:Yh,useActionState:Yh,useOptimistic:function(A){var c=Aa();c.memoizedState=c.baseState=A;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=p,c=$x.bind(null,Mt,!0,p),p.dispatch=c,[A,c]},useMemoCache:dA,useCacheRefresh:function(){return Aa().memoizedState=xm.bind(null,Mt)}},oE={readContext:ar,use:Na,useCallback:wm,useContext:ar,useEffect:U1,useImperativeHandle:gm,useInsertionEffect:mm,useLayoutEffect:uu,useMemo:$1,useReducer:Kh,useRef:Cd,useState:function(){return Kh(Ia)},useDebugValue:ym,useDeferredValue:function(A,c){var p=bs();return Bd(p,Wt.memoizedState,A,c)},useTransition:function(){var A=Kh(Ia)[0],c=bs().memoizedState;return[typeof A=="boolean"?A:fA(A),c]},useSyncExternalStore:Wh,useId:bm,useHostTransitionStatus:tf,useFormState:vd,useActionState:vd,useOptimistic:function(A,c){var p=bs();return Al(p,Wt,A,c)},useMemoCache:dA,useCacheRefresh:_1},T6={readContext:ar,use:Na,useCallback:wm,useContext:ar,useEffect:U1,useImperativeHandle:gm,useInsertionEffect:mm,useLayoutEffect:uu,useMemo:$1,useReducer:bd,useRef:Cd,useState:function(){return bd(Ia)},useDebugValue:ym,useDeferredValue:function(A,c){var p=bs();return Wt===null?cu(p,A,c):Bd(p,Wt.memoizedState,A,c)},useTransition:function(){var A=bd(Ia)[0],c=bs().memoizedState;return[typeof A=="boolean"?A:fA(A),c]},useSyncExternalStore:Wh,useId:bm,useHostTransitionStatus:tf,useFormState:L1,useActionState:L1,useOptimistic:function(A,c){var p=bs();return Wt!==null?Al(p,Wt,A,c):(p.baseState=A,[A,p.queue.dispatch])},useMemoCache:dA,useCacheRefresh:_1},Sd=null,Bm=0;function M1(A){var c=Bm;return Bm+=1,Sd===null&&(Sd=[]),$e(Sd,A,c)}function Sm(A,c){c=c.props.ref,A.ref=c!==void 0?c:null}function H1(A,c){throw c.$$typeof===f?Error(s(525)):(A=Object.prototype.toString.call(c),Error(s(31,A==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":A)))}function lE(A){var c=A._init;return c(A._payload)}function AE(A){function c(Te,Ie){if(A){var Re=Te.deletions;Re===null?(Te.deletions=[Ie],Te.flags|=16):Re.push(Ie)}}function p(Te,Ie){if(!A)return null;for(;Ie!==null;)c(Te,Ie),Ie=Ie.sibling;return null}function y(Te){for(var Ie=new Map;Te!==null;)Te.key!==null?Ie.set(Te.key,Te):Ie.set(Te.index,Te),Te=Te.sibling;return Ie}function B(Te,Ie){return Te=ho(Te,Ie),Te.index=0,Te.sibling=null,Te}function E(Te,Ie,Re){return Te.index=Re,A?(Re=Te.alternate,Re!==null?(Re=Re.index,Re<Ie?(Te.flags|=67108866,Ie):Re):(Te.flags|=67108866,Ie)):(Te.flags|=1048576,Ie)}function G(Te){return A&&Te.alternate===null&&(Te.flags|=67108866),Te}function ie(Te,Ie,Re,Je){return Ie===null||Ie.tag!==6?(Ie=fd(Re,Te.mode,Je),Ie.return=Te,Ie):(Ie=B(Ie,Re),Ie.return=Te,Ie)}function me(Te,Ie,Re,Je){var Et=Re.type;return Et===g?Xe(Te,Ie,Re.props.children,Je,Re.key):Ie!==null&&(Ie.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===U&&lE(Et)===Ie.type)?(Ie=B(Ie,Re.props),Sm(Ie,Re),Ie.return=Te,Ie):(Ie=su(Re.type,Re.key,Re.props,null,Te.mode,Je),Sm(Ie,Re),Ie.return=Te,Ie)}function Oe(Te,Ie,Re,Je){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==Re.containerInfo||Ie.stateNode.implementation!==Re.implementation?(Ie=Hh(Re,Te.mode,Je),Ie.return=Te,Ie):(Ie=B(Ie,Re.children||[]),Ie.return=Te,Ie)}function Xe(Te,Ie,Re,Je,Et){return Ie===null||Ie.tag!==7?(Ie=nl(Re,Te.mode,Je,Et),Ie.return=Te,Ie):(Ie=B(Ie,Re),Ie.return=Te,Ie)}function nt(Te,Ie,Re){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ie=fd(""+Ie,Te.mode,Re),Ie.return=Te,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case d:return Re=su(Ie.type,Ie.key,Ie.props,null,Te.mode,Re),Sm(Re,Ie),Re.return=Te,Re;case m:return Ie=Hh(Ie,Te.mode,Re),Ie.return=Te,Ie;case U:var Je=Ie._init;return Ie=Je(Ie._payload),nt(Te,Ie,Re)}if(re(Ie)||R(Ie))return Ie=nl(Ie,Te.mode,Re,null),Ie.return=Te,Ie;if(typeof Ie.then=="function")return nt(Te,M1(Ie),Re);if(Ie.$$typeof===N)return nt(Te,uA(Te,Ie),Re);H1(Te,Ie)}return null}function He(Te,Ie,Re,Je){var Et=Ie!==null?Ie.key:null;if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return Et!==null?null:ie(Te,Ie,""+Re,Je);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case d:return Re.key===Et?me(Te,Ie,Re,Je):null;case m:return Re.key===Et?Oe(Te,Ie,Re,Je):null;case U:return Et=Re._init,Re=Et(Re._payload),He(Te,Ie,Re,Je)}if(re(Re)||R(Re))return Et!==null?null:Xe(Te,Ie,Re,Je,null);if(typeof Re.then=="function")return He(Te,Ie,M1(Re),Je);if(Re.$$typeof===N)return He(Te,Ie,uA(Te,Re),Je);H1(Te,Re)}return null}function Pe(Te,Ie,Re,Je,Et){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return Te=Te.get(Re)||null,ie(Ie,Te,""+Je,Et);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case d:return Te=Te.get(Je.key===null?Re:Je.key)||null,me(Ie,Te,Je,Et);case m:return Te=Te.get(Je.key===null?Re:Je.key)||null,Oe(Ie,Te,Je,Et);case U:var wn=Je._init;return Je=wn(Je._payload),Pe(Te,Ie,Re,Je,Et)}if(re(Je)||R(Je))return Te=Te.get(Re)||null,Xe(Ie,Te,Je,Et,null);if(typeof Je.then=="function")return Pe(Te,Ie,Re,M1(Je),Et);if(Je.$$typeof===N)return Pe(Te,Ie,Re,uA(Ie,Je),Et);H1(Ie,Je)}return null}function Yt(Te,Ie,Re,Je){for(var Et=null,wn=null,Ot=Ie,Gt=Ie=0,qr=null;Ot!==null&&Gt<Re.length;Gt++){Ot.index>Gt?(qr=Ot,Ot=null):qr=Ot.sibling;var Hn=He(Te,Ot,Re[Gt],Je);if(Hn===null){Ot===null&&(Ot=qr);break}A&&Ot&&Hn.alternate===null&&c(Te,Ot),Ie=E(Hn,Ie,Gt),wn===null?Et=Hn:wn.sibling=Hn,wn=Hn,Ot=qr}if(Gt===Re.length)return p(Te,Ot),$n&&au(Te,Gt),Et;if(Ot===null){for(;Gt<Re.length;Gt++)Ot=nt(Te,Re[Gt],Je),Ot!==null&&(Ie=E(Ot,Ie,Gt),wn===null?Et=Ot:wn.sibling=Ot,wn=Ot);return $n&&au(Te,Gt),Et}for(Ot=y(Ot);Gt<Re.length;Gt++)qr=Pe(Ot,Te,Gt,Re[Gt],Je),qr!==null&&(A&&qr.alternate!==null&&Ot.delete(qr.key===null?Gt:qr.key),Ie=E(qr,Ie,Gt),wn===null?Et=qr:wn.sibling=qr,wn=qr);return A&&Ot.forEach(function(Tc){return c(Te,Tc)}),$n&&au(Te,Gt),Et}function jt(Te,Ie,Re,Je){if(Re==null)throw Error(s(151));for(var Et=null,wn=null,Ot=Ie,Gt=Ie=0,qr=null,Hn=Re.next();Ot!==null&&!Hn.done;Gt++,Hn=Re.next()){Ot.index>Gt?(qr=Ot,Ot=null):qr=Ot.sibling;var Tc=He(Te,Ot,Hn.value,Je);if(Tc===null){Ot===null&&(Ot=qr);break}A&&Ot&&Tc.alternate===null&&c(Te,Ot),Ie=E(Tc,Ie,Gt),wn===null?Et=Tc:wn.sibling=Tc,wn=Tc,Ot=qr}if(Hn.done)return p(Te,Ot),$n&&au(Te,Gt),Et;if(Ot===null){for(;!Hn.done;Gt++,Hn=Re.next())Hn=nt(Te,Hn.value,Je),Hn!==null&&(Ie=E(Hn,Ie,Gt),wn===null?Et=Hn:wn.sibling=Hn,wn=Hn);return $n&&au(Te,Gt),Et}for(Ot=y(Ot);!Hn.done;Gt++,Hn=Re.next())Hn=Pe(Ot,Te,Gt,Hn.value,Je),Hn!==null&&(A&&Hn.alternate!==null&&Ot.delete(Hn.key===null?Gt:Hn.key),Ie=E(Hn,Ie,Gt),wn===null?Et=Hn:wn.sibling=Hn,wn=Hn);return A&&Ot.forEach(function(DM){return c(Te,DM)}),$n&&au(Te,Gt),Et}function ns(Te,Ie,Re,Je){if(typeof Re=="object"&&Re!==null&&Re.type===g&&Re.key===null&&(Re=Re.props.children),typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case d:e:{for(var Et=Re.key;Ie!==null;){if(Ie.key===Et){if(Et=Re.type,Et===g){if(Ie.tag===7){p(Te,Ie.sibling),Je=B(Ie,Re.props.children),Je.return=Te,Te=Je;break e}}else if(Ie.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===U&&lE(Et)===Ie.type){p(Te,Ie.sibling),Je=B(Ie,Re.props),Sm(Je,Re),Je.return=Te,Te=Je;break e}p(Te,Ie);break}else c(Te,Ie);Ie=Ie.sibling}Re.type===g?(Je=nl(Re.props.children,Te.mode,Je,Re.key),Je.return=Te,Te=Je):(Je=su(Re.type,Re.key,Re.props,null,Te.mode,Je),Sm(Je,Re),Je.return=Te,Te=Je)}return G(Te);case m:e:{for(Et=Re.key;Ie!==null;){if(Ie.key===Et)if(Ie.tag===4&&Ie.stateNode.containerInfo===Re.containerInfo&&Ie.stateNode.implementation===Re.implementation){p(Te,Ie.sibling),Je=B(Ie,Re.children||[]),Je.return=Te,Te=Je;break e}else{p(Te,Ie);break}else c(Te,Ie);Ie=Ie.sibling}Je=Hh(Re,Te.mode,Je),Je.return=Te,Te=Je}return G(Te);case U:return Et=Re._init,Re=Et(Re._payload),ns(Te,Ie,Re,Je)}if(re(Re))return Yt(Te,Ie,Re,Je);if(R(Re)){if(Et=R(Re),typeof Et!="function")throw Error(s(150));return Re=Et.call(Re),jt(Te,Ie,Re,Je)}if(typeof Re.then=="function")return ns(Te,Ie,M1(Re),Je);if(Re.$$typeof===N)return ns(Te,Ie,uA(Te,Re),Je);H1(Te,Re)}return typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint"?(Re=""+Re,Ie!==null&&Ie.tag===6?(p(Te,Ie.sibling),Je=B(Ie,Re),Je.return=Te,Te=Je):(p(Te,Ie),Je=fd(Re,Te.mode,Je),Je.return=Te,Te=Je),G(Te)):p(Te,Ie)}return function(Te,Ie,Re,Je){try{Bm=0;var Et=ns(Te,Ie,Re,Je);return Sd=null,Et}catch(Ot){if(Ot===ee||Ot===ae)throw Ot;var wn=Gr(29,Ot,null,Te.mode);return wn.lanes=Je,wn.return=Te,wn}finally{}}}var Nd=AE(!0),uE=AE(!1),wo=ue(null),pA=null;function mc(A){var c=A.alternate;V(Ur,Ur.current&1),V(wo,A),pA===null&&(c===null||fn.current!==null||c.memoizedState!==null)&&(pA=A)}function cE(A){if(A.tag===22){if(V(Ur,Ur.current),V(wo,A),pA===null){var c=A.alternate;c!==null&&c.memoizedState!==null&&(pA=A)}}else gc()}function gc(){V(Ur,Ur.current),V(wo,wo.current)}function hu(A){Q(wo),pA===A&&(pA=null),Q(Ur)}var Ur=ue(0);function P1(A){for(var c=A;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||Nv(p)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===A)break;for(;c.sibling===null;){if(c.return===null||c.return===A)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function _x(A,c,p,y){c=A.memoizedState,p=p(y,c),p=p==null?c:h({},c,p),A.memoizedState=p,A.lanes===0&&(A.updateQueue.baseState=p)}var Ox={enqueueSetState:function(A,c,p){A=A._reactInternals;var y=Wi(),B=qe(y);B.payload=c,p!=null&&(B.callback=p),c=et(A,B,y),c!==null&&(qi(c,A,y),Ye(c,A,y))},enqueueReplaceState:function(A,c,p){A=A._reactInternals;var y=Wi(),B=qe(y);B.tag=1,B.payload=c,p!=null&&(B.callback=p),c=et(A,B,y),c!==null&&(qi(c,A,y),Ye(c,A,y))},enqueueForceUpdate:function(A,c){A=A._reactInternals;var p=Wi(),y=qe(p);y.tag=2,c!=null&&(y.callback=c),c=et(A,y,p),c!==null&&(qi(c,A,p),Ye(c,A,p))}};function hE(A,c,p,y,B,E,G){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(y,E,G):c.prototype&&c.prototype.isPureReactComponent?!Jl(p,y)||!Jl(B,E):!0}function fE(A,c,p,y){A=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,y),c.state!==A&&Ox.enqueueReplaceState(c,c.state,null)}function nf(A,c){var p=c;if("ref"in c){p={};for(var y in c)y!=="ref"&&(p[y]=c[y])}if(A=A.defaultProps){p===c&&(p=h({},p));for(var B in A)p[B]===void 0&&(p[B]=A[B])}return p}var z1=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function dE(A){z1(A)}function pE(A){console.error(A)}function mE(A){z1(A)}function j1(A,c){try{var p=A.onUncaughtError;p(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function gE(A,c,p){try{var y=A.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(B){setTimeout(function(){throw B})}}function Qx(A,c,p){return p=qe(p),p.tag=3,p.payload={element:null},p.callback=function(){j1(A,c)},p}function yE(A){return A=qe(A),A.tag=3,A}function wE(A,c,p,y){var B=p.type.getDerivedStateFromError;if(typeof B=="function"){var E=y.value;A.payload=function(){return B(E)},A.callback=function(){gE(c,p,y)}}var G=p.stateNode;G!==null&&typeof G.componentDidCatch=="function"&&(A.callback=function(){gE(c,p,y),typeof B!="function"&&(Cc===null?Cc=new Set([this]):Cc.add(this));var ie=y.stack;this.componentDidCatch(y.value,{componentStack:ie!==null?ie:""})})}function D6(A,c,p,y,B){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(c=p.alternate,c!==null&&uc(c,p,B,!0),p=wo.current,p!==null){switch(p.tag){case 13:return pA===null?Av():p.alternate===null&&Ws===0&&(Ws=3),p.flags&=-257,p.flags|=65536,p.lanes=B,y===Ae?p.flags|=16384:(c=p.updateQueue,c===null?p.updateQueue=new Set([y]):c.add(y),cv(A,y,B)),!1;case 22:return p.flags|=65536,y===Ae?p.flags|=16384:(c=p.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=c):(p=c.retryQueue,p===null?c.retryQueue=new Set([y]):p.add(y)),cv(A,y,B)),!1}throw Error(s(435,p.tag))}return cv(A,y,B),Av(),!1}if($n)return c=wo.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=B,y!==Am&&(A=Error(s(422),{cause:y}),Ac(mn(A,p)))):(y!==Am&&(c=Error(s(423),{cause:y}),Ac(mn(c,p))),A=A.current.alternate,A.flags|=65536,B&=-B,A.lanes|=B,y=mn(y,p),B=Qx(A.stateNode,y,B),wt(A,B),Ws!==4&&(Ws=2)),!1;var E=Error(s(520),{cause:y});if(E=mn(E,p),Dm===null?Dm=[E]:Dm.push(E),Ws!==4&&(Ws=2),c===null)return!0;y=mn(y,p),p=c;do{switch(p.tag){case 3:return p.flags|=65536,A=B&-B,p.lanes|=A,A=Qx(p.stateNode,y,A),wt(p,A),!1;case 1:if(c=p.type,E=p.stateNode,(p.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Cc===null||!Cc.has(E))))return p.flags|=65536,B&=-B,p.lanes|=B,B=yE(B),wE(B,A,p,y),wt(p,B),!1}p=p.return}while(p!==null);return!1}var bE=Error(s(461)),Kr=!1;function ua(A,c,p,y){c.child=A===null?uE(c,null,p,y):Nd(c,A.child,p,y)}function xE(A,c,p,y,B){p=p.render;var E=c.ref;if("ref"in y){var G={};for(var ie in y)ie!=="ref"&&(G[ie]=y[ie])}else G=y;return go(c),y=zi(A,c,p,G,E,B),ie=hs(),A!==null&&!Kr?(Gh(A,c,B),fu(A,c,B)):($n&&ie&&Ph(c),c.flags|=1,ua(A,c,y,B),c.child)}function vE(A,c,p,y,B){if(A===null){var E=p.type;return typeof E=="function"&&!oc(E)&&E.defaultProps===void 0&&p.compare===null?(c.tag=15,c.type=E,CE(A,c,E,y,B)):(A=su(p.type,null,y,c,c.mode,B),A.ref=c.ref,A.return=c,c.child=A)}if(E=A.child,!Kx(A,B)){var G=E.memoizedProps;if(p=p.compare,p=p!==null?p:Jl,p(G,y)&&A.ref===c.ref)return fu(A,c,B)}return c.flags|=1,A=ho(E,y),A.ref=c.ref,A.return=c,c.child=A}function CE(A,c,p,y,B){if(A!==null){var E=A.memoizedProps;if(Jl(E,y)&&A.ref===c.ref)if(Kr=!1,c.pendingProps=y=E,Kx(A,B))(A.flags&131072)!==0&&(Kr=!0);else return c.lanes=A.lanes,fu(A,c,B)}return Mx(A,c,p,y,B)}function BE(A,c,p){var y=c.pendingProps,B=y.children,E=A!==null?A.memoizedState:null;if(y.mode==="hidden"){if((c.flags&128)!==0){if(y=E!==null?E.baseLanes|p:p,A!==null){for(B=c.child=A.child,E=0;B!==null;)E=E|B.lanes|B.childLanes,B=B.sibling;c.childLanes=E&~y}else c.childLanes=0,c.child=null;return SE(A,c,y,p)}if((p&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},A!==null&&_(c,E!==null?E.cachePool:null),E!==null?Pn(c,E):Qn(),cE(c);else return c.lanes=c.childLanes=536870912,SE(A,c,E!==null?E.baseLanes|p:p,p)}else E!==null?(_(c,E.cachePool),Pn(c,E),gc(),c.memoizedState=null):(A!==null&&_(c,null),Qn(),gc());return ua(A,c,B,p),c.child}function SE(A,c,p,y){var B=D();return B=B===null?null:{parent:ir._currentValue,pool:B},c.memoizedState={baseLanes:p,cachePool:B},A!==null&&_(c,null),Qn(),cE(c),A!==null&&uc(A,c,y,!0),null}function V1(A,c){var p=c.ref;if(p===null)A!==null&&A.ref!==null&&(c.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(s(284));(A===null||A.ref!==p)&&(c.flags|=4194816)}}function Mx(A,c,p,y,B){return go(c),p=zi(A,c,p,y,void 0,B),y=hs(),A!==null&&!Kr?(Gh(A,c,B),fu(A,c,B)):($n&&y&&Ph(c),c.flags|=1,ua(A,c,p,B),c.child)}function NE(A,c,p,y,B,E){return go(c),c.updateQueue=null,p=lu(c,y,p,B),cA(A),y=hs(),A!==null&&!Kr?(Gh(A,c,E),fu(A,c,E)):($n&&y&&Ph(c),c.flags|=1,ua(A,c,p,E),c.child)}function IE(A,c,p,y,B){if(go(c),c.stateNode===null){var E=wr,G=p.contextType;typeof G=="object"&&G!==null&&(E=ar(G)),E=new p(y,E),c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Ox,c.stateNode=E,E._reactInternals=c,E=c.stateNode,E.props=y,E.state=c.memoizedState,E.refs={},Se(c),G=p.contextType,E.context=typeof G=="object"&&G!==null?ar(G):wr,E.state=c.memoizedState,G=p.getDerivedStateFromProps,typeof G=="function"&&(_x(c,p,G,y),E.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(G=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),G!==E.state&&Ox.enqueueReplaceState(E,E.state,null),ft(c,y,E,B),$t(),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308),y=!0}else if(A===null){E=c.stateNode;var ie=c.memoizedProps,me=nf(p,ie);E.props=me;var Oe=E.context,Xe=p.contextType;G=wr,typeof Xe=="object"&&Xe!==null&&(G=ar(Xe));var nt=p.getDerivedStateFromProps;Xe=typeof nt=="function"||typeof E.getSnapshotBeforeUpdate=="function",ie=c.pendingProps!==ie,Xe||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(ie||Oe!==G)&&fE(c,E,y,G),Ve=!1;var He=c.memoizedState;E.state=He,ft(c,y,E,B),$t(),Oe=c.memoizedState,ie||He!==Oe||Ve?(typeof nt=="function"&&(_x(c,p,nt,y),Oe=c.memoizedState),(me=Ve||hE(c,p,me,y,He,Oe,G))?(Xe||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(c.flags|=4194308)):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=Oe),E.props=y,E.state=Oe,E.context=G,y=me):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{E=c.stateNode,ke(A,c),G=c.memoizedProps,Xe=nf(p,G),E.props=Xe,nt=c.pendingProps,He=E.context,Oe=p.contextType,me=wr,typeof Oe=="object"&&Oe!==null&&(me=ar(Oe)),ie=p.getDerivedStateFromProps,(Oe=typeof ie=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(G!==nt||He!==me)&&fE(c,E,y,me),Ve=!1,He=c.memoizedState,E.state=He,ft(c,y,E,B),$t();var Pe=c.memoizedState;G!==nt||He!==Pe||Ve||A!==null&&A.dependencies!==null&&gd(A.dependencies)?(typeof ie=="function"&&(_x(c,p,ie,y),Pe=c.memoizedState),(Xe=Ve||hE(c,p,Xe,y,He,Pe,me)||A!==null&&A.dependencies!==null&&gd(A.dependencies))?(Oe||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(y,Pe,me),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(y,Pe,me)),typeof E.componentDidUpdate=="function"&&(c.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof E.componentDidUpdate!="function"||G===A.memoizedProps&&He===A.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||G===A.memoizedProps&&He===A.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Pe),E.props=y,E.state=Pe,E.context=me,y=Xe):(typeof E.componentDidUpdate!="function"||G===A.memoizedProps&&He===A.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||G===A.memoizedProps&&He===A.memoizedState||(c.flags|=1024),y=!1)}return E=y,V1(A,c),y=(c.flags&128)!==0,E||y?(E=c.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:E.render(),c.flags|=1,A!==null&&y?(c.child=Nd(c,A.child,null,B),c.child=Nd(c,null,p,B)):ua(A,c,p,B),c.memoizedState=E.state,A=c.child):A=fu(A,c,B),A}function EE(A,c,p,y){return ei(),c.flags|=256,ua(A,c,p,y),c.child}var Hx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Px(A){return{baseLanes:A,cachePool:q()}}function zx(A,c,p){return A=A!==null?A.childLanes&~p:0,c&&(A|=bo),A}function kE(A,c,p){var y=c.pendingProps,B=!1,E=(c.flags&128)!==0,G;if((G=E)||(G=A!==null&&A.memoizedState===null?!1:(Ur.current&2)!==0),G&&(B=!0,c.flags&=-129),G=(c.flags&32)!==0,c.flags&=-33,A===null){if($n){if(B?mc(c):gc(),$n){var ie=Es,me;if(me=ie){e:{for(me=ie,ie=fo;me.nodeType!==8;){if(!ie){ie=null;break e}if(me=dl(me.nextSibling),me===null){ie=null;break e}}ie=me}ie!==null?(c.memoizedState={dehydrated:ie,treeContext:ru!==null?{id:rl,overflow:al}:null,retryLane:536870912,hydrationErrors:null},me=Gr(18,null,null,0),me.stateNode=ie,me.return=c,c.child=me,rr=c,Es=null,me=!0):me=!1}me||iu(c)}if(ie=c.memoizedState,ie!==null&&(ie=ie.dehydrated,ie!==null))return Nv(ie)?c.lanes=32:c.lanes=536870912,null;hu(c)}return ie=y.children,y=y.fallback,B?(gc(),B=c.mode,ie=G1({mode:"hidden",children:ie},B),y=nl(y,B,p,null),ie.return=c,y.return=c,ie.sibling=y,c.child=ie,B=c.child,B.memoizedState=Px(p),B.childLanes=zx(A,G,p),c.memoizedState=Hx,y):(mc(c),jx(c,ie))}if(me=A.memoizedState,me!==null&&(ie=me.dehydrated,ie!==null)){if(E)c.flags&256?(mc(c),c.flags&=-257,c=Vx(A,c,p)):c.memoizedState!==null?(gc(),c.child=A.child,c.flags|=128,c=null):(gc(),B=y.fallback,ie=c.mode,y=G1({mode:"visible",children:y.children},ie),B=nl(B,ie,p,null),B.flags|=2,y.return=c,B.return=c,y.sibling=B,c.child=y,Nd(c,A.child,null,p),y=c.child,y.memoizedState=Px(p),y.childLanes=zx(A,G,p),c.memoizedState=Hx,c=B);else if(mc(c),Nv(ie)){if(G=ie.nextSibling&&ie.nextSibling.dataset,G)var Oe=G.dgst;G=Oe,y=Error(s(419)),y.stack="",y.digest=G,Ac({value:y,source:null,stack:null}),c=Vx(A,c,p)}else if(Kr||uc(A,c,p,!1),G=(p&A.childLanes)!==0,Kr||G){if(G=fs,G!==null&&(y=p&-p,y=(y&42)!==0?1:zo(y),y=(y&(G.suspendedLanes|p))!==0?0:y,y!==0&&y!==me.retryLane))throw me.retryLane=y,tl(A,y),qi(G,A,y),bE;ie.data==="$?"||Av(),c=Vx(A,c,p)}else ie.data==="$?"?(c.flags|=192,c.child=A.child,c=null):(A=me.treeContext,Es=dl(ie.nextSibling),rr=c,$n=!0,lA=null,fo=!1,A!==null&&(fi[Za++]=rl,fi[Za++]=al,fi[Za++]=ru,rl=A.id,al=A.overflow,ru=c),c=jx(c,y.children),c.flags|=4096);return c}return B?(gc(),B=y.fallback,ie=c.mode,me=A.child,Oe=me.sibling,y=ho(me,{mode:"hidden",children:y.children}),y.subtreeFlags=me.subtreeFlags&65011712,Oe!==null?B=ho(Oe,B):(B=nl(B,ie,p,null),B.flags|=2),B.return=c,y.return=c,y.sibling=B,c.child=y,y=B,B=c.child,ie=A.child.memoizedState,ie===null?ie=Px(p):(me=ie.cachePool,me!==null?(Oe=ir._currentValue,me=me.parent!==Oe?{parent:Oe,pool:Oe}:me):me=q(),ie={baseLanes:ie.baseLanes|p,cachePool:me}),B.memoizedState=ie,B.childLanes=zx(A,G,p),c.memoizedState=Hx,y):(mc(c),p=A.child,A=p.sibling,p=ho(p,{mode:"visible",children:y.children}),p.return=c,p.sibling=null,A!==null&&(G=c.deletions,G===null?(c.deletions=[A],c.flags|=16):G.push(A)),c.child=p,c.memoizedState=null,p)}function jx(A,c){return c=G1({mode:"visible",children:c},A.mode),c.return=A,A.child=c}function G1(A,c){return A=Gr(22,A,null,c),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function Vx(A,c,p){return Nd(c,A.child,null,p),A=jx(c,c.pendingProps.children),A.flags|=2,c.memoizedState=null,A}function FE(A,c,p){A.lanes|=c;var y=A.alternate;y!==null&&(y.lanes|=c),pd(A.return,c,p)}function Gx(A,c,p,y,B){var E=A.memoizedState;E===null?A.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:B}:(E.isBackwards=c,E.rendering=null,E.renderingStartTime=0,E.last=y,E.tail=p,E.tailMode=B)}function TE(A,c,p){var y=c.pendingProps,B=y.revealOrder,E=y.tail;if(ua(A,c,y.children,p),y=Ur.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=c.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&FE(A,p,c);else if(A.tag===19)FE(A,p,c);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===c)break e;for(;A.sibling===null;){if(A.return===null||A.return===c)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}y&=1}switch(V(Ur,y),B){case"forwards":for(p=c.child,B=null;p!==null;)A=p.alternate,A!==null&&P1(A)===null&&(B=p),p=p.sibling;p=B,p===null?(B=c.child,c.child=null):(B=p.sibling,p.sibling=null),Gx(c,!1,B,p,E);break;case"backwards":for(p=null,B=c.child,c.child=null;B!==null;){if(A=B.alternate,A!==null&&P1(A)===null){c.child=B;break}A=B.sibling,B.sibling=p,p=B,B=A}Gx(c,!0,p,null,E);break;case"together":Gx(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function fu(A,c,p){if(A!==null&&(c.dependencies=A.dependencies),vc|=c.lanes,(p&c.childLanes)===0)if(A!==null){if(uc(A,c,p,!1),(p&c.childLanes)===0)return null}else return null;if(A!==null&&c.child!==A.child)throw Error(s(153));if(c.child!==null){for(A=c.child,p=ho(A,A.pendingProps),c.child=p,p.return=c;A.sibling!==null;)A=A.sibling,p=p.sibling=ho(A,A.pendingProps),p.return=c;p.sibling=null}return c.child}function Kx(A,c){return(A.lanes&c)!==0?!0:(A=A.dependencies,!!(A!==null&&gd(A)))}function L6(A,c,p){switch(c.tag){case 3:ye(c,c.stateNode.containerInfo),AA(c,ir,A.memoizedState.cache),ei();break;case 27:case 5:Me(c);break;case 4:ye(c,c.stateNode.containerInfo);break;case 10:AA(c,c.type,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(mc(c),c.flags|=128,null):(p&c.child.childLanes)!==0?kE(A,c,p):(mc(c),A=fu(A,c,p),A!==null?A.sibling:null);mc(c);break;case 19:var B=(A.flags&128)!==0;if(y=(p&c.childLanes)!==0,y||(uc(A,c,p,!1),y=(p&c.childLanes)!==0),B){if(y)return TE(A,c,p);c.flags|=128}if(B=c.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),V(Ur,Ur.current),y)break;return null;case 22:case 23:return c.lanes=0,BE(A,c,p);case 24:AA(c,ir,A.memoizedState.cache)}return fu(A,c,p)}function DE(A,c,p){if(A!==null)if(A.memoizedProps!==c.pendingProps)Kr=!0;else{if(!Kx(A,p)&&(c.flags&128)===0)return Kr=!1,L6(A,c,p);Kr=(A.flags&131072)!==0}else Kr=!1,$n&&(c.flags&1048576)!==0&&v1(c,dd,c.index);switch(c.lanes=0,c.tag){case 16:e:{A=c.pendingProps;var y=c.elementType,B=y._init;if(y=B(y._payload),c.type=y,typeof y=="function")oc(y)?(A=nf(y,A),c.tag=1,c=IE(null,c,y,A,p)):(c.tag=0,c=Mx(null,c,y,A,p));else{if(y!=null){if(B=y.$$typeof,B===I){c.tag=11,c=xE(null,c,y,A,p);break e}else if(B===H){c.tag=14,c=vE(null,c,y,A,p);break e}}throw c=K(y)||y,Error(s(306,c,""))}}return c;case 0:return Mx(A,c,c.type,c.pendingProps,p);case 1:return y=c.type,B=nf(y,c.pendingProps),IE(A,c,y,B,p);case 3:e:{if(ye(c,c.stateNode.containerInfo),A===null)throw Error(s(387));y=c.pendingProps;var E=c.memoizedState;B=E.element,ke(A,c),ft(c,y,null,p);var G=c.memoizedState;if(y=G.cache,AA(c,ir,y),y!==E.cache&&md(c,[ir],p,!0),$t(),y=G.element,E.isDehydrated)if(E={element:y,isDehydrated:!1,cache:G.cache},c.updateQueue.baseState=E,c.memoizedState=E,c.flags&256){c=EE(A,c,y,p);break e}else if(y!==B){B=mn(Error(s(424)),c),Ac(B),c=EE(A,c,y,p);break e}else{switch(A=c.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(Es=dl(A.firstChild),rr=c,$n=!0,lA=null,fo=!0,p=uE(c,null,y,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(ei(),y===B){c=fu(A,c,p);break e}ua(A,c,y,p)}c=c.child}return c;case 26:return V1(A,c),A===null?(p=$k(c.type,null,c.pendingProps,null))?c.memoizedState=p:$n||(p=c.type,A=c.pendingProps,y=iy(ce.current).createElement(p),y[Zn]=c,y[ys]=A,ha(y,p,A),Kn(y),c.stateNode=y):c.memoizedState=$k(c.type,A.memoizedProps,c.pendingProps,A.memoizedState),null;case 27:return Me(c),A===null&&$n&&(y=c.stateNode=Lk(c.type,c.pendingProps,ce.current),rr=c,fo=!0,B=Es,Nc(c.type)?(Iv=B,Es=dl(y.firstChild)):Es=B),ua(A,c,c.pendingProps.children,p),V1(A,c),A===null&&(c.flags|=4194304),c.child;case 5:return A===null&&$n&&((B=y=Es)&&(y=oM(y,c.type,c.pendingProps,fo),y!==null?(c.stateNode=y,rr=c,Es=dl(y.firstChild),fo=!1,B=!0):B=!1),B||iu(c)),Me(c),B=c.type,E=c.pendingProps,G=A!==null?A.memoizedProps:null,y=E.children,Cv(B,E)?y=null:G!==null&&Cv(B,G)&&(c.flags|=32),c.memoizedState!==null&&(B=zi(A,c,hA,null,null,p),Hm._currentValue=B),V1(A,c),ua(A,c,y,p),c.child;case 6:return A===null&&$n&&((A=p=Es)&&(p=lM(p,c.pendingProps,fo),p!==null?(c.stateNode=p,rr=c,Es=null,A=!0):A=!1),A||iu(c)),null;case 13:return kE(A,c,p);case 4:return ye(c,c.stateNode.containerInfo),y=c.pendingProps,A===null?c.child=Nd(c,null,y,p):ua(A,c,y,p),c.child;case 11:return xE(A,c,c.type,c.pendingProps,p);case 7:return ua(A,c,c.pendingProps,p),c.child;case 8:return ua(A,c,c.pendingProps.children,p),c.child;case 12:return ua(A,c,c.pendingProps.children,p),c.child;case 10:return y=c.pendingProps,AA(c,c.type,y.value),ua(A,c,y.children,p),c.child;case 9:return B=c.type._context,y=c.pendingProps.children,go(c),B=ar(B),y=y(B),c.flags|=1,ua(A,c,y,p),c.child;case 14:return vE(A,c,c.type,c.pendingProps,p);case 15:return CE(A,c,c.type,c.pendingProps,p);case 19:return TE(A,c,p);case 31:return y=c.pendingProps,p=c.mode,y={mode:y.mode,children:y.children},A===null?(p=G1(y,p),p.ref=c.ref,c.child=p,p.return=c,c=p):(p=ho(A.child,y),p.ref=c.ref,c.child=p,p.return=c,c=p),c;case 22:return BE(A,c,p);case 24:return go(c),y=ar(ir),A===null?(B=D(),B===null&&(B=fs,E=um(),B.pooledCache=E,E.refCount++,E!==null&&(B.pooledCacheLanes|=p),B=E),c.memoizedState={parent:y,cache:B},Se(c),AA(c,ir,B)):((A.lanes&p)!==0&&(ke(A,c),ft(c,null,null,p),$t()),B=A.memoizedState,E=c.memoizedState,B.parent!==y?(B={parent:y,cache:y},c.memoizedState=B,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=B),AA(c,ir,y)):(y=E.cache,AA(c,ir,y),y!==B.cache&&md(c,[ir],p,!0))),ua(A,c,c.pendingProps.children,p),c.child;case 29:throw c.pendingProps}throw Error(s(156,c.tag))}function du(A){A.flags|=4}function LE(A,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!Hk(c)){if(c=wo.current,c!==null&&((Ln&4194048)===Ln?pA!==null:(Ln&62914560)!==Ln&&(Ln&536870912)===0||c!==pA))throw Ue=Ae,ne;A.flags|=8192}}function K1(A,c){c!==null&&(A.flags|=4),A.flags&16384&&(c=A.tag!==22?gs():536870912,A.lanes|=c,Fd|=c)}function Nm(A,c){if(!$n)switch(A.tailMode){case"hidden":c=A.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?A.tail=null:p.sibling=null;break;case"collapsed":p=A.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?c||A.tail===null?A.tail=null:A.tail.sibling=null:y.sibling=null}}function Hs(A){var c=A.alternate!==null&&A.alternate.child===A.child,p=0,y=0;if(c)for(var B=A.child;B!==null;)p|=B.lanes|B.childLanes,y|=B.subtreeFlags&65011712,y|=B.flags&65011712,B.return=A,B=B.sibling;else for(B=A.child;B!==null;)p|=B.lanes|B.childLanes,y|=B.subtreeFlags,y|=B.flags,B.return=A,B=B.sibling;return A.subtreeFlags|=y,A.childLanes=p,c}function U6(A,c,p){var y=c.pendingProps;switch(zh(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(c),null;case 1:return Hs(c),null;case 3:return p=c.stateNode,y=null,A!==null&&(y=A.memoizedState.cache),c.memoizedState.cache!==y&&(c.flags|=2048),mo(ir),xe(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(A===null||A.child===null)&&(la(c)?du(c):A===null||A.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,B1())),Hs(c),null;case 26:return p=c.memoizedState,A===null?(du(c),p!==null?(Hs(c),LE(c,p)):(Hs(c),c.flags&=-16777217)):p?p!==A.memoizedState?(du(c),Hs(c),LE(c,p)):(Hs(c),c.flags&=-16777217):(A.memoizedProps!==y&&du(c),Hs(c),c.flags&=-16777217),null;case 27:ze(c),p=ce.current;var B=c.type;if(A!==null&&c.stateNode!=null)A.memoizedProps!==y&&du(c);else{if(!y){if(c.stateNode===null)throw Error(s(166));return Hs(c),null}A=Z.current,la(c)?C1(c):(A=Lk(B,y,p),c.stateNode=A,du(c))}return Hs(c),null;case 5:if(ze(c),p=c.type,A!==null&&c.stateNode!=null)A.memoizedProps!==y&&du(c);else{if(!y){if(c.stateNode===null)throw Error(s(166));return Hs(c),null}if(A=Z.current,la(c))C1(c);else{switch(B=iy(ce.current),A){case 1:A=B.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:A=B.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":A=B.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":A=B.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":A=B.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof y.is=="string"?B.createElement("select",{is:y.is}):B.createElement("select"),y.multiple?A.multiple=!0:y.size&&(A.size=y.size);break;default:A=typeof y.is=="string"?B.createElement(p,{is:y.is}):B.createElement(p)}}A[Zn]=c,A[ys]=y;e:for(B=c.child;B!==null;){if(B.tag===5||B.tag===6)A.appendChild(B.stateNode);else if(B.tag!==4&&B.tag!==27&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===c)break e;for(;B.sibling===null;){if(B.return===null||B.return===c)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}c.stateNode=A;e:switch(ha(A,p,y),p){case"button":case"input":case"select":case"textarea":A=!!y.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&du(c)}}return Hs(c),c.flags&=-16777217,null;case 6:if(A&&c.stateNode!=null)A.memoizedProps!==y&&du(c);else{if(typeof y!="string"&&c.stateNode===null)throw Error(s(166));if(A=ce.current,la(c)){if(A=c.stateNode,p=c.memoizedProps,y=null,B=rr,B!==null)switch(B.tag){case 27:case 5:y=B.memoizedProps}A[Zn]=c,A=!!(A.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||Nk(A.nodeValue,p)),A||iu(c)}else A=iy(A).createTextNode(y),A[Zn]=c,c.stateNode=A}return Hs(c),null;case 13:if(y=c.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(B=la(c),y!==null&&y.dehydrated!==null){if(A===null){if(!B)throw Error(s(318));if(B=c.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(s(317));B[Zn]=c}else ei(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Hs(c),B=!1}else B=B1(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=B),B=!0;if(!B)return c.flags&256?(hu(c),c):(hu(c),null)}if(hu(c),(c.flags&128)!==0)return c.lanes=p,c;if(p=y!==null,A=A!==null&&A.memoizedState!==null,p){y=c.child,B=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(B=y.alternate.memoizedState.cachePool.pool);var E=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(E=y.memoizedState.cachePool.pool),E!==B&&(y.flags|=2048)}return p!==A&&p&&(c.child.flags|=8192),K1(c,c.updateQueue),Hs(c),null;case 4:return xe(),A===null&&yv(c.stateNode.containerInfo),Hs(c),null;case 10:return mo(c.type),Hs(c),null;case 19:if(Q(Ur),B=c.memoizedState,B===null)return Hs(c),null;if(y=(c.flags&128)!==0,E=B.rendering,E===null)if(y)Nm(B,!1);else{if(Ws!==0||A!==null&&(A.flags&128)!==0)for(A=c.child;A!==null;){if(E=P1(A),E!==null){for(c.flags|=128,Nm(B,!1),A=E.updateQueue,c.updateQueue=A,K1(c,A),c.subtreeFlags=0,A=p,p=c.child;p!==null;)Mh(p,A),p=p.sibling;return V(Ur,Ur.current&1|2),c.child}A=A.sibling}B.tail!==null&&ct()>X1&&(c.flags|=128,y=!0,Nm(B,!1),c.lanes=4194304)}else{if(!y)if(A=P1(E),A!==null){if(c.flags|=128,y=!0,A=A.updateQueue,c.updateQueue=A,K1(c,A),Nm(B,!0),B.tail===null&&B.tailMode==="hidden"&&!E.alternate&&!$n)return Hs(c),null}else 2*ct()-B.renderingStartTime>X1&&p!==536870912&&(c.flags|=128,y=!0,Nm(B,!1),c.lanes=4194304);B.isBackwards?(E.sibling=c.child,c.child=E):(A=B.last,A!==null?A.sibling=E:c.child=E,B.last=E)}return B.tail!==null?(c=B.tail,B.rendering=c,B.tail=c.sibling,B.renderingStartTime=ct(),c.sibling=null,A=Ur.current,V(Ur,y?A&1|2:A&1),c):(Hs(c),null);case 22:case 23:return hu(c),tn(),y=c.memoizedState!==null,A!==null?A.memoizedState!==null!==y&&(c.flags|=8192):y&&(c.flags|=8192),y?(p&536870912)!==0&&(c.flags&128)===0&&(Hs(c),c.subtreeFlags&6&&(c.flags|=8192)):Hs(c),p=c.updateQueue,p!==null&&K1(c,p.retryQueue),p=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(p=A.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048),A!==null&&Q(S),null;case 24:return p=null,A!==null&&(p=A.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),mo(ir),Hs(c),null;case 25:return null;case 30:return null}throw Error(s(156,c.tag))}function R6(A,c){switch(zh(c),c.tag){case 1:return A=c.flags,A&65536?(c.flags=A&-65537|128,c):null;case 3:return mo(ir),xe(),A=c.flags,(A&65536)!==0&&(A&128)===0?(c.flags=A&-65537|128,c):null;case 26:case 27:case 5:return ze(c),null;case 13:if(hu(c),A=c.memoizedState,A!==null&&A.dehydrated!==null){if(c.alternate===null)throw Error(s(340));ei()}return A=c.flags,A&65536?(c.flags=A&-65537|128,c):null;case 19:return Q(Ur),null;case 4:return xe(),null;case 10:return mo(c.type),null;case 22:case 23:return hu(c),tn(),A!==null&&Q(S),A=c.flags,A&65536?(c.flags=A&-65537|128,c):null;case 24:return mo(ir),null;case 25:return null;default:return null}}function UE(A,c){switch(zh(c),c.tag){case 3:mo(ir),xe();break;case 26:case 27:case 5:ze(c);break;case 4:xe();break;case 13:hu(c);break;case 19:Q(Ur);break;case 10:mo(c.type);break;case 22:case 23:hu(c),tn(),A!==null&&Q(S);break;case 24:mo(ir)}}function Im(A,c){try{var p=c.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var B=y.next;p=B;do{if((p.tag&A)===A){y=void 0;var E=p.create,G=p.inst;y=E(),G.destroy=y}p=p.next}while(p!==B)}}catch(ie){os(c,c.return,ie)}}function yc(A,c,p){try{var y=c.updateQueue,B=y!==null?y.lastEffect:null;if(B!==null){var E=B.next;y=E;do{if((y.tag&A)===A){var G=y.inst,ie=G.destroy;if(ie!==void 0){G.destroy=void 0,B=c;var me=p,Oe=ie;try{Oe()}catch(Xe){os(B,me,Xe)}}}y=y.next}while(y!==E)}}catch(Xe){os(c,c.return,Xe)}}function RE(A){var c=A.updateQueue;if(c!==null){var p=A.stateNode;try{On(c,p)}catch(y){os(A,A.return,y)}}}function $E(A,c,p){p.props=nf(A.type,A.memoizedProps),p.state=A.memoizedState;try{p.componentWillUnmount()}catch(y){os(A,c,y)}}function Em(A,c){try{var p=A.ref;if(p!==null){switch(A.tag){case 26:case 27:case 5:var y=A.stateNode;break;case 30:y=A.stateNode;break;default:y=A.stateNode}typeof p=="function"?A.refCleanup=p(y):p.current=y}}catch(B){os(A,c,B)}}function mA(A,c){var p=A.ref,y=A.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(B){os(A,c,B)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(B){os(A,c,B)}else p.current=null}function _E(A){var c=A.type,p=A.memoizedProps,y=A.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(B){os(A,A.return,B)}}function Wx(A,c,p){try{var y=A.stateNode;nM(y,A.type,p,c),y[ys]=c}catch(B){os(A,A.return,B)}}function OE(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&Nc(A.type)||A.tag===4}function qx(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||OE(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&Nc(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function Xx(A,c,p){var y=A.tag;if(y===5||y===6)A=A.stateNode,c?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(A,c):(c=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,c.appendChild(A),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=ay));else if(y!==4&&(y===27&&Nc(A.type)&&(p=A.stateNode,c=null),A=A.child,A!==null))for(Xx(A,c,p),A=A.sibling;A!==null;)Xx(A,c,p),A=A.sibling}function W1(A,c,p){var y=A.tag;if(y===5||y===6)A=A.stateNode,c?p.insertBefore(A,c):p.appendChild(A);else if(y!==4&&(y===27&&Nc(A.type)&&(p=A.stateNode),A=A.child,A!==null))for(W1(A,c,p),A=A.sibling;A!==null;)W1(A,c,p),A=A.sibling}function QE(A){var c=A.stateNode,p=A.memoizedProps;try{for(var y=A.type,B=c.attributes;B.length;)c.removeAttributeNode(B[0]);ha(c,y,p),c[Zn]=A,c[ys]=p}catch(E){os(A,A.return,E)}}var pu=!1,lr=!1,Yx=!1,ME=typeof WeakSet=="function"?WeakSet:Set,Wr=null;function $6(A,c){if(A=A.containerInfo,xv=hy,A=oa(A),Lr(A)){if("selectionStart"in A)var p={start:A.selectionStart,end:A.selectionEnd};else e:{p=(p=A.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var B=y.anchorOffset,E=y.focusNode;y=y.focusOffset;try{p.nodeType,E.nodeType}catch{p=null;break e}var G=0,ie=-1,me=-1,Oe=0,Xe=0,nt=A,He=null;t:for(;;){for(var Pe;nt!==p||B!==0&&nt.nodeType!==3||(ie=G+B),nt!==E||y!==0&&nt.nodeType!==3||(me=G+y),nt.nodeType===3&&(G+=nt.nodeValue.length),(Pe=nt.firstChild)!==null;)He=nt,nt=Pe;for(;;){if(nt===A)break t;if(He===p&&++Oe===B&&(ie=G),He===E&&++Xe===y&&(me=G),(Pe=nt.nextSibling)!==null)break;nt=He,He=nt.parentNode}nt=Pe}p=ie===-1||me===-1?null:{start:ie,end:me}}else p=null}p=p||{start:0,end:0}}else p=null;for(vv={focusedElem:A,selectionRange:p},hy=!1,Wr=c;Wr!==null;)if(c=Wr,A=c.child,(c.subtreeFlags&1024)!==0&&A!==null)A.return=c,Wr=A;else for(;Wr!==null;){switch(c=Wr,E=c.alternate,A=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&E!==null){A=void 0,p=c,B=E.memoizedProps,E=E.memoizedState,y=p.stateNode;try{var Yt=nf(p.type,B,p.elementType===p.type);A=y.getSnapshotBeforeUpdate(Yt,E),y.__reactInternalSnapshotBeforeUpdate=A}catch(jt){os(p,p.return,jt)}}break;case 3:if((A&1024)!==0){if(A=c.stateNode.containerInfo,p=A.nodeType,p===9)Sv(A);else if(p===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":Sv(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(s(163))}if(A=c.sibling,A!==null){A.return=c.return,Wr=A;break}Wr=c.return}}function HE(A,c,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:wc(A,p),y&4&&Im(5,p);break;case 1:if(wc(A,p),y&4)if(A=p.stateNode,c===null)try{A.componentDidMount()}catch(G){os(p,p.return,G)}else{var B=nf(p.type,c.memoizedProps);c=c.memoizedState;try{A.componentDidUpdate(B,c,A.__reactInternalSnapshotBeforeUpdate)}catch(G){os(p,p.return,G)}}y&64&&RE(p),y&512&&Em(p,p.return);break;case 3:if(wc(A,p),y&64&&(A=p.updateQueue,A!==null)){if(c=null,p.child!==null)switch(p.child.tag){case 27:case 5:c=p.child.stateNode;break;case 1:c=p.child.stateNode}try{On(A,c)}catch(G){os(p,p.return,G)}}break;case 27:c===null&&y&4&&QE(p);case 26:case 5:wc(A,p),c===null&&y&4&&_E(p),y&512&&Em(p,p.return);break;case 12:wc(A,p);break;case 13:wc(A,p),y&4&&jE(A,p),y&64&&(A=p.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(p=V6.bind(null,p),AM(A,p))));break;case 22:if(y=p.memoizedState!==null||pu,!y){c=c!==null&&c.memoizedState!==null||lr,B=pu;var E=lr;pu=y,(lr=c)&&!E?bc(A,p,(p.subtreeFlags&8772)!==0):wc(A,p),pu=B,lr=E}break;case 30:break;default:wc(A,p)}}function PE(A){var c=A.alternate;c!==null&&(A.alternate=null,PE(c)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(c=A.stateNode,c!==null&&Wa(c)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var ks=null,pi=!1;function mu(A,c,p){for(p=p.child;p!==null;)zE(A,c,p),p=p.sibling}function zE(A,c,p){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Pt,p)}catch{}switch(p.tag){case 26:lr||mA(p,c),mu(A,c,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:lr||mA(p,c);var y=ks,B=pi;Nc(p.type)&&(ks=p.stateNode,pi=!1),mu(A,c,p),_m(p.stateNode),ks=y,pi=B;break;case 5:lr||mA(p,c);case 6:if(y=ks,B=pi,ks=null,mu(A,c,p),ks=y,pi=B,ks!==null)if(pi)try{(ks.nodeType===9?ks.body:ks.nodeName==="HTML"?ks.ownerDocument.body:ks).removeChild(p.stateNode)}catch(E){os(p,c,E)}else try{ks.removeChild(p.stateNode)}catch(E){os(p,c,E)}break;case 18:ks!==null&&(pi?(A=ks,Tk(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,p.stateNode),Vm(A)):Tk(ks,p.stateNode));break;case 4:y=ks,B=pi,ks=p.stateNode.containerInfo,pi=!0,mu(A,c,p),ks=y,pi=B;break;case 0:case 11:case 14:case 15:lr||yc(2,p,c),lr||yc(4,p,c),mu(A,c,p);break;case 1:lr||(mA(p,c),y=p.stateNode,typeof y.componentWillUnmount=="function"&&$E(p,c,y)),mu(A,c,p);break;case 21:mu(A,c,p);break;case 22:lr=(y=lr)||p.memoizedState!==null,mu(A,c,p),lr=y;break;default:mu(A,c,p)}}function jE(A,c){if(c.memoizedState===null&&(A=c.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{Vm(A)}catch(p){os(c,c.return,p)}}function _6(A){switch(A.tag){case 13:case 19:var c=A.stateNode;return c===null&&(c=A.stateNode=new ME),c;case 22:return A=A.stateNode,c=A._retryCache,c===null&&(c=A._retryCache=new ME),c;default:throw Error(s(435,A.tag))}}function Jx(A,c){var p=_6(A);c.forEach(function(y){var B=G6.bind(null,A,y);p.has(y)||(p.add(y),y.then(B,B))})}function Vi(A,c){var p=c.deletions;if(p!==null)for(var y=0;y<p.length;y++){var B=p[y],E=A,G=c,ie=G;e:for(;ie!==null;){switch(ie.tag){case 27:if(Nc(ie.type)){ks=ie.stateNode,pi=!1;break e}break;case 5:ks=ie.stateNode,pi=!1;break e;case 3:case 4:ks=ie.stateNode.containerInfo,pi=!0;break e}ie=ie.return}if(ks===null)throw Error(s(160));zE(E,G,B),ks=null,pi=!1,E=B.alternate,E!==null&&(E.return=null),B.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)VE(c,A),c=c.sibling}var fl=null;function VE(A,c){var p=A.alternate,y=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:Vi(c,A),Gi(A),y&4&&(yc(3,A,A.return),Im(3,A),yc(5,A,A.return));break;case 1:Vi(c,A),Gi(A),y&512&&(lr||p===null||mA(p,p.return)),y&64&&pu&&(A=A.updateQueue,A!==null&&(y=A.callbacks,y!==null&&(p=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var B=fl;if(Vi(c,A),Gi(A),y&512&&(lr||p===null||mA(p,p.return)),y&4){var E=p!==null?p.memoizedState:null;if(y=A.memoizedState,p===null)if(y===null)if(A.stateNode===null){e:{y=A.type,p=A.memoizedProps,B=B.ownerDocument||B;t:switch(y){case"title":E=B.getElementsByTagName("title")[0],(!E||E[Ka]||E[Zn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=B.createElement(y),B.head.insertBefore(E,B.querySelector("head > title"))),ha(E,y,p),E[Zn]=A,Kn(E),y=E;break e;case"link":var G=Qk("link","href",B).get(y+(p.href||""));if(G){for(var ie=0;ie<G.length;ie++)if(E=G[ie],E.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&E.getAttribute("rel")===(p.rel==null?null:p.rel)&&E.getAttribute("title")===(p.title==null?null:p.title)&&E.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){G.splice(ie,1);break t}}E=B.createElement(y),ha(E,y,p),B.head.appendChild(E);break;case"meta":if(G=Qk("meta","content",B).get(y+(p.content||""))){for(ie=0;ie<G.length;ie++)if(E=G[ie],E.getAttribute("content")===(p.content==null?null:""+p.content)&&E.getAttribute("name")===(p.name==null?null:p.name)&&E.getAttribute("property")===(p.property==null?null:p.property)&&E.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&E.getAttribute("charset")===(p.charSet==null?null:p.charSet)){G.splice(ie,1);break t}}E=B.createElement(y),ha(E,y,p),B.head.appendChild(E);break;default:throw Error(s(468,y))}E[Zn]=A,Kn(E),y=E}A.stateNode=y}else Mk(B,A.type,A.stateNode);else A.stateNode=Ok(B,y,A.memoizedProps);else E!==y?(E===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):E.count--,y===null?Mk(B,A.type,A.stateNode):Ok(B,y,A.memoizedProps)):y===null&&A.stateNode!==null&&Wx(A,A.memoizedProps,p.memoizedProps)}break;case 27:Vi(c,A),Gi(A),y&512&&(lr||p===null||mA(p,p.return)),p!==null&&y&4&&Wx(A,A.memoizedProps,p.memoizedProps);break;case 5:if(Vi(c,A),Gi(A),y&512&&(lr||p===null||mA(p,p.return)),A.flags&32){B=A.stateNode;try{zl(B,"")}catch(Pe){os(A,A.return,Pe)}}y&4&&A.stateNode!=null&&(B=A.memoizedProps,Wx(A,B,p!==null?p.memoizedProps:B)),y&1024&&(Yx=!0);break;case 6:if(Vi(c,A),Gi(A),y&4){if(A.stateNode===null)throw Error(s(162));y=A.memoizedProps,p=A.stateNode;try{p.nodeValue=y}catch(Pe){os(A,A.return,Pe)}}break;case 3:if(Ay=null,B=fl,fl=oy(c.containerInfo),Vi(c,A),fl=B,Gi(A),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Vm(c.containerInfo)}catch(Pe){os(A,A.return,Pe)}Yx&&(Yx=!1,GE(A));break;case 4:y=fl,fl=oy(A.stateNode.containerInfo),Vi(c,A),Gi(A),fl=y;break;case 12:Vi(c,A),Gi(A);break;case 13:Vi(c,A),Gi(A),A.child.flags&8192&&A.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(rv=ct()),y&4&&(y=A.updateQueue,y!==null&&(A.updateQueue=null,Jx(A,y)));break;case 22:B=A.memoizedState!==null;var me=p!==null&&p.memoizedState!==null,Oe=pu,Xe=lr;if(pu=Oe||B,lr=Xe||me,Vi(c,A),lr=Xe,pu=Oe,Gi(A),y&8192)e:for(c=A.stateNode,c._visibility=B?c._visibility&-2:c._visibility|1,B&&(p===null||me||pu||lr||sf(A)),p=null,c=A;;){if(c.tag===5||c.tag===26){if(p===null){me=p=c;try{if(E=me.stateNode,B)G=E.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none";else{ie=me.stateNode;var nt=me.memoizedProps.style,He=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;ie.style.display=He==null||typeof He=="boolean"?"":(""+He).trim()}}catch(Pe){os(me,me.return,Pe)}}}else if(c.tag===6){if(p===null){me=c;try{me.stateNode.nodeValue=B?"":me.memoizedProps}catch(Pe){os(me,me.return,Pe)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===A)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===A)break e;for(;c.sibling===null;){if(c.return===null||c.return===A)break e;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}y&4&&(y=A.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,Jx(A,p))));break;case 19:Vi(c,A),Gi(A),y&4&&(y=A.updateQueue,y!==null&&(A.updateQueue=null,Jx(A,y)));break;case 30:break;case 21:break;default:Vi(c,A),Gi(A)}}function Gi(A){var c=A.flags;if(c&2){try{for(var p,y=A.return;y!==null;){if(OE(y)){p=y;break}y=y.return}if(p==null)throw Error(s(160));switch(p.tag){case 27:var B=p.stateNode,E=qx(A);W1(A,E,B);break;case 5:var G=p.stateNode;p.flags&32&&(zl(G,""),p.flags&=-33);var ie=qx(A);W1(A,ie,G);break;case 3:case 4:var me=p.stateNode.containerInfo,Oe=qx(A);Xx(A,Oe,me);break;default:throw Error(s(161))}}catch(Xe){os(A,A.return,Xe)}A.flags&=-3}c&4096&&(A.flags&=-4097)}function GE(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var c=A;GE(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),A=A.sibling}}function wc(A,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)HE(A,c.alternate,c),c=c.sibling}function sf(A){for(A=A.child;A!==null;){var c=A;switch(c.tag){case 0:case 11:case 14:case 15:yc(4,c,c.return),sf(c);break;case 1:mA(c,c.return);var p=c.stateNode;typeof p.componentWillUnmount=="function"&&$E(c,c.return,p),sf(c);break;case 27:_m(c.stateNode);case 26:case 5:mA(c,c.return),sf(c);break;case 22:c.memoizedState===null&&sf(c);break;case 30:sf(c);break;default:sf(c)}A=A.sibling}}function bc(A,c,p){for(p=p&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var y=c.alternate,B=A,E=c,G=E.flags;switch(E.tag){case 0:case 11:case 15:bc(B,E,p),Im(4,E);break;case 1:if(bc(B,E,p),y=E,B=y.stateNode,typeof B.componentDidMount=="function")try{B.componentDidMount()}catch(Oe){os(y,y.return,Oe)}if(y=E,B=y.updateQueue,B!==null){var ie=y.stateNode;try{var me=B.shared.hiddenCallbacks;if(me!==null)for(B.shared.hiddenCallbacks=null,B=0;B<me.length;B++)Tn(me[B],ie)}catch(Oe){os(y,y.return,Oe)}}p&&G&64&&RE(E),Em(E,E.return);break;case 27:QE(E);case 26:case 5:bc(B,E,p),p&&y===null&&G&4&&_E(E),Em(E,E.return);break;case 12:bc(B,E,p);break;case 13:bc(B,E,p),p&&G&4&&jE(B,E);break;case 22:E.memoizedState===null&&bc(B,E,p),Em(E,E.return);break;case 30:break;default:bc(B,E,p)}c=c.sibling}}function Zx(A,c){var p=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(p=A.memoizedState.cachePool.pool),A=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(A=c.memoizedState.cachePool.pool),A!==p&&(A!=null&&A.refCount++,p!=null&&jh(p))}function ev(A,c){A=null,c.alternate!==null&&(A=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==A&&(c.refCount++,A!=null&&jh(A))}function gA(A,c,p,y){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)KE(A,c,p,y),c=c.sibling}function KE(A,c,p,y){var B=c.flags;switch(c.tag){case 0:case 11:case 15:gA(A,c,p,y),B&2048&&Im(9,c);break;case 1:gA(A,c,p,y);break;case 3:gA(A,c,p,y),B&2048&&(A=null,c.alternate!==null&&(A=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==A&&(c.refCount++,A!=null&&jh(A)));break;case 12:if(B&2048){gA(A,c,p,y),A=c.stateNode;try{var E=c.memoizedProps,G=E.id,ie=E.onPostCommit;typeof ie=="function"&&ie(G,c.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(me){os(c,c.return,me)}}else gA(A,c,p,y);break;case 13:gA(A,c,p,y);break;case 23:break;case 22:E=c.stateNode,G=c.alternate,c.memoizedState!==null?E._visibility&2?gA(A,c,p,y):km(A,c):E._visibility&2?gA(A,c,p,y):(E._visibility|=2,Id(A,c,p,y,(c.subtreeFlags&10256)!==0)),B&2048&&Zx(G,c);break;case 24:gA(A,c,p,y),B&2048&&ev(c.alternate,c);break;default:gA(A,c,p,y)}}function Id(A,c,p,y,B){for(B=B&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var E=A,G=c,ie=p,me=y,Oe=G.flags;switch(G.tag){case 0:case 11:case 15:Id(E,G,ie,me,B),Im(8,G);break;case 23:break;case 22:var Xe=G.stateNode;G.memoizedState!==null?Xe._visibility&2?Id(E,G,ie,me,B):km(E,G):(Xe._visibility|=2,Id(E,G,ie,me,B)),B&&Oe&2048&&Zx(G.alternate,G);break;case 24:Id(E,G,ie,me,B),B&&Oe&2048&&ev(G.alternate,G);break;default:Id(E,G,ie,me,B)}c=c.sibling}}function km(A,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var p=A,y=c,B=y.flags;switch(y.tag){case 22:km(p,y),B&2048&&Zx(y.alternate,y);break;case 24:km(p,y),B&2048&&ev(y.alternate,y);break;default:km(p,y)}c=c.sibling}}var Fm=8192;function Ed(A){if(A.subtreeFlags&Fm)for(A=A.child;A!==null;)WE(A),A=A.sibling}function WE(A){switch(A.tag){case 26:Ed(A),A.flags&Fm&&A.memoizedState!==null&&vM(fl,A.memoizedState,A.memoizedProps);break;case 5:Ed(A);break;case 3:case 4:var c=fl;fl=oy(A.stateNode.containerInfo),Ed(A),fl=c;break;case 22:A.memoizedState===null&&(c=A.alternate,c!==null&&c.memoizedState!==null?(c=Fm,Fm=16777216,Ed(A),Fm=c):Ed(A));break;default:Ed(A)}}function qE(A){var c=A.alternate;if(c!==null&&(A=c.child,A!==null)){c.child=null;do c=A.sibling,A.sibling=null,A=c;while(A!==null)}}function Tm(A){var c=A.deletions;if((A.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];Wr=y,YE(y,A)}qE(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)XE(A),A=A.sibling}function XE(A){switch(A.tag){case 0:case 11:case 15:Tm(A),A.flags&2048&&yc(9,A,A.return);break;case 3:Tm(A);break;case 12:Tm(A);break;case 22:var c=A.stateNode;A.memoizedState!==null&&c._visibility&2&&(A.return===null||A.return.tag!==13)?(c._visibility&=-3,q1(A)):Tm(A);break;default:Tm(A)}}function q1(A){var c=A.deletions;if((A.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];Wr=y,YE(y,A)}qE(A)}for(A=A.child;A!==null;){switch(c=A,c.tag){case 0:case 11:case 15:yc(8,c,c.return),q1(c);break;case 22:p=c.stateNode,p._visibility&2&&(p._visibility&=-3,q1(c));break;default:q1(c)}A=A.sibling}}function YE(A,c){for(;Wr!==null;){var p=Wr;switch(p.tag){case 0:case 11:case 15:yc(8,p,c);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:jh(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,Wr=y;else e:for(p=A;Wr!==null;){y=Wr;var B=y.sibling,E=y.return;if(PE(y),y===p){Wr=null;break e}if(B!==null){B.return=E,Wr=B;break e}Wr=E}}}var O6={getCacheForType:function(A){var c=ar(ir),p=c.data.get(A);return p===void 0&&(p=A(),c.data.set(A,p)),p}},Q6=typeof WeakMap=="function"?WeakMap:Map,qn=0,fs=null,vn=null,Ln=0,Xn=0,Ki=null,xc=!1,kd=!1,tv=!1,gu=0,Ws=0,vc=0,rf=0,nv=0,bo=0,Fd=0,Dm=null,mi=null,sv=!1,rv=0,X1=1/0,Y1=null,Cc=null,ca=0,Bc=null,Td=null,Dd=0,av=0,iv=null,JE=null,Lm=0,ov=null;function Wi(){if((qn&2)!==0&&Ln!==0)return Ln&-Ln;if(P.T!==null){var A=ou;return A!==0?A:dv()}return Ui()}function ZE(){bo===0&&(bo=(Ln&536870912)===0||$n?Ql():536870912);var A=wo.current;return A!==null&&(A.flags|=32),bo}function qi(A,c,p){(A===fs&&(Xn===2||Xn===9)||A.cancelPendingCommit!==null)&&(Ld(A,0),Sc(A,Ln,bo,!1)),Va(A,p),((qn&2)===0||A!==fs)&&(A===fs&&((qn&2)===0&&(rf|=p),Ws===4&&Sc(A,Ln,bo,!1)),yA(A))}function ek(A,c,p){if((qn&6)!==0)throw Error(s(327));var y=!p&&(c&124)===0&&(c&A.expiredLanes)===0||wa(A,c),B=y?P6(A,c):uv(A,c,!0),E=y;do{if(B===0){kd&&!y&&Sc(A,c,0,!1);break}else{if(p=A.current.alternate,E&&!M6(p)){B=uv(A,c,!1),E=!1;continue}if(B===2){if(E=c,A.errorRecoveryDisabledLanes&E)var G=0;else G=A.pendingLanes&-536870913,G=G!==0?G:G&536870912?536870912:0;if(G!==0){c=G;e:{var ie=A;B=Dm;var me=ie.current.memoizedState.isDehydrated;if(me&&(Ld(ie,G).flags|=256),G=uv(ie,G,!1),G!==2){if(tv&&!me){ie.errorRecoveryDisabledLanes|=E,rf|=E,B=4;break e}E=mi,mi=B,E!==null&&(mi===null?mi=E:mi.push.apply(mi,E))}B=G}if(E=!1,B!==2)continue}}if(B===1){Ld(A,0),Sc(A,c,0,!0);break}e:{switch(y=A,E=B,E){case 0:case 1:throw Error(s(345));case 4:if((c&4194048)!==c)break;case 6:Sc(y,c,bo,!xc);break e;case 2:mi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((c&62914560)===c&&(B=rv+300-ct(),10<B)){if(Sc(y,c,bo,!xc),Gn(y,0,!0)!==0)break e;y.timeoutHandle=kk(tk.bind(null,y,p,mi,Y1,sv,c,bo,rf,Fd,xc,E,2,-0,0),B);break e}tk(y,p,mi,Y1,sv,c,bo,rf,Fd,xc,E,0,-0,0)}}break}while(!0);yA(A)}function tk(A,c,p,y,B,E,G,ie,me,Oe,Xe,nt,He,Pe){if(A.timeoutHandle=-1,nt=c.subtreeFlags,(nt&8192||(nt&16785408)===16785408)&&(Mm={stylesheets:null,count:0,unsuspend:xM},WE(c),nt=CM(),nt!==null)){A.cancelPendingCommit=nt(lk.bind(null,A,c,E,p,y,B,G,ie,me,Xe,1,He,Pe)),Sc(A,E,G,!Oe);return}lk(A,c,E,p,y,B,G,ie,me)}function M6(A){for(var c=A;;){var p=c.tag;if((p===0||p===11||p===15)&&c.flags&16384&&(p=c.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var B=p[y],E=B.getSnapshot;B=B.value;try{if(!yr(E(),B))return!1}catch{return!1}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===A)break;for(;c.sibling===null;){if(c.return===null||c.return===A)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Sc(A,c,p,y){c&=~nv,c&=~rf,A.suspendedLanes|=c,A.pingedLanes&=~c,y&&(A.warmLanes|=c),y=A.expirationTimes;for(var B=c;0<B;){var E=31-Bt(B),G=1<<E;y[E]=-1,B&=~G}p!==0&&Jt(A,p,c)}function J1(){return(qn&6)===0?(Um(0),!1):!0}function lv(){if(vn!==null){if(Xn===0)var A=vn.return;else A=vn,ol=br=null,wd(A),Sd=null,Bm=0,A=vn;for(;A!==null;)UE(A.alternate,A),A=A.return;vn=null}}function Ld(A,c){var p=A.timeoutHandle;p!==-1&&(A.timeoutHandle=-1,rM(p)),p=A.cancelPendingCommit,p!==null&&(A.cancelPendingCommit=null,p()),lv(),fs=A,vn=p=ho(A.current,null),Ln=c,Xn=0,Ki=null,xc=!1,kd=wa(A,c),tv=!1,Fd=bo=nv=rf=vc=Ws=0,mi=Dm=null,sv=!1,(c&8)!==0&&(c|=c&32);var y=A.entangledLanes;if(y!==0)for(A=A.entanglements,y&=c;0<y;){var B=31-Bt(y),E=1<<B;c|=A[B],y&=~E}return gu=c,ci(),p}function nk(A,c){Mt=null,P.H=Q1,c===ee||c===ae?(c=Fe(),Xn=3):c===ne?(c=Fe(),Xn=4):Xn=c===bE?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Ki=c,vn===null&&(Ws=1,j1(A,mn(c,A.current)))}function sk(){var A=P.H;return P.H=Q1,A===null?Q1:A}function rk(){var A=P.A;return P.A=O6,A}function Av(){Ws=4,xc||(Ln&4194048)!==Ln&&wo.current!==null||(kd=!0),(vc&134217727)===0&&(rf&134217727)===0||fs===null||Sc(fs,Ln,bo,!1)}function uv(A,c,p){var y=qn;qn|=2;var B=sk(),E=rk();(fs!==A||Ln!==c)&&(Y1=null,Ld(A,c)),c=!1;var G=Ws;e:do try{if(Xn!==0&&vn!==null){var ie=vn,me=Ki;switch(Xn){case 8:lv(),G=6;break e;case 3:case 2:case 9:case 6:wo.current===null&&(c=!0);var Oe=Xn;if(Xn=0,Ki=null,Ud(A,ie,me,Oe),p&&kd){G=0;break e}break;default:Oe=Xn,Xn=0,Ki=null,Ud(A,ie,me,Oe)}}H6(),G=Ws;break}catch(Xe){nk(A,Xe)}while(!0);return c&&A.shellSuspendCounter++,ol=br=null,qn=y,P.H=B,P.A=E,vn===null&&(fs=null,Ln=0,ci()),G}function H6(){for(;vn!==null;)ak(vn)}function P6(A,c){var p=qn;qn|=2;var y=sk(),B=rk();fs!==A||Ln!==c?(Y1=null,X1=ct()+500,Ld(A,c)):kd=wa(A,c);e:do try{if(Xn!==0&&vn!==null){c=vn;var E=Ki;t:switch(Xn){case 1:Xn=0,Ki=null,Ud(A,c,E,1);break;case 2:case 9:if(he(E)){Xn=0,Ki=null,ik(c);break}c=function(){Xn!==2&&Xn!==9||fs!==A||(Xn=7),yA(A)},E.then(c,c);break e;case 3:Xn=7;break e;case 4:Xn=5;break e;case 7:he(E)?(Xn=0,Ki=null,ik(c)):(Xn=0,Ki=null,Ud(A,c,E,7));break;case 5:var G=null;switch(vn.tag){case 26:G=vn.memoizedState;case 5:case 27:var ie=vn;if(!G||Hk(G)){Xn=0,Ki=null;var me=ie.sibling;if(me!==null)vn=me;else{var Oe=ie.return;Oe!==null?(vn=Oe,Z1(Oe)):vn=null}break t}}Xn=0,Ki=null,Ud(A,c,E,5);break;case 6:Xn=0,Ki=null,Ud(A,c,E,6);break;case 8:lv(),Ws=6;break e;default:throw Error(s(462))}}z6();break}catch(Xe){nk(A,Xe)}while(!0);return ol=br=null,P.H=y,P.A=B,qn=p,vn!==null?0:(fs=null,Ln=0,ci(),Ws)}function z6(){for(;vn!==null&&!_e();)ak(vn)}function ak(A){var c=DE(A.alternate,A,gu);A.memoizedProps=A.pendingProps,c===null?Z1(A):vn=c}function ik(A){var c=A,p=c.alternate;switch(c.tag){case 15:case 0:c=NE(p,c,c.pendingProps,c.type,void 0,Ln);break;case 11:c=NE(p,c,c.pendingProps,c.type.render,c.ref,Ln);break;case 5:wd(c);default:UE(p,c),c=vn=Mh(c,gu),c=DE(p,c,gu)}A.memoizedProps=A.pendingProps,c===null?Z1(A):vn=c}function Ud(A,c,p,y){ol=br=null,wd(c),Sd=null,Bm=0;var B=c.return;try{if(D6(A,B,c,p,Ln)){Ws=1,j1(A,mn(p,A.current)),vn=null;return}}catch(E){if(B!==null)throw vn=B,E;Ws=1,j1(A,mn(p,A.current)),vn=null;return}c.flags&32768?($n||y===1?A=!0:kd||(Ln&536870912)!==0?A=!1:(xc=A=!0,(y===2||y===9||y===3||y===6)&&(y=wo.current,y!==null&&y.tag===13&&(y.flags|=16384))),ok(c,A)):Z1(c)}function Z1(A){var c=A;do{if((c.flags&32768)!==0){ok(c,xc);return}A=c.return;var p=U6(c.alternate,c,gu);if(p!==null){vn=p;return}if(c=c.sibling,c!==null){vn=c;return}vn=c=A}while(c!==null);Ws===0&&(Ws=5)}function ok(A,c){do{var p=R6(A.alternate,A);if(p!==null){p.flags&=32767,vn=p;return}if(p=A.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!c&&(A=A.sibling,A!==null)){vn=A;return}vn=A=p}while(A!==null);Ws=6,vn=null}function lk(A,c,p,y,B,E,G,ie,me){A.cancelPendingCommit=null;do ey();while(ca!==0);if((qn&6)!==0)throw Error(s(327));if(c!==null){if(c===A.current)throw Error(s(177));if(E=c.lanes|c.childLanes,E|=Os,Bs(A,p,E,G,ie,me),A===fs&&(vn=fs=null,Ln=0),Td=c,Bc=A,Dd=p,av=E,iv=B,JE=y,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,K6(ut,function(){return fk(),null})):(A.callbackNode=null,A.callbackPriority=0),y=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||y){y=P.T,P.T=null,B=Y.p,Y.p=2,G=qn,qn|=4;try{$6(A,c,p)}finally{qn=G,Y.p=B,P.T=y}}ca=1,Ak(),uk(),ck()}}function Ak(){if(ca===1){ca=0;var A=Bc,c=Td,p=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||p){p=P.T,P.T=null;var y=Y.p;Y.p=2;var B=qn;qn|=4;try{VE(c,A);var E=vv,G=oa(A.containerInfo),ie=E.focusedElem,me=E.selectionRange;if(G!==ie&&ie&&ie.ownerDocument&&Zl(ie.ownerDocument.documentElement,ie)){if(me!==null&&Lr(ie)){var Oe=me.start,Xe=me.end;if(Xe===void 0&&(Xe=Oe),"selectionStart"in ie)ie.selectionStart=Oe,ie.selectionEnd=Math.min(Xe,ie.value.length);else{var nt=ie.ownerDocument||document,He=nt&&nt.defaultView||window;if(He.getSelection){var Pe=He.getSelection(),Yt=ie.textContent.length,jt=Math.min(me.start,Yt),ns=me.end===void 0?jt:Math.min(me.end,Yt);!Pe.extend&&jt>ns&&(G=ns,ns=jt,jt=G);var Te=Zo(ie,jt),Ie=Zo(ie,ns);if(Te&&Ie&&(Pe.rangeCount!==1||Pe.anchorNode!==Te.node||Pe.anchorOffset!==Te.offset||Pe.focusNode!==Ie.node||Pe.focusOffset!==Ie.offset)){var Re=nt.createRange();Re.setStart(Te.node,Te.offset),Pe.removeAllRanges(),jt>ns?(Pe.addRange(Re),Pe.extend(Ie.node,Ie.offset)):(Re.setEnd(Ie.node,Ie.offset),Pe.addRange(Re))}}}}for(nt=[],Pe=ie;Pe=Pe.parentNode;)Pe.nodeType===1&&nt.push({element:Pe,left:Pe.scrollLeft,top:Pe.scrollTop});for(typeof ie.focus=="function"&&ie.focus(),ie=0;ie<nt.length;ie++){var Je=nt[ie];Je.element.scrollLeft=Je.left,Je.element.scrollTop=Je.top}}hy=!!xv,vv=xv=null}finally{qn=B,Y.p=y,P.T=p}}A.current=c,ca=2}}function uk(){if(ca===2){ca=0;var A=Bc,c=Td,p=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||p){p=P.T,P.T=null;var y=Y.p;Y.p=2;var B=qn;qn|=4;try{HE(A,c.alternate,c)}finally{qn=B,Y.p=y,P.T=p}}ca=3}}function ck(){if(ca===4||ca===3){ca=0,fe();var A=Bc,c=Td,p=Dd,y=JE;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?ca=5:(ca=0,Td=Bc=null,hk(A,A.pendingLanes));var B=A.pendingLanes;if(B===0&&(Cc=null),tr(p),c=c.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Pt,c,void 0,(c.current.flags&128)===128)}catch{}if(y!==null){c=P.T,B=Y.p,Y.p=2,P.T=null;try{for(var E=A.onRecoverableError,G=0;G<y.length;G++){var ie=y[G];E(ie.value,{componentStack:ie.stack})}}finally{P.T=c,Y.p=B}}(Dd&3)!==0&&ey(),yA(A),B=A.pendingLanes,(p&4194090)!==0&&(B&42)!==0?A===ov?Lm++:(Lm=0,ov=A):Lm=0,Um(0)}}function hk(A,c){(A.pooledCacheLanes&=c)===0&&(c=A.pooledCache,c!=null&&(A.pooledCache=null,jh(c)))}function ey(A){return Ak(),uk(),ck(),fk()}function fk(){if(ca!==5)return!1;var A=Bc,c=av;av=0;var p=tr(Dd),y=P.T,B=Y.p;try{Y.p=32>p?32:p,P.T=null,p=iv,iv=null;var E=Bc,G=Dd;if(ca=0,Td=Bc=null,Dd=0,(qn&6)!==0)throw Error(s(331));var ie=qn;if(qn|=4,XE(E.current),KE(E,E.current,G,p),qn=ie,Um(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Pt,E)}catch{}return!0}finally{Y.p=B,P.T=y,hk(A,c)}}function dk(A,c,p){c=mn(p,c),c=Qx(A.stateNode,c,2),A=et(A,c,2),A!==null&&(Va(A,2),yA(A))}function os(A,c,p){if(A.tag===3)dk(A,A,p);else for(;c!==null;){if(c.tag===3){dk(c,A,p);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Cc===null||!Cc.has(y))){A=mn(p,A),p=yE(2),y=et(c,p,2),y!==null&&(wE(p,y,c,A),Va(y,2),yA(y));break}}c=c.return}}function cv(A,c,p){var y=A.pingCache;if(y===null){y=A.pingCache=new Q6;var B=new Set;y.set(c,B)}else B=y.get(c),B===void 0&&(B=new Set,y.set(c,B));B.has(p)||(tv=!0,B.add(p),A=j6.bind(null,A,c,p),c.then(A,A))}function j6(A,c,p){var y=A.pingCache;y!==null&&y.delete(c),A.pingedLanes|=A.suspendedLanes&p,A.warmLanes&=~p,fs===A&&(Ln&p)===p&&(Ws===4||Ws===3&&(Ln&62914560)===Ln&&300>ct()-rv?(qn&2)===0&&Ld(A,0):nv|=p,Fd===Ln&&(Fd=0)),yA(A)}function pk(A,c){c===0&&(c=gs()),A=tl(A,c),A!==null&&(Va(A,c),yA(A))}function V6(A){var c=A.memoizedState,p=0;c!==null&&(p=c.retryLane),pk(A,p)}function G6(A,c){var p=0;switch(A.tag){case 13:var y=A.stateNode,B=A.memoizedState;B!==null&&(p=B.retryLane);break;case 19:y=A.stateNode;break;case 22:y=A.stateNode._retryCache;break;default:throw Error(s(314))}y!==null&&y.delete(c),pk(A,p)}function K6(A,c){return tt(A,c)}var ty=null,Rd=null,hv=!1,ny=!1,fv=!1,af=0;function yA(A){A!==Rd&&A.next===null&&(Rd===null?ty=Rd=A:Rd=Rd.next=A),ny=!0,hv||(hv=!0,q6())}function Um(A,c){if(!fv&&ny){fv=!0;do for(var p=!1,y=ty;y!==null;){if(A!==0){var B=y.pendingLanes;if(B===0)var E=0;else{var G=y.suspendedLanes,ie=y.pingedLanes;E=(1<<31-Bt(42|A)+1)-1,E&=B&~(G&~ie),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(p=!0,wk(y,E))}else E=Ln,E=Gn(y,y===fs?E:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(E&3)===0||wa(y,E)||(p=!0,wk(y,E));y=y.next}while(p);fv=!1}}function W6(){mk()}function mk(){ny=hv=!1;var A=0;af!==0&&(sM()&&(A=af),af=0);for(var c=ct(),p=null,y=ty;y!==null;){var B=y.next,E=gk(y,c);E===0?(y.next=null,p===null?ty=B:p.next=B,B===null&&(Rd=p)):(p=y,(A!==0||(E&3)!==0)&&(ny=!0)),y=B}Um(A)}function gk(A,c){for(var p=A.suspendedLanes,y=A.pingedLanes,B=A.expirationTimes,E=A.pendingLanes&-62914561;0<E;){var G=31-Bt(E),ie=1<<G,me=B[G];me===-1?((ie&p)===0||(ie&y)!==0)&&(B[G]=_n(ie,c)):me<=c&&(A.expiredLanes|=ie),E&=~ie}if(c=fs,p=Ln,p=Gn(A,A===c?p:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),y=A.callbackNode,p===0||A===c&&(Xn===2||Xn===9)||A.cancelPendingCommit!==null)return y!==null&&y!==null&&dt(y),A.callbackNode=null,A.callbackPriority=0;if((p&3)===0||wa(A,p)){if(c=p&-p,c===A.callbackPriority)return c;switch(y!==null&&dt(y),tr(p)){case 2:case 8:p=ot;break;case 32:p=ut;break;case 268435456:p=St;break;default:p=ut}return y=yk.bind(null,A),p=tt(p,y),A.callbackPriority=c,A.callbackNode=p,c}return y!==null&&y!==null&&dt(y),A.callbackPriority=2,A.callbackNode=null,2}function yk(A,c){if(ca!==0&&ca!==5)return A.callbackNode=null,A.callbackPriority=0,null;var p=A.callbackNode;if(ey()&&A.callbackNode!==p)return null;var y=Ln;return y=Gn(A,A===fs?y:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),y===0?null:(ek(A,y,c),gk(A,ct()),A.callbackNode!=null&&A.callbackNode===p?yk.bind(null,A):null)}function wk(A,c){if(ey())return null;ek(A,c,!0)}function q6(){aM(function(){(qn&6)!==0?tt(rt,W6):mk()})}function dv(){return af===0&&(af=Ql()),af}function bk(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:Wo(""+A)}function xk(A,c){var p=c.ownerDocument.createElement("input");return p.name=c.name,p.value=c.value,A.id&&p.setAttribute("form",A.id),c.parentNode.insertBefore(p,c),A=new FormData(A),p.parentNode.removeChild(p),A}function X6(A,c,p,y,B){if(c==="submit"&&p&&p.stateNode===B){var E=bk((B[ys]||null).action),G=y.submitter;G&&(c=(c=G[ys]||null)?bk(c.formAction):G.getAttribute("formAction"),c!==null&&(E=c,G=null));var ie=new Gl("action","action",null,y,B);A.push({event:ie,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(af!==0){var me=G?xk(B,G):new FormData(B);yo(p,{pending:!0,data:me,method:B.method,action:E},null,me)}}else typeof E=="function"&&(ie.preventDefault(),me=G?xk(B,G):new FormData(B),yo(p,{pending:!0,data:me,method:B.method,action:E},E,me))},currentTarget:B}]})}}for(var pv=0;pv<tu.length;pv++){var mv=tu[pv],Y6=mv.toLowerCase(),J6=mv[0].toUpperCase()+mv.slice(1);Is(Y6,"on"+J6)}Is(ac,"onAnimationEnd"),Is(tA,"onAnimationIteration"),Is(nA,"onAnimationStart"),Is("dblclick","onDoubleClick"),Is("focusin","onFocus"),Is("focusout","onBlur"),Is(sA,"onTransitionRun"),Is(eu,"onTransitionStart"),Is(ic,"onTransitionCancel"),Is(rA,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rm));function vk(A,c){c=(c&4)!==0;for(var p=0;p<A.length;p++){var y=A[p],B=y.event;y=y.listeners;e:{var E=void 0;if(c)for(var G=y.length-1;0<=G;G--){var ie=y[G],me=ie.instance,Oe=ie.currentTarget;if(ie=ie.listener,me!==E&&B.isPropagationStopped())break e;E=ie,B.currentTarget=Oe;try{E(B)}catch(Xe){z1(Xe)}B.currentTarget=null,E=me}else for(G=0;G<y.length;G++){if(ie=y[G],me=ie.instance,Oe=ie.currentTarget,ie=ie.listener,me!==E&&B.isPropagationStopped())break e;E=ie,B.currentTarget=Oe;try{E(B)}catch(Xe){z1(Xe)}B.currentTarget=null,E=me}}}}function Cn(A,c){var p=c[Rs];p===void 0&&(p=c[Rs]=new Set);var y=A+"__bubble";p.has(y)||(Ck(c,A,2,!1),p.add(y))}function gv(A,c,p){var y=0;c&&(y|=4),Ck(p,A,y,c)}var sy="_reactListening"+Math.random().toString(36).slice(2);function yv(A){if(!A[sy]){A[sy]=!0,Ml.forEach(function(p){p!=="selectionchange"&&(Z6.has(p)||gv(p,!1,A),gv(p,!0,A))});var c=A.nodeType===9?A:A.ownerDocument;c===null||c[sy]||(c[sy]=!0,gv("selectionchange",!1,c))}}function Ck(A,c,p,y){switch(Kk(c)){case 2:var B=NM;break;case 8:B=IM;break;default:B=Dv}p=B.bind(null,c,p,A),B=void 0,!Gu||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(B=!0),y?B!==void 0?A.addEventListener(c,p,{capture:!0,passive:B}):A.addEventListener(c,p,!0):B!==void 0?A.addEventListener(c,p,{passive:B}):A.addEventListener(c,p,!1)}function wv(A,c,p,y,B){var E=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var G=y.tag;if(G===3||G===4){var ie=y.stateNode.containerInfo;if(ie===B)break;if(G===4)for(G=y.return;G!==null;){var me=G.tag;if((me===3||me===4)&&G.stateNode.containerInfo===B)return;G=G.return}for(;ie!==null;){if(G=zr(ie),G===null)return;if(me=G.tag,me===5||me===6||me===26||me===27){y=E=G;continue e}ie=ie.parentNode}}y=y.return}od(function(){var Oe=E,Xe=mr(p),nt=[];e:{var He=el.get(A);if(He!==void 0){var Pe=Gl,Yt=A;switch(A){case"keypress":if(Vl(p)===0)break e;case"keydown":case"keyup":Pe=ec;break;case"focusin":Yt="focus",Pe=KA;break;case"focusout":Yt="blur",Pe=KA;break;case"beforeblur":case"afterblur":Pe=KA;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=Ao;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=Wl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=$h;break;case ac:case tA:case nA:Pe=am;break;case rA:Pe=X;break;case"scroll":case"scrollend":Pe=Ad;break;case"wheel":Pe=ve;break;case"copy":case"cut":case"paste":Pe=im;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=tc;break;case"toggle":case"beforetoggle":Pe=Ke}var jt=(c&4)!==0,ns=!jt&&(A==="scroll"||A==="scrollend"),Te=jt?He!==null?He+"Capture":null:He;jt=[];for(var Ie=Oe,Re;Ie!==null;){var Je=Ie;if(Re=Je.stateNode,Je=Je.tag,Je!==5&&Je!==26&&Je!==27||Re===null||Te===null||(Je=va(Ie,Te),Je!=null&&jt.push($m(Ie,Je,Re))),ns)break;Ie=Ie.return}0<jt.length&&(He=new Pe(He,Yt,null,p,Xe),nt.push({event:He,listeners:jt}))}}if((c&7)===0){e:{if(He=A==="mouseover"||A==="pointerover",Pe=A==="mouseout"||A==="pointerout",He&&p!==Vu&&(Yt=p.relatedTarget||p.fromElement)&&(zr(Yt)||Yt[nr]))break e;if((Pe||He)&&(He=Xe.window===Xe?Xe:(He=Xe.ownerDocument)?He.defaultView||He.parentWindow:window,Pe?(Yt=p.relatedTarget||p.toElement,Pe=Oe,Yt=Yt?zr(Yt):null,Yt!==null&&(ns=a(Yt),jt=Yt.tag,Yt!==ns||jt!==5&&jt!==27&&jt!==6)&&(Yt=null)):(Pe=null,Yt=Oe),Pe!==Yt)){if(jt=Ao,Je="onMouseLeave",Te="onMouseEnter",Ie="mouse",(A==="pointerout"||A==="pointerover")&&(jt=tc,Je="onPointerLeave",Te="onPointerEnter",Ie="pointer"),ns=Pe==null?He:ba(Pe),Re=Yt==null?He:ba(Yt),He=new jt(Je,Ie+"leave",Pe,p,Xe),He.target=ns,He.relatedTarget=Re,Je=null,zr(Xe)===Oe&&(jt=new jt(Te,Ie+"enter",Yt,p,Xe),jt.target=Re,jt.relatedTarget=ns,Je=jt),ns=Je,Pe&&Yt)t:{for(jt=Pe,Te=Yt,Ie=0,Re=jt;Re;Re=$d(Re))Ie++;for(Re=0,Je=Te;Je;Je=$d(Je))Re++;for(;0<Ie-Re;)jt=$d(jt),Ie--;for(;0<Re-Ie;)Te=$d(Te),Re--;for(;Ie--;){if(jt===Te||Te!==null&&jt===Te.alternate)break t;jt=$d(jt),Te=$d(Te)}jt=null}else jt=null;Pe!==null&&Bk(nt,He,Pe,jt,!1),Yt!==null&&ns!==null&&Bk(nt,ns,Yt,jt,!0)}}e:{if(He=Oe?ba(Oe):window,Pe=He.nodeName&&He.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&He.type==="file")var Et=sc;else if(Qi(He))if(XA)Et=cd;else{Et=lm;var wn=Ca}else Pe=He.nodeName,!Pe||Pe.toLowerCase()!=="input"||He.type!=="checkbox"&&He.type!=="radio"?Oe&&Fh(Oe.elementType)&&(Et=sc):Et=Oh;if(Et&&(Et=Et(A,Oe))){_h(nt,Et,p,Xe);break e}wn&&wn(A,He,Oe),A==="focusout"&&Oe&&He.type==="number"&&Oe.memoizedProps.value!=null&&Ih(He,"number",He.value)}switch(wn=Oe?ba(Oe):window,A){case"focusin":(Qi(wn)||wn.contentEditable==="true")&&(Ba=wn,Mi=Oe,uo=null);break;case"focusout":uo=Mi=Ba=null;break;case"mousedown":Hi=!0;break;case"contextmenu":case"mouseup":case"dragend":Hi=!1,Ns(nt,p,Xe);break;case"selectionchange":if(eA)break;case"keydown":case"keyup":Ns(nt,p,Xe)}var Ot;if(yt)e:{switch(A){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else _s?ws(A,p)&&(Gt="onCompositionEnd"):A==="keydown"&&p.keyCode===229&&(Gt="onCompositionStart");Gt&&(Zt&&p.locale!=="ko"&&(_s||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&_s&&(Ot=ld()):(Ai=Xe,Dh="value"in Ai?Ai.value:Ai.textContent,_s=!0)),wn=ry(Oe,Gt),0<wn.length&&(Gt=new Yu(Gt,A,null,p,Xe),nt.push({event:Gt,listeners:wn}),Ot?Gt.data=Ot:(Ot=$s(p),Ot!==null&&(Gt.data=Ot)))),(Ot=nn?gr(A,p):Oi(A,p))&&(Gt=ry(Oe,"onBeforeInput"),0<Gt.length&&(wn=new Yu("onBeforeInput","beforeinput",null,p,Xe),nt.push({event:wn,listeners:Gt}),wn.data=Ot)),X6(nt,A,Oe,p,Xe)}vk(nt,c)})}function $m(A,c,p){return{instance:A,listener:c,currentTarget:p}}function ry(A,c){for(var p=c+"Capture",y=[];A!==null;){var B=A,E=B.stateNode;if(B=B.tag,B!==5&&B!==26&&B!==27||E===null||(B=va(A,p),B!=null&&y.unshift($m(A,B,E)),B=va(A,c),B!=null&&y.push($m(A,B,E))),A.tag===3)return y;A=A.return}return[]}function $d(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function Bk(A,c,p,y,B){for(var E=c._reactName,G=[];p!==null&&p!==y;){var ie=p,me=ie.alternate,Oe=ie.stateNode;if(ie=ie.tag,me!==null&&me===y)break;ie!==5&&ie!==26&&ie!==27||Oe===null||(me=Oe,B?(Oe=va(p,E),Oe!=null&&G.unshift($m(p,Oe,me))):B||(Oe=va(p,E),Oe!=null&&G.push($m(p,Oe,me)))),p=p.return}G.length!==0&&A.push({event:c,listeners:G})}var eM=/\r\n?/g,tM=/\u0000|\uFFFD/g;function Sk(A){return(typeof A=="string"?A:""+A).replace(eM,`
`).replace(tM,"")}function Nk(A,c){return c=Sk(c),Sk(A)===c}function ay(){}function ts(A,c,p,y,B,E){switch(p){case"children":typeof y=="string"?c==="body"||c==="textarea"&&y===""||zl(A,y):(typeof y=="number"||typeof y=="bigint")&&c!=="body"&&zl(A,""+y);break;case"className":jA(A,"class",y);break;case"tabIndex":jA(A,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":jA(A,p,y);break;case"style":id(A,y,E);break;case"data":if(c!=="object"){jA(A,"data",y);break}case"src":case"href":if(y===""&&(c!=="a"||p!=="href")){A.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){A.removeAttribute(p);break}y=Wo(""+y),A.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){A.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(p==="formAction"?(c!=="input"&&ts(A,c,"name",B.name,B,null),ts(A,c,"formEncType",B.formEncType,B,null),ts(A,c,"formMethod",B.formMethod,B,null),ts(A,c,"formTarget",B.formTarget,B,null)):(ts(A,c,"encType",B.encType,B,null),ts(A,c,"method",B.method,B,null),ts(A,c,"target",B.target,B,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){A.removeAttribute(p);break}y=Wo(""+y),A.setAttribute(p,y);break;case"onClick":y!=null&&(A.onclick=ay);break;case"onScroll":y!=null&&Cn("scroll",A);break;case"onScrollEnd":y!=null&&Cn("scrollend",A);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(s(61));if(p=y.__html,p!=null){if(B.children!=null)throw Error(s(60));A.innerHTML=p}}break;case"multiple":A.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":A.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){A.removeAttribute("xlink:href");break}p=Wo(""+y),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?A.setAttribute(p,""+y):A.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?A.setAttribute(p,""):A.removeAttribute(p);break;case"capture":case"download":y===!0?A.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?A.setAttribute(p,y):A.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?A.setAttribute(p,y):A.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?A.removeAttribute(p):A.setAttribute(p,y);break;case"popover":Cn("beforetoggle",A),Cn("toggle",A),jo(A,"popover",y);break;case"xlinkActuate":$i(A,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":$i(A,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":$i(A,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":$i(A,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":$i(A,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":$i(A,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":$i(A,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":$i(A,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":$i(A,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":jo(A,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Ko.get(p)||p,jo(A,p,y))}}function bv(A,c,p,y,B,E){switch(p){case"style":id(A,y,E);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(s(61));if(p=y.__html,p!=null){if(B.children!=null)throw Error(s(60));A.innerHTML=p}}break;case"children":typeof y=="string"?zl(A,y):(typeof y=="number"||typeof y=="bigint")&&zl(A,""+y);break;case"onScroll":y!=null&&Cn("scroll",A);break;case"onScrollEnd":y!=null&&Cn("scrollend",A);break;case"onClick":y!=null&&(A.onclick=ay);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zA.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(B=p.endsWith("Capture"),c=p.slice(2,B?p.length-7:void 0),E=A[ys]||null,E=E!=null?E[p]:null,typeof E=="function"&&A.removeEventListener(c,E,B),typeof y=="function")){typeof E!="function"&&E!==null&&(p in A?A[p]=null:A.hasAttribute(p)&&A.removeAttribute(p)),A.addEventListener(c,y,B);break e}p in A?A[p]=y:y===!0?A.setAttribute(p,""):jo(A,p,y)}}}function ha(A,c,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Cn("error",A),Cn("load",A);var y=!1,B=!1,E;for(E in p)if(p.hasOwnProperty(E)){var G=p[E];if(G!=null)switch(E){case"src":y=!0;break;case"srcSet":B=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,c));default:ts(A,c,E,G,p,null)}}B&&ts(A,c,"srcSet",p.srcSet,p,null),y&&ts(A,c,"src",p.src,p,null);return;case"input":Cn("invalid",A);var ie=E=G=B=null,me=null,Oe=null;for(y in p)if(p.hasOwnProperty(y)){var Xe=p[y];if(Xe!=null)switch(y){case"name":B=Xe;break;case"type":G=Xe;break;case"checked":me=Xe;break;case"defaultChecked":Oe=Xe;break;case"value":E=Xe;break;case"defaultValue":ie=Xe;break;case"children":case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(s(137,c));break;default:ts(A,c,y,Xe,p,null)}}Nh(A,E,ie,me,Oe,G,B,!1),Pl(A);return;case"select":Cn("invalid",A),y=G=E=null;for(B in p)if(p.hasOwnProperty(B)&&(ie=p[B],ie!=null))switch(B){case"value":E=ie;break;case"defaultValue":G=ie;break;case"multiple":y=ie;default:ts(A,c,B,ie,p,null)}c=E,p=G,A.multiple=!!y,c!=null?Go(A,!!y,c,!1):p!=null&&Go(A,!!y,p,!0);return;case"textarea":Cn("invalid",A),E=B=y=null;for(G in p)if(p.hasOwnProperty(G)&&(ie=p[G],ie!=null))switch(G){case"value":y=ie;break;case"defaultValue":B=ie;break;case"children":E=ie;break;case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(91));break;default:ts(A,c,G,ie,p,null)}Eh(A,y,B,E),Pl(A);return;case"option":for(me in p)if(p.hasOwnProperty(me)&&(y=p[me],y!=null))switch(me){case"selected":A.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:ts(A,c,me,y,p,null)}return;case"dialog":Cn("beforetoggle",A),Cn("toggle",A),Cn("cancel",A),Cn("close",A);break;case"iframe":case"object":Cn("load",A);break;case"video":case"audio":for(y=0;y<Rm.length;y++)Cn(Rm[y],A);break;case"image":Cn("error",A),Cn("load",A);break;case"details":Cn("toggle",A);break;case"embed":case"source":case"link":Cn("error",A),Cn("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Oe in p)if(p.hasOwnProperty(Oe)&&(y=p[Oe],y!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,c));default:ts(A,c,Oe,y,p,null)}return;default:if(Fh(c)){for(Xe in p)p.hasOwnProperty(Xe)&&(y=p[Xe],y!==void 0&&bv(A,c,Xe,y,p,void 0));return}}for(ie in p)p.hasOwnProperty(ie)&&(y=p[ie],y!=null&&ts(A,c,ie,y,p,null))}function nM(A,c,p,y){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var B=null,E=null,G=null,ie=null,me=null,Oe=null,Xe=null;for(Pe in p){var nt=p[Pe];if(p.hasOwnProperty(Pe)&&nt!=null)switch(Pe){case"checked":break;case"value":break;case"defaultValue":me=nt;default:y.hasOwnProperty(Pe)||ts(A,c,Pe,null,y,nt)}}for(var He in y){var Pe=y[He];if(nt=p[He],y.hasOwnProperty(He)&&(Pe!=null||nt!=null))switch(He){case"type":E=Pe;break;case"name":B=Pe;break;case"checked":Oe=Pe;break;case"defaultChecked":Xe=Pe;break;case"value":G=Pe;break;case"defaultValue":ie=Pe;break;case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(s(137,c));break;default:Pe!==nt&&ts(A,c,He,Pe,y,nt)}}GA(A,G,ie,me,Oe,Xe,E,B);return;case"select":Pe=G=ie=He=null;for(E in p)if(me=p[E],p.hasOwnProperty(E)&&me!=null)switch(E){case"value":break;case"multiple":Pe=me;default:y.hasOwnProperty(E)||ts(A,c,E,null,y,me)}for(B in y)if(E=y[B],me=p[B],y.hasOwnProperty(B)&&(E!=null||me!=null))switch(B){case"value":He=E;break;case"defaultValue":ie=E;break;case"multiple":G=E;default:E!==me&&ts(A,c,B,E,y,me)}c=ie,p=G,y=Pe,He!=null?Go(A,!!p,He,!1):!!y!=!!p&&(c!=null?Go(A,!!p,c,!0):Go(A,!!p,p?[]:"",!1));return;case"textarea":Pe=He=null;for(ie in p)if(B=p[ie],p.hasOwnProperty(ie)&&B!=null&&!y.hasOwnProperty(ie))switch(ie){case"value":break;case"children":break;default:ts(A,c,ie,null,y,B)}for(G in y)if(B=y[G],E=p[G],y.hasOwnProperty(G)&&(B!=null||E!=null))switch(G){case"value":He=B;break;case"defaultValue":Pe=B;break;case"children":break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(91));break;default:B!==E&&ts(A,c,G,B,y,E)}rd(A,He,Pe);return;case"option":for(var Yt in p)if(He=p[Yt],p.hasOwnProperty(Yt)&&He!=null&&!y.hasOwnProperty(Yt))switch(Yt){case"selected":A.selected=!1;break;default:ts(A,c,Yt,null,y,He)}for(me in y)if(He=y[me],Pe=p[me],y.hasOwnProperty(me)&&He!==Pe&&(He!=null||Pe!=null))switch(me){case"selected":A.selected=He&&typeof He!="function"&&typeof He!="symbol";break;default:ts(A,c,me,He,y,Pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var jt in p)He=p[jt],p.hasOwnProperty(jt)&&He!=null&&!y.hasOwnProperty(jt)&&ts(A,c,jt,null,y,He);for(Oe in y)if(He=y[Oe],Pe=p[Oe],y.hasOwnProperty(Oe)&&He!==Pe&&(He!=null||Pe!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(s(137,c));break;default:ts(A,c,Oe,He,y,Pe)}return;default:if(Fh(c)){for(var ns in p)He=p[ns],p.hasOwnProperty(ns)&&He!==void 0&&!y.hasOwnProperty(ns)&&bv(A,c,ns,void 0,y,He);for(Xe in y)He=y[Xe],Pe=p[Xe],!y.hasOwnProperty(Xe)||He===Pe||He===void 0&&Pe===void 0||bv(A,c,Xe,He,y,Pe);return}}for(var Te in p)He=p[Te],p.hasOwnProperty(Te)&&He!=null&&!y.hasOwnProperty(Te)&&ts(A,c,Te,null,y,He);for(nt in y)He=y[nt],Pe=p[nt],!y.hasOwnProperty(nt)||He===Pe||He==null&&Pe==null||ts(A,c,nt,He,y,Pe)}var xv=null,vv=null;function iy(A){return A.nodeType===9?A:A.ownerDocument}function Ik(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ek(A,c){if(A===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&c==="foreignObject"?0:A}function Cv(A,c){return A==="textarea"||A==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Bv=null;function sM(){var A=window.event;return A&&A.type==="popstate"?A===Bv?!1:(Bv=A,!0):(Bv=null,!1)}var kk=typeof setTimeout=="function"?setTimeout:void 0,rM=typeof clearTimeout=="function"?clearTimeout:void 0,Fk=typeof Promise=="function"?Promise:void 0,aM=typeof queueMicrotask=="function"?queueMicrotask:typeof Fk<"u"?function(A){return Fk.resolve(null).then(A).catch(iM)}:kk;function iM(A){setTimeout(function(){throw A})}function Nc(A){return A==="head"}function Tk(A,c){var p=c,y=0,B=0;do{var E=p.nextSibling;if(A.removeChild(p),E&&E.nodeType===8)if(p=E.data,p==="/$"){if(0<y&&8>y){p=y;var G=A.ownerDocument;if(p&1&&_m(G.documentElement),p&2&&_m(G.body),p&4)for(p=G.head,_m(p),G=p.firstChild;G;){var ie=G.nextSibling,me=G.nodeName;G[Ka]||me==="SCRIPT"||me==="STYLE"||me==="LINK"&&G.rel.toLowerCase()==="stylesheet"||p.removeChild(G),G=ie}}if(B===0){A.removeChild(E),Vm(c);return}B--}else p==="$"||p==="$?"||p==="$!"?B++:y=p.charCodeAt(0)-48;else y=0;p=E}while(p);Vm(c)}function Sv(A){var c=A.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var p=c;switch(c=c.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":Sv(p),Wa(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}A.removeChild(p)}}function oM(A,c,p,y){for(;A.nodeType===1;){var B=p;if(A.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(y){if(!A[Ka])switch(c){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(E=A.getAttribute("rel"),E==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(E!==B.rel||A.getAttribute("href")!==(B.href==null||B.href===""?null:B.href)||A.getAttribute("crossorigin")!==(B.crossOrigin==null?null:B.crossOrigin)||A.getAttribute("title")!==(B.title==null?null:B.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(E=A.getAttribute("src"),(E!==(B.src==null?null:B.src)||A.getAttribute("type")!==(B.type==null?null:B.type)||A.getAttribute("crossorigin")!==(B.crossOrigin==null?null:B.crossOrigin))&&E&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(c==="input"&&A.type==="hidden"){var E=B.name==null?null:""+B.name;if(B.type==="hidden"&&A.getAttribute("name")===E)return A}else return A;if(A=dl(A.nextSibling),A===null)break}return null}function lM(A,c,p){if(c==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!p||(A=dl(A.nextSibling),A===null))return null;return A}function Nv(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function AM(A,c){var p=A.ownerDocument;if(A.data!=="$?"||p.readyState==="complete")c();else{var y=function(){c(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),A._reactRetry=y}}function dl(A){for(;A!=null;A=A.nextSibling){var c=A.nodeType;if(c===1||c===3)break;if(c===8){if(c=A.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return A}var Iv=null;function Dk(A){A=A.previousSibling;for(var c=0;A;){if(A.nodeType===8){var p=A.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return A;c--}else p==="/$"&&c++}A=A.previousSibling}return null}function Lk(A,c,p){switch(c=iy(p),A){case"html":if(A=c.documentElement,!A)throw Error(s(452));return A;case"head":if(A=c.head,!A)throw Error(s(453));return A;case"body":if(A=c.body,!A)throw Error(s(454));return A;default:throw Error(s(451))}}function _m(A){for(var c=A.attributes;c.length;)A.removeAttributeNode(c[0]);Wa(A)}var xo=new Map,Uk=new Set;function oy(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var yu=Y.d;Y.d={f:uM,r:cM,D:hM,C:fM,L:dM,m:pM,X:gM,S:mM,M:yM};function uM(){var A=yu.f(),c=J1();return A||c}function cM(A){var c=jr(A);c!==null&&c.tag===5&&c.type==="form"?ef(c):yu.r(A)}var _d=typeof document>"u"?null:document;function Rk(A,c,p){var y=_d;if(y&&typeof c=="string"&&c){var B=is(c);B='link[rel="'+A+'"][href="'+B+'"]',typeof p=="string"&&(B+='[crossorigin="'+p+'"]'),Uk.has(B)||(Uk.add(B),A={rel:A,crossOrigin:p,href:c},y.querySelector(B)===null&&(c=y.createElement("link"),ha(c,"link",A),Kn(c),y.head.appendChild(c)))}}function hM(A){yu.D(A),Rk("dns-prefetch",A,null)}function fM(A,c){yu.C(A,c),Rk("preconnect",A,c)}function dM(A,c,p){yu.L(A,c,p);var y=_d;if(y&&A&&c){var B='link[rel="preload"][as="'+is(c)+'"]';c==="image"&&p&&p.imageSrcSet?(B+='[imagesrcset="'+is(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(B+='[imagesizes="'+is(p.imageSizes)+'"]')):B+='[href="'+is(A)+'"]';var E=B;switch(c){case"style":E=Od(A);break;case"script":E=Qd(A)}xo.has(E)||(A=h({rel:"preload",href:c==="image"&&p&&p.imageSrcSet?void 0:A,as:c},p),xo.set(E,A),y.querySelector(B)!==null||c==="style"&&y.querySelector(Om(E))||c==="script"&&y.querySelector(Qm(E))||(c=y.createElement("link"),ha(c,"link",A),Kn(c),y.head.appendChild(c)))}}function pM(A,c){yu.m(A,c);var p=_d;if(p&&A){var y=c&&typeof c.as=="string"?c.as:"script",B='link[rel="modulepreload"][as="'+is(y)+'"][href="'+is(A)+'"]',E=B;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Qd(A)}if(!xo.has(E)&&(A=h({rel:"modulepreload",href:A},c),xo.set(E,A),p.querySelector(B)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Qm(E)))return}y=p.createElement("link"),ha(y,"link",A),Kn(y),p.head.appendChild(y)}}}function mM(A,c,p){yu.S(A,c,p);var y=_d;if(y&&A){var B=Dr(y).hoistableStyles,E=Od(A);c=c||"default";var G=B.get(E);if(!G){var ie={loading:0,preload:null};if(G=y.querySelector(Om(E)))ie.loading=5;else{A=h({rel:"stylesheet",href:A,"data-precedence":c},p),(p=xo.get(E))&&Ev(A,p);var me=G=y.createElement("link");Kn(me),ha(me,"link",A),me._p=new Promise(function(Oe,Xe){me.onload=Oe,me.onerror=Xe}),me.addEventListener("load",function(){ie.loading|=1}),me.addEventListener("error",function(){ie.loading|=2}),ie.loading|=4,ly(G,c,y)}G={type:"stylesheet",instance:G,count:1,state:ie},B.set(E,G)}}}function gM(A,c){yu.X(A,c);var p=_d;if(p&&A){var y=Dr(p).hoistableScripts,B=Qd(A),E=y.get(B);E||(E=p.querySelector(Qm(B)),E||(A=h({src:A,async:!0},c),(c=xo.get(B))&&kv(A,c),E=p.createElement("script"),Kn(E),ha(E,"link",A),p.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},y.set(B,E))}}function yM(A,c){yu.M(A,c);var p=_d;if(p&&A){var y=Dr(p).hoistableScripts,B=Qd(A),E=y.get(B);E||(E=p.querySelector(Qm(B)),E||(A=h({src:A,async:!0,type:"module"},c),(c=xo.get(B))&&kv(A,c),E=p.createElement("script"),Kn(E),ha(E,"link",A),p.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},y.set(B,E))}}function $k(A,c,p,y){var B=(B=ce.current)?oy(B):null;if(!B)throw Error(s(446));switch(A){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(c=Od(p.href),p=Dr(B).hoistableStyles,y=p.get(c),y||(y={type:"style",instance:null,count:0,state:null},p.set(c,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){A=Od(p.href);var E=Dr(B).hoistableStyles,G=E.get(A);if(G||(B=B.ownerDocument||B,G={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(A,G),(E=B.querySelector(Om(A)))&&!E._p&&(G.instance=E,G.state.loading=5),xo.has(A)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},xo.set(A,p),E||wM(B,A,p,G.state))),c&&y===null)throw Error(s(528,""));return G}if(c&&y!==null)throw Error(s(529,""));return null;case"script":return c=p.async,p=p.src,typeof p=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Qd(p),p=Dr(B).hoistableScripts,y=p.get(c),y||(y={type:"script",instance:null,count:0,state:null},p.set(c,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,A))}}function Od(A){return'href="'+is(A)+'"'}function Om(A){return'link[rel="stylesheet"]['+A+"]"}function _k(A){return h({},A,{"data-precedence":A.precedence,precedence:null})}function wM(A,c,p,y){A.querySelector('link[rel="preload"][as="style"]['+c+"]")?y.loading=1:(c=A.createElement("link"),y.preload=c,c.addEventListener("load",function(){return y.loading|=1}),c.addEventListener("error",function(){return y.loading|=2}),ha(c,"link",p),Kn(c),A.head.appendChild(c))}function Qd(A){return'[src="'+is(A)+'"]'}function Qm(A){return"script[async]"+A}function Ok(A,c,p){if(c.count++,c.instance===null)switch(c.type){case"style":var y=A.querySelector('style[data-href~="'+is(p.href)+'"]');if(y)return c.instance=y,Kn(y),y;var B=h({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(A.ownerDocument||A).createElement("style"),Kn(y),ha(y,"style",B),ly(y,p.precedence,A),c.instance=y;case"stylesheet":B=Od(p.href);var E=A.querySelector(Om(B));if(E)return c.state.loading|=4,c.instance=E,Kn(E),E;y=_k(p),(B=xo.get(B))&&Ev(y,B),E=(A.ownerDocument||A).createElement("link"),Kn(E);var G=E;return G._p=new Promise(function(ie,me){G.onload=ie,G.onerror=me}),ha(E,"link",y),c.state.loading|=4,ly(E,p.precedence,A),c.instance=E;case"script":return E=Qd(p.src),(B=A.querySelector(Qm(E)))?(c.instance=B,Kn(B),B):(y=p,(B=xo.get(E))&&(y=h({},p),kv(y,B)),A=A.ownerDocument||A,B=A.createElement("script"),Kn(B),ha(B,"link",y),A.head.appendChild(B),c.instance=B);case"void":return null;default:throw Error(s(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(y=c.instance,c.state.loading|=4,ly(y,p.precedence,A));return c.instance}function ly(A,c,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),B=y.length?y[y.length-1]:null,E=B,G=0;G<y.length;G++){var ie=y[G];if(ie.dataset.precedence===c)E=ie;else if(E!==B)break}E?E.parentNode.insertBefore(A,E.nextSibling):(c=p.nodeType===9?p.head:p,c.insertBefore(A,c.firstChild))}function Ev(A,c){A.crossOrigin==null&&(A.crossOrigin=c.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=c.referrerPolicy),A.title==null&&(A.title=c.title)}function kv(A,c){A.crossOrigin==null&&(A.crossOrigin=c.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=c.referrerPolicy),A.integrity==null&&(A.integrity=c.integrity)}var Ay=null;function Qk(A,c,p){if(Ay===null){var y=new Map,B=Ay=new Map;B.set(p,y)}else B=Ay,y=B.get(p),y||(y=new Map,B.set(p,y));if(y.has(A))return y;for(y.set(A,null),p=p.getElementsByTagName(A),B=0;B<p.length;B++){var E=p[B];if(!(E[Ka]||E[Zn]||A==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var G=E.getAttribute(c)||"";G=A+G;var ie=y.get(G);ie?ie.push(E):y.set(G,[E])}}return y}function Mk(A,c,p){A=A.ownerDocument||A,A.head.insertBefore(p,c==="title"?A.querySelector("head > title"):null)}function bM(A,c,p){if(p===1||c.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return A=c.disabled,typeof c.precedence=="string"&&A==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function Hk(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var Mm=null;function xM(){}function vM(A,c,p){if(Mm===null)throw Error(s(475));var y=Mm;if(c.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var B=Od(p.href),E=A.querySelector(Om(B));if(E){A=E._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(y.count++,y=uy.bind(y),A.then(y,y)),c.state.loading|=4,c.instance=E,Kn(E);return}E=A.ownerDocument||A,p=_k(p),(B=xo.get(B))&&Ev(p,B),E=E.createElement("link"),Kn(E);var G=E;G._p=new Promise(function(ie,me){G.onload=ie,G.onerror=me}),ha(E,"link",p),c.instance=E}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(c,A),(A=c.state.preload)&&(c.state.loading&3)===0&&(y.count++,c=uy.bind(y),A.addEventListener("load",c),A.addEventListener("error",c))}}function CM(){if(Mm===null)throw Error(s(475));var A=Mm;return A.stylesheets&&A.count===0&&Fv(A,A.stylesheets),0<A.count?function(c){var p=setTimeout(function(){if(A.stylesheets&&Fv(A,A.stylesheets),A.unsuspend){var y=A.unsuspend;A.unsuspend=null,y()}},6e4);return A.unsuspend=c,function(){A.unsuspend=null,clearTimeout(p)}}:null}function uy(){if(this.count--,this.count===0){if(this.stylesheets)Fv(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var cy=null;function Fv(A,c){A.stylesheets=null,A.unsuspend!==null&&(A.count++,cy=new Map,c.forEach(BM,A),cy=null,uy.call(A))}function BM(A,c){if(!(c.state.loading&4)){var p=cy.get(A);if(p)var y=p.get(null);else{p=new Map,cy.set(A,p);for(var B=A.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<B.length;E++){var G=B[E];(G.nodeName==="LINK"||G.getAttribute("media")!=="not all")&&(p.set(G.dataset.precedence,G),y=G)}y&&p.set(null,y)}B=c.instance,G=B.getAttribute("data-precedence"),E=p.get(G)||y,E===y&&p.set(null,B),p.set(G,B),this.count++,y=uy.bind(this),B.addEventListener("load",y),B.addEventListener("error",y),E?E.parentNode.insertBefore(B,E.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(B,A.firstChild)),c.state.loading|=4}}var Hm={$$typeof:N,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function SM(A,c,p,y,B,E,G,ie){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ja(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ja(0),this.hiddenUpdates=ja(null),this.identifierPrefix=y,this.onUncaughtError=B,this.onCaughtError=E,this.onRecoverableError=G,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ie,this.incompleteTransitions=new Map}function Pk(A,c,p,y,B,E,G,ie,me,Oe,Xe,nt){return A=new SM(A,c,p,G,ie,me,Oe,nt),c=1,E===!0&&(c|=24),E=Gr(3,null,null,c),A.current=E,E.stateNode=A,c=um(),c.refCount++,A.pooledCache=c,c.refCount++,E.memoizedState={element:y,isDehydrated:p,cache:c},Se(E),A}function zk(A){return A?(A=wr,A):wr}function jk(A,c,p,y,B,E){B=zk(B),y.context===null?y.context=B:y.pendingContext=B,y=qe(c),y.payload={element:p},E=E===void 0?null:E,E!==null&&(y.callback=E),p=et(A,y,c),p!==null&&(qi(p,A,c),Ye(p,A,c))}function Vk(A,c){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var p=A.retryLane;A.retryLane=p!==0&&p<c?p:c}}function Tv(A,c){Vk(A,c),(A=A.alternate)&&Vk(A,c)}function Gk(A){if(A.tag===13){var c=tl(A,67108864);c!==null&&qi(c,A,67108864),Tv(A,67108864)}}var hy=!0;function NM(A,c,p,y){var B=P.T;P.T=null;var E=Y.p;try{Y.p=2,Dv(A,c,p,y)}finally{Y.p=E,P.T=B}}function IM(A,c,p,y){var B=P.T;P.T=null;var E=Y.p;try{Y.p=8,Dv(A,c,p,y)}finally{Y.p=E,P.T=B}}function Dv(A,c,p,y){if(hy){var B=Lv(y);if(B===null)wv(A,c,y,fy,p),Wk(A,y);else if(kM(B,A,c,p,y))y.stopPropagation();else if(Wk(A,y),c&4&&-1<EM.indexOf(A)){for(;B!==null;){var E=jr(B);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var G=bn(E.pendingLanes);if(G!==0){var ie=E;for(ie.pendingLanes|=2,ie.entangledLanes|=2;G;){var me=1<<31-Bt(G);ie.entanglements[1]|=me,G&=~me}yA(E),(qn&6)===0&&(X1=ct()+500,Um(0))}}break;case 13:ie=tl(E,2),ie!==null&&qi(ie,E,2),J1(),Tv(E,2)}if(E=Lv(y),E===null&&wv(A,c,y,fy,p),E===B)break;B=E}B!==null&&y.stopPropagation()}else wv(A,c,y,null,p)}}function Lv(A){return A=mr(A),Uv(A)}var fy=null;function Uv(A){if(fy=null,A=zr(A),A!==null){var c=a(A);if(c===null)A=null;else{var p=c.tag;if(p===13){if(A=i(c),A!==null)return A;A=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;A=null}else c!==A&&(A=null)}}return fy=A,null}function Kk(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lt()){case rt:return 2;case ot:return 8;case ut:case At:return 32;case St:return 268435456;default:return 32}default:return 32}}var Rv=!1,Ic=null,Ec=null,kc=null,Pm=new Map,zm=new Map,Fc=[],EM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wk(A,c){switch(A){case"focusin":case"focusout":Ic=null;break;case"dragenter":case"dragleave":Ec=null;break;case"mouseover":case"mouseout":kc=null;break;case"pointerover":case"pointerout":Pm.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":zm.delete(c.pointerId)}}function jm(A,c,p,y,B,E){return A===null||A.nativeEvent!==E?(A={blockedOn:c,domEventName:p,eventSystemFlags:y,nativeEvent:E,targetContainers:[B]},c!==null&&(c=jr(c),c!==null&&Gk(c)),A):(A.eventSystemFlags|=y,c=A.targetContainers,B!==null&&c.indexOf(B)===-1&&c.push(B),A)}function kM(A,c,p,y,B){switch(c){case"focusin":return Ic=jm(Ic,A,c,p,y,B),!0;case"dragenter":return Ec=jm(Ec,A,c,p,y,B),!0;case"mouseover":return kc=jm(kc,A,c,p,y,B),!0;case"pointerover":var E=B.pointerId;return Pm.set(E,jm(Pm.get(E)||null,A,c,p,y,B)),!0;case"gotpointercapture":return E=B.pointerId,zm.set(E,jm(zm.get(E)||null,A,c,p,y,B)),!0}return!1}function qk(A){var c=zr(A.target);if(c!==null){var p=a(c);if(p!==null){if(c=p.tag,c===13){if(c=i(p),c!==null){A.blockedOn=c,ao(A.priority,function(){if(p.tag===13){var y=Wi();y=zo(y);var B=tl(p,y);B!==null&&qi(B,p,y),Tv(p,y)}});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){A.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}A.blockedOn=null}function dy(A){if(A.blockedOn!==null)return!1;for(var c=A.targetContainers;0<c.length;){var p=Lv(A.nativeEvent);if(p===null){p=A.nativeEvent;var y=new p.constructor(p.type,p);Vu=y,p.target.dispatchEvent(y),Vu=null}else return c=jr(p),c!==null&&Gk(c),A.blockedOn=p,!1;c.shift()}return!0}function Xk(A,c,p){dy(A)&&p.delete(c)}function FM(){Rv=!1,Ic!==null&&dy(Ic)&&(Ic=null),Ec!==null&&dy(Ec)&&(Ec=null),kc!==null&&dy(kc)&&(kc=null),Pm.forEach(Xk),zm.forEach(Xk)}function py(A,c){A.blockedOn===c&&(A.blockedOn=null,Rv||(Rv=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,FM)))}var my=null;function Yk(A){my!==A&&(my=A,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){my===A&&(my=null);for(var c=0;c<A.length;c+=3){var p=A[c],y=A[c+1],B=A[c+2];if(typeof y!="function"){if(Uv(y||p)===null)continue;break}var E=jr(p);E!==null&&(A.splice(c,3),c-=3,yo(E,{pending:!0,data:B,method:p.method,action:y},y,B))}}))}function Vm(A){function c(me){return py(me,A)}Ic!==null&&py(Ic,A),Ec!==null&&py(Ec,A),kc!==null&&py(kc,A),Pm.forEach(c),zm.forEach(c);for(var p=0;p<Fc.length;p++){var y=Fc[p];y.blockedOn===A&&(y.blockedOn=null)}for(;0<Fc.length&&(p=Fc[0],p.blockedOn===null);)qk(p),p.blockedOn===null&&Fc.shift();if(p=(A.ownerDocument||A).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var B=p[y],E=p[y+1],G=B[ys]||null;if(typeof E=="function")G||Yk(p);else if(G){var ie=null;if(E&&E.hasAttribute("formAction")){if(B=E,G=E[ys]||null)ie=G.formAction;else if(Uv(B)!==null)continue}else ie=G.action;typeof ie=="function"?p[y+1]=ie:(p.splice(y,3),y-=3),Yk(p)}}}function $v(A){this._internalRoot=A}gy.prototype.render=$v.prototype.render=function(A){var c=this._internalRoot;if(c===null)throw Error(s(409));var p=c.current,y=Wi();jk(p,y,A,c,null,null)},gy.prototype.unmount=$v.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var c=A.containerInfo;jk(A.current,2,null,A,null,null),J1(),c[nr]=null}};function gy(A){this._internalRoot=A}gy.prototype.unstable_scheduleHydration=function(A){if(A){var c=Ui();A={blockedOn:null,target:A,priority:c};for(var p=0;p<Fc.length&&c!==0&&c<Fc[p].priority;p++);Fc.splice(p,0,A),p===0&&qk(A)}};var Jk=e.version;if(Jk!=="19.1.0")throw Error(s(527,Jk,"19.1.0"));Y.findDOMNode=function(A){var c=A._reactInternals;if(c===void 0)throw typeof A.render=="function"?Error(s(188)):(A=Object.keys(A).join(","),Error(s(268,A)));return A=l(c),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var TM={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yy.isDisabled&&yy.supportsFiber)try{Pt=yy.inject(TM),Qt=yy}catch{}}return Km.createRoot=function(A,c){if(!r(A))throw Error(s(299));var p=!1,y="",B=dE,E=pE,G=mE,ie=null;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(B=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(G=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(ie=c.unstable_transitionCallbacks)),c=Pk(A,1,!1,null,null,p,y,B,E,G,ie,null),A[nr]=c.current,yv(A),new $v(c)},Km.hydrateRoot=function(A,c,p){if(!r(A))throw Error(s(299));var y=!1,B="",E=dE,G=pE,ie=mE,me=null,Oe=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(B=p.identifierPrefix),p.onUncaughtError!==void 0&&(E=p.onUncaughtError),p.onCaughtError!==void 0&&(G=p.onCaughtError),p.onRecoverableError!==void 0&&(ie=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(me=p.unstable_transitionCallbacks),p.formState!==void 0&&(Oe=p.formState)),c=Pk(A,1,!0,c,p??null,y,B,E,G,ie,me,Oe),c.context=zk(null),p=c.current,y=Wi(),y=zo(y),B=qe(y),B.callback=null,et(p,B,y),p=y,c.current.lanes=p,Va(c,p),yA(c),A[nr]=c.current,yv(A),new gy(c)},Km.version="19.1.0",Km}var lF;function zM(){if(lF)return Qv.exports;lF=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qv.exports=PM(),Qv.exports}var jM=zM();const VM=k3(jM);var Wm={},AF;function GM(){if(AF)return Wm;AF=1,Object.defineProperty(Wm,"__esModule",{value:!0}),Wm.parse=i,Wm.serialize=u;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,a=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function i(d,m){const g=new a,w=d.length;if(w<2)return g;const v=(m==null?void 0:m.decode)||h;let b=0;do{const C=d.indexOf("=",b);if(C===-1)break;const N=d.indexOf(";",b),I=N===-1?w:N;if(C>I){b=d.lastIndexOf(";",C-1)+1;continue}const L=o(d,b,C),$=l(d,C,L),H=d.slice(L,$);if(g[H]===void 0){let U=o(d,C+1,I),O=l(d,I,U);const z=v(d.slice(U,O));g[H]=z}b=I+1}while(b<w);return g}function o(d,m,g){do{const w=d.charCodeAt(m);if(w!==32&&w!==9)return m}while(++m<g);return g}function l(d,m,g){for(;m>g;){const w=d.charCodeAt(--m);if(w!==32&&w!==9)return m+1}return g}function u(d,m,g){const w=(g==null?void 0:g.encode)||encodeURIComponent;if(!n.test(d))throw new TypeError(`argument name is invalid: ${d}`);const v=w(m);if(!e.test(v))throw new TypeError(`argument val is invalid: ${m}`);let b=d+"="+v;if(!g)return b;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);b+="; Max-Age="+g.maxAge}if(g.domain){if(!t.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);b+="; Domain="+g.domain}if(g.path){if(!s.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);b+="; Path="+g.path}if(g.expires){if(!f(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);b+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(b+="; HttpOnly"),g.secure&&(b+="; Secure"),g.partitioned&&(b+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return b}function h(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function f(d){return r.call(d)==="[object Date]"}return Wm}GM();var uF="popstate";function KM(n={}){function e(s,r){let{pathname:a,search:i,hash:o}=s.location;return PC("",{pathname:a,search:i,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(s,r){return typeof r=="string"?r:kg(r)}return qM(e,t,null,n)}function Ls(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function El(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WM(){return Math.random().toString(36).substring(2,10)}function cF(n,e){return{usr:n.state,key:n.key,idx:e}}function PC(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Lp(e):e,state:t,key:e&&e.key||s||WM()}}function kg({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Lp(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function qM(n,e,t,s={}){let{window:r=document.defaultView,v5Compat:a=!1}=s,i=r.history,o="POP",l=null,u=h();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function h(){return(i.state||{idx:null}).idx}function f(){o="POP";let v=h(),b=v==null?null:v-u;u=v,l&&l({action:o,location:w.location,delta:b})}function d(v,b){o="PUSH";let C=PC(w.location,v,b);u=h()+1;let N=cF(C,u),I=w.createHref(C);try{i.pushState(N,"",I)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;r.location.assign(I)}a&&l&&l({action:o,location:w.location,delta:1})}function m(v,b){o="REPLACE";let C=PC(w.location,v,b);u=h();let N=cF(C,u),I=w.createHref(C);i.replaceState(N,"",I),a&&l&&l({action:o,location:w.location,delta:0})}function g(v){return XM(v)}let w={get action(){return o},get location(){return n(r,i)},listen(v){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(uF,f),l=v,()=>{r.removeEventListener(uF,f),l=null}},createHref(v){return e(r,v)},createURL:g,encodeLocation(v){let b=g(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:d,replace:m,go(v){return i.go(v)}};return w}function XM(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ls(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:kg(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function F3(n,e,t="/"){return YM(n,e,t,!1)}function YM(n,e,t,s){let r=typeof e=="string"?Lp(e):e,a=Fu(r.pathname||"/",t);if(a==null)return null;let i=T3(n);JM(i);let o=null;for(let l=0;o==null&&l<i.length;++l){let u=AH(a);o=oH(i[l],u,s)}return o}function T3(n,e=[],t=[],s=""){let r=(a,i,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};l.relativePath.startsWith("/")&&(Ls(l.relativePath.startsWith(s),`Absolute route path "${l.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(s.length));let u=Nu([s,l.relativePath]),h=t.concat(l);a.children&&a.children.length>0&&(Ls(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),T3(a.children,e,h,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:aH(u,a.index),routesMeta:h})};return n.forEach((a,i)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))r(a,i);else for(let l of D3(a.path))r(a,i,l)}),e}function D3(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,r=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return r?[a,""]:[a];let i=D3(s.join("/")),o=[];return o.push(...i.map(l=>l===""?a:[a,l].join("/"))),r&&o.push(...i),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function JM(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:iH(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var ZM=/^:[\w-]+$/,eH=3,tH=2,nH=1,sH=10,rH=-2,hF=n=>n==="*";function aH(n,e){let t=n.split("/"),s=t.length;return t.some(hF)&&(s+=rH),e&&(s+=tH),t.filter(r=>!hF(r)).reduce((r,a)=>r+(ZM.test(a)?eH:a===""?nH:sH),s)}function iH(n,e){return n.length===e.length&&n.slice(0,-1).every((s,r)=>s===e[r])?n[n.length-1]-e[e.length-1]:0}function oH(n,e,t=!1){let{routesMeta:s}=n,r={},a="/",i=[];for(let o=0;o<s.length;++o){let l=s[o],u=o===s.length-1,h=a==="/"?e:e.slice(a.length)||"/",f=D2({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),d=l.route;if(!f&&u&&t&&!s[s.length-1].route.index&&(f=D2({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(r,f.params),i.push({params:r,pathname:Nu([a,f.pathname]),pathnameBase:fH(Nu([a,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(a=Nu([a,f.pathnameBase]))}return i}function D2(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=lH(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let a=r[0],i=a.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:s.reduce((u,{paramName:h,isOptional:f},d)=>{if(h==="*"){let g=o[d]||"";i=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const m=o[d];return f&&!m?u[h]=void 0:u[h]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:n}}function lH(n,e=!1,t=!0){El(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,l)=>(s.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function AH(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return El(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Fu(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function uH(n,e="/"){let{pathname:t,search:s="",hash:r=""}=typeof n=="string"?Lp(n):n;return{pathname:t?t.startsWith("/")?t:cH(t,e):e,search:dH(s),hash:pH(r)}}function cH(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function zv(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hH(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function IS(n){let e=hH(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function ES(n,e,t,s=!1){let r;typeof n=="string"?r=Lp(n):(r={...n},Ls(!r.pathname||!r.pathname.includes("?"),zv("?","pathname","search",r)),Ls(!r.pathname||!r.pathname.includes("#"),zv("#","pathname","hash",r)),Ls(!r.search||!r.search.includes("#"),zv("#","search","hash",r)));let a=n===""||r.pathname==="",i=a?"/":r.pathname,o;if(i==null)o=t;else{let f=e.length-1;if(!s&&i.startsWith("..")){let d=i.split("/");for(;d[0]==="..";)d.shift(),f-=1;r.pathname=d.join("/")}o=f>=0?e[f]:"/"}let l=uH(r,o),u=i&&i!=="/"&&i.endsWith("/"),h=(a||i===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}var Nu=n=>n.join("/").replace(/\/\/+/g,"/"),fH=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),dH=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,pH=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function mH(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var L3=["POST","PUT","PATCH","DELETE"];new Set(L3);var gH=["GET",...L3];new Set(gH);var Up=Ee.createContext(null);Up.displayName="DataRouter";var Cw=Ee.createContext(null);Cw.displayName="DataRouterState";var U3=Ee.createContext({isTransitioning:!1});U3.displayName="ViewTransition";var yH=Ee.createContext(new Map);yH.displayName="Fetchers";var wH=Ee.createContext(null);wH.displayName="Await";var Ll=Ee.createContext(null);Ll.displayName="Navigation";var Xg=Ee.createContext(null);Xg.displayName="Location";var Qo=Ee.createContext({outlet:null,matches:[],isDataRoute:!1});Qo.displayName="Route";var kS=Ee.createContext(null);kS.displayName="RouteError";function bH(n,{relative:e}={}){Ls(Rp(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=Ee.useContext(Ll),{hash:r,pathname:a,search:i}=Yg(n,{relative:e}),o=a;return t!=="/"&&(o=a==="/"?t:Nu([t,a])),s.createHref({pathname:o,search:i,hash:r})}function Rp(){return Ee.useContext(Xg)!=null}function $u(){return Ls(Rp(),"useLocation() may be used only in the context of a <Router> component."),Ee.useContext(Xg).location}var R3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $3(n){Ee.useContext(Ll).static||Ee.useLayoutEffect(n)}function $A(){let{isDataRoute:n}=Ee.useContext(Qo);return n?$H():xH()}function xH(){Ls(Rp(),"useNavigate() may be used only in the context of a <Router> component.");let n=Ee.useContext(Up),{basename:e,navigator:t}=Ee.useContext(Ll),{matches:s}=Ee.useContext(Qo),{pathname:r}=$u(),a=JSON.stringify(IS(s)),i=Ee.useRef(!1);return $3(()=>{i.current=!0}),Ee.useCallback((l,u={})=>{if(El(i.current,R3),!i.current)return;if(typeof l=="number"){t.go(l);return}let h=ES(l,JSON.parse(a),r,u.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Nu([e,h.pathname])),(u.replace?t.replace:t.push)(h,u.state,u)},[e,t,a,r,n])}var vH=Ee.createContext(null);function CH(n){let e=Ee.useContext(Qo).outlet;return e&&Ee.createElement(vH.Provider,{value:n},e)}function BH(){let{matches:n}=Ee.useContext(Qo),e=n[n.length-1];return e?e.params:{}}function Yg(n,{relative:e}={}){let{matches:t}=Ee.useContext(Qo),{pathname:s}=$u(),r=JSON.stringify(IS(t));return Ee.useMemo(()=>ES(n,JSON.parse(r),s,e==="path"),[n,r,s,e])}function SH(n,e){return _3(n,e)}function _3(n,e,t,s){var b;Ls(Rp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=Ee.useContext(Ll),{matches:a}=Ee.useContext(Qo),i=a[a.length-1],o=i?i.params:{},l=i?i.pathname:"/",u=i?i.pathnameBase:"/",h=i&&i.route;{let C=h&&h.path||"";O3(l,!h||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let f=$u(),d;if(e){let C=typeof e=="string"?Lp(e):e;Ls(u==="/"||((b=C.pathname)==null?void 0:b.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${C.pathname}" was given in the \`location\` prop.`),d=C}else d=f;let m=d.pathname||"/",g=m;if(u!=="/"){let C=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=F3(n,{pathname:g});El(h||w!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),El(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=FH(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},o,C.params),pathname:Nu([u,r.encodeLocation?r.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:Nu([u,r.encodeLocation?r.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),a,t,s);return e&&v?Ee.createElement(Xg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},v):v}function NH(){let n=RH(),e=mH(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},i=null;return console.error("Error handled by React Router default ErrorBoundary:",n),i=Ee.createElement(Ee.Fragment,null,Ee.createElement("p",null," Hey developer "),Ee.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Ee.createElement("code",{style:a},"ErrorBoundary")," or"," ",Ee.createElement("code",{style:a},"errorElement")," prop on your route.")),Ee.createElement(Ee.Fragment,null,Ee.createElement("h2",null,"Unexpected Application Error!"),Ee.createElement("h3",{style:{fontStyle:"italic"}},e),t?Ee.createElement("pre",{style:r},t):null,i)}var IH=Ee.createElement(NH,null),EH=class extends Ee.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?Ee.createElement(Qo.Provider,{value:this.props.routeContext},Ee.createElement(kS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function kH({routeContext:n,match:e,children:t}){let s=Ee.useContext(Up);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),Ee.createElement(Qo.Provider,{value:n},t)}function FH(n,e=[],t=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let r=n,a=t==null?void 0:t.errors;if(a!=null){let l=r.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);Ls(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,l+1))}let i=!1,o=-1;if(t)for(let l=0;l<r.length;l++){let u=r[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(o=l),u.route.id){let{loaderData:h,errors:f}=t,d=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||d){i=!0,o>=0?r=r.slice(0,o+1):r=[r[0]];break}}}return r.reduceRight((l,u,h)=>{let f,d=!1,m=null,g=null;t&&(f=a&&u.route.id?a[u.route.id]:void 0,m=u.route.errorElement||IH,i&&(o<0&&h===0?(O3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,g=null):o===h&&(d=!0,g=u.route.hydrateFallbackElement||null)));let w=e.concat(r.slice(0,h+1)),v=()=>{let b;return f?b=m:d?b=g:u.route.Component?b=Ee.createElement(u.route.Component,null):u.route.element?b=u.route.element:b=l,Ee.createElement(kH,{match:u,routeContext:{outlet:l,matches:w,isDataRoute:t!=null},children:b})};return t&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?Ee.createElement(EH,{location:t.location,revalidation:t.revalidation,component:m,error:f,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}function FS(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TH(n){let e=Ee.useContext(Up);return Ls(e,FS(n)),e}function DH(n){let e=Ee.useContext(Cw);return Ls(e,FS(n)),e}function LH(n){let e=Ee.useContext(Qo);return Ls(e,FS(n)),e}function TS(n){let e=LH(n),t=e.matches[e.matches.length-1];return Ls(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function UH(){return TS("useRouteId")}function RH(){var s;let n=Ee.useContext(kS),e=DH("useRouteError"),t=TS("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function $H(){let{router:n}=TH("useNavigate"),e=TS("useNavigate"),t=Ee.useRef(!1);return $3(()=>{t.current=!0}),Ee.useCallback(async(r,a={})=>{El(t.current,R3),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...a}))},[n,e])}var fF={};function O3(n,e,t){!e&&!fF[n]&&(fF[n]=!0,El(!1,t))}Ee.memo(_H);function _H({routes:n,future:e,state:t}){return _3(n,void 0,t,e)}function OH({to:n,replace:e,state:t,relative:s}){Ls(Rp(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=Ee.useContext(Ll);El(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=Ee.useContext(Qo),{pathname:i}=$u(),o=$A(),l=ES(n,IS(a),i,s==="path"),u=JSON.stringify(l);return Ee.useEffect(()=>{o(JSON.parse(u),{replace:e,state:t,relative:s})},[o,u,s,e,t]),null}function QH(n){return CH(n.context)}function Xi(n){Ls(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function MH({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:r,static:a=!1}){Ls(!Rp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=n.replace(/^\/*/,"/"),o=Ee.useMemo(()=>({basename:i,navigator:r,static:a,future:{}}),[i,r,a]);typeof t=="string"&&(t=Lp(t));let{pathname:l="/",search:u="",hash:h="",state:f=null,key:d="default"}=t,m=Ee.useMemo(()=>{let g=Fu(l,i);return g==null?null:{location:{pathname:g,search:u,hash:h,state:f,key:d},navigationType:s}},[i,l,u,h,f,d,s]);return El(m!=null,`<Router basename="${i}"> is not able to match the URL "${l}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:Ee.createElement(Ll.Provider,{value:o},Ee.createElement(Xg.Provider,{children:e,value:m}))}function HH({children:n,location:e}){return SH(zC(n),e)}function zC(n,e=[]){let t=[];return Ee.Children.forEach(n,(s,r)=>{if(!Ee.isValidElement(s))return;let a=[...e,r];if(s.type===Ee.Fragment){t.push.apply(t,zC(s.props.children,a));return}Ls(s.type===Xi,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ls(!s.props.index||!s.props.children,"An index route cannot have child routes.");let i={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=zC(s.props.children,a)),t.push(i)}),t}var c2="get",h2="application/x-www-form-urlencoded";function Bw(n){return n!=null&&typeof n.tagName=="string"}function PH(n){return Bw(n)&&n.tagName.toLowerCase()==="button"}function zH(n){return Bw(n)&&n.tagName.toLowerCase()==="form"}function jH(n){return Bw(n)&&n.tagName.toLowerCase()==="input"}function VH(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function GH(n,e){return n.button===0&&(!e||e==="_self")&&!VH(n)}var wy=null;function KH(){if(wy===null)try{new FormData(document.createElement("form"),0),wy=!1}catch{wy=!0}return wy}var WH=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jv(n){return n!=null&&!WH.has(n)?(El(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${h2}"`),null):n}function qH(n,e){let t,s,r,a,i;if(zH(n)){let o=n.getAttribute("action");s=o?Fu(o,e):null,t=n.getAttribute("method")||c2,r=jv(n.getAttribute("enctype"))||h2,a=new FormData(n)}else if(PH(n)||jH(n)&&(n.type==="submit"||n.type==="image")){let o=n.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||o.getAttribute("action");if(s=l?Fu(l,e):null,t=n.getAttribute("formmethod")||o.getAttribute("method")||c2,r=jv(n.getAttribute("formenctype"))||jv(o.getAttribute("enctype"))||h2,a=new FormData(o,n),!KH()){let{name:u,type:h,value:f}=n;if(h==="image"){let d=u?`${u}.`:"";a.append(`${d}x`,"0"),a.append(`${d}y`,"0")}else u&&a.append(u,f)}}else{if(Bw(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=c2,s=null,r=h2,i=n}return a&&r==="text/plain"&&(i=a,a=void 0),{action:s,method:t.toLowerCase(),encType:r,formData:a,body:i}}function DS(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function XH(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function YH(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function JH(n,e,t){let s=await Promise.all(n.map(async r=>{let a=e.routes[r.route.id];if(a){let i=await XH(a,t);return i.links?i.links():[]}return[]}));return nP(s.flat(1).filter(YH).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function dF(n,e,t,s,r,a){let i=(l,u)=>t[u]?l.route.id!==t[u].route.id:!0,o=(l,u)=>{var h;return t[u].pathname!==l.pathname||((h=t[u].route.path)==null?void 0:h.endsWith("*"))&&t[u].params["*"]!==l.params["*"]};return a==="assets"?e.filter((l,u)=>i(l,u)||o(l,u)):a==="data"?e.filter((l,u)=>{var f;let h=s.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(i(l,u)||o(l,u))return!0;if(l.route.shouldRevalidate){let d=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((f=t[0])==null?void 0:f.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function ZH(n,e,{includeHydrateFallback:t}={}){return eP(n.map(s=>{let r=e.routes[s.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function eP(n){return[...new Set(n)]}function tP(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function nP(n,e){let t=new Set;return new Set(e),n.reduce((s,r)=>{let a=JSON.stringify(tP(r));return t.has(a)||(t.add(a),s.push({key:a,link:r})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var sP=new Set([100,101,204,205]);function rP(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Fu(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Q3(){let n=Ee.useContext(Up);return DS(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function aP(){let n=Ee.useContext(Cw);return DS(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var LS=Ee.createContext(void 0);LS.displayName="FrameworkContext";function M3(){let n=Ee.useContext(LS);return DS(n,"You must render this element inside a <HydratedRouter> element"),n}function iP(n,e){let t=Ee.useContext(LS),[s,r]=Ee.useState(!1),[a,i]=Ee.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:u,onMouseLeave:h,onTouchStart:f}=e,d=Ee.useRef(null);Ee.useEffect(()=>{if(n==="render"&&i(!0),n==="viewport"){let w=b=>{b.forEach(C=>{i(C.isIntersecting)})},v=new IntersectionObserver(w,{threshold:.5});return d.current&&v.observe(d.current),()=>{v.disconnect()}}},[n]),Ee.useEffect(()=>{if(s){let w=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(w)}}},[s]);let m=()=>{r(!0)},g=()=>{r(!1),i(!1)};return t?n!=="intent"?[a,d,{}]:[a,d,{onFocus:qm(o,m),onBlur:qm(l,g),onMouseEnter:qm(u,m),onMouseLeave:qm(h,g),onTouchStart:qm(f,m)}]:[!1,d,{}]}function qm(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function oP({page:n,...e}){let{router:t}=Q3(),s=Ee.useMemo(()=>F3(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?Ee.createElement(AP,{page:n,matches:s,...e}):null}function lP(n){let{manifest:e,routeModules:t}=M3(),[s,r]=Ee.useState([]);return Ee.useEffect(()=>{let a=!1;return JH(n,e,t).then(i=>{a||r(i)}),()=>{a=!0}},[n,e,t]),s}function AP({page:n,matches:e,...t}){let s=$u(),{manifest:r,routeModules:a}=M3(),{basename:i}=Q3(),{loaderData:o,matches:l}=aP(),u=Ee.useMemo(()=>dF(n,e,l,r,s,"data"),[n,e,l,r,s]),h=Ee.useMemo(()=>dF(n,e,l,r,s,"assets"),[n,e,l,r,s]),f=Ee.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let g=new Set,w=!1;if(e.forEach(b=>{var N;let C=r.routes[b.route.id];!C||!C.hasLoader||(!u.some(I=>I.route.id===b.route.id)&&b.route.id in o&&((N=a[b.route.id])!=null&&N.shouldRevalidate)||C.hasClientLoader?w=!0:g.add(b.route.id))}),g.size===0)return[];let v=rP(n,i);return w&&g.size>0&&v.searchParams.set("_routes",e.filter(b=>g.has(b.route.id)).map(b=>b.route.id).join(",")),[v.pathname+v.search]},[i,o,s,r,u,e,n,a]),d=Ee.useMemo(()=>ZH(h,r),[h,r]),m=lP(h);return Ee.createElement(Ee.Fragment,null,f.map(g=>Ee.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...t})),d.map(g=>Ee.createElement("link",{key:g,rel:"modulepreload",href:g,...t})),m.map(({key:g,link:w})=>Ee.createElement("link",{key:g,...w})))}function uP(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var H3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{H3&&(window.__reactRouterVersion="7.6.2")}catch{}function cP({basename:n,children:e,window:t}){let s=Ee.useRef();s.current==null&&(s.current=KM({window:t,v5Compat:!0}));let r=s.current,[a,i]=Ee.useState({action:r.action,location:r.location}),o=Ee.useCallback(l=>{Ee.startTransition(()=>i(l))},[i]);return Ee.useLayoutEffect(()=>r.listen(o),[r,o]),Ee.createElement(MH,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:r})}var P3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bi=Ee.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:r,reloadDocument:a,replace:i,state:o,target:l,to:u,preventScrollReset:h,viewTransition:f,...d},m){let{basename:g}=Ee.useContext(Ll),w=typeof u=="string"&&P3.test(u),v,b=!1;if(typeof u=="string"&&w&&(v=u,H3))try{let O=new URL(window.location.href),z=u.startsWith("//")?new URL(O.protocol+u):new URL(u),T=Fu(z.pathname,g);z.origin===O.origin&&T!=null?u=T+z.search+z.hash:b=!0}catch{El(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=bH(u,{relative:r}),[N,I,L]=iP(s,d),$=pP(u,{replace:i,state:o,target:l,preventScrollReset:h,relative:r,viewTransition:f});function H(O){e&&e(O),O.defaultPrevented||$(O)}let U=Ee.createElement("a",{...d,...L,href:v||C,onClick:b||a?e:H,ref:uP(m,I),target:l,"data-discover":!w&&t==="render"?"true":void 0});return N&&!w?Ee.createElement(Ee.Fragment,null,U,Ee.createElement(oP,{page:C})):U});Bi.displayName="Link";var hP=Ee.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:r=!1,style:a,to:i,viewTransition:o,children:l,...u},h){let f=Yg(i,{relative:u.relative}),d=$u(),m=Ee.useContext(Cw),{navigator:g,basename:w}=Ee.useContext(Ll),v=m!=null&&bP(f)&&o===!0,b=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,C=d.pathname,N=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(C=C.toLowerCase(),N=N?N.toLowerCase():null,b=b.toLowerCase()),N&&w&&(N=Fu(N,w)||N);const I=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let L=C===b||!r&&C.startsWith(b)&&C.charAt(I)==="/",$=N!=null&&(N===b||!r&&N.startsWith(b)&&N.charAt(b.length)==="/"),H={isActive:L,isPending:$,isTransitioning:v},U=L?e:void 0,O;typeof s=="function"?O=s(H):O=[s,L?"active":null,$?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let z=typeof a=="function"?a(H):a;return Ee.createElement(Bi,{...u,"aria-current":U,className:O,ref:h,style:z,to:i,viewTransition:o},typeof l=="function"?l(H):l)});hP.displayName="NavLink";var fP=Ee.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:r,state:a,method:i=c2,action:o,onSubmit:l,relative:u,preventScrollReset:h,viewTransition:f,...d},m)=>{let g=yP(),w=wP(o,{relative:u}),v=i.toLowerCase()==="get"?"get":"post",b=typeof o=="string"&&P3.test(o),C=N=>{if(l&&l(N),N.defaultPrevented)return;N.preventDefault();let I=N.nativeEvent.submitter,L=(I==null?void 0:I.getAttribute("formmethod"))||i;g(I||N.currentTarget,{fetcherKey:e,method:L,navigate:t,replace:r,state:a,relative:u,preventScrollReset:h,viewTransition:f})};return Ee.createElement("form",{ref:m,method:v,action:w,onSubmit:s?l:C,...d,"data-discover":!b&&n==="render"?"true":void 0})});fP.displayName="Form";function dP(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function z3(n){let e=Ee.useContext(Up);return Ls(e,dP(n)),e}function pP(n,{target:e,replace:t,state:s,preventScrollReset:r,relative:a,viewTransition:i}={}){let o=$A(),l=$u(),u=Yg(n,{relative:a});return Ee.useCallback(h=>{if(GH(h,e)){h.preventDefault();let f=t!==void 0?t:kg(l)===kg(u);o(n,{replace:f,state:s,preventScrollReset:r,relative:a,viewTransition:i})}},[l,o,u,t,s,e,n,r,a,i])}var mP=0,gP=()=>`__${String(++mP)}__`;function yP(){let{router:n}=z3("useSubmit"),{basename:e}=Ee.useContext(Ll),t=UH();return Ee.useCallback(async(s,r={})=>{let{action:a,method:i,encType:o,formData:l,body:u}=qH(s,e);if(r.navigate===!1){let h=r.fetcherKey||gP();await n.fetch(h,t,r.action||a,{preventScrollReset:r.preventScrollReset,formData:l,body:u,formMethod:r.method||i,formEncType:r.encType||o,flushSync:r.flushSync})}else await n.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:l,body:u,formMethod:r.method||i,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function wP(n,{relative:e}={}){let{basename:t}=Ee.useContext(Ll),s=Ee.useContext(Qo);Ls(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),a={...Yg(n||".",{relative:e})},i=$u();if(n==null){a.search=i.search;let o=new URLSearchParams(a.search),l=o.getAll("index");if(l.some(h=>h==="")){o.delete("index"),l.filter(f=>f).forEach(f=>o.append("index",f));let h=o.toString();a.search=h?`?${h}`:""}}return(!n||n===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Nu([t,a.pathname])),kg(a)}function bP(n,e={}){let t=Ee.useContext(U3);Ls(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=z3("useViewTransitionState"),r=Yg(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Fu(t.currentLocation.pathname,s)||t.currentLocation.pathname,i=Fu(t.nextLocation.pathname,s)||t.nextLocation.pathname;return D2(r.pathname,i)!=null||D2(r.pathname,a)!=null}[...sP];/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vP=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),pF=n=>{const e=vP(n);return e.charAt(0).toUpperCase()+e.slice(1)},j3=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),CP=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=Ee.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:a,iconNode:i,...o},l)=>Ee.createElement("svg",{ref:l,...BP,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:j3("lucide",r),...!a&&!CP(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,h])=>Ee.createElement(u,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=(n,e)=>{const t=Ee.forwardRef(({className:s,...r},a)=>Ee.createElement(SP,{ref:a,iconNode:e,className:j3(`lucide-${xP(pF(n))}`,`lucide-${n}`,s),...r}));return t.displayName=pF(n),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]],IP=zt("arrow-down-up",NP);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],kP=zt("arrow-left",EP);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],TP=zt("arrow-right",FP);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],LP=zt("award",DP);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],V3=zt("brain",UP);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],$P=zt("briefcase",RP);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],OP=zt("building",_P);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Vc=zt("camera",QP);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],G3=zt("chart-no-axes-column",MP);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],PP=zt("chevron-down",HP);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],jP=zt("chevron-up",zP);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Sw=zt("circle-alert",VP);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$p=zt("circle-check-big",GP);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],WP=zt("circle-dot",KP);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],XP=zt("circle-help",qP);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],JP=zt("circle-plus",YP);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],e8=zt("circle-user",ZP);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],n8=zt("circle-x",t8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],K3=zt("clock",s8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],a8=zt("database",r8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],jC=zt("download",i8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],l8=zt("droplet",o8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],u8=zt("eye",A8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["path",{d:"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"37hlfg"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"8",cy:"16",r:"6",key:"10v15b"}],["path",{d:"M9.5 17.5 8 16.25V14",key:"1o80t2"}]],VC=zt("file-clock",c8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],US=zt("globe",h8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],d8=zt("history",f8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],m8=zt("house",p8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],y8=zt("info",g8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],bg=zt("key-round",w8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],Qr=zt("leaf",b8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],RS=zt("log-in",x8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],C8=zt("log-out",v8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],GC=zt("mail",B8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],N8=zt("menu",S8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],L2=zt("save",I8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],k8=zt("scan-line",E8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],T8=zt("scan",F8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],mF=zt("search",D8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],U8=zt("settings",L8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],U2=zt("shield",R8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],W3=zt("sparkles",$8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]],O8=zt("sprout",_8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],q3=zt("target",Q8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],H8=zt("trash-2",M8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],z8=zt("trending-up",P8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],op=zt("triangle-alert",j8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],X3=zt("upload",V8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Y3=zt("user-plus",G8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$S=zt("user",K8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],J3=zt("users",W8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_S=zt("x",q8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Y8=zt("zap-off",X8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],R2=zt("zap",J8),Z8=()=>F.jsxs("div",{className:"w-full",children:[F.jsx("div",{className:"pb-16 bg-white",children:F.jsxs("div",{className:"mx-auto px-4",children:[F.jsx("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-12",children:"Mengapa Memilih CornLeaf AI?"}),F.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[F.jsxs("div",{className:"text-center p-6 rounded-xl hover:shadow-lg transition-shadow duration-300 bg-gray-50 hover:bg-white",children:[F.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:F.jsx(R2,{className:"w-8 h-8 text-[#039b62]"})}),F.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Deteksi Cepat"}),F.jsx("p",{className:"text-gray-600",children:"Hasil diagnosis dalam hitungan detik menggunakan teknologi AI terdepan"})]}),F.jsxs("div",{className:"text-center p-6 rounded-xl hover:shadow-lg transition-shadow duration-300 bg-gray-50 hover:bg-white",children:[F.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:F.jsx(U2,{className:"w-8 h-8 text-[#039b62]"})}),F.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Akurasi Tinggi"}),F.jsx("p",{className:"text-gray-600",children:"Tingkat akurasi tinggi berdasarkan ribuan data training penyakit jagung"})]}),F.jsxs("div",{className:"text-center p-6 rounded-xl hover:shadow-lg transition-shadow duration-300 bg-gray-50 hover:bg-white",children:[F.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:F.jsx(J3,{className:"w-8 h-8 text-[#039b62]"})}),F.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Mudah Digunakan"}),F.jsx("p",{className:"text-gray-600",children:"Interface yang user-friendly, cocok untuk petani dan praktisi pertanian"})]})]})]})}),F.jsx("div",{className:"py-16 bg-gray-50",children:F.jsx("div",{className:"mx-auto px-4",children:F.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl p-8 text-white text-center shadow-xl",children:F.jsxs("div",{className:"max-w-3xl mx-auto",children:[F.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:F.jsx(op,{className:"w-8 h-8 text-white"})}),F.jsx("h3",{className:"text-3xl font-bold mb-4",children:"Solusi Inovasi dengan Teknologi AI"}),F.jsx("p",{className:"text-lg text-green-100 mb-8 leading-relaxed",children:"Sistem deteksi otomatis menggunakan kecerdasan buatan untuk diagnosis cepat, akurat, dan mudah diakses oleh semua petani"}),F.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[F.jsxs("div",{className:"bg-white bg-opacity-10 rounded-lg p-4 backdrop-blur-sm",children:[F.jsx("div",{className:"text-3xl mb-3",children:""}),F.jsx("div",{className:"font-semibold text-lg mb-1",children:"Deteksi Instan"}),F.jsx("div",{className:"text-sm text-green-200",children:"Hasil dalam hitungan detik"})]}),F.jsxs("div",{className:"bg-white bg-opacity-10 rounded-lg p-4 backdrop-blur-sm",children:[F.jsx("div",{className:"text-3xl mb-3",children:""}),F.jsx("div",{className:"font-semibold text-lg mb-1",children:"Akurasi Tinggi"}),F.jsx("div",{className:"text-sm text-green-200",children:"Berbasis data ribuan sampel"})]}),F.jsxs("div",{className:"bg-white bg-opacity-10 rounded-lg p-4 backdrop-blur-sm",children:[F.jsx("div",{className:"text-3xl mb-3",children:""}),F.jsx("div",{className:"font-semibold text-lg mb-1",children:"Mudah Digunakan"}),F.jsx("div",{className:"text-sm text-green-200",children:"Cukup foto dengan smartphone"})]})]})]})})})}),F.jsx("div",{className:"py-16 bg-white",children:F.jsxs("div",{className:"mx-auto px-4",children:[F.jsx("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-12",children:"Cara Kerja Scanner"}),F.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[F.jsxs("div",{className:"flex flex-col items-center text-center group",children:[F.jsxs("div",{className:"relative mb-6",children:[F.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:F.jsx(Vc,{className:"w-10 h-10 text-white"})}),F.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:F.jsx("span",{className:"text-sm font-bold text-green-600",children:"1"})})]}),F.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Ambil Foto"}),F.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Upload foto daun jagung yang ingin diperiksa kesehatannya"})]}),F.jsxs("div",{className:"flex flex-col items-center text-center group",children:[F.jsxs("div",{className:"relative mb-6",children:[F.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:F.jsx(R2,{className:"w-10 h-10 text-white"})}),F.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:F.jsx("span",{className:"text-sm font-bold text-green-600",children:"2"})})]}),F.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Analisis AI"}),F.jsx("p",{className:"text-gray-600 leading-relaxed",children:"AI akan menganalisis foto dan mendeteksi penyakit pada daun"})]}),F.jsxs("div",{className:"flex flex-col items-center text-center group",children:[F.jsxs("div",{className:"relative mb-6",children:[F.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:F.jsx($p,{className:"w-10 h-10 text-white"})}),F.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:F.jsx("span",{className:"text-sm font-bold text-green-600",children:"3"})})]}),F.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Hasil & Saran"}),F.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Dapatkan hasil diagnosis dan rekomendasi penanganan"})]})]})]})}),F.jsx("div",{className:"py-16 bg-gradient-to-r from-green-500 to-emerald-600",children:F.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[F.jsx("h2",{className:"text-4xl font-bold mb-4 text-white",children:"Siap Memulai Deteksi?"}),F.jsx("p",{className:"text-xl mb-8 text-green-100 leading-relaxed",children:"Lindungi tanaman jagung Anda dengan teknologi AI terdepan"}),F.jsxs(Bi,{to:"/cornLeafScanner",className:"inline-flex items-center gap-2 bg-white text-green-600 hover:bg-gray-50 px-8 py-4 rounded-xl font-bold text-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[F.jsx(Vc,{className:"w-5 h-5"}),"Mulai Scanner Sekarang"]})]})})]}),ez=()=>F.jsxs("div",{className:"relative w-full min-h-screen flex flex-col items-center justify-center overflow-hidden bg-white",children:[F.jsxs("div",{className:"absolute inset-0",children:[F.jsx("div",{className:"absolute top-20 left-10 animate-bounce delay-100",children:F.jsx(Qr,{className:"w-8 h-8 text-green-300 opacity-60"})}),F.jsx("div",{className:"absolute top-40 right-20 animate-bounce delay-300",children:F.jsx(Qr,{className:"w-6 h-6 text-emerald-300 opacity-40"})}),F.jsx("div",{className:"absolute top-32 right-32 w-20 h-20 bg-gradient-to-br from-green-200 to-emerald-200 rounded-full opacity-30 animate-pulse"})]}),F.jsx("div",{className:"relative z-10 w-full container mx-auto px-4",children:F.jsxs("div",{className:"py-16 md:py-24 flex flex-col lg:grid lg:grid-cols-2 gap-16 lg:gap-32 items-center",children:[F.jsxs("div",{className:"text-center lg:text-left",children:[F.jsx("div",{className:"flex justify-center lg:justify-start mb-6",children:F.jsxs("div",{className:"flex items-center gap-1 bg-green-100 px-3 py-1 rounded-full",children:[F.jsx(W3,{className:"w-4 h-4 text-green-600"}),F.jsx("span",{className:"text-sm font-medium text-green-700",children:"AI Technology"})]})}),F.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:["Deteksi",F.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-emerald-600 py-2",children:"Penyakit Daun"}),F.jsx("span",{className:"block",children:"Jagung"})]}),F.jsx("p",{className:"text-base sm:text-lg text-gray-600 mb-8 max-w-lg mx-auto lg:mx-0",children:"Diagnosis cepat dan akurat menggunakan teknologi AI untuk menjaga kesehatan tanaman jagung Anda"}),F.jsxs("div",{className:"flex flex-col sm:flex-row justify-center lg:justify-start gap-4",children:[F.jsxs(Bi,{to:"/cornLeafScanner",className:"group bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center justify-center gap-2",children:[F.jsx(T8,{className:"w-5 h-5"}),"Mulai Scanner",F.jsx(TP,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]}),F.jsx(Bi,{to:"/about",className:"border-2 border-green-500 text-green-600 hover:bg-green-50 px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-semibold transition-all duration-300 text-center",children:"Pelajari Lebih Lanjut"})]})]}),F.jsx("div",{className:"relative w-full h-[400px] sm:h-[500px] flex justify-center",children:F.jsxs("div",{className:"relative w-64 h-full",children:[F.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-900 to-gray-700 rounded-[3rem] p-2 shadow-2xl transform rotate-6 hover:rotate-3 transition-transform duration-500",children:F.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-emerald-500 rounded-[2.5rem] flex flex-col items-center justify-center relative overflow-hidden",children:[F.jsxs("div",{className:"text-center text-white p-4",children:[F.jsx(Qr,{className:"w-14 h-14 mx-auto mb-4 animate-pulse"}),F.jsx("div",{className:"text-lg font-semibold mb-2",children:"CornLeaf AI"}),F.jsx("div",{className:"text-sm opacity-90 mb-6",children:"Scanning..."}),F.jsx("div",{className:"w-28 h-1 bg-white bg-opacity-30 rounded-full overflow-hidden",children:F.jsx("div",{className:"w-3/4 h-full bg-white rounded-full animate-pulse"})})]}),F.jsx("div",{className:"absolute -top-4 -right-4 w-6 h-6 bg-yellow-400 rounded-full animate-bounce delay-100"}),F.jsx("div",{className:"absolute -bottom-6 -left-6 w-5 h-5 bg-blue-400 rounded-full animate-bounce delay-300"})]})}),F.jsx("div",{className:"absolute -top-8 -left-8 transform -rotate-12",children:F.jsx("div",{className:"w-20 h-28 bg-gradient-to-br from-green-400 to-green-600 rounded-full opacity-70 blur-sm"})}),F.jsx("div",{className:"absolute -bottom-8 -right-8 transform rotate-12",children:F.jsx("div",{className:"w-16 h-24 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-full opacity-60 blur-sm"})})]})})]})}),F.jsx(Z8,{})]}),tz=[{label:"Tingkat Akurasi",value:"85%+",icon:q3},{label:"Waktu Deteksi",value:"< 3 Detik",icon:K3},{label:"Jenis Penyakit",value:"4 Kategori",icon:Qr},{label:"User Experience",value:"Gratis",icon:$p}],nz=[{icon:J3,title:"Mempermudah Petani",description:"Dalam mendeteksi penyakit tanaman dengan teknologi yang mudah diakses",color:"text-green-600",bgColor:"bg-green-50"},{icon:US,title:"Platform Inklusif",description:"Menyediakan platform yang mudah diakses dan digunakan oleh semua kalangan",color:"text-blue-600",bgColor:"bg-blue-50"},{icon:Qr,title:"Edukasi Berkelanjutan",description:"Mengedukasi petani tentang gejala penyakit tanaman dan cara penanganannya",color:"text-purple-600",bgColor:"bg-purple-50"}],sz=[{icon:V3,title:"Machine Learning",description:"Menggunakan algoritma CNN untuk analisis gambar",stat:"Deep Learning"},{icon:a8,title:"Dataset Kaggle",description:"Dilatih dengan ribuan gambar daun jagung",stat:"10K+ Images"},{icon:R2,title:"Real-time Processing",description:"Pemrosesan gambar secara real-time di browser",stat:"< 3 Seconds"}],rz=[{icon:R2,title:"Deteksi Otomatis & Cepat",description:"Deteksi penyakit secara otomatis dan cepat dalam hitungan detik",color:"text-yellow-600",bgColor:"bg-yellow-50"},{icon:U2,title:"Akurasi Tinggi",description:"Mengurangi risiko kesalahan diagnosis manual dengan AI",color:"text-blue-600",bgColor:"bg-blue-50"},{icon:K3,title:"Hemat Waktu & Biaya",description:"Menghemat waktu dan biaya perawatan dengan deteksi dini",color:"text-green-600",bgColor:"bg-green-50"},{icon:z8,title:"Produktivitas Meningkat",description:"Meningkatkan produktivitas dan hasil panen yang optimal",color:"text-purple-600",bgColor:"bg-purple-50"},{icon:US,title:"Ketahanan Pangan",description:"Mendukung upaya ketahanan pangan nasional Indonesia",color:"text-indigo-600",bgColor:"bg-indigo-50"},{icon:LP,title:"Mudah Digunakan",description:"Interface yang user-friendly tanpa perlu training khusus",color:"text-red-600",bgColor:"bg-red-50"}],az=[{name:"Sehat",color:"text-green-600",bgColor:"bg-green-100",borderColor:"border-green-300",icon:F.jsx(O8,{className:"text-green-600 w-8 h-8 mx-auto"}),description:"Daun jagung dalam kondisi sehat dan normal"},{name:"Hawar Daun",color:"text-orange-600",bgColor:"bg-orange-100",icon:F.jsx(l8,{className:"text-orange-600 w-8 h-8 mx-auto"}),borderColor:"border-orange-300",description:"Penyakit yang menyebabkan bercak coklat pada daun"},{name:"Karat Daun",color:"text-red-600",bgColor:"bg-red-100",icon:F.jsx(WP,{className:"text-red-600 w-8 h-8 mx-auto"}),borderColor:"border-red-300",description:"Penyakit jamur yang menimbulkan bintik karat"},{name:"Layu Daun",color:"text-amber-600",bgColor:"bg-amber-100",icon:F.jsx(Y8,{className:"text-amber-600 w-8 h-8 mx-auto"}),borderColor:"border-amber-300",description:"Penyakit yang menyebabkan daun layu dan menguning"}],iz=[{question:"Apakah saya perlu instal aplikasi?",answer:"Tidak. Cukup buka website CornScan dan upload foto daun jagung."},{question:"Apakah harus ada koneksi internet?",answer:"Ya, karena sistem berbasis web dan menggunakan model AI di sisi browser."},{question:"Seberapa akurat hasil deteksi?",answer:"Sistem kami mencapai akurasi lebih dari 90% pada data uji, dan terus dikembangkan."},{question:"Apakah sistem ini gratis?",answer:"Ya, platform ini dapat digunakan secara gratis oleh petani dan masyarakat umum."},{question:"Bagaimana jika gambar tidak jelas?",answer:"Pastikan gambar diambil dalam kondisi terang dan fokus agar hasil lebih akurat."}],oz=({stats:n})=>F.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-16",children:n.map((e,t)=>{const s=e.icon;return F.jsxs("div",{className:"bg-white rounded-xl p-6 text-center shadow-lg hover:shadow-xl transition-shadow",children:[F.jsx(s,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),F.jsx("div",{className:"text-2xl font-bold text-gray-800 mb-1",children:e.value}),F.jsx("div",{className:"text-sm text-gray-600",children:e.label})]},t)})}),lz=({techFeatures:n})=>F.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 md:p-12",children:[F.jsxs("div",{className:"flex items-center mb-8",children:[F.jsx(V3,{className:"w-8 h-8 text-purple-600 mr-3"}),F.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Teknologi di Balik CornScan"})]}),F.jsx("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:n.map((e,t)=>{const s=e.icon;return F.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 p-6 rounded-xl text-center",children:[F.jsx(s,{className:"w-12 h-12 text-purple-600 mx-auto mb-4"}),F.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:e.title}),F.jsx("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),F.jsx("div",{className:"text-purple-600 font-bold",children:e.stat})]},t)})}),F.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-blue-100 p-8 rounded-2xl",children:[F.jsx(Vc,{className:"w-16 h-16 text-purple-600 mb-4"}),F.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Cara Kerja"}),F.jsx("p",{className:"text-gray-600",children:"Cukup upload foto daun jagung, AI kami akan menganalisis dan memberikan diagnosis serta rekomendasi perawatan dalam hitungan detik."})]})]}),Az=({benefits:n})=>F.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 md:p-12",children:[F.jsxs("div",{className:"flex items-center mb-8",children:[F.jsx("div",{className:"text-2xl mr-3",children:""}),F.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Manfaat yang Dirasakan Petani"})]}),F.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map((e,t)=>{const s=e.icon;return F.jsxs("div",{className:`${e.bgColor} p-6 rounded-xl hover:shadow-lg transition-shadow`,children:[F.jsx(s,{className:`w-8 h-8 ${e.color} mb-4`}),F.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:e.title}),F.jsx("p",{className:"text-gray-600 text-sm",children:e.description})]},t)})})]}),uz=({diseases:n})=>F.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 md:p-12",children:[F.jsxs("div",{className:"flex items-center mb-8",children:[F.jsx("div",{className:"text-2xl mr-3",children:""}),F.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Jenis Penyakit yang Dapat Dideteksi"})]}),F.jsx("p",{className:"text-gray-600 text-lg mb-8",children:"CornScan mampu mendeteksi dan membedakan beberapa kategori kondisi daun jagung:"}),F.jsx("div",{className:"grid md:grid-cols-4 gap-6",children:n.map((e,t)=>F.jsxs("div",{className:`${e.bgColor} border-2 ${e.borderColor} p-6 rounded-xl text-center hover:scale-105 transition-transform`,children:[F.jsx("div",{className:"text-4xl mb-3",children:e.icon}),F.jsx("h3",{className:`text-xl font-semibold ${e.color} mb-2`,children:e.name}),F.jsx("p",{className:"text-gray-600 text-sm",children:e.description})]},t))})]}),cz=({missions:n})=>F.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 md:p-12",children:[F.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-8 text-center",children:"Misi Kami"}),F.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:n.map((e,t)=>{const s=e.icon;return F.jsxs("div",{className:`${e.bgColor} p-6 rounded-xl text-center hover:shadow-lg transition-shadow`,children:[F.jsx(s,{className:`w-12 h-12 ${e.color} mx-auto mb-4`}),F.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:e.title}),F.jsx("p",{className:"text-gray-600",children:e.description})]},t)})})]}),hz=({faqs:n})=>{const[e,t]=Ee.useState(null),s=r=>{t(e===r?null:r)};return F.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 md:p-12",children:[F.jsxs("div",{className:"flex items-center mb-8",children:[F.jsx(XP,{className:"w-8 h-8 text-blue-600 mr-3"}),F.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"FAQ (Pertanyaan Umum)"})]}),F.jsx("div",{className:"space-y-4",children:n.map((r,a)=>F.jsxs("div",{className:"border border-gray-200 rounded-lg hover:border-blue-300 transition-colors",children:[F.jsxs("button",{onClick:()=>s(a),className:"w-full px-6 py-4 text-left flex justify-between items-center hover:bg-gray-50 transition-colors rounded-lg",children:[F.jsx("span",{className:"font-semibold text-gray-800",children:r.question}),e===a?F.jsx(jP,{className:"w-5 h-5 text-gray-500"}):F.jsx(PP,{className:"w-5 h-5 text-gray-500"})]}),e===a&&F.jsx("div",{className:"px-6 pb-4",children:F.jsx("p",{className:"text-gray-600",children:r.answer})})]},a))})]})},fz=()=>F.jsx("div",{className:"min-h-screen py-12 px-6 bg-gradient-to-br from-green-50 to-blue-50",children:F.jsxs("div",{className:"max-w-6xl mx-auto",children:[F.jsxs("div",{className:"text-center mb-16",children:[F.jsx("div",{className:"text-6xl mb-4",children:""}),F.jsx("h1",{className:"text-5xl py-2 font-bold text-gray-800 mb-6 bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"Tentang CornScan"}),F.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-green-500 to-blue-500 mx-auto mb-8"}),F.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Solusi cerdas berbasis AI untuk deteksi dini penyakit tanaman jagung"})]}),F.jsx(oz,{stats:tz}),F.jsx("div",{className:"mb-16",children:F.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 md:p-12",children:[F.jsxs("div",{className:"flex items-center mb-6",children:[F.jsx("div",{className:"text-2xl mr-3",children:""}),F.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Latar Belakang"})]}),F.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:"Indonesia adalah negara agraris yang sangat bergantung pada hasil pertanian seperti jagung. Namun, banyak petani mengalami kesulitan dalam mendeteksi penyakit tanaman jagung secara dini karena keterbatasan pengetahuan dan alat. Hal ini menyebabkan penanganan sering terlambat, biaya meningkat, dan hasil panen menurun."})]})}),F.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-16",children:[F.jsxs("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-2xl p-8",children:[F.jsxs("div",{className:"flex items-center mb-4",children:[F.jsx(q3,{className:"w-8 h-8 text-green-600 mr-3"}),F.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Tujuan Kami"})]}),F.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["CornScan hadir untuk membantu petani dalam"," ",F.jsx("strong",{children:"mendeteksi dini penyakit pada daun jagung"})," ","menggunakan teknologi kecerdasan buatan (AI), sehingga mereka bisa mengambil tindakan cepat dan tepat."]})]}),F.jsxs("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 rounded-2xl p-8",children:[F.jsxs("div",{className:"flex items-center mb-4",children:[F.jsx(US,{className:"w-8 h-8 text-blue-600 mr-3"}),F.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Visi Kami"})]}),F.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Mewujudkan sistem pertanian yang cerdas, inklusif, dan berkelanjutan dengan teknologi AI untuk mendukung kesejahteraan petani Indonesia."})]})]}),F.jsx("div",{className:"mb-16",children:F.jsx(lz,{techFeatures:sz})}),F.jsx("div",{className:"mb-16",children:F.jsx(Az,{benefits:rz})}),F.jsx("div",{className:"mb-16",children:F.jsx(uz,{diseases:az})}),F.jsx("div",{className:"mb-16",children:F.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 rounded-2xl p-8 md:p-12 text-white text-center",children:[F.jsx("div",{className:"text-2xl mb-4",children:""}),F.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Tingkat Akurasi Sistem"}),F.jsx("p",{className:"text-xl mb-4",children:"Model AI kami telah melalui berbagai tahap validasi dan pelatihan."}),F.jsx("div",{className:"text-4xl font-bold mb-2",children:" 90%+"}),F.jsx("p",{className:"text-lg",children:"Akurasi deteksi lebih dari 90% untuk dataset uji, dengan pengujian real-time berbasis browser."})]})}),F.jsx("div",{className:"mb-16",children:F.jsx(cz,{missions:nz})}),F.jsx("div",{className:"mb-16",children:F.jsx(hz,{faqs:iz})}),F.jsx("div",{className:"text-center",children:F.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 rounded-2xl p-8 text-white",children:[F.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Siap Memulai?"}),F.jsx("p",{className:"text-xl mb-6",children:"Gunakan CornScan sekarang dan rasakan kemudahan deteksi penyakit jagung dengan AI"}),F.jsx(Bi,{to:"/cornLeafScanner",className:"bg-white text-green-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors",children:"Mulai Deteksi Sekarang"})]})})]})}),dz=[{photo:"../assets/ygs.jpg",name:"Wahyu Bagas Prastyo",role:"Machine Learning",institution:"Politeknik Negeri Jember"},{photo:"../assets/siti.jpg",name:"Siti Septiyah Agustin",role:"Machine Learning",institution:"Politeknik Negeri Jember"},{photo:"../assets/eva.jpg",name:"Eva Yuliana",role:"Machine Learning",institution:"Politeknik Negeri Jember"},{photo:"../assets/ilhm.jpg",name:"Mohammad Ilham Islamy",role:"Frontend Developer",institution:"Politeknik Negeri Jember"},{photo:"../assets/frd.jpg",name:"Farid Kurniawan",role:"Frontend Developer & Backend Developer",institution:"Politeknik Negeri Jember"},{photo:"../assets/reza.jpg",name:"Muhammad Reza Fadlillah",role:"Backend Developer",institution:"Politeknik Negeri Jember"}],pz=({photo:n,name:e,role:t,institution:s})=>F.jsxs("div",{className:"bg-white/70 backdrop-blur-sm p-6 rounded-2xl shadow-lg border border-gray-200 flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-6 hover:shadow-xl hover:-translate-y-1.5 transition-all duration-300",children:[F.jsx("img",{src:n,alt:`Foto ${e}`,className:"w-28 h-28 rounded-full object-cover shadow-md border-4 border-white",onError:r=>{r.currentTarget.src="https://placehold.co/150x150/e0e0e0/ffffff?text=Error"}}),F.jsxs("div",{className:"text-center sm:text-left",children:[F.jsx("h3",{className:"text-xl font-bold text-gray-800",children:e}),F.jsxs("div",{className:"flex items-center justify-center sm:justify-start text-green-700 font-semibold mt-1",children:[F.jsx($P,{className:"w-4 h-4 mr-2"}),F.jsx("span",{children:t})]}),F.jsxs("div",{className:"flex items-center justify-center sm:justify-start text-gray-500 text-sm mt-2",children:[F.jsx(OP,{className:"w-4 h-4 mr-2"}),F.jsx("span",{children:s})]})]})]}),mz=()=>F.jsx("div",{className:"flex-grow p-6 sm:p-8 bg-gradient-to-br from-green-50 to-blue-50 min-h-screen",children:F.jsxs("div",{className:"max-w-6xl mx-auto",children:[F.jsxs("div",{className:"text-center mb-12",children:[F.jsx("h1",{className:"text-5xl py-2 font-bold text-gray-800 mb-4 bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"Tim Kami"}),F.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Orang-orang hebat di balik pengembangan CornLeaf AI."})]}),F.jsx("div",{className:"grid gap-8 grid-cols-1 lg:grid-cols-2",children:dz.map((n,e)=>F.jsx(pz,{...n},e))})]})}),pl="https://api-production-5b45.up.railway.app",Sl={login:`${pl}/api/login`,register:`${pl}/api/register`,forgotPassword:`${pl}/api/forgot-password`,resetPassword:`${pl}/api/reset-password`,profile:`${pl}/api/profile`,profileDetails:`${pl}/api/profile/details`,profilePassword:`${pl}/api/profile/password`,history:`${pl}/api/history`,historyItem:n=>`${pl}/api/history/${n}`,historySave:`${pl}/api/history/save`,stats:`${pl}/api/stats`},gz="modulepreload",yz=function(n){return"/"+n},gF={},KC=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){let i=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=i(t.map(u=>{if(u=yz(u),u in gF)return;gF[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":gz,h||(d.as="script"),d.crossOrigin="",d.href=u,l&&d.setAttribute("nonce",l),document.head.appendChild(d),h)return new Promise((m,g)=>{d.addEventListener("load",m),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return r.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function Yn(n){"@babel/helpers - typeof";return Yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yn(n)}var Oa=Uint8Array,Zi=Uint16Array,OS=Int32Array,Nw=new Oa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Iw=new Oa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),WC=new Oa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Z3=function(n,e){for(var t=new Zi(31),s=0;s<31;++s)t[s]=e+=1<<n[s-1];for(var r=new OS(t[30]),s=1;s<30;++s)for(var a=t[s];a<t[s+1];++a)r[a]=a-t[s]<<5|s;return{b:t,r}},eD=Z3(Nw,2),tD=eD.b,qC=eD.r;tD[28]=258,qC[258]=28;var nD=Z3(Iw,0),wz=nD.b,yF=nD.r,XC=new Zi(32768);for(var xs=0;xs<32768;++xs){var Dc=(xs&43690)>>1|(xs&21845)<<1;Dc=(Dc&52428)>>2|(Dc&13107)<<2,Dc=(Dc&61680)>>4|(Dc&3855)<<4,XC[xs]=((Dc&65280)>>8|(Dc&255)<<8)>>1}var IA=function(n,e,t){for(var s=n.length,r=0,a=new Zi(e);r<s;++r)n[r]&&++a[n[r]-1];var i=new Zi(e);for(r=1;r<e;++r)i[r]=i[r-1]+a[r-1]<<1;var o;if(t){o=new Zi(1<<e);var l=15-e;for(r=0;r<s;++r)if(n[r])for(var u=r<<4|n[r],h=e-n[r],f=i[n[r]-1]++<<h,d=f|(1<<h)-1;f<=d;++f)o[XC[f]>>l]=u}else for(o=new Zi(s),r=0;r<s;++r)n[r]&&(o[r]=XC[i[n[r]-1]++]>>15-n[r]);return o},Jc=new Oa(288);for(var xs=0;xs<144;++xs)Jc[xs]=8;for(var xs=144;xs<256;++xs)Jc[xs]=9;for(var xs=256;xs<280;++xs)Jc[xs]=7;for(var xs=280;xs<288;++xs)Jc[xs]=8;var Fg=new Oa(32);for(var xs=0;xs<32;++xs)Fg[xs]=5;var bz=IA(Jc,9,0),xz=IA(Jc,9,1),vz=IA(Fg,5,0),Cz=IA(Fg,5,1),Vv=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ml=function(n,e,t){var s=e/8|0;return(n[s]|n[s+1]<<8)>>(e&7)&t},Gv=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},QS=function(n){return(n+7)/8|0},sD=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Oa(n.subarray(e,t))},Bz=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],xl=function(n,e,t){var s=new Error(e||Bz[n]);if(s.code=n,Error.captureStackTrace&&Error.captureStackTrace(s,xl),!t)throw s;return s},Sz=function(n,e,t,s){var r=n.length,a=0;if(!r||e.f&&!e.l)return t||new Oa(0);var i=!t,o=i||e.i!=2,l=e.i;i&&(t=new Oa(r*3));var u=function(ze){var We=t.length;if(ze>We){var tt=new Oa(Math.max(We*2,ze));tt.set(t),t=tt}},h=e.f||0,f=e.p||0,d=e.b||0,m=e.l,g=e.d,w=e.m,v=e.n,b=r*8;do{if(!m){h=ml(n,f,1);var C=ml(n,f+1,3);if(f+=3,C)if(C==1)m=xz,g=Cz,w=9,v=5;else if(C==2){var $=ml(n,f,31)+257,H=ml(n,f+10,15)+4,U=$+ml(n,f+5,31)+1;f+=14;for(var O=new Oa(U),z=new Oa(19),T=0;T<H;++T)z[WC[T]]=ml(n,f+T*3,7);f+=H*3;for(var R=Vv(z),W=(1<<R)-1,K=IA(z,R,1),T=0;T<U;){var re=K[ml(n,f,W)];f+=re&15;var N=re>>4;if(N<16)O[T++]=N;else{var P=0,Y=0;for(N==16?(Y=3+ml(n,f,3),f+=2,P=O[T-1]):N==17?(Y=3+ml(n,f,7),f+=3):N==18&&(Y=11+ml(n,f,127),f+=7);Y--;)O[T++]=P}}var J=O.subarray(0,$),te=O.subarray($);w=Vv(J),v=Vv(te),m=IA(J,w,1),g=IA(te,v,1)}else xl(1);else{var N=QS(f)+4,I=n[N-4]|n[N-3]<<8,L=N+I;if(L>r){l&&xl(0);break}o&&u(d+I),t.set(n.subarray(N,L),d),e.b=d+=I,e.p=f=L*8,e.f=h;continue}if(f>b){l&&xl(0);break}}o&&u(d+131072);for(var j=(1<<w)-1,ue=(1<<v)-1,Q=f;;Q=f){var P=m[Gv(n,f)&j],V=P>>4;if(f+=P&15,f>b){l&&xl(0);break}if(P||xl(2),V<256)t[d++]=V;else if(V==256){Q=f,m=null;break}else{var Z=V-254;if(V>264){var T=V-257,le=Nw[T];Z=ml(n,f,(1<<le)-1)+tD[T],f+=le}var ce=g[Gv(n,f)&ue],pe=ce>>4;ce||xl(3),f+=ce&15;var te=wz[pe];if(pe>3){var le=Iw[pe];te+=Gv(n,f)&(1<<le)-1,f+=le}if(f>b){l&&xl(0);break}o&&u(d+131072);var ye=d+Z;if(d<te){var xe=a-te,Me=Math.min(te,ye);for(xe+d<0&&xl(3);d<Me;++d)t[d]=s[xe+d]}for(;d<ye;++d)t[d]=t[d-te]}}e.l=m,e.p=Q,e.b=d,e.f=h,m&&(h=1,e.m=w,e.d=g,e.n=v)}while(!h);return d!=t.length&&i?sD(t,0,d):t.subarray(0,d)},wu=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8},Xm=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8,n[s+2]|=t>>16},Kv=function(n,e){for(var t=[],s=0;s<n.length;++s)n[s]&&t.push({s,f:n[s]});var r=t.length,a=t.slice();if(!r)return{t:aD,l:0};if(r==1){var i=new Oa(t[0].s+1);return i[t[0].s]=1,{t:i,l:1}}t.sort(function(L,$){return L.f-$.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],u=0,h=1,f=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};h!=r-1;)o=t[t[u].f<t[f].f?u++:f++],l=t[u!=h&&t[u].f<t[f].f?u++:f++],t[h++]={s:-1,f:o.f+l.f,l:o,r:l};for(var d=a[0].s,s=1;s<r;++s)a[s].s>d&&(d=a[s].s);var m=new Zi(d+1),g=YC(t[h-1],m,0);if(g>e){var s=0,w=0,v=g-e,b=1<<v;for(a.sort(function($,H){return m[H.s]-m[$.s]||$.f-H.f});s<r;++s){var C=a[s].s;if(m[C]>e)w+=b-(1<<g-m[C]),m[C]=e;else break}for(w>>=v;w>0;){var N=a[s].s;m[N]<e?w-=1<<e-m[N]++-1:++s}for(;s>=0&&w;--s){var I=a[s].s;m[I]==e&&(--m[I],++w)}g=e}return{t:new Oa(m),l:g}},YC=function(n,e,t){return n.s==-1?Math.max(YC(n.l,e,t+1),YC(n.r,e,t+1)):e[n.s]=t},wF=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Zi(++e),s=0,r=n[0],a=1,i=function(l){t[s++]=l},o=1;o<=e;++o)if(n[o]==r&&o!=e)++a;else{if(!r&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(r),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(r);a=1,r=n[o]}return{c:t.subarray(0,s),n:e}},Ym=function(n,e){for(var t=0,s=0;s<e.length;++s)t+=n[s]*e[s];return t},rD=function(n,e,t){var s=t.length,r=QS(e+2);n[r]=s&255,n[r+1]=s>>8,n[r+2]=n[r]^255,n[r+3]=n[r+1]^255;for(var a=0;a<s;++a)n[r+a+4]=t[a];return(r+4+s)*8},bF=function(n,e,t,s,r,a,i,o,l,u,h){wu(e,h++,t),++r[256];for(var f=Kv(r,15),d=f.t,m=f.l,g=Kv(a,15),w=g.t,v=g.l,b=wF(d),C=b.c,N=b.n,I=wF(w),L=I.c,$=I.n,H=new Zi(19),U=0;U<C.length;++U)++H[C[U]&31];for(var U=0;U<L.length;++U)++H[L[U]&31];for(var O=Kv(H,7),z=O.t,T=O.l,R=19;R>4&&!z[WC[R-1]];--R);var W=u+5<<3,K=Ym(r,Jc)+Ym(a,Fg)+i,re=Ym(r,d)+Ym(a,w)+i+14+3*R+Ym(H,z)+2*H[16]+3*H[17]+7*H[18];if(l>=0&&W<=K&&W<=re)return rD(e,h,n.subarray(l,l+u));var P,Y,J,te;if(wu(e,h,1+(re<K)),h+=2,re<K){P=IA(d,m,0),Y=d,J=IA(w,v,0),te=w;var j=IA(z,T,0);wu(e,h,N-257),wu(e,h+5,$-1),wu(e,h+10,R-4),h+=14;for(var U=0;U<R;++U)wu(e,h+3*U,z[WC[U]]);h+=3*R;for(var ue=[C,L],Q=0;Q<2;++Q)for(var V=ue[Q],U=0;U<V.length;++U){var Z=V[U]&31;wu(e,h,j[Z]),h+=z[Z],Z>15&&(wu(e,h,V[U]>>5&127),h+=V[U]>>12)}}else P=bz,Y=Jc,J=vz,te=Fg;for(var U=0;U<o;++U){var le=s[U];if(le>255){var Z=le>>18&31;Xm(e,h,P[Z+257]),h+=Y[Z+257],Z>7&&(wu(e,h,le>>23&31),h+=Nw[Z]);var ce=le&31;Xm(e,h,J[ce]),h+=te[ce],ce>3&&(Xm(e,h,le>>5&8191),h+=Iw[ce])}else Xm(e,h,P[le]),h+=Y[le]}return Xm(e,h,P[256]),h+Y[256]},Nz=new OS([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),aD=new Oa(0),Iz=function(n,e,t,s,r,a){var i=a.z||n.length,o=new Oa(s+i+5*(1+Math.ceil(i/7e3))+r),l=o.subarray(s,o.length-r),u=a.l,h=(a.r||0)&7;if(e){h&&(l[0]=a.r>>3);for(var f=Nz[e-1],d=f>>13,m=f&8191,g=(1<<t)-1,w=a.p||new Zi(32768),v=a.h||new Zi(g+1),b=Math.ceil(t/3),C=2*b,N=function(dt){return(n[dt]^n[dt+1]<<b^n[dt+2]<<C)&g},I=new OS(25e3),L=new Zi(288),$=new Zi(32),H=0,U=0,O=a.i||0,z=0,T=a.w||0,R=0;O+2<i;++O){var W=N(O),K=O&32767,re=v[W];if(w[K]=re,v[W]=K,T<=O){var P=i-O;if((H>7e3||z>24576)&&(P>423||!u)){h=bF(n,l,0,I,L,$,U,z,R,O-R,h),z=H=U=0,R=O;for(var Y=0;Y<286;++Y)L[Y]=0;for(var Y=0;Y<30;++Y)$[Y]=0}var J=2,te=0,j=m,ue=K-re&32767;if(P>2&&W==N(O-ue))for(var Q=Math.min(d,P)-1,V=Math.min(32767,O),Z=Math.min(258,P);ue<=V&&--j&&K!=re;){if(n[O+J]==n[O+J-ue]){for(var le=0;le<Z&&n[O+le]==n[O+le-ue];++le);if(le>J){if(J=le,te=ue,le>Q)break;for(var ce=Math.min(ue,le-2),pe=0,Y=0;Y<ce;++Y){var ye=O-ue+Y&32767,xe=w[ye],Me=ye-xe&32767;Me>pe&&(pe=Me,re=ye)}}}K=re,re=w[K],ue+=K-re&32767}if(te){I[z++]=268435456|qC[J]<<18|yF[te];var ze=qC[J]&31,We=yF[te]&31;U+=Nw[ze]+Iw[We],++L[257+ze],++$[We],T=O+J,++H}else I[z++]=n[O],++L[n[O]]}}for(O=Math.max(O,T);O<i;++O)I[z++]=n[O],++L[n[O]];h=bF(n,l,u,I,L,$,U,z,R,O-R,h),u||(a.r=h&7|l[h/8|0]<<3,h-=7,a.h=v,a.p=w,a.i=O,a.w=T)}else{for(var O=a.w||0;O<i+u;O+=65535){var tt=O+65535;tt>=i&&(l[h/8|0]=u,tt=i),h=rD(l,h+1,n.subarray(O,tt))}a.i=i}return sD(o,0,s+QS(h)+r)},iD=function(){var n=1,e=0;return{p:function(t){for(var s=n,r=e,a=t.length|0,i=0;i!=a;){for(var o=Math.min(i+2655,a);i<o;++i)r+=s+=t[i];s=(s&65535)+15*(s>>16),r=(r&65535)+15*(r>>16)}n=s,e=r},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},Ez=function(n,e,t,s,r){if(!r&&(r={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),i=new Oa(a.length+n.length);i.set(a),i.set(n,a.length),n=i,r.w=a.length}return Iz(n,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,s,r)},oD=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},kz=function(n,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=s<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var r=iD();r.p(e.dictionary),oD(n,2,r.d())}},Fz=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&xl(6,"invalid zlib data"),(n[1]>>5&1)==1&&xl(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function JC(n,e){e||(e={});var t=iD();t.p(n);var s=Ez(n,e,e.dictionary?6:2,4);return kz(s,e),oD(s,s.length-4,t.d()),s}function Tz(n,e){return Sz(n.subarray(Fz(n),-4),{i:2},e,e)}var Dz=typeof TextDecoder<"u"&&new TextDecoder,Lz=0;try{Dz.decode(aD,{stream:!0}),Lz=1}catch{}var qt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Wv(){qt.console&&typeof qt.console.log=="function"&&qt.console.log.apply(qt.console,arguments)}var ls={log:Wv,warn:function(n){qt.console&&(typeof qt.console.warn=="function"?qt.console.warn.apply(qt.console,arguments):Wv.call(null,arguments))},error:function(n){qt.console&&(typeof qt.console.error=="function"?qt.console.error.apply(qt.console,arguments):Wv(n))}};function qv(n,e,t){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){cf(s.response,e,t)},s.onerror=function(){ls.error("could not download file")},s.send()}function xF(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function by(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var xg,ZC,cf=qt.saveAs||((typeof window>"u"?"undefined":Yn(window))!=="object"||window!==qt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var s=qt.URL||qt.webkitURL,r=document.createElement("a");e=e||n.name||"download",r.download=e,r.rel="noopener",typeof n=="string"?(r.href=n,r.origin!==location.origin?xF(r.href)?qv(n,e,t):by(r,r.target="_blank"):by(r)):(r.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(r.href)},4e4),setTimeout(function(){by(r)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(xF(n))qv(n,e,t);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){by(s)})}else navigator.msSaveOrOpenBlob(function(r,a){return a===void 0?a={autoBom:!1}:Yn(a)!=="object"&&(ls.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}(n,t),e)}:function(n,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return qv(n,e,t);var r=n.type==="application/octet-stream",a=/constructor/i.test(qt.HTMLElement)||qt.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||r&&a)&&(typeof FileReader>"u"?"undefined":Yn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var h=o.result;h=i?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=h:location=h,s=null},o.readAsDataURL(n)}else{var l=qt.URL||qt.webkitURL,u=l.createObjectURL(n);s?s.location=u:location.href=u,s=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function lD(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],s=0;s<t.length;s++){var r=t[s].re,a=t[s].process,i=r.exec(n);i&&(e=a(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Xv(n,e){var t=n[0],s=n[1],r=n[2],a=n[3];t=ka(t,s,r,a,e[0],7,-680876936),a=ka(a,t,s,r,e[1],12,-389564586),r=ka(r,a,t,s,e[2],17,606105819),s=ka(s,r,a,t,e[3],22,-1044525330),t=ka(t,s,r,a,e[4],7,-176418897),a=ka(a,t,s,r,e[5],12,1200080426),r=ka(r,a,t,s,e[6],17,-1473231341),s=ka(s,r,a,t,e[7],22,-45705983),t=ka(t,s,r,a,e[8],7,1770035416),a=ka(a,t,s,r,e[9],12,-1958414417),r=ka(r,a,t,s,e[10],17,-42063),s=ka(s,r,a,t,e[11],22,-1990404162),t=ka(t,s,r,a,e[12],7,1804603682),a=ka(a,t,s,r,e[13],12,-40341101),r=ka(r,a,t,s,e[14],17,-1502002290),t=Fa(t,s=ka(s,r,a,t,e[15],22,1236535329),r,a,e[1],5,-165796510),a=Fa(a,t,s,r,e[6],9,-1069501632),r=Fa(r,a,t,s,e[11],14,643717713),s=Fa(s,r,a,t,e[0],20,-373897302),t=Fa(t,s,r,a,e[5],5,-701558691),a=Fa(a,t,s,r,e[10],9,38016083),r=Fa(r,a,t,s,e[15],14,-660478335),s=Fa(s,r,a,t,e[4],20,-405537848),t=Fa(t,s,r,a,e[9],5,568446438),a=Fa(a,t,s,r,e[14],9,-1019803690),r=Fa(r,a,t,s,e[3],14,-187363961),s=Fa(s,r,a,t,e[8],20,1163531501),t=Fa(t,s,r,a,e[13],5,-1444681467),a=Fa(a,t,s,r,e[2],9,-51403784),r=Fa(r,a,t,s,e[7],14,1735328473),t=Ta(t,s=Fa(s,r,a,t,e[12],20,-1926607734),r,a,e[5],4,-378558),a=Ta(a,t,s,r,e[8],11,-2022574463),r=Ta(r,a,t,s,e[11],16,1839030562),s=Ta(s,r,a,t,e[14],23,-35309556),t=Ta(t,s,r,a,e[1],4,-1530992060),a=Ta(a,t,s,r,e[4],11,1272893353),r=Ta(r,a,t,s,e[7],16,-155497632),s=Ta(s,r,a,t,e[10],23,-1094730640),t=Ta(t,s,r,a,e[13],4,681279174),a=Ta(a,t,s,r,e[0],11,-358537222),r=Ta(r,a,t,s,e[3],16,-722521979),s=Ta(s,r,a,t,e[6],23,76029189),t=Ta(t,s,r,a,e[9],4,-640364487),a=Ta(a,t,s,r,e[12],11,-421815835),r=Ta(r,a,t,s,e[15],16,530742520),t=Da(t,s=Ta(s,r,a,t,e[2],23,-995338651),r,a,e[0],6,-198630844),a=Da(a,t,s,r,e[7],10,1126891415),r=Da(r,a,t,s,e[14],15,-1416354905),s=Da(s,r,a,t,e[5],21,-57434055),t=Da(t,s,r,a,e[12],6,1700485571),a=Da(a,t,s,r,e[3],10,-1894986606),r=Da(r,a,t,s,e[10],15,-1051523),s=Da(s,r,a,t,e[1],21,-2054922799),t=Da(t,s,r,a,e[8],6,1873313359),a=Da(a,t,s,r,e[15],10,-30611744),r=Da(r,a,t,s,e[6],15,-1560198380),s=Da(s,r,a,t,e[13],21,1309151649),t=Da(t,s,r,a,e[4],6,-145523070),a=Da(a,t,s,r,e[11],10,-1120210379),r=Da(r,a,t,s,e[2],15,718787259),s=Da(s,r,a,t,e[9],21,-343485551),n[0]=Oc(t,n[0]),n[1]=Oc(s,n[1]),n[2]=Oc(r,n[2]),n[3]=Oc(a,n[3])}function Ew(n,e,t,s,r,a){return e=Oc(Oc(e,n),Oc(s,a)),Oc(e<<r|e>>>32-r,t)}function ka(n,e,t,s,r,a,i){return Ew(e&t|~e&s,n,e,r,a,i)}function Fa(n,e,t,s,r,a,i){return Ew(e&s|t&~s,n,e,r,a,i)}function Ta(n,e,t,s,r,a,i){return Ew(e^t^s,n,e,r,a,i)}function Da(n,e,t,s,r,a,i){return Ew(t^(e|~s),n,e,r,a,i)}function AD(n){var e,t=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Xv(s,Uz(n.substring(e-64,e)));n=n.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)r[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(Xv(s,r),e=0;e<16;e++)r[e]=0;return r[14]=8*t,Xv(s,r),s}function Uz(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}xg=qt.atob.bind(qt),ZC=qt.btoa.bind(qt);var vF="0123456789abcdef".split("");function Rz(n){for(var e="",t=0;t<4;t++)e+=vF[n>>8*t+4&15]+vF[n>>8*t&15];return e}function $z(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function eB(n){return AD(n).map($z).join("")}var _z=function(n){for(var e=0;e<n.length;e++)n[e]=Rz(n[e]);return n.join("")}(AD("hello"))!="5d41402abc4b2a76b9719d911017c592";function Oc(n,e){if(_z){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function tB(n,e){var t,s,r,a;if(n!==t){for(var i=(r=n,a=1+(256/n.length>>0),new Array(a+1).join(r)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var h=o[l];u=(u+h+i.charCodeAt(l))%256,o[l]=o[u],o[u]=h}t=n,s=o}else o=s;var f=e.length,d=0,m=0,g="";for(l=0;l<f;l++)m=(m+(h=o[d=(d+1)%256]))%256,o[d]=o[m],o[m]=h,i=o[(o[d]+o[m])%256],g+=String.fromCharCode(e.charCodeAt(l)^i);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var CF={print:4,modify:8,copy:16,"annot-forms":32};function Yd(n,e,t,s){this.v=1,this.r=2;var r=192;n.forEach(function(o){if(CF.perm!==void 0)throw new Error("Invalid permission: "+o);r+=CF[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),i=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,i),this.P=-(1+(255^r)),this.encryptionKey=eB(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=tB(this.encryptionKey,this.padding)}function Jd(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,s=0;s<t;s++){var r=n.charCodeAt(s);r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?e+="#"+("0"+r.toString(16)).slice(-2):e+=n[s]}return e}function BF(n){if(Yn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,r){if(r=r||!1,typeof t!="string"||typeof s!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[s,!!r],a},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),r=[];for(var a in e[t]){var i=e[t][a];try{i[0].apply(n,s)}catch(o){qt.console&&ls.error("jsPDF PubSub Error",o.message,o)}i[1]&&r.push(a)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function $2(n){if(!(this instanceof $2))return new $2(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function uD(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function ff(n,e,t,s,r){if(!(this instanceof ff))return new ff(n,e,t,s,r);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,uD.call(this,s,r)}function ap(n,e,t,s,r){if(!(this instanceof ap))return new ap(n,e,t,s,r);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,uD.call(this,s,r)}function Vt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],r=arguments[2],a=arguments[3],i=[],o=1,l=16,u="S",h=null;Yn(n=n||{})==="object"&&(t=n.orientation,s=n.unit||s,r=n.format||r,a=n.compress||n.compressPdf||a,(h=n.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),o=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),u=n.defaultPathOperation||"S"),i=n.filters||(a===!0?["FlateEncode"]:i),s=s||"mm",t=(""+(t||"P")).toLowerCase();var f=n.putOnlyUsedFonts||!1,d={},m={internal:{},__private__:{}};m.__private__.PubSub=BF;var g="1.3",w=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(k){g=k};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return v};var b=m.__private__.getPageFormat=function(k){return v[k]};r=r||"a4";var C={COMPAT:"compat",ADVANCED:"advanced"},N=C.COMPAT;function I(){this.saveGraphicsState(),fe(new Lt(gt,0,0,-gt,0,ql()*gt).toString()+" cm"),this.setFontSize(this.getFontSize()/gt),u="n",N=C.ADVANCED}function L(){this.restoreGraphicsState(),u="S",N=C.COMPAT}var $=m.__private__.combineFontStyleAndFontWeight=function(k,X){if(k=="bold"&&X=="normal"||k=="bold"&&X==400||k=="normal"&&X=="italic"||k=="bold"&&X=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return X&&(k=X==400||X==="normal"?k==="italic"?"italic":"normal":X!=700&&X!=="bold"||k!=="normal"?(X==700?"bold":X)+""+k:"bold"),k};m.advancedAPI=function(k){var X=N===C.COMPAT;return X&&I.call(this),typeof k!="function"||(k(this),X&&L.call(this)),this},m.compatAPI=function(k){var X=N===C.ADVANCED;return X&&L.call(this),typeof k!="function"||(k(this),X&&I.call(this)),this},m.isAdvancedAPI=function(){return N===C.ADVANCED};var H,U=function(k){if(N!==C.ADVANCED)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=m.roundToPrecision=m.__private__.roundToPrecision=function(k,X){var de=e||X;if(isNaN(k)||isNaN(de))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(de).replace(/0+$/,"")};H=m.hpf=m.__private__.hpf=typeof l=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return O(k,l)}:l==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return O(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return O(k,16)};var z=m.f2=m.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return O(k,2)},T=m.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return O(k,3)},R=m.scale=m.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return N===C.COMPAT?k*gt:N===C.ADVANCED?k:void 0},W=function(k){return N===C.COMPAT?ql()-k:N===C.ADVANCED?k:void 0},K=function(k){return R(W(k))};m.__private__.setPrecision=m.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(e=parseInt(k,10))};var re,P="00000000000000000000000000000000",Y=m.__private__.getFileId=function(){return P},J=m.__private__.setFileId=function(k){return P=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():P.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(mr=new Yd(h.userPermissions,h.userPassword,h.ownerPassword,P)),P};m.setFileId=function(k){return J(k),this},m.getFileId=function(){return Y()};var te=m.__private__.convertDateToPDFDate=function(k){var X=k.getTimezoneOffset(),de=X<0?"+":"-",ve=Math.floor(Math.abs(X/60)),Le=Math.abs(X%60),Ke=[de,Z(ve),"'",Z(Le),"'"].join("");return["D:",k.getFullYear(),Z(k.getMonth()+1),Z(k.getDate()),Z(k.getHours()),Z(k.getMinutes()),Z(k.getSeconds()),Ke].join("")},j=m.__private__.convertPDFDateToDate=function(k){var X=parseInt(k.substr(2,4),10),de=parseInt(k.substr(6,2),10)-1,ve=parseInt(k.substr(8,2),10),Le=parseInt(k.substr(10,2),10),Ke=parseInt(k.substr(12,2),10),it=parseInt(k.substr(14,2),10);return new Date(X,de,ve,Le,Ke,it,0)},ue=m.__private__.setCreationDate=function(k){var X;if(k===void 0&&(k=new Date),k instanceof Date)X=te(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");X=k}return re=X},Q=m.__private__.getCreationDate=function(k){var X=re;return k==="jsDate"&&(X=j(re)),X};m.setCreationDate=function(k){return ue(k),this},m.getCreationDate=function(k){return Q(k)};var V,Z=m.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},le=m.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},ce=0,pe=[],ye=[],xe=0,Me=[],ze=[],We=!1,tt=ye,dt=function(){ce=0,xe=0,ye=[],pe=[],Me=[],Ka=js(),Wa=js()};m.__private__.setCustomOutputDestination=function(k){We=!0,tt=k};var _e=function(k){We||(tt=k)};m.__private__.resetCustomOutputDestination=function(){We=!1,tt=ye};var fe=m.__private__.out=function(k){return k=k.toString(),xe+=k.length+1,tt.push(k),tt},ct=m.__private__.write=function(k){return fe(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},lt=m.__private__.getArrayBuffer=function(k){for(var X=k.length,de=new ArrayBuffer(X),ve=new Uint8Array(de);X--;)ve[X]=k.charCodeAt(X);return de},rt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return rt};var ot=n.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(k){return ot=N===C.ADVANCED?k/gt:k,this};var ut,At=m.__private__.getFontSize=m.getFontSize=function(){return N===C.COMPAT?ot:ot*gt},St=n.R2L||!1;m.__private__.setR2L=m.setR2L=function(k){return St=k,this},m.__private__.getR2L=m.getR2L=function(){return St};var Rt,Ht=m.__private__.setZoomMode=function(k){var X=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))ut=k;else if(isNaN(k)){if(X.indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');ut=k}else ut=parseInt(k,10)};m.__private__.getZoomMode=function(){return ut};var Pt,Qt=m.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');Rt=k};m.__private__.getPageMode=function(){return Rt};var en=m.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');Pt=k};m.__private__.getLayoutMode=function(){return Pt},m.__private__.setDisplayMode=m.setDisplayMode=function(k,X,de){return Ht(k),en(X),Qt(de),this};var Bt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(k){if(Object.keys(Bt).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Bt[k]},m.__private__.getDocumentProperties=function(){return Bt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(k){for(var X in Bt)Bt.hasOwnProperty(X)&&k[X]&&(Bt[X]=k[X]);return this},m.__private__.setDocumentProperty=function(k,X){if(Object.keys(Bt).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Bt[k]=X};var an,gt,pr,ln,Pr,bn={},Gn={},wa=[],_n={},Ql={},gs={},ja={},Va=null,Bs=0,Jt=[],Rn=new BF(m),zo=n.hotfixes||[],tr={},Ui={},ao=[],Lt=function k(X,de,ve,Le,Ke,it){if(!(this instanceof k))return new k(X,de,ve,Le,Ke,it);isNaN(X)&&(X=1),isNaN(de)&&(de=0),isNaN(ve)&&(ve=0),isNaN(Le)&&(Le=1),isNaN(Ke)&&(Ke=0),isNaN(it)&&(it=0),this._matrix=[X,de,ve,Le,Ke,it]};Object.defineProperty(Lt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Lt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Lt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Lt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Lt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Lt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Lt.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Lt.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Lt.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Lt.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Lt.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Lt.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Lt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Lt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Lt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Lt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Lt.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(H).join(k)},Lt.prototype.multiply=function(k){var X=k.sx*this.sx+k.shy*this.shx,de=k.sx*this.shy+k.shy*this.sy,ve=k.shx*this.sx+k.sy*this.shx,Le=k.shx*this.shy+k.sy*this.sy,Ke=k.tx*this.sx+k.ty*this.shx+this.tx,it=k.tx*this.shy+k.ty*this.sy+this.ty;return new Lt(X,de,ve,Le,Ke,it)},Lt.prototype.decompose=function(){var k=this.sx,X=this.shy,de=this.shx,ve=this.sy,Le=this.tx,Ke=this.ty,it=Math.sqrt(k*k+X*X),yt=(k/=it)*de+(X/=it)*ve;de-=k*yt,ve-=X*yt;var Dt=Math.sqrt(de*de+ve*ve);return yt/=Dt,k*(ve/=Dt)<X*(de/=Dt)&&(k=-k,X=-X,yt=-yt,it=-it),{scale:new Lt(it,0,0,Dt,0,0),translate:new Lt(1,0,0,1,Le,Ke),rotate:new Lt(k,X,-X,k,0,0),skew:new Lt(1,0,yt,1,0,0)}},Lt.prototype.toString=function(k){return this.join(" ")},Lt.prototype.inversed=function(){var k=this.sx,X=this.shy,de=this.shx,ve=this.sy,Le=this.tx,Ke=this.ty,it=1/(k*ve-X*de),yt=ve*it,Dt=-X*it,nn=-de*it,Zt=k*it;return new Lt(yt,Dt,nn,Zt,-yt*Le-nn*Ke,-Dt*Le-Zt*Ke)},Lt.prototype.applyToPoint=function(k){var X=k.x*this.sx+k.y*this.shx+this.tx,de=k.x*this.shy+k.y*this.sy+this.ty;return new Ju(X,de)},Lt.prototype.applyToRectangle=function(k){var X=this.applyToPoint(k),de=this.applyToPoint(new Ju(k.x+k.w,k.y+k.h));return new Uh(X.x,X.y,de.x-X.x,de.y-X.y)},Lt.prototype.clone=function(){var k=this.sx,X=this.shy,de=this.shx,ve=this.sy,Le=this.tx,Ke=this.ty;return new Lt(k,X,de,ve,Le,Ke)},m.Matrix=Lt;var Zn=m.matrixMult=function(k,X){return X.multiply(k)},ys=new Lt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=ys;var nr=function(k,X){if(!Ql[k]){var de=(X instanceof ff?"Sh":"P")+(Object.keys(_n).length+1).toString(10);X.id=de,Ql[k]=de,_n[de]=X,Rn.publish("addPattern",X)}};m.ShadingPattern=ff,m.TilingPattern=ap,m.addShadingPattern=function(k,X){return U("addShadingPattern()"),nr(k,X),this},m.beginTilingPattern=function(k){U("beginTilingPattern()"),Zu(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},m.endTilingPattern=function(k,X){U("endTilingPattern()"),X.stream=ze[V].join(`
`),nr(k,X),Rn.publish("endTilingPattern",X),ao.pop().restore()};var Rs=m.__private__.newObject=function(){var k=js();return Ga(k,!0),k},js=m.__private__.newObjectDeferred=function(){return ce++,pe[ce]=function(){return xe},ce},Ga=function(k,X){return X=typeof X=="boolean"&&X,pe[k]=xe,X&&fe(k+" 0 obj"),k},PA=m.__private__.newAdditionalObject=function(){var k={objId:js(),content:""};return Me.push(k),k},Ka=js(),Wa=js(),zr=m.__private__.decodeColorString=function(k){var X=k.split(" ");if(X.length!==2||X[1]!=="g"&&X[1]!=="G")X.length===5&&(X[4]==="k"||X[4]==="K")&&(X=[(1-X[0])*(1-X[3]),(1-X[1])*(1-X[3]),(1-X[2])*(1-X[3]),"r"]);else{var de=parseFloat(X[0]);X=[de,de,de,"r"]}for(var ve="#",Le=0;Le<3;Le++)ve+=("0"+Math.floor(255*parseFloat(X[Le])).toString(16)).slice(-2);return ve},jr=m.__private__.encodeColorString=function(k){var X;typeof k=="string"&&(k={ch1:k});var de=k.ch1,ve=k.ch2,Le=k.ch3,Ke=k.ch4,it=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof de=="string"&&de.charAt(0)!=="#"){var yt=new lD(de);if(yt.ok)de=yt.toHex();else if(!/^\d*\.?\d*$/.test(de))throw new Error('Invalid color "'+de+'" passed to jsPDF.encodeColorString.')}if(typeof de=="string"&&/^#[0-9A-Fa-f]{3}$/.test(de)&&(de="#"+de[1]+de[1]+de[2]+de[2]+de[3]+de[3]),typeof de=="string"&&/^#[0-9A-Fa-f]{6}$/.test(de)){var Dt=parseInt(de.substr(1),16);de=Dt>>16&255,ve=Dt>>8&255,Le=255&Dt}if(ve===void 0||Ke===void 0&&de===ve&&ve===Le)if(typeof de=="string")X=de+" "+it[0];else switch(k.precision){case 2:X=z(de/255)+" "+it[0];break;case 3:default:X=T(de/255)+" "+it[0]}else if(Ke===void 0||Yn(Ke)==="object"){if(Ke&&!isNaN(Ke.a)&&Ke.a===0)return X=["1.","1.","1.",it[1]].join(" ");if(typeof de=="string")X=[de,ve,Le,it[1]].join(" ");else switch(k.precision){case 2:X=[z(de/255),z(ve/255),z(Le/255),it[1]].join(" ");break;default:case 3:X=[T(de/255),T(ve/255),T(Le/255),it[1]].join(" ")}}else if(typeof de=="string")X=[de,ve,Le,Ke,it[2]].join(" ");else switch(k.precision){case 2:X=[z(de),z(ve),z(Le),z(Ke),it[2]].join(" ");break;case 3:default:X=[T(de),T(ve),T(Le),T(Ke),it[2]].join(" ")}return X},ba=m.__private__.getFilters=function(){return i},Dr=m.__private__.putStream=function(k){var X=(k=k||{}).data||"",de=k.filters||ba(),ve=k.alreadyAppliedFilters||[],Le=k.addLength1||!1,Ke=X.length,it=k.objectId,yt=function(_s){return _s};if(h!==null&&it===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(yt=mr.encryptor(it,0));var Dt={};de===!0&&(de=["FlateEncode"]);var nn=k.additionalKeyValues||[],Zt=(Dt=Vt.API.processDataByFilters!==void 0?Vt.API.processDataByFilters(X,de):{data:X,reverseChain:[]}).reverseChain+(Array.isArray(ve)?ve.join(" "):ve.toString());if(Dt.data.length!==0&&(nn.push({key:"Length",value:Dt.data.length}),Le===!0&&nn.push({key:"Length1",value:Ke})),Zt.length!=0)if(Zt.split("/").length-1==1)nn.push({key:"Filter",value:Zt});else{nn.push({key:"Filter",value:"["+Zt+"]"});for(var xn=0;xn<nn.length;xn+=1)if(nn[xn].key==="DecodeParms"){for(var cs=[],ws=0;ws<Dt.reverseChain.split("/").length-1;ws+=1)cs.push("null");cs.push(nn[xn].value),nn[xn].value="["+cs.join(" ")+"]"}}fe("<<");for(var $s=0;$s<nn.length;$s++)fe("/"+nn[$s].key+" "+nn[$s].value);fe(">>"),Dt.data.length!==0&&(fe("stream"),fe(yt(Dt.data)),fe("endstream"))},Kn=m.__private__.putPage=function(k){var X=k.number,de=k.data,ve=k.objId,Le=k.contentsObjId;Ga(ve,!0),fe("<</Type /Page"),fe("/Parent "+k.rootDictionaryObjId+" 0 R"),fe("/Resources "+k.resourceDictionaryObjId+" 0 R"),fe("/MediaBox ["+parseFloat(H(k.mediaBox.bottomLeftX))+" "+parseFloat(H(k.mediaBox.bottomLeftY))+" "+H(k.mediaBox.topRightX)+" "+H(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&fe("/CropBox ["+H(k.cropBox.bottomLeftX)+" "+H(k.cropBox.bottomLeftY)+" "+H(k.cropBox.topRightX)+" "+H(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&fe("/BleedBox ["+H(k.bleedBox.bottomLeftX)+" "+H(k.bleedBox.bottomLeftY)+" "+H(k.bleedBox.topRightX)+" "+H(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&fe("/TrimBox ["+H(k.trimBox.bottomLeftX)+" "+H(k.trimBox.bottomLeftY)+" "+H(k.trimBox.topRightX)+" "+H(k.trimBox.topRightY)+"]"),k.artBox!==null&&fe("/ArtBox ["+H(k.artBox.bottomLeftX)+" "+H(k.artBox.bottomLeftY)+" "+H(k.artBox.topRightX)+" "+H(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&fe("/UserUnit "+k.userUnit),Rn.publish("putPage",{objId:ve,pageContext:Jt[X],pageNumber:X,page:de}),fe("/Contents "+Le+" 0 R"),fe(">>"),fe("endobj");var Ke=de.join(`
`);return N===C.ADVANCED&&(Ke+=`
Q`),Ga(Le,!0),Dr({data:Ke,filters:ba(),objectId:Le}),fe("endobj"),ve},Ml=m.__private__.putPages=function(){var k,X,de=[];for(k=1;k<=Bs;k++)Jt[k].objId=js(),Jt[k].contentsObjId=js();for(k=1;k<=Bs;k++)de.push(Kn({number:k,data:ze[k],objId:Jt[k].objId,contentsObjId:Jt[k].contentsObjId,mediaBox:Jt[k].mediaBox,cropBox:Jt[k].cropBox,bleedBox:Jt[k].bleedBox,trimBox:Jt[k].trimBox,artBox:Jt[k].artBox,userUnit:Jt[k].userUnit,rootDictionaryObjId:Ka,resourceDictionaryObjId:Wa}));Ga(Ka,!0),fe("<</Type /Pages");var ve="/Kids [";for(X=0;X<Bs;X++)ve+=de[X]+" 0 R ";fe(ve+"]"),fe("/Count "+Bs),fe(">>"),fe("endobj"),Rn.publish("postPutPages")},zA=function(k){Rn.publish("putFont",{font:k,out:fe,newObject:Rs,putStream:Dr}),k.isAlreadyPutted!==!0&&(k.objectNumber=Rs(),fe("<<"),fe("/Type /Font"),fe("/BaseFont /"+Jd(k.postScriptName)),fe("/Subtype /Type1"),typeof k.encoding=="string"&&fe("/Encoding /"+k.encoding),fe("/FirstChar 32"),fe("/LastChar 255"),fe(">>"),fe("endobj"))},oi=function(){for(var k in bn)bn.hasOwnProperty(k)&&(f===!1||f===!0&&d.hasOwnProperty(k))&&zA(bn[k])},Ri=function(k){k.objectNumber=Rs();var X=[];X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Form"}),X.push({key:"BBox",value:"["+[H(k.x),H(k.y),H(k.x+k.width),H(k.y+k.height)].join(" ")+"]"}),X.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var de=k.pages[1].join(`
`);Dr({data:de,additionalKeyValues:X,objectId:k.objectNumber}),fe("endobj")},Pu=function(){for(var k in tr)tr.hasOwnProperty(k)&&Ri(tr[k])},Ch=function(k,X){var de,ve=[],Le=1/(X-1);for(de=0;de<1;de+=Le)ve.push(de);if(ve.push(1),k[0].offset!=0){var Ke={offset:0,color:k[0].color};k.unshift(Ke)}if(k[k.length-1].offset!=1){var it={offset:1,color:k[k.length-1].color};k.push(it)}for(var yt="",Dt=0,nn=0;nn<ve.length;nn++){for(de=ve[nn];de>k[Dt+1].offset;)Dt++;var Zt=k[Dt].offset,xn=(de-Zt)/(k[Dt+1].offset-Zt),cs=k[Dt].color,ws=k[Dt+1].color;yt+=le(Math.round((1-xn)*cs[0]+xn*ws[0]).toString(16))+le(Math.round((1-xn)*cs[1]+xn*ws[1]).toString(16))+le(Math.round((1-xn)*cs[2]+xn*ws[2]).toString(16))}return yt.trim()},ed=function(k,X){X||(X=21);var de=Rs(),ve=Ch(k.colors,X),Le=[];Le.push({key:"FunctionType",value:"0"}),Le.push({key:"Domain",value:"[0.0 1.0]"}),Le.push({key:"Size",value:"["+X+"]"}),Le.push({key:"BitsPerSample",value:"8"}),Le.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Le.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Dr({data:ve,additionalKeyValues:Le,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:de}),fe("endobj"),k.objectNumber=Rs(),fe("<< /ShadingType "+k.type),fe("/ColorSpace /DeviceRGB");var Ke="/Coords ["+H(parseFloat(k.coords[0]))+" "+H(parseFloat(k.coords[1]))+" ";k.type===2?Ke+=H(parseFloat(k.coords[2]))+" "+H(parseFloat(k.coords[3])):Ke+=H(parseFloat(k.coords[2]))+" "+H(parseFloat(k.coords[3]))+" "+H(parseFloat(k.coords[4]))+" "+H(parseFloat(k.coords[5])),fe(Ke+="]"),k.matrix&&fe("/Matrix ["+k.matrix.toString()+"]"),fe("/Function "+de+" 0 R"),fe("/Extend [true true]"),fe(">>"),fe("endobj")},nm=function(k,X){var de=js(),ve=Rs();X.push({resourcesOid:de,objectOid:ve}),k.objectNumber=ve;var Le=[];Le.push({key:"Type",value:"/Pattern"}),Le.push({key:"PatternType",value:"1"}),Le.push({key:"PaintType",value:"1"}),Le.push({key:"TilingType",value:"1"}),Le.push({key:"BBox",value:"["+k.boundingBox.map(H).join(" ")+"]"}),Le.push({key:"XStep",value:H(k.xStep)}),Le.push({key:"YStep",value:H(k.yStep)}),Le.push({key:"Resources",value:de+" 0 R"}),k.matrix&&Le.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),Dr({data:k.stream,additionalKeyValues:Le,objectId:k.objectNumber}),fe("endobj")},jo=function(k){var X;for(X in _n)_n.hasOwnProperty(X)&&(_n[X]instanceof ff?ed(_n[X]):_n[X]instanceof ap&&nm(_n[X],k))},jA=function(k){for(var X in k.objectNumber=Rs(),fe("<<"),k)switch(X){case"opacity":fe("/ca "+z(k[X]));break;case"stroke-opacity":fe("/CA "+z(k[X]))}fe(">>"),fe("endobj")},$i=function(){var k;for(k in gs)gs.hasOwnProperty(k)&&jA(gs[k])},VA=function(){for(var k in fe("/XObject <<"),tr)tr.hasOwnProperty(k)&&tr[k].objectNumber>=0&&fe("/"+k+" "+tr[k].objectNumber+" 0 R");Rn.publish("putXobjectDict"),fe(">>")},td=function(){mr.oid=Rs(),fe("<<"),fe("/Filter /Standard"),fe("/V "+mr.v),fe("/R "+mr.r),fe("/U <"+mr.toHexString(mr.U)+">"),fe("/O <"+mr.toHexString(mr.O)+">"),fe("/P "+mr.P),fe(">>"),fe("endobj")},Vo=function(){for(var k in fe("/Font <<"),bn)bn.hasOwnProperty(k)&&(f===!1||f===!0&&d.hasOwnProperty(k))&&fe("/"+k+" "+bn[k].objectNumber+" 0 R");fe(">>")},Bh=function(){if(Object.keys(_n).length>0){for(var k in fe("/Shading <<"),_n)_n.hasOwnProperty(k)&&_n[k]instanceof ff&&_n[k].objectNumber>=0&&fe("/"+k+" "+_n[k].objectNumber+" 0 R");Rn.publish("putShadingPatternDict"),fe(">>")}},Hl=function(k){if(Object.keys(_n).length>0){for(var X in fe("/Pattern <<"),_n)_n.hasOwnProperty(X)&&_n[X]instanceof m.TilingPattern&&_n[X].objectNumber>=0&&_n[X].objectNumber<k&&fe("/"+X+" "+_n[X].objectNumber+" 0 R");Rn.publish("putTilingPatternDict"),fe(">>")}},sm=function(){if(Object.keys(gs).length>0){var k;for(k in fe("/ExtGState <<"),gs)gs.hasOwnProperty(k)&&gs[k].objectNumber>=0&&fe("/"+k+" "+gs[k].objectNumber+" 0 R");Rn.publish("putGStateDict"),fe(">>")}},Ss=function(k){Ga(k.resourcesOid,!0),fe("<<"),fe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Vo(),Bh(),Hl(k.objectOid),sm(),VA(),fe(">>"),fe("endobj")},ia=function(){var k=[];oi(),$i(),Pu(),jo(k),Rn.publish("putResources"),k.forEach(Ss),Ss({resourcesOid:Wa,objectOid:Number.MAX_SAFE_INTEGER}),Rn.publish("postPutResources")},Sh=function(){Rn.publish("putAdditionalObjects");for(var k=0;k<Me.length;k++){var X=Me[k];Ga(X.objId,!0),fe(X.content),fe("endobj")}Rn.publish("postPutAdditionalObjects")},nd=function(k){Gn[k.fontName]=Gn[k.fontName]||{},Gn[k.fontName][k.fontStyle]=k.id},Pl=function(k,X,de,ve,Le){var Ke={id:"F"+(Object.keys(bn).length+1).toString(10),postScriptName:k,fontName:X,fontStyle:de,encoding:ve,isStandardFont:Le||!1,metadata:{}};return Rn.publish("addFont",{font:Ke,instance:this}),bn[Ke.id]=Ke,nd(Ke),Ke.id},sd=function(k){for(var X=0,de=rt.length;X<de;X++){var ve=Pl.call(this,k[X][0],k[X][1],k[X][2],rt[X][3],!0);f===!1&&(d[ve]=!0);var Le=k[X][0].split("-");nd({id:ve,fontName:Le[0],fontStyle:Le[1]||""})}Rn.publish("addFonts",{fonts:bn,dictionary:Gn})},xa=function(k){return k.foo=function(){try{return k.apply(this,arguments)}catch(ve){var X=ve.stack||"";~X.indexOf(" at ")&&(X=X.split(" at ")[1]);var de="Error in function "+X.split(`
`)[0].split("<")[0]+": "+ve.message;if(!qt.console)throw new Error(de);qt.console.error(de,ve),qt.alert&&alert(de)}},k.foo.bar=k,k.foo},zu=function(k,X){var de,ve,Le,Ke,it,yt,Dt,nn,Zt;if(Le=(X=X||{}).sourceEncoding||"Unicode",it=X.outputEncoding,(X.autoencode||it)&&bn[an].metadata&&bn[an].metadata[Le]&&bn[an].metadata[Le].encoding&&(Ke=bn[an].metadata[Le].encoding,!it&&bn[an].encoding&&(it=bn[an].encoding),!it&&Ke.codePages&&(it=Ke.codePages[0]),typeof it=="string"&&(it=Ke[it]),it)){for(Dt=!1,yt=[],de=0,ve=k.length;de<ve;de++)(nn=it[k.charCodeAt(de)])?yt.push(String.fromCharCode(nn)):yt.push(k[de]),yt[de].charCodeAt(0)>>8&&(Dt=!0);k=yt.join("")}for(de=k.length;Dt===void 0&&de!==0;)k.charCodeAt(de-1)>>8&&(Dt=!0),de--;if(!Dt)return k;for(yt=X.noBOM?[]:[254,255],de=0,ve=k.length;de<ve;de++){if((Zt=(nn=k.charCodeAt(de))>>8)>>8)throw new Error("Character at position "+de+" of string '"+k+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");yt.push(Zt),yt.push(nn-(Zt<<8))}return String.fromCharCode.apply(void 0,yt)},is=m.__private__.pdfEscape=m.pdfEscape=function(k,X){return zu(k,X).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},GA=m.__private__.beginPage=function(k){ze[++Bs]=[],Jt[Bs]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},Go(Bs),_e(ze[V])},Nh=function(k,X){var de,ve,Le;switch(t=X||t,typeof k=="string"&&(de=b(k.toLowerCase()),Array.isArray(de)&&(ve=de[0],Le=de[1])),Array.isArray(k)&&(ve=k[0]*gt,Le=k[1]*gt),isNaN(ve)&&(ve=r[0],Le=r[1]),(ve>14400||Le>14400)&&(ls.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ve=Math.min(14400,ve),Le=Math.min(14400,Le)),r=[ve,Le],t.substr(0,1)){case"l":Le>ve&&(r=[Le,ve]);break;case"p":ve>Le&&(r=[Le,ve])}GA(r),Ad(Gl),fe(_i),Lh!==0&&fe(Lh+" J"),Yu!==0&&fe(Yu+" j"),Rn.publish("addPage",{pageNumber:Bs})},Ih=function(k){k>0&&k<=Bs&&(ze.splice(k,1),Jt.splice(k,1),Bs--,V>Bs&&(V=Bs),this.setPage(V))},Go=function(k){k>0&&k<=Bs&&(V=k)},rd=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return ze.length-1},Eh=function(k,X,de){var ve,Le=void 0;return de=de||{},k=k!==void 0?k:bn[an].fontName,X=X!==void 0?X:bn[an].fontStyle,ve=k.toLowerCase(),Gn[ve]!==void 0&&Gn[ve][X]!==void 0?Le=Gn[ve][X]:Gn[k]!==void 0&&Gn[k][X]!==void 0?Le=Gn[k][X]:de.disableWarning===!1&&ls.warn("Unable to look up font label for font '"+k+"', '"+X+"'. Refer to getFontList() for available fonts."),Le||de.noFallback||(Le=Gn.times[X])==null&&(Le=Gn.times.normal),Le},zl=m.__private__.putInfo=function(){var k=Rs(),X=function(ve){return ve};for(var de in h!==null&&(X=mr.encryptor(k,0)),fe("<<"),fe("/Producer ("+is(X("jsPDF "+Vt.version))+")"),Bt)Bt.hasOwnProperty(de)&&Bt[de]&&fe("/"+de.substr(0,1).toUpperCase()+de.substr(1)+" ("+is(X(Bt[de]))+")");fe("/CreationDate ("+is(X(re))+")"),fe(">>"),fe("endobj")},kh=m.__private__.putCatalog=function(k){var X=(k=k||{}).rootDictionaryObjId||Ka;switch(Rs(),fe("<<"),fe("/Type /Catalog"),fe("/Pages "+X+" 0 R"),ut||(ut="fullwidth"),ut){case"fullwidth":fe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":fe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":fe("/OpenAction [3 0 R /Fit]");break;case"original":fe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var de=""+ut;de.substr(de.length-1)==="%"&&(ut=parseInt(ut)/100),typeof ut=="number"&&fe("/OpenAction [3 0 R /XYZ null null "+z(ut)+"]")}switch(Pt||(Pt="continuous"),Pt){case"continuous":fe("/PageLayout /OneColumn");break;case"single":fe("/PageLayout /SinglePage");break;case"two":case"twoleft":fe("/PageLayout /TwoColumnLeft");break;case"tworight":fe("/PageLayout /TwoColumnRight")}Rt&&fe("/PageMode /"+Rt),Rn.publish("putCatalog"),fe(">>"),fe("endobj")},ad=m.__private__.putTrailer=function(){fe("trailer"),fe("<<"),fe("/Size "+(ce+1)),fe("/Root "+ce+" 0 R"),fe("/Info "+(ce-1)+" 0 R"),h!==null&&fe("/Encrypt "+mr.oid+" 0 R"),fe("/ID [ <"+P+"> <"+P+"> ]"),fe(">>")},id=m.__private__.putHeader=function(){fe("%PDF-"+g),fe("%")},Fh=m.__private__.putXRef=function(){var k="0000000000";fe("xref"),fe("0 "+(ce+1)),fe("0000000000 65535 f ");for(var X=1;X<=ce;X++)typeof pe[X]=="function"?fe((k+pe[X]()).slice(-10)+" 00000 n "):pe[X]!==void 0?fe((k+pe[X]).slice(-10)+" 00000 n "):fe("0000000000 00000 n ")},Ko=m.__private__.buildDocument=function(){dt(),_e(ye),Rn.publish("buildDocument"),id(),Ml(),Sh(),ia(),h!==null&&td(),zl(),kh();var k=xe;return Fh(),ad(),fe("startxref"),fe(""+k),fe("%%EOF"),_e(ze[V]),ye.join(`
`)},ju=m.__private__.getBlob=function(k){return new Blob([lt(k)],{type:"application/pdf"})},Wo=m.output=m.__private__.output=xa(function(k,X){switch(typeof(X=X||{})=="string"?X={filename:X}:X.filename=X.filename||"generated.pdf",k){case void 0:return Ko();case"save":m.save(X.filename);break;case"arraybuffer":return lt(Ko());case"blob":return ju(Ko());case"bloburi":case"bloburl":if(qt.URL!==void 0&&typeof qt.URL.createObjectURL=="function")return qt.URL&&qt.URL.createObjectURL(ju(Ko()))||void 0;ls.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var de="",ve=Ko();try{de=ZC(ve)}catch{de=ZC(unescape(encodeURIComponent(ve)))}return"data:application/pdf;filename="+X.filename+";base64,"+de;case"pdfobjectnewwindow":if(Object.prototype.toString.call(qt)==="[object Window]"){var Le="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ke=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';X.pdfObjectUrl&&(Le=X.pdfObjectUrl,Ke="");var it='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Le+'"'+Ke+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(X)+");<\/script></body></html>",yt=qt.open();return yt!==null&&yt.document.write(it),yt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(qt)==="[object Window]"){var Dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(X.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+X.filename+'" width="500px" height="400px" /></body></html>',nn=qt.open();if(nn!==null){nn.document.write(Dt);var Zt=this;nn.document.documentElement.querySelector("#pdfViewer").onload=function(){nn.document.title=X.filename,nn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Zt.output("bloburl"))}}return nn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(qt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var xn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",X)+'"></iframe></body></html>',cs=qt.open();if(cs!==null&&(cs.document.write(xn),cs.document.title=X.filename),cs||typeof safari>"u")return cs;break;case"datauri":case"dataurl":return qt.document.location.href=this.output("datauristring",X);default:return null}}),Vu=function(k){return Array.isArray(zo)===!0&&zo.indexOf(k)>-1};switch(s){case"pt":gt=1;break;case"mm":gt=72/25.4;break;case"cm":gt=72/2.54;break;case"in":gt=72;break;case"px":gt=Vu("px_scaling")==1?.75:96/72;break;case"pc":case"em":gt=12;break;case"ex":gt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);gt=s}var mr=null;ue(),J();var jl=function(k){return h!==null?mr.encryptor(k,0):function(X){return X}},qo=m.__private__.getPageInfo=m.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Jt[k].objId,pageNumber:k,pageContext:Jt[k]}},Xt=m.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var X in Jt)if(Jt[X].objId===k)break;return qo(X)},Th=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Jt[V].objId,pageNumber:V,pageContext:Jt[V]}};m.addPage=function(){return Nh.apply(this,arguments),this},m.setPage=function(){return Go.apply(this,arguments),_e.call(this,ze[V]),this},m.insertPage=function(k){return this.addPage(),this.movePage(V,k),this},m.movePage=function(k,X){var de,ve;if(k>X){de=ze[k],ve=Jt[k];for(var Le=k;Le>X;Le--)ze[Le]=ze[Le-1],Jt[Le]=Jt[Le-1];ze[X]=de,Jt[X]=ve,this.setPage(X)}else if(k<X){de=ze[k],ve=Jt[k];for(var Ke=k;Ke<X;Ke++)ze[Ke]=ze[Ke+1],Jt[Ke]=Jt[Ke+1];ze[X]=de,Jt[X]=ve,this.setPage(X)}return this},m.deletePage=function(){return Ih.apply(this,arguments),this},m.__private__.text=m.text=function(k,X,de,ve,Le){var Ke,it,yt,Dt,nn,Zt,xn,cs,ws,$s=(ve=ve||{}).scope||this;if(typeof k=="number"&&typeof X=="number"&&(typeof de=="string"||Array.isArray(de))){var _s=de;de=X,X=k,k=_s}if(arguments[3]instanceof Lt?(U("The transform parameter of text() with a Matrix value"),ws=Le):(yt=arguments[4],Dt=arguments[5],Yn(xn=arguments[3])==="object"&&xn!==null||(typeof yt=="string"&&(Dt=yt,yt=null),typeof xn=="string"&&(Dt=xn,xn=null),typeof xn=="number"&&(yt=xn,xn=null),ve={flags:xn,angle:yt,align:Dt})),isNaN(X)||isNaN(de)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return $s;var gr="",Oi=!1,Ya=typeof ve.lineHeightFactor=="number"?ve.lineHeightFactor:qa,Qi=$s.internal.scaleFactor;function _h(mn){return mn=mn.split("	").join(Array(ve.TabLen||9).join(" ")),is(mn,xn)}function Yo(mn){for(var gn,es=mn.concat(),Os=[],ci=es.length;ci--;)typeof(gn=es.shift())=="string"?Os.push(gn):Array.isArray(mn)&&(gn.length===1||gn[1]===void 0&&gn[2]===void 0)?Os.push(gn[0]):Os.push([gn[0],gn[1],gn[2]]);return Os}function Jo(mn,gn){var es;if(typeof mn=="string")es=gn(mn)[0];else if(Array.isArray(mn)){for(var Os,ci,aA=mn.concat(),iA=[],tl=aA.length;tl--;)typeof(Os=aA.shift())=="string"?iA.push(gn(Os)[0]):Array.isArray(Os)&&typeof Os[0]=="string"&&(ci=gn(Os[0],Os[1],Os[2]),iA.push([ci[0],ci[1],ci[2]]));es=iA}return es}var nc=!1,Xl=!0;if(typeof k=="string")nc=!0;else if(Array.isArray(k)){var sc=k.concat();it=[];for(var XA,sr=sc.length;sr--;)(typeof(XA=sc.shift())!="string"||Array.isArray(XA)&&typeof XA[0]!="string")&&(Xl=!1);nc=Xl}if(nc===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var Yl=ot/$s.internal.scaleFactor,YA=Yl*(Ya-1);switch(ve.baseline){case"bottom":de-=YA;break;case"top":de+=Yl-YA;break;case"hanging":de+=Yl-2*YA;break;case"middle":de+=Yl/2-YA}if((Zt=ve.maxWidth||0)>0&&(typeof k=="string"?k=$s.splitTextToSize(k,Zt):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(mn,gn){return mn.concat($s.splitTextToSize(gn,Zt))},[]))),Ke={text:k,x:X,y:de,options:ve,mutex:{pdfEscape:is,activeFontKey:an,fonts:bn,activeFontSize:ot}},Rn.publish("preProcessText",Ke),k=Ke.text,yt=(ve=Ke.options).angle,!(ws instanceof Lt)&&yt&&typeof yt=="number"){yt*=Math.PI/180,ve.rotationDirection===0&&(yt=-yt),N===C.ADVANCED&&(yt=-yt);var JA=Math.cos(yt),rc=Math.sin(yt);ws=new Lt(JA,rc,-rc,JA,0,0)}else yt&&yt instanceof Lt&&(ws=yt);N!==C.ADVANCED||ws||(ws=ys),(nn=ve.charSpace||Xu)!==void 0&&(gr+=H(R(nn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(cs=ve.horizontalScale)!==void 0&&(gr+=H(100*cs)+` Tz
`),ve.lang;var Ca=-1,lm=ve.renderingMode!==void 0?ve.renderingMode:ve.stroke,Oh=$s.internal.getCurrentPageInfo().pageContext;switch(lm){case 0:case!1:case"fill":Ca=0;break;case 1:case!0:case"stroke":Ca=1;break;case 2:case"fillThenStroke":Ca=2;break;case 3:case"invisible":Ca=3;break;case 4:case"fillAndAddForClipping":Ca=4;break;case 5:case"strokeAndAddPathForClipping":Ca=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ca=6;break;case 7:case"addToPathForClipping":Ca=7}var cd=Oh.usedRenderingMode!==void 0?Oh.usedRenderingMode:-1;Ca!==-1?gr+=Ca+` Tr
`:cd!==-1&&(gr+=`0 Tr
`),Ca!==-1&&(Oh.usedRenderingMode=Ca),Dt=ve.align||"left";var ui,yr=ot*Ya,Jl=$s.internal.pageSize.getWidth(),Qh=bn[an];nn=ve.charSpace||Xu,Zt=ve.maxWidth||0,xn=Object.assign({autoencode:!0,noBOM:!0},ve.flags);var Zo=[],Zl=function(mn){return $s.getStringUnitWidth(mn,{font:Qh,charSpace:nn,fontSize:ot,doKerning:!1})*ot/Qi};if(Object.prototype.toString.call(k)==="[object Array]"){var oa;it=Yo(k),Dt!=="left"&&(ui=it.map(Zl));var Lr,eA=0;if(Dt==="right"){X-=ui[0],k=[],sr=it.length;for(var Ba=0;Ba<sr;Ba++)Ba===0?(Lr=Xa(X),oa=Ao(de)):(Lr=R(eA-ui[Ba]),oa=-yr),k.push([it[Ba],Lr,oa]),eA=ui[Ba]}else if(Dt==="center"){X-=ui[0]/2,k=[],sr=it.length;for(var Mi=0;Mi<sr;Mi++)Mi===0?(Lr=Xa(X),oa=Ao(de)):(Lr=R((eA-ui[Mi])/2),oa=-yr),k.push([it[Mi],Lr,oa]),eA=ui[Mi]}else if(Dt==="left"){k=[],sr=it.length;for(var uo=0;uo<sr;uo++)k.push(it[uo])}else if(Dt==="justify"&&Qh.encoding==="Identity-H"){k=[],sr=it.length,Zt=Zt!==0?Zt:Jl;for(var Hi=0,Ns=0;Ns<sr;Ns++)if(oa=Ns===0?Ao(de):-yr,Lr=Ns===0?Xa(X):Hi,Ns<sr-1){var Pi=R((Zt-ui[Ns])/(it[Ns].split(" ").length-1)),Vs=it[Ns].split(" ");k.push([Vs[0]+" ",Lr,oa]),Hi=0;for(var Sa=1;Sa<Vs.length;Sa++){var ZA=(Zl(Vs[Sa-1]+" "+Vs[Sa])-Zl(Vs[Sa]))*Qi+Pi;Sa==Vs.length-1?k.push([Vs[Sa],ZA,0]):k.push([Vs[Sa]+" ",ZA,0]),Hi-=ZA}}else k.push([it[Ns],Lr,oa]);k.push(["",Hi,0])}else{if(Dt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],sr=it.length,Zt=Zt!==0?Zt:Jl,Ns=0;Ns<sr;Ns++)oa=Ns===0?Ao(de):-yr,Lr=Ns===0?Xa(X):0,Ns<sr-1?Zo.push(H(R((Zt-ui[Ns])/(it[Ns].split(" ").length-1)))):Zo.push(0),k.push([it[Ns],Lr,oa])}}var co=typeof ve.R2L=="boolean"?ve.R2L:St;co===!0&&(k=Jo(k,function(mn,gn,es){return[mn.split("").reverse().join(""),gn,es]})),Ke={text:k,x:X,y:de,options:ve,mutex:{pdfEscape:is,activeFontKey:an,fonts:bn,activeFontSize:ot}},Rn.publish("postProcessText",Ke),k=Ke.text,Oi=Ke.mutex.isHex||!1;var ac=bn[an].encoding;ac!=="WinAnsiEncoding"&&ac!=="StandardEncoding"||(k=Jo(k,function(mn,gn,es){return[_h(mn),gn,es]})),it=Yo(k),k=[];for(var tA,nA,sA,eu=0,ic=1,rA=Array.isArray(it[0])?ic:eu,el="",tu=function(mn,gn,es){var Os="";return es instanceof Lt?(es=typeof ve.angle=="number"?Zn(es,new Lt(1,0,0,1,mn,gn)):Zn(new Lt(1,0,0,1,mn,gn),es),N===C.ADVANCED&&(es=Zn(new Lt(1,0,0,-1,0,0),es)),Os=es.join(" ")+` Tm
`):Os=H(mn)+" "+H(gn)+` Td
`,Os},Is=0;Is<it.length;Is++){switch(el="",rA){case ic:sA=(Oi?"<":"(")+it[Is][0]+(Oi?">":")"),tA=parseFloat(it[Is][1]),nA=parseFloat(it[Is][2]);break;case eu:sA=(Oi?"<":"(")+it[Is]+(Oi?">":")"),tA=Xa(X),nA=Ao(de)}Zo!==void 0&&Zo[Is]!==void 0&&(el=Zo[Is]+` Tw
`),Is===0?k.push(el+tu(tA,nA,ws)+sA):rA===eu?k.push(el+sA):rA===ic&&k.push(el+tu(tA,nA,ws)+sA)}k=rA===eu?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var Ja=`BT
/`;return Ja+=an+" "+ot+` Tf
`,Ja+=H(ot*Ya)+` TL
`,Ja+=WA+`
`,Ja+=gr,Ja+=k,fe(Ja+="ET"),d[an]=!0,$s};var od=m.__private__.clip=m.clip=function(k){return fe(k==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return od("evenodd")},m.__private__.discardPath=m.discardPath=function(){return fe("n"),this};var va=m.__private__.isValidStyle=function(k){var X=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(X=!0),X};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(k){return va(k)&&(u=k),this};var li=m.__private__.getStyle=m.getStyle=function(k){var X=u;switch(k){case"D":case"S":X="S";break;case"F":X="f";break;case"FD":case"DF":X="B";break;case"f":case"f*":case"B":case"B*":X=k}return X},Gu=m.close=function(){return fe("h"),this};m.stroke=function(){return fe("S"),this},m.fill=function(k){return io("f",k),this},m.fillEvenOdd=function(k){return io("f*",k),this},m.fillStroke=function(k){return io("B",k),this},m.fillStrokeEvenOdd=function(k){return io("B*",k),this};var io=function(k,X){Yn(X)==="object"?Ku(X,k):fe(k)},Ai=function(k){k===null||N===C.ADVANCED&&k===void 0||(k=li(k),fe(k))};function Dh(k,X,de,ve,Le){var Ke=new ap(X||this.boundingBox,de||this.xStep,ve||this.yStep,this.gState,Le||this.matrix);Ke.stream=this.stream;var it=k+"$$"+this.cloneIndex+++"$$";return nr(it,Ke),Ke}var Ku=function(k,X){var de=Ql[k.key],ve=_n[de];if(ve instanceof ff)fe("q"),fe(ld(X)),ve.gState&&m.setGState(ve.gState),fe(k.matrix.toString()+" cm"),fe("/"+de+" sh"),fe("Q");else if(ve instanceof ap){var Le=new Lt(1,0,0,-1,0,ql());k.matrix&&(Le=Le.multiply(k.matrix||ys),de=Dh.call(ve,k.key,k.boundingBox,k.xStep,k.yStep,Le).id),fe("q"),fe("/Pattern cs"),fe("/"+de+" scn"),ve.gState&&m.setGState(ve.gState),fe(X),fe("Q")}},ld=function(k){switch(k){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Vl=m.moveTo=function(k,X){return fe(H(R(k))+" "+H(K(X))+" m"),this},oo=m.lineTo=function(k,X){return fe(H(R(k))+" "+H(K(X))+" l"),this},Xo=m.curveTo=function(k,X,de,ve,Le,Ke){return fe([H(R(k)),H(K(X)),H(R(de)),H(K(ve)),H(R(Le)),H(K(Ke)),"c"].join(" ")),this};m.__private__.line=m.line=function(k,X,de,ve,Le){if(isNaN(k)||isNaN(X)||isNaN(de)||isNaN(ve)||!va(Le))throw new Error("Invalid arguments passed to jsPDF.line");return N===C.COMPAT?this.lines([[de-k,ve-X]],k,X,[1,1],Le||"S"):this.lines([[de-k,ve-X]],k,X,[1,1]).stroke()},m.__private__.lines=m.lines=function(k,X,de,ve,Le,Ke){var it,yt,Dt,nn,Zt,xn,cs,ws,$s,_s,gr,Oi;if(typeof k=="number"&&(Oi=de,de=X,X=k,k=Oi),ve=ve||[1,1],Ke=Ke||!1,isNaN(X)||isNaN(de)||!Array.isArray(k)||!Array.isArray(ve)||!va(Le)||typeof Ke!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Vl(X,de),it=ve[0],yt=ve[1],nn=k.length,_s=X,gr=de,Dt=0;Dt<nn;Dt++)(Zt=k[Dt]).length===2?(_s=Zt[0]*it+_s,gr=Zt[1]*yt+gr,oo(_s,gr)):(xn=Zt[0]*it+_s,cs=Zt[1]*yt+gr,ws=Zt[2]*it+_s,$s=Zt[3]*yt+gr,_s=Zt[4]*it+_s,gr=Zt[5]*yt+gr,Xo(xn,cs,ws,$s,_s,gr));return Ke&&Gu(),Ai(Le),this},m.path=function(k){for(var X=0;X<k.length;X++){var de=k[X],ve=de.c;switch(de.op){case"m":Vl(ve[0],ve[1]);break;case"l":oo(ve[0],ve[1]);break;case"c":Xo.apply(this,ve);break;case"h":Gu()}}return this},m.__private__.rect=m.rect=function(k,X,de,ve,Le){if(isNaN(k)||isNaN(X)||isNaN(de)||isNaN(ve)||!va(Le))throw new Error("Invalid arguments passed to jsPDF.rect");return N===C.COMPAT&&(ve=-ve),fe([H(R(k)),H(K(X)),H(R(de)),H(R(ve)),"re"].join(" ")),Ai(Le),this},m.__private__.triangle=m.triangle=function(k,X,de,ve,Le,Ke,it){if(isNaN(k)||isNaN(X)||isNaN(de)||isNaN(ve)||isNaN(Le)||isNaN(Ke)||!va(it))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[de-k,ve-X],[Le-de,Ke-ve],[k-Le,X-Ke]],k,X,[1,1],it,!0),this},m.__private__.roundedRect=m.roundedRect=function(k,X,de,ve,Le,Ke,it){if(isNaN(k)||isNaN(X)||isNaN(de)||isNaN(ve)||isNaN(Le)||isNaN(Ke)||!va(it))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var yt=4/3*(Math.SQRT2-1);return Le=Math.min(Le,.5*de),Ke=Math.min(Ke,.5*ve),this.lines([[de-2*Le,0],[Le*yt,0,Le,Ke-Ke*yt,Le,Ke],[0,ve-2*Ke],[0,Ke*yt,-Le*yt,Ke,-Le,Ke],[2*Le-de,0],[-Le*yt,0,-Le,-Ke*yt,-Le,-Ke],[0,2*Ke-ve],[0,-Ke*yt,Le*yt,-Ke,Le,-Ke]],k+Le,X,[1,1],it,!0),this},m.__private__.ellipse=m.ellipse=function(k,X,de,ve,Le){if(isNaN(k)||isNaN(X)||isNaN(de)||isNaN(ve)||!va(Le))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ke=4/3*(Math.SQRT2-1)*de,it=4/3*(Math.SQRT2-1)*ve;return Vl(k+de,X),Xo(k+de,X-it,k+Ke,X-ve,k,X-ve),Xo(k-Ke,X-ve,k-de,X-it,k-de,X),Xo(k-de,X+it,k-Ke,X+ve,k,X+ve),Xo(k+Ke,X+ve,k+de,X+it,k+de,X),Ai(Le),this},m.__private__.circle=m.circle=function(k,X,de,ve){if(isNaN(k)||isNaN(X)||isNaN(de)||!va(ve))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,X,de,de,ve)},m.setFont=function(k,X,de){return de&&(X=$(X,de)),an=Eh(k,X,{disableWarning:!1}),this};var Vr=m.__private__.getFont=m.getFont=function(){return bn[Eh.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var k,X,de={};for(k in Gn)if(Gn.hasOwnProperty(k))for(X in de[k]=[],Gn[k])Gn[k].hasOwnProperty(X)&&de[k].push(X);return de},m.addFont=function(k,X,de,ve,Le){var Ke=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ke.indexOf(arguments[3])!==-1?Le=arguments[3]:arguments[3]&&Ke.indexOf(arguments[3])==-1&&(de=$(de,ve)),Le=Le||"Identity-H",Pl.call(this,k,X,de,Le)};var qa,Gl=n.lineWidth||.200025,lo=m.__private__.getLineWidth=m.getLineWidth=function(){return Gl},Ad=m.__private__.setLineWidth=m.setLineWidth=function(k){return Gl=k,fe(H(R(k))+" w"),this};m.__private__.setLineDash=Vt.API.setLineDash=Vt.API.setLineDashPattern=function(k,X){if(k=k||[],X=X||0,isNaN(X)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(de){return H(R(de))}).join(" "),X=H(R(X)),fe("["+k+"] "+X+" d"),this};var Wu=m.__private__.getLineHeight=m.getLineHeight=function(){return ot*qa};m.__private__.getLineHeight=m.getLineHeight=function(){return ot*qa};var qu=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(qa=k),this},Kl=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return qa};qu(n.lineHeight);var Xa=m.__private__.getHorizontalCoordinate=function(k){return R(k)},Ao=m.__private__.getVerticalCoordinate=function(k){return N===C.ADVANCED?k:Jt[V].mediaBox.topRightY-Jt[V].mediaBox.bottomLeftY-R(k)},rm=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(k){return H(Xa(k))},Wl=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(k){return H(Ao(k))},_i=n.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return zr(_i)},m.__private__.setStrokeColor=m.setDrawColor=function(k,X,de,ve){return _i=jr({ch1:k,ch2:X,ch3:de,ch4:ve,pdfColorType:"draw",precision:2}),fe(_i),this};var KA=n.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return zr(KA)},m.__private__.setFillColor=m.setFillColor=function(k,X,de,ve){return KA=jr({ch1:k,ch2:X,ch3:de,ch4:ve,pdfColorType:"fill",precision:2}),fe(KA),this};var WA=n.textColor||"0 g",am=m.__private__.getTextColor=m.getTextColor=function(){return zr(WA)};m.__private__.setTextColor=m.setTextColor=function(k,X,de,ve){return WA=jr({ch1:k,ch2:X,ch3:de,ch4:ve,pdfColorType:"text",precision:3}),this};var Xu=n.charSpace,im=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Xu||0)};m.__private__.setCharSpace=m.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Xu=k,this};var Lh=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(k){var X=m.CapJoinStyles[k];if(X===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Lh=X,fe(X+" J"),this};var Yu=0;m.__private__.setLineJoin=m.setLineJoin=function(k){var X=m.CapJoinStyles[k];if(X===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Yu=X,fe(X+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return fe(H(R(k))+" M"),this},m.GState=$2,m.setGState=function(k){(k=typeof k=="string"?gs[ja[k]]:ud(null,k)).equals(Va)||(fe("/"+k.id+" gs"),Va=k)};var ud=function(k,X){if(!k||!ja[k]){var de=!1;for(var ve in gs)if(gs.hasOwnProperty(ve)&&gs[ve].equals(X)){de=!0;break}if(de)X=gs[ve];else{var Le="GS"+(Object.keys(gs).length+1).toString(10);gs[Le]=X,X.id=Le}return k&&(ja[k]=X.id),Rn.publish("addGState",X),X}};m.addGState=function(k,X){return ud(k,X),this},m.saveGraphicsState=function(){return fe("q"),wa.push({key:an,size:ot,color:WA}),this},m.restoreGraphicsState=function(){fe("Q");var k=wa.pop();return an=k.key,ot=k.size,WA=k.color,Va=null,this},m.setCurrentTransformationMatrix=function(k){return fe(k.toString()+" cm"),this},m.comment=function(k){return fe("#"+k),this};var Ju=function(k,X){var de=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return de},set:function(Ke){isNaN(Ke)||(de=parseFloat(Ke))}});var ve=X||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ve},set:function(Ke){isNaN(Ke)||(ve=parseFloat(Ke))}});var Le="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Le},set:function(Ke){Le=Ke.toString()}}),this},Uh=function(k,X,de,ve){Ju.call(this,k,X),this.type="rect";var Le=de||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Le},set:function(it){isNaN(it)||(Le=parseFloat(it))}});var Ke=ve||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ke},set:function(it){isNaN(it)||(Ke=parseFloat(it))}}),this},Rh=function(){this.page=Bs,this.currentPage=V,this.pages=ze.slice(0),this.pagesContext=Jt.slice(0),this.x=pr,this.y=ln,this.matrix=Pr,this.width=qA(V),this.height=ql(V),this.outputDestination=tt,this.id="",this.objectNumber=-1};Rh.prototype.restore=function(){Bs=this.page,V=this.currentPage,Jt=this.pagesContext,ze=this.pages,pr=this.x,ln=this.y,Pr=this.matrix,tc(V,this.width),$h(V,this.height),tt=this.outputDestination};var Zu=function(k,X,de,ve,Le){ao.push(new Rh),Bs=V=0,ze=[],pr=k,ln=X,Pr=Le,GA([de,ve])},om=function(k){if(Ui[k])ao.pop().restore();else{var X=new Rh,de="Xo"+(Object.keys(tr).length+1).toString(10);X.id=de,Ui[k]=de,tr[de]=X,Rn.publish("addFormObject",X),ao.pop().restore()}};for(var ec in m.beginFormObject=function(k,X,de,ve,Le){return Zu(k,X,de,ve,Le),this},m.endFormObject=function(k){return om(k),this},m.doFormObject=function(k,X){var de=tr[Ui[k]];return fe("q"),fe(X.toString()+" cm"),fe("/"+de.id+" Do"),fe("Q"),this},m.getFormObject=function(k){var X=tr[Ui[k]];return{x:X.x,y:X.y,width:X.width,height:X.height,matrix:X.matrix}},m.save=function(k,X){return k=k||"generated.pdf",(X=X||{}).returnPromise=X.returnPromise||!1,X.returnPromise===!1?(cf(ju(Ko()),k),typeof cf.unload=="function"&&qt.setTimeout&&setTimeout(cf.unload,911),this):new Promise(function(de,ve){try{var Le=cf(ju(Ko()),k);typeof cf.unload=="function"&&qt.setTimeout&&setTimeout(cf.unload,911),de(Le)}catch(Ke){ve(Ke.message)}})},Vt.API)Vt.API.hasOwnProperty(ec)&&(ec==="events"&&Vt.API.events.length?function(k,X){var de,ve,Le;for(Le=X.length-1;Le!==-1;Le--)de=X[Le][0],ve=X[Le][1],k.subscribe.apply(k,[de].concat(typeof ve=="function"?[ve]:ve))}(Rn,Vt.API.events):m[ec]=Vt.API[ec]);var qA=m.getPageWidth=function(k){return(Jt[k=k||V].mediaBox.topRightX-Jt[k].mediaBox.bottomLeftX)/gt},tc=m.setPageWidth=function(k,X){Jt[k].mediaBox.topRightX=X*gt+Jt[k].mediaBox.bottomLeftX},ql=m.getPageHeight=function(k){return(Jt[k=k||V].mediaBox.topRightY-Jt[k].mediaBox.bottomLeftY)/gt},$h=m.setPageHeight=function(k,X){Jt[k].mediaBox.topRightY=X*gt+Jt[k].mediaBox.bottomLeftY};return m.internal={pdfEscape:is,getStyle:li,getFont:Vr,getFontSize:At,getCharSpace:im,getTextColor:am,getLineHeight:Wu,getLineHeightFactor:Kl,getLineWidth:lo,write:ct,getHorizontalCoordinate:Xa,getVerticalCoordinate:Ao,getCoordinateString:rm,getVerticalCoordinateString:Wl,collections:{},newObject:Rs,newAdditionalObject:PA,newObjectDeferred:js,newObjectDeferredBegin:Ga,getFilters:ba,putStream:Dr,events:Rn,scaleFactor:gt,pageSize:{getWidth:function(){return qA(V)},setWidth:function(k){tc(V,k)},getHeight:function(){return ql(V)},setHeight:function(k){$h(V,k)}},encryptionOptions:h,encryption:mr,getEncryptor:jl,output:Wo,getNumberOfPages:rd,pages:ze,out:fe,f2:z,f3:T,getPageInfo:qo,getPageInfoByObjId:Xt,getCurrentPageInfo:Th,getPDFVersion:w,Point:Ju,Rectangle:Uh,Matrix:Lt,hasHotfix:Vu},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return qA(V)},set:function(k){tc(V,k)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return ql(V)},set:function(k){$h(V,k)},enumerable:!0,configurable:!0}),sd.call(m,rt),an="F1",Nh(r,t),Rn.publish("initialized"),m}Yd.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Yd.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Yd.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Yd.prototype.processOwnerPassword=function(n,e){return tB(eB(e).substr(0,5),n)},Yd.prototype.encryptor=function(n,e){var t=eB(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return tB(t,s)}},$2.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Yn(n)!==Yn(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;s++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},Vt.API={events:[]},Vt.version="3.0.1";var qs=Vt.API,MS=1,Pf=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Md=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},rn=function(n){return n.toFixed(2)},Lc=function(n){return n.toFixed(5)};qs.__acroform__={};var Ti=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},SF=function(n){return n*MS},bA=function(n){var e=new hD,t=kt.internal.getHeight(n)||0,s=kt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(rn(s)),Number(rn(t))],e},Oz=qs.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},Qz=qs.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},Mz=qs.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<e)==0?0:1},cr=qs.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Mz(n,e-1)},hr=qs.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Oz(n,e-1)},fr=qs.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Qz(n,e-1)},Hz=qs.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,r=n[0],a=n[1],i=n[2],o=n[3],l={};return l.lowerLeft_X=t(r)||0,l.lowerLeft_Y=s(a+o)||0,l.upperRight_X=t(r+i)||0,l.upperRight_Y=s(a)||0,[Number(rn(l.lowerLeft_X)),Number(rn(l.lowerLeft_Y)),Number(rn(l.upperRight_X)),Number(rn(l.upperRight_Y))]},Pz=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,s=nB(n,t),r=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+r+" "+rn(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=bA(n);return a.scope=n.scope,a.stream=e.join(`
`),a}},nB=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},r=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");r=n.multiline?r.map(function(T){return T.split(`
`)}):r.map(function(T){return[T]});var a=t,i=kt.internal.getHeight(n)||0;i=i<0?-i:i;var o=kt.internal.getWidth(n)||0;o=o<0?-o:o;var l=function(T,R,W){if(T+1<r.length){var K=R+" "+r[T+1][0];return xy(K,n,W).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var u,h,f=xy("3",n,a).height,d=n.multiline?i-a:(i-f)/2,m=d+=2,g=0,w=0,v=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+xy(e,n,a=12).width+", FieldWidth:"+o+`
`;break}for(var b="",C=0,N=0;N<r.length;N++)if(r.hasOwnProperty(N)){var I=!1;if(r[N].length!==1&&v!==r[N].length-1){if((f+2)*(C+2)+2>i)continue e;b+=r[N][v],I=!0,w=N,N--}else{b=(b+=r[N][v]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var L=parseInt(N),$=l(L,b,a),H=N>=r.length-1;if($&&!H){b+=" ",v=0;continue}if($||H){if(H)w=L;else if(n.multiline&&(f+2)*(C+2)+2>i)continue e}else{if(!n.multiline||(f+2)*(C+2)+2>i)continue e;w=L}}for(var U="",O=g;O<=w;O++){var z=r[O];if(n.multiline){if(O===w){U+=z[v]+" ",v=(v+1)%z.length;continue}if(O===g){U+=z[z.length-1]+" ";continue}}U+=z[0]+" "}switch(U=U.substr(U.length-1)==" "?U.substr(0,U.length-1):U,h=xy(U,n,a).width,n.textAlign){case"right":u=o-h-2;break;case"center":u=(o-h)/2;break;case"left":default:u=2}e+=rn(u)+" "+rn(m)+` Td
`,e+="("+Pf(U)+`) Tj
`,e+=-rn(u)+` 0 Td
`,m=-(a+2),h=0,g=I?w:w+1,C++,b=""}break}return s.text=e,s.fontSize=a,s},xy=function(n,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:r}},zz={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},jz=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Vz=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var s=t,r=n[t];e.internal.newObjectDeferredBegin(r.objId,!0),Yn(r)==="object"&&typeof r.putStream=="function"&&r.putStream(),delete n[s]}},Gz=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Ul.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(zz)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");MS=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new fD,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in s)if(s.hasOwnProperty(r)){var a=s[r];a.objId=void 0,a.hasAnnotation&&jz(a,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(s,r){var a=!s;for(var i in s||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(i)){var o=s[i],l=[],u=o.Rect;if(o.Rect&&(o.Rect=Hz(o.Rect,r)),r.internal.newObjectDeferredBegin(o.objId,!0),o.DA=kt.createDefaultAppearanceStream(o),Yn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var h=Pz(o);l.push({key:"AP",value:"<</N "+h+">>"}),r.internal.acroformPlugin.xForms.push(h)}if(o.appearanceStreamContent){var f="";for(var d in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(d)){var m=o.appearanceStreamContent[d];if(f+="/"+d+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var i in m)if(m.hasOwnProperty(i)){var g=m[i];typeof g=="function"&&(g=g.call(r,o)),f+="/"+i+" "+g+" ",r.internal.acroformPlugin.xForms.indexOf(g)>=0||r.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(r,o)),f+="/"+i+" "+g,r.internal.acroformPlugin.xForms.indexOf(g)>=0||r.internal.acroformPlugin.xForms.push(g);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}r.internal.putStream({additionalKeyValues:l,objectId:o.objId}),r.internal.out("endobj")}a&&Vz(r.internal.acroformPlugin.xForms,r)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},cD=qs.__acroform__.arrayToPdfArray=function(n,e,t){var s=function(i){return i};if(Array.isArray(n)){for(var r="[",a=0;a<n.length;a++)switch(a!==0&&(r+=" "),Yn(n[a])){case"boolean":case"number":case"object":r+=n[a].toString();break;case"string":n[a].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),r+="("+Pf(s(n[a].toString()))+")"):r+=n[a].toString()}return r+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Yv=function(n,e,t){var s=function(r){return r};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Pf(s(n))+")"},SA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};SA.prototype.toString=function(){return this.objId+" 0 R"},SA.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},SA.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],r=this[s];r&&(Array.isArray(r)?n.push({key:s,value:cD(r,this.objId,this.scope)}):r instanceof SA?(r.scope=this.scope,n.push({key:s,value:r.objId+" 0 R"})):typeof r!="function"&&n.push({key:s,value:r}))}return n};var hD=function(){SA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Ti(hD,SA);var fD=function(){SA.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Pf(t(n))+")"}},set:function(t){n=t}})};Ti(fD,SA);var Ul=function n(){SA.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!cr(e,3)},set:function(b){b?this.F=hr(e,3):this.F=fr(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');t=b}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(b){s=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(b){s[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(b){s[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(b){s[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(b){s[3]=b}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof _2)return;a="FieldObject"+n.FieldNum++}var b=function(C){return C};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+Pf(b(a))+")"},set:function(b){a=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(b){a=b}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(b){i=b}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/MS:u},set:function(b){u=b}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(b){h=b}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof _2||this instanceof vf))return Yv(f,this.objId,this.scope)},set:function(b){b=b.toString(),f=b}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof Yr?d:Yv(d,this.objId,this.scope)},set:function(b){b=b.toString(),d=this instanceof Yr?b:b.substr(0,1)==="("?Md(b.substr(1,b.length-2)):Md(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yr?Md(d.substr(1,d.length-1)):d},set:function(b){b=b.toString(),d=this instanceof Yr?"/"+b:b}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Yr?m:Yv(m,this.objId,this.scope)},set:function(b){b=b.toString(),m=this instanceof Yr?b:b.substr(0,1)==="("?Md(b.substr(1,b.length-2)):Md(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yr?Md(m.substr(1,m.length-1)):m},set:function(b){b=b.toString(),m=this instanceof Yr?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(b){b=!!b,w=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(b){g=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,1)},set:function(b){b?this.Ff=hr(this.Ff,1):this.Ff=fr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,2)},set:function(b){b?this.Ff=hr(this.Ff,2):this.Ff=fr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,3)},set:function(b){b?this.Ff=hr(this.Ff,3):this.Ff=fr(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');v=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(v){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};Ti(Ul,SA);var lp=function(){Ul.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return cD(e,this.objId,this.scope)},set:function(t){var s,r;r=[],typeof(s=t)=="string"&&(r=function(a,i,o){o||(o=1);for(var l,u=[];l=i.exec(a);)u.push(l[o]);return u}(s,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,18)},set:function(t){t?this.Ff=hr(this.Ff,18):this.Ff=fr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=hr(this.Ff,19):this.Ff=fr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,20)},set:function(t){t?(this.Ff=hr(this.Ff,20),e.sort()):this.Ff=fr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,22)},set:function(t){t?this.Ff=hr(this.Ff,22):this.Ff=fr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,23)},set:function(t){t?this.Ff=hr(this.Ff,23):this.Ff=fr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,27)},set:function(t){t?this.Ff=hr(this.Ff,27):this.Ff=fr(this.Ff,27)}}),this.hasAppearanceStream=!1};Ti(lp,Ul);var Ap=function(){lp.call(this),this.fontName="helvetica",this.combo=!1};Ti(Ap,lp);var up=function(){Ap.call(this),this.combo=!0};Ti(up,Ap);var f2=function(){up.call(this),this.edit=!0};Ti(f2,up);var Yr=function(){Ul.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,15)},set:function(t){t?this.Ff=hr(this.Ff,15):this.Ff=fr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,16)},set:function(t){t?this.Ff=hr(this.Ff,16):this.Ff=fr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,17)},set:function(t){t?this.Ff=hr(this.Ff,17):this.Ff=fr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,26)},set:function(t){t?this.Ff=hr(this.Ff,26):this.Ff=fr(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,r=[];for(s in r.push("<<"),e)r.push("/"+s+" ("+Pf(t(e[s]))+")");return r.push(">>"),r.join(`
`)}},set:function(t){Yn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Ti(Yr,Ul);var d2=function(){Yr.call(this),this.pushButton=!0};Ti(d2,Yr);var cp=function(){Yr.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Ti(cp,Yr);var _2=function(){var n,e;Ul.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(r){e=r}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var a,i=[];for(a in i.push("<<"),s)i.push("/"+a+" ("+Pf(r(s[a]))+")");return i.push(">>"),i.join(`
`)},set:function(r){Yn(r)==="object"&&(s=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(r){typeof r=="string"&&(s.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=kt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ti(_2,Ul),cp.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},cp.prototype.createOption=function(n){var e=new _2;return e.Parent=this,e.optionName=n,this.Kids.push(e),Kz.call(this.scope,e),e};var p2=function(){Yr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=kt.CheckBox.createAppearanceStream()};Ti(p2,Yr);var vf=function(){Ul.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,13)},set:function(e){e?this.Ff=hr(this.Ff,13):this.Ff=fr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,21)},set:function(e){e?this.Ff=hr(this.Ff,21):this.Ff=fr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,23)},set:function(e){e?this.Ff=hr(this.Ff,23):this.Ff=fr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,24)},set:function(e){e?this.Ff=hr(this.Ff,24):this.Ff=fr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,25)},set:function(e){e?this.Ff=hr(this.Ff,25):this.Ff=fr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,26)},set:function(e){e?this.Ff=hr(this.Ff,26):this.Ff=fr(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ti(vf,Ul);var m2=function(){vf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,14)},set:function(n){n?this.Ff=hr(this.Ff,14):this.Ff=fr(this.Ff,14)}}),this.password=!0};Ti(m2,vf);var kt={CheckBox:{createAppearanceStream:function(){return{N:{On:kt.CheckBox.YesNormal},D:{On:kt.CheckBox.YesPushDown,Off:kt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=bA(n);e.scope=n.scope;var t=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),a=nB(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+rn(kt.internal.getWidth(n))+" "+rn(kt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+rn(a.fontSize)+" Tf "+r),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=bA(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),r=[],a=kt.internal.getHeight(n),i=kt.internal.getWidth(n),o=nB(n,n.caption);return r.push("1 g"),r.push("0 0 "+rn(i)+" "+rn(a)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+rn(i-1)+" "+rn(a-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+t+" "+rn(o.fontSize)+" Tf "+s),r.push(o.text),r.push("ET"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=bA(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+rn(kt.internal.getWidth(n))+" "+rn(kt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:kt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=kt.RadioButton.Circle.YesNormal,e.D[n]=kt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=bA(n);e.scope=n.scope;var t=[],s=kt.internal.getWidth(n)<=kt.internal.getHeight(n)?kt.internal.getWidth(n)/4:kt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var r=kt.internal.Bezier_C,a=Number((s*r).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Lc(kt.internal.getWidth(n)/2)+" "+Lc(kt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),t.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),t.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),t.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=bA(n);e.scope=n.scope;var t=[],s=kt.internal.getWidth(n)<=kt.internal.getHeight(n)?kt.internal.getWidth(n)/4:kt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var r=Number((2*s).toFixed(5)),a=Number((r*kt.internal.Bezier_C).toFixed(5)),i=Number((s*kt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Lc(kt.internal.getWidth(n)/2)+" "+Lc(kt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Lc(kt.internal.getWidth(n)/2)+" "+Lc(kt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),t.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),t.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),t.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=bA(n);e.scope=n.scope;var t=[],s=kt.internal.getWidth(n)<=kt.internal.getHeight(n)?kt.internal.getWidth(n)/4:kt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var r=Number((2*s).toFixed(5)),a=Number((r*kt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Lc(kt.internal.getWidth(n)/2)+" "+Lc(kt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:kt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=kt.RadioButton.Cross.YesNormal,e.D[n]=kt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=bA(n);e.scope=n.scope;var t=[],s=kt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+rn(kt.internal.getWidth(n)-2)+" "+rn(kt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(rn(s.x1.x)+" "+rn(s.x1.y)+" m"),t.push(rn(s.x2.x)+" "+rn(s.x2.y)+" l"),t.push(rn(s.x4.x)+" "+rn(s.x4.y)+" m"),t.push(rn(s.x3.x)+" "+rn(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=bA(n);e.scope=n.scope;var t=kt.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+rn(kt.internal.getWidth(n))+" "+rn(kt.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+rn(kt.internal.getWidth(n)-2)+" "+rn(kt.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push(rn(t.x1.x)+" "+rn(t.x1.y)+" m"),s.push(rn(t.x2.x)+" "+rn(t.x2.y)+" l"),s.push(rn(t.x4.x)+" "+rn(t.x4.y)+" m"),s.push(rn(t.x3.x)+" "+rn(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=bA(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+rn(kt.internal.getWidth(n))+" "+rn(kt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};kt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=kt.internal.getWidth(n),t=kt.internal.getHeight(n),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},kt.internal.getWidth=function(n){var e=0;return Yn(n)==="object"&&(e=SF(n.Rect[2])),e},kt.internal.getHeight=function(n){var e=0;return Yn(n)==="object"&&(e=SF(n.Rect[3])),e};var Kz=qs.addField=function(n){if(Gz(this,n),!(n instanceof Ul))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};qs.AcroFormChoiceField=lp,qs.AcroFormListBox=Ap,qs.AcroFormComboBox=up,qs.AcroFormEditBox=f2,qs.AcroFormButton=Yr,qs.AcroFormPushButton=d2,qs.AcroFormRadioButton=cp,qs.AcroFormCheckBox=p2,qs.AcroFormTextField=vf,qs.AcroFormPasswordField=m2,qs.AcroFormAppearance=kt,qs.AcroForm={ChoiceField:lp,ListBox:Ap,ComboBox:up,EditBox:f2,Button:Yr,PushButton:d2,RadioButton:cp,CheckBox:p2,TextField:vf,PasswordField:m2,Appearance:kt},Vt.AcroForm={ChoiceField:lp,ListBox:Ap,ComboBox:up,EditBox:f2,Button:Yr,PushButton:d2,RadioButton:cp,CheckBox:p2,TextField:vf,PasswordField:m2,Appearance:kt};Vt.AcroForm;function dD(n){return n.reduce(function(e,t,s){return e[t]=s,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=n.__addimage__.getImageFileTypeByImageData=function(T,R){var W,K,re,P,Y,J=e;if((R=R||e)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if($(T))for(Y in t)for(re=t[Y],W=0;W<re.length;W+=1){for(P=!0,K=0;K<re[W].length;K+=1)if(re[W][K]!==void 0&&re[W][K]!==T[K]){P=!1;break}if(P===!0){J=Y;break}}else for(Y in t)for(re=t[Y],W=0;W<re.length;W+=1){for(P=!0,K=0;K<re[W].length;K+=1)if(re[W][K]!==void 0&&re[W][K]!==T.charCodeAt(K)){P=!1;break}if(P===!0){J=Y;break}}return J===e&&R!==e&&(J=R),J},r=function T(R){for(var W=this.internal.write,K=this.internal.putStream,re=(0,this.internal.getFilters)();re.indexOf("FlateEncode")!==-1;)re.splice(re.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var P=[];if(P.push({key:"Type",value:"/XObject"}),P.push({key:"Subtype",value:"/Image"}),P.push({key:"Width",value:R.width}),P.push({key:"Height",value:R.height}),R.colorSpace===v.INDEXED?P.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(P.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===v.DEVICE_CMYK&&P.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),P.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&P.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)){for(var Y="",J=0,te=R.transparency.length;J<te;J++)Y+=R.transparency[J]+" "+R.transparency[J]+" ";P.push({key:"Mask",value:"["+Y+"]"})}R.sMask!==void 0&&P.push({key:"SMask",value:R.objectId+1+" 0 R"});var j=R.filter!==void 0?["/"+R.filter]:void 0;if(K({data:R.data,additionalKeyValues:P,alreadyAppliedFilters:j,objectId:R.objectId}),W("endobj"),"sMask"in R&&R.sMask!==void 0){var ue="/Predictor "+R.predictor+" /Colors 1 /BitsPerComponent "+R.bitsPerComponent+" /Columns "+R.width,Q={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:R.bitsPerComponent,decodeParameters:ue,data:R.sMask};"filter"in R&&(Q.filter=R.filter),T.call(this,Q)}if(R.colorSpace===v.INDEXED){var V=this.internal.newObject();K({data:U(new Uint8Array(R.palette)),objectId:V}),W("endobj")}},a=function(){var T=this.internal.collections.addImage_images;for(var R in T)r.call(this,T[R])},i=function(){var T,R=this.internal.collections.addImage_images,W=this.internal.write;for(var K in R)W("/I"+(T=R[K]).index,T.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var T=this.internal.collections.addImage_images;return o.call(this),T},u=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(T){return typeof n["process"+T.toUpperCase()]=="function"},f=function(T){return Yn(T)==="object"&&T.nodeType===1},d=function(T,R){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var W=""+T.getAttribute("src");if(W.indexOf("data:image/")===0)return xg(unescape(W).split("base64,").pop());var K=n.loadFile(W,!0);if(K!==void 0)return K}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var re;switch(R){case"PNG":re="image/png";break;case"WEBP":re="image/webp";break;case"JPEG":case"JPG":default:re="image/jpeg"}return xg(T.toDataURL(re,1).split("base64,").pop())}},m=function(T){var R=this.internal.collections.addImage_images;if(R){for(var W in R)if(T===R[W].alias)return R[W]}},g=function(T,R,W){return T||R||(T=-96,R=-96),T<0&&(T=-1*W.width*72/T/this.internal.scaleFactor),R<0&&(R=-1*W.height*72/R/this.internal.scaleFactor),T===0&&(T=R*W.width/W.height),R===0&&(R=T*W.height/W.width),[T,R]},w=function(T,R,W,K,re,P){var Y=g.call(this,W,K,re),J=this.internal.getCoordinateString,te=this.internal.getVerticalCoordinateString,j=l.call(this);if(W=Y[0],K=Y[1],j[re.index]=re,P){P*=Math.PI/180;var ue=Math.cos(P),Q=Math.sin(P),V=function(le){return le.toFixed(4)},Z=[V(ue),V(Q),V(-1*Q),V(ue),0,0,"cm"]}this.internal.write("q"),P?(this.internal.write([1,"0","0",1,J(T),te(R+K),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([J(W),"0","0",J(K),"0","0","cm"].join(" "))):this.internal.write([J(W),"0","0",J(K),J(T),te(R+K),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+re.index+" Do"),this.internal.write("Q")},v=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=n.__addimage__.sHashCode=function(T){var R,W,K=0;if(typeof T=="string")for(W=T.length,R=0;R<W;R++)K=(K<<5)-K+T.charCodeAt(R),K|=0;else if($(T))for(W=T.byteLength/2,R=0;R<W;R++)K=(K<<5)-K+T[R],K|=0;return K},N=n.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var R=!0;return T.length===0&&(R=!1),T.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(R=!1),R},I=n.__addimage__.extractImageFromDataUrl=function(T){if(T==null||!(T=T.trim()).startsWith("data:"))return null;var R=T.indexOf(",");return R<0?null:T.substring(0,R).trim().endsWith("base64")?T.substring(R+1):null},L=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(T){return L()&&T instanceof ArrayBuffer};var $=n.__addimage__.isArrayBufferView=function(T){return L()&&typeof Uint32Array<"u"&&(T instanceof Int8Array||T instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array)},H=n.__addimage__.binaryStringToUint8Array=function(T){for(var R=T.length,W=new Uint8Array(R),K=0;K<R;K++)W[K]=T.charCodeAt(K);return W},U=n.__addimage__.arrayBufferToBinaryString=function(T){for(var R="",W=$(T)?T:new Uint8Array(T),K=0;K<W.length;K+=8192)R+=String.fromCharCode.apply(null,W.subarray(K,K+8192));return R};n.addImage=function(){var T,R,W,K,re,P,Y,J,te;if(typeof arguments[1]=="number"?(R=e,W=arguments[1],K=arguments[2],re=arguments[3],P=arguments[4],Y=arguments[5],J=arguments[6],te=arguments[7]):(R=arguments[1],W=arguments[2],K=arguments[3],re=arguments[4],P=arguments[5],Y=arguments[6],J=arguments[7],te=arguments[8]),Yn(T=arguments[0])==="object"&&!f(T)&&"imageData"in T){var j=T;T=j.imageData,R=j.format||R||e,W=j.x||W||0,K=j.y||K||0,re=j.w||j.width||re,P=j.h||j.height||P,Y=j.alias||Y,J=j.compression||J,te=j.rotation||j.angle||te}var ue=this.internal.getFilters();if(J===void 0&&ue.indexOf("FlateEncode")!==-1&&(J="SLOW"),isNaN(W)||isNaN(K))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var Q=O.call(this,T,R,Y,J);return w.call(this,W,K,re,P,Q,te),this};var O=function(T,R,W,K){var re,P,Y;if(typeof T=="string"&&s(T)===e){T=unescape(T);var J=z(T,!1);(J!==""||(J=n.loadFile(T,!0))!==void 0)&&(T=J)}if(f(T)&&(T=d(T,R)),R=s(T,R),!h(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((Y=W)==null||Y.length===0)&&(W=function(te){return typeof te=="string"||$(te)?C(te):$(te.data)?C(te.data):null}(T)),(re=m.call(this,W))||(L()&&(T instanceof Uint8Array||R==="RGBA"||(P=T,T=H(T))),re=this["process"+R.toUpperCase()](T,u.call(this),W,function(te){return te&&typeof te=="string"&&(te=te.toUpperCase()),te in n.image_compression?te:b.NONE}(K),P)),!re)throw new Error("An unknown error occurred whilst processing the image.");return re},z=n.__addimage__.convertBase64ToBinaryString=function(T,R){R=typeof R!="boolean"||R;var W,K="";if(typeof T=="string"){var re;W=(re=I(T))!==null&&re!==void 0?re:T;try{K=xg(W)}catch(P){if(R)throw N(W)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+P.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return K};n.getImageProperties=function(T){var R,W,K="";if(f(T)&&(T=d(T)),typeof T=="string"&&s(T)===e&&((K=z(T,!1))===""&&(K=n.loadFile(T)||""),T=K),W=s(T),!h(W))throw new Error("addImage does not support files of type '"+W+"', please ensure that a plugin for '"+W+"' support is added.");if(!L()||T instanceof Uint8Array||(T=H(T)),!(R=this["process"+W.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=W,R}})(Vt.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Vt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var s,r,a,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,h=!1,f=0;f<u.length&&!h;f++)switch((s=u[f]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var d=0;d<u.length;d++){s=u[d];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(w.objId),C=s.title||"Note";a="<</Type /Annot /Subtype /Text "+(r="/Rect ["+i(s.bounds.x)+" "+o(s.bounds.y+s.bounds.h)+" "+i(s.bounds.x+s.bounds.w)+" "+o(s.bounds.y)+"] ")+"/Contents ("+m(b(s.contents))+")",a+=" /Popup "+v.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+m(b(C))+") >>",w.content=a;var N=w.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+i(s.bounds.x+30)+" "+o(s.bounds.y+s.bounds.h)+" "+i(s.bounds.x+s.bounds.w+30)+" "+o(s.bounds.y)+"] ")+" /Parent "+N,s.open&&(a+=" /Open true"),a+=" >>",v.content=a,this.internal.write(w.objId,"0 R",v.objId,"0 R");break;case"freetext":r="/Rect ["+i(s.bounds.x)+" "+o(s.bounds.y)+" "+i(s.bounds.x+s.bounds.w)+" "+o(s.bounds.y+s.bounds.h)+"] ";var I=s.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+m(g(s.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+I+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(s.options.name){var L=this.annotations._nameMap[s.options.name];s.options.pageNumber=L.page,s.options.top=L.y}else s.options.top||(s.options.top=0);if(r="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",a="",s.options.url)a="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(s.options.url))+") >>";else if(s.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,a+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var $=o(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),a+=" /XYZ "+s.options.left+" "+$+" "+s.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},n.link=function(t,s,r,a,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(t),y:u(s),w:l(t+r),h:u(s+a)},options:i,type:"link"})},n.textWithLink=function(t,s,r,a){var i,o,l=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var h=this.splitTextToSize(t,o).length;i=Math.ceil(u*h)}else o=l,i=u;return this.text(t,s,r,a),r+=.2*u,a.align==="center"&&(s-=l/2),a.align==="right"&&(s-=l),this.link(s,r-u,o,i,a),l},n.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}}(Vt.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];n.__arabicParser__={};var a=n.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},i=n.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},o=n.__arabicParser__.isArabicEndLetter=function(w){return i(w)&&a(w)&&e[w.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(w){return i(w)&&r.indexOf(w.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return i(w)&&a(w)&&e[w.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(w){return i(w)&&a(w)&&e[w.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(w){return i(w)&&a(w)&&e[w.charCodeAt(0)].length>=3};var h=n.__arabicParser__.arabicLetterHasMedialForm=function(w){return i(w)&&a(w)&&e[w.charCodeAt(0)].length==4},f=n.__arabicParser__.resolveLigatures=function(w){var v=0,b=t,C="",N=0;for(v=0;v<w.length;v+=1)b[w.charCodeAt(v)]!==void 0?(N++,typeof(b=b[w.charCodeAt(v)])=="number"&&(C+=String.fromCharCode(b),b=t,N=0),v===w.length-1&&(b=t,C+=w.charAt(v-(N-1)),v-=N-1,N=0)):(b=t,C+=w.charAt(v-N),v-=N,N=0);return C};n.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&s[w.charCodeAt(0)]!==void 0};var d=n.__arabicParser__.getCorrectForm=function(w,v,b){return i(w)?a(w)===!1?-1:!u(w)||!i(v)&&!i(b)||!i(b)&&o(v)||o(w)&&!i(v)||o(w)&&l(v)||o(w)&&o(v)?0:h(w)&&i(v)&&!o(v)&&i(b)&&u(b)?3:o(w)||!i(b)?1:2:-1},m=function(w){var v=0,b=0,C=0,N="",I="",L="",$=(w=w||"").split("\\s+"),H=[];for(v=0;v<$.length;v+=1){for(H.push(""),b=0;b<$[v].length;b+=1)N=$[v][b],I=$[v][b-1],L=$[v][b+1],i(N)?(C=d(N,I,L),H[v]+=C!==-1?String.fromCharCode(e[N.charCodeAt(0)][C]):N):H[v]+=N;H[v]=f(H[v])}return H.join(" ")},g=n.__arabicParser__.processArabic=n.processArabic=function(){var w,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(v)){var C=0;for(b=[],C=0;C<v.length;C+=1)Array.isArray(v[C])?b.push([m(v[C][0]),v[C][1],v[C][2]]):b.push([m(v[C])]);w=b}else w=m(v);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};n.events.push(["preProcessText",g])}(Vt.API),Vt.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var r;if((t=t||"2d")!=="2d")return null;for(r in s)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=s[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Vt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var d=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(w){g=w}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return s.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,u){s.call(this);var h=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),d=u.scaleFactor||this.internal.scaleFactor,m=0,g=0,w=0,v=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var b=u.maxWidth;b>0?typeof l=="string"?l=this.splitTextToSize(l,b):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(N,I){return N.concat(v.splitTextToSize(I,b))},[])):l=Array.isArray(l)?l:[l];for(var C=0;C<l.length;C++)m<(w=this.getStringUnitWidth(l[C],{font:f})*h)&&(m=w);return m!==0&&(g=l.length),{w:m/=d,h:Math.max((g*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/d,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=n.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var u=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,d=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,m&&d&&(this.printHeaderRow(l.lineNumber,!0),l.y+=d[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};n.table=function(l,u,h,f,d){if(s.call(this),!h)throw new Error("No data for PDF table.");var m,g,w,v,b=[],C=[],N=[],I={},L={},$=[],H=[],U=(d=d||{}).autoSize||!1,O=d.printHeaders!==!1,z=d.css&&d.css["font-size"]!==void 0?16*d.css["font-size"]:d.fontSize||12,T=d.margins||Object.assign({width:this.getPageWidth()},e),R=typeof d.padding=="number"?d.padding:3,W=d.headerBackgroundColor||"#c8c8c8",K=d.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=O,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=z,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=W,this.internal.__cell__.headerTextColor=K,this.setFontSize(z),f==null)C=b=Object.keys(h[0]),N=b.map(function(){return"left"});else if(Array.isArray(f)&&Yn(f[0])==="object")for(b=f.map(function(j){return j.name}),C=f.map(function(j){return j.prompt||j.name||""}),N=f.map(function(j){return j.align||"left"}),m=0;m<f.length;m+=1)L[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(C=b=f,N=b.map(function(){return"left"}));if(U||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<b.length;m+=1){for(I[v=b[m]]=h.map(function(j){return j[v]}),this.setFont(void 0,"bold"),$.push(this.getTextDimensions(C[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=I[v],this.setFont(void 0,"normal"),w=0;w<g.length;w+=1)$.push(this.getTextDimensions(g[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);L[v]=Math.max.apply(null,$)+R+R,$=[]}if(O){var re={};for(m=0;m<b.length;m+=1)re[b[m]]={},re[b[m]].text=C[m],re[b[m]].align=N[m];var P=o.call(this,re,L);H=b.map(function(j){return new a(l,u,L[j],P,re[j].text,void 0,re[j].align)}),this.setTableHeaderRow(H),this.printHeaderRow(1,!1)}var Y=f.reduce(function(j,ue){return j[ue.name]=ue.align,j},{});for(m=0;m<h.length;m+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:m,data:h[m]},this);var J=o.call(this,h[m],L);for(w=0;w<b.length;w+=1){var te=h[m][b[w]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:m,col:w,data:te},this),i.call(this,new a(l,u,L[b[w]],J,te,m+2,Y[b[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var h=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,d=this.internal.scaleFactor;return Object.keys(l).map(function(m){var g=l[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[m]-h-h)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/d+h+h},this).reduce(function(m,g){return Math.max(m,g)},0)};n.setTableHeaderRow=function(l){s.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,u){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var d=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){h=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(h.y=this.internal.__cell__.margins.top||0,d.push(h)),h.lineNumber=l;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,h),this.setTextColor(g)}d.length>0&&this.setTableHeaderRow(d),this.setFont(void 0,"normal"),t=!1}}(Vt.API);var pD={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},mD=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],sB=dD(mD),gD=[100,200,300,400,500,600,700,800,900],Wz=dD(gD);function rB(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(a){return pD[a=a||"normal"]?a:"normal"}(n.style),s=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(n.weight),r=function(a){return typeof sB[a=a||"normal"]=="number"?a:"normal"}(n.stretch);return{family:e,style:t,weight:s,stretch:r,src:n.src||[],ref:n.ref||{name:e,style:[r,t,s].join(" ")}}}function NF(n,e,t,s){var r;for(r=t;r>=0&&r<e.length;r+=s)if(n[e[r]])return n[e[r]];for(r=t;r>=0&&r<e.length;r-=s)if(n[e[r]])return n[e[r]]}var qz={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},IF={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function EF(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Xz(n,e,t){for(var s=(t=t||{}).defaultFontFamily||"times",r=Object.assign({},qz,t.genericFontFamilies||{}),a=null,i=null,o=0;o<e.length;++o)if(r[(a=rB(e[o])).family]&&(a.family=r[a.family]),n.hasOwnProperty(a.family)){i=n[a.family];break}if(!(i=i||n[s]))throw new Error("Could not find a font-family for the rule '"+EF(a)+"' and default family '"+s+"'.");if(i=function(l,u){if(u[l])return u[l];var h=sB[l],f=h<=sB.normal?-1:1,d=NF(u,mD,h,f);if(!d)throw new Error("Could not find a matching font-stretch value for "+l);return d}(a.stretch,i),i=function(l,u){if(u[l])return u[l];for(var h=pD[l],f=0;f<h.length;++f)if(u[h[f]])return u[h[f]];throw new Error("Could not find a matching font-style for "+l)}(a.style,i),!(i=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var h=Wz[l],f=NF(u,gD,h,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f}(a.weight,i)))throw new Error("Failed to resolve a font for the rule '"+EF(a)+"'.");return i}function kF(n){return n.trimLeft()}function Yz(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Jz(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var vy,FF,TF,Jv=["times"];(function(n){var e,t,s,r,a,i,o,l,u,h=function(Q){return Q=Q||{},this.isStrokeTransparent=Q.isStrokeTransparent||!1,this.strokeOpacity=Q.strokeOpacity||1,this.strokeStyle=Q.strokeStyle||"#000000",this.fillStyle=Q.fillStyle||"#000000",this.isFillTransparent=Q.isFillTransparent||!1,this.fillOpacity=Q.fillOpacity||1,this.font=Q.font||"10px sans-serif",this.textBaseline=Q.textBaseline||"alphabetic",this.textAlign=Q.textAlign||"left",this.lineWidth=Q.lineWidth||1,this.lineJoin=Q.lineJoin||"miter",this.lineCap=Q.lineCap||"butt",this.path=Q.path||[],this.transform=Q.transform!==void 0?Q.transform.clone():new l,this.globalCompositeOperation=Q.globalCompositeOperation||"normal",this.globalAlpha=Q.globalAlpha||1,this.clip_path=Q.clip_path||[],this.currentPoint=Q.currentPoint||new i,this.miterLimit=Q.miterLimit||10,this.lastPoint=Q.lastPoint||new i,this.lineDashOffset=Q.lineDashOffset||0,this.lineDash=Q.lineDash||[],this.margin=Q.margin||[0,0,0,0],this.prevPageLastElemOffset=Q.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Q.ignoreClearRect!="boolean"||Q.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new h}]);var f=function(Q){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=Q;Object.defineProperty(this,"pdf",{get:function(){return V}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(_e){Z=!!_e}});var le=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return le},set:function(_e){le=!!_e}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(_e){isNaN(_e)||(ce=_e)}});var pe=0;Object.defineProperty(this,"posY",{get:function(){return pe},set:function(_e){isNaN(_e)||(pe=_e)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(_e){var fe;typeof _e=="number"?fe=[_e,_e,_e,_e]:((fe=new Array(4))[0]=_e[0],fe[1]=_e.length>=2?_e[1]:fe[0],fe[2]=_e.length>=3?_e[2]:fe[0],fe[3]=_e.length>=4?_e[3]:fe[1]),u.margin=fe}});var ye=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ye},set:function(_e){ye=_e}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(_e){xe=_e}});var Me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Me},set:function(_e){Me=_e}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(_e){_e instanceof h&&(u=_e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(_e){u.path=_e}});var ze=[];Object.defineProperty(this,"ctxStack",{get:function(){return ze},set:function(_e){ze=_e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_e){var fe;fe=d(_e),this.ctx.fillStyle=fe.style,this.ctx.isFillTransparent=fe.a===0,this.ctx.fillOpacity=fe.a,this.pdf.setFillColor(fe.r,fe.g,fe.b,{a:fe.a}),this.pdf.setTextColor(fe.r,fe.g,fe.b,{a:fe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_e){var fe=d(_e);this.ctx.strokeStyle=fe.style,this.ctx.isStrokeTransparent=fe.a===0,this.ctx.strokeOpacity=fe.a,fe.a===0?this.pdf.setDrawColor(255,255,255):(fe.a,this.pdf.setDrawColor(fe.r,fe.g,fe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_e){["butt","round","square"].indexOf(_e)!==-1&&(this.ctx.lineCap=_e,this.pdf.setLineCap(_e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_e){isNaN(_e)||(this.ctx.lineWidth=_e,this.pdf.setLineWidth(_e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_e){["bevel","round","miter"].indexOf(_e)!==-1&&(this.ctx.lineJoin=_e,this.pdf.setLineJoin(_e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_e){isNaN(_e)||(this.ctx.miterLimit=_e,this.pdf.setMiterLimit(_e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_e){this.ctx.textBaseline=_e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_e){["right","end","center","left","start"].indexOf(_e)!==-1&&(this.ctx.textAlign=_e)}});var We=null;function tt(_e,fe){if(We===null){var ct=function(lt){var rt=[];return Object.keys(lt).forEach(function(ot){lt[ot].forEach(function(ut){var At=null;switch(ut){case"bold":At={family:ot,weight:"bold"};break;case"italic":At={family:ot,style:"italic"};break;case"bolditalic":At={family:ot,weight:"bold",style:"italic"};break;case"":case"normal":At={family:ot}}At!==null&&(At.ref={name:ot,style:ut},rt.push(At))})}),rt}(_e.getFontList());We=function(lt){for(var rt={},ot=0;ot<lt.length;++ot){var ut=rB(lt[ot]),At=ut.family,St=ut.stretch,Rt=ut.style,Ht=ut.weight;rt[At]=rt[At]||{},rt[At][St]=rt[At][St]||{},rt[At][St][Rt]=rt[At][St][Rt]||{},rt[At][St][Rt][Ht]=ut}return rt}(ct.concat(fe))}return We}var dt=null;Object.defineProperty(this,"fontFaces",{get:function(){return dt},set:function(_e){We=null,dt=_e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_e){var fe;if(this.ctx.font=_e,(fe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(_e))!==null){var ct=fe[1];fe[2];var lt=fe[3],rt=fe[4];fe[5];var ot=fe[6],ut=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(rt)[2];rt=Math.floor(ut==="px"?parseFloat(rt)*this.pdf.internal.scaleFactor:ut==="em"?parseFloat(rt)*this.pdf.getFontSize():parseFloat(rt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(rt);var At=function(Bt){var an,gt,pr=[],ln=Bt.trim();if(ln==="")return Jv;if(ln in IF)return[IF[ln]];for(;ln!=="";){switch(gt=null,an=(ln=kF(ln)).charAt(0)){case'"':case"'":gt=Yz(ln.substring(1),an);break;default:gt=Jz(ln)}if(gt===null||(pr.push(gt[0]),(ln=kF(gt[1]))!==""&&ln.charAt(0)!==","))return Jv;ln=ln.replace(/^,/,"")}return pr}(ot);if(this.fontFaces){var St=Xz(tt(this.pdf,this.fontFaces),At.map(function(Bt){return{family:Bt,stretch:"normal",weight:lt,style:ct}}));this.pdf.setFont(St.ref.name,St.ref.style)}else{var Rt="";(lt==="bold"||parseInt(lt,10)>=700||ct==="bold")&&(Rt="bold"),ct==="italic"&&(Rt+="italic"),Rt.length===0&&(Rt="normal");for(var Ht="",Pt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Qt=0;Qt<At.length;Qt++){if(this.pdf.internal.getFont(At[Qt],Rt,{noFallback:!0,disableWarning:!0})!==void 0){Ht=At[Qt];break}if(Rt==="bolditalic"&&this.pdf.internal.getFont(At[Qt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ht=At[Qt],Rt="bold";else if(this.pdf.internal.getFont(At[Qt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ht=At[Qt],Rt="normal";break}}if(Ht===""){for(var en=0;en<At.length;en++)if(Pt[At[en]]){Ht=Pt[At[en]];break}}Ht=Ht===""?"Times":Ht,this.pdf.setFont(Ht,Rt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_e){this.ctx.globalCompositeOperation=_e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_e){this.ctx.globalAlpha=_e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_e){this.ctx.lineDashOffset=_e,ue.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_e){this.ctx.lineDash=_e,ue.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_e){this.ctx.ignoreClearRect=!!_e}})};f.prototype.setLineDash=function(Q){this.lineDash=Q},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){I.call(this,"fill",!1)},f.prototype.stroke=function(){I.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(Q,V){if(isNaN(Q)||isNaN(V))throw ls.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new i(Q,V));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new i(Q,V)},f.prototype.closePath=function(){var Q=new i(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&Yn(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){Q=new i(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(Q.x,Q.y)},f.prototype.lineTo=function(Q,V){if(isNaN(Q)||isNaN(V))throw ls.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new i(Q,V));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new i(Z.x,Z.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),I.call(this,null,!0)},f.prototype.quadraticCurveTo=function(Q,V,Z,le){if(isNaN(Z)||isNaN(le)||isNaN(Q)||isNaN(V))throw ls.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new i(Z,le)),pe=this.ctx.transform.applyToPoint(new i(Q,V));this.path.push({type:"qct",x1:pe.x,y1:pe.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new i(ce.x,ce.y)},f.prototype.bezierCurveTo=function(Q,V,Z,le,ce,pe){if(isNaN(ce)||isNaN(pe)||isNaN(Q)||isNaN(V)||isNaN(Z)||isNaN(le))throw ls.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ye=this.ctx.transform.applyToPoint(new i(ce,pe)),xe=this.ctx.transform.applyToPoint(new i(Q,V)),Me=this.ctx.transform.applyToPoint(new i(Z,le));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:Me.x,y2:Me.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new i(ye.x,ye.y)},f.prototype.arc=function(Q,V,Z,le,ce,pe){if(isNaN(Q)||isNaN(V)||isNaN(Z)||isNaN(le)||isNaN(ce))throw ls.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pe=!!pe,!this.ctx.transform.isIdentity){var ye=this.ctx.transform.applyToPoint(new i(Q,V));Q=ye.x,V=ye.y;var xe=this.ctx.transform.applyToPoint(new i(0,Z)),Me=this.ctx.transform.applyToPoint(new i(0,0));Z=Math.sqrt(Math.pow(xe.x-Me.x,2)+Math.pow(xe.y-Me.y,2))}Math.abs(ce-le)>=2*Math.PI&&(le=0,ce=2*Math.PI),this.path.push({type:"arc",x:Q,y:V,radius:Z,startAngle:le,endAngle:ce,counterclockwise:pe})},f.prototype.arcTo=function(Q,V,Z,le,ce){throw new Error("arcTo not implemented.")},f.prototype.rect=function(Q,V,Z,le){if(isNaN(Q)||isNaN(V)||isNaN(Z)||isNaN(le))throw ls.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Q,V),this.lineTo(Q+Z,V),this.lineTo(Q+Z,V+le),this.lineTo(Q,V+le),this.lineTo(Q,V),this.lineTo(Q+Z,V),this.lineTo(Q,V)},f.prototype.fillRect=function(Q,V,Z,le){if(isNaN(Q)||isNaN(V)||isNaN(Z)||isNaN(le))throw ls.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Q,V,Z,le),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},f.prototype.strokeRect=function(Q,V,Z,le){if(isNaN(Q)||isNaN(V)||isNaN(Z)||isNaN(le))throw ls.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(Q,V,Z,le),this.stroke())},f.prototype.clearRect=function(Q,V,Z,le){if(isNaN(Q)||isNaN(V)||isNaN(Z)||isNaN(le))throw ls.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Q,V,Z,le))},f.prototype.save=function(Q){Q=typeof Q!="boolean"||Q;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),Q){this.ctx.fontSize=this.pdf.internal.getFontSize();var le=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=le}},f.prototype.restore=function(Q){Q=typeof Q!="boolean"||Q;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(V),Q&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(Q){var V,Z,le,ce;if(Q.isCanvasGradient===!0&&(Q=Q.getColor()),!Q)return{r:0,g:0,b:0,a:0,style:Q};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Q))V=0,Z=0,le=0,ce=0;else{var pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Q);if(pe!==null)V=parseInt(pe[1]),Z=parseInt(pe[2]),le=parseInt(pe[3]),ce=1;else if((pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Q))!==null)V=parseInt(pe[1]),Z=parseInt(pe[2]),le=parseInt(pe[3]),ce=parseFloat(pe[4]);else{if(ce=1,typeof Q=="string"&&Q.charAt(0)!=="#"){var ye=new lD(Q);Q=ye.ok?ye.toHex():"#000000"}Q.length===4?(V=Q.substring(1,2),V+=V,Z=Q.substring(2,3),Z+=Z,le=Q.substring(3,4),le+=le):(V=Q.substring(1,3),Z=Q.substring(3,5),le=Q.substring(5,7)),V=parseInt(V,16),Z=parseInt(Z,16),le=parseInt(le,16)}}return{r:V,g:Z,b:le,a:ce,style:Q}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(Q,V,Z,le){if(isNaN(V)||isNaN(Z)||typeof Q!="string")throw ls.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(le=isNaN(le)?void 0:le,!m.call(this)){var ce=J(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;R.call(this,{text:Q,x:V,y:Z,scale:pe,angle:ce,align:this.textAlign,maxWidth:le})}},f.prototype.strokeText=function(Q,V,Z,le){if(isNaN(V)||isNaN(Z)||typeof Q!="string")throw ls.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){le=isNaN(le)?void 0:le;var ce=J(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;R.call(this,{text:Q,x:V,y:Z,scale:pe,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:le})}},f.prototype.measureText=function(Q){if(typeof Q!="string")throw ls.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,Z=this.pdf.internal.scaleFactor,le=V.internal.getFontSize(),ce=V.getStringUnitWidth(Q)*le/V.internal.scaleFactor,pe=function(ye){var xe=(ye=ye||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xe}}),this};return new pe({width:ce*=Math.round(96*Z/72*1e4)/1e4})},f.prototype.scale=function(Q,V){if(isNaN(Q)||isNaN(V))throw ls.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new l(Q,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},f.prototype.rotate=function(Q){if(isNaN(Q))throw ls.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new l(Math.cos(Q),Math.sin(Q),-Math.sin(Q),Math.cos(Q),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},f.prototype.translate=function(Q,V){if(isNaN(Q)||isNaN(V))throw ls.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new l(1,0,0,1,Q,V);this.ctx.transform=this.ctx.transform.multiply(Z)},f.prototype.transform=function(Q,V,Z,le,ce,pe){if(isNaN(Q)||isNaN(V)||isNaN(Z)||isNaN(le)||isNaN(ce)||isNaN(pe))throw ls.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ye=new l(Q,V,Z,le,ce,pe);this.ctx.transform=this.ctx.transform.multiply(ye)},f.prototype.setTransform=function(Q,V,Z,le,ce,pe){Q=isNaN(Q)?1:Q,V=isNaN(V)?0:V,Z=isNaN(Z)?0:Z,le=isNaN(le)?1:le,ce=isNaN(ce)?0:ce,pe=isNaN(pe)?0:pe,this.ctx.transform=new l(Q,V,Z,le,ce,pe)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(Q,V,Z,le,ce,pe,ye,xe,Me){var ze=this.pdf.getImageProperties(Q),We=1,tt=1,dt=1,_e=1;le!==void 0&&xe!==void 0&&(dt=xe/le,_e=Me/ce,We=ze.width/le*xe/le,tt=ze.height/ce*Me/ce),pe===void 0&&(pe=V,ye=Z,V=0,Z=0),le!==void 0&&xe===void 0&&(xe=le,Me=ce),le===void 0&&xe===void 0&&(xe=ze.width,Me=ze.height);for(var fe,ct=this.ctx.transform.decompose(),lt=J(ct.rotate.shx),rt=new l,ot=(rt=(rt=(rt=rt.multiply(ct.translate)).multiply(ct.skew)).multiply(ct.scale)).applyToRectangle(new o(pe-V*dt,ye-Z*_e,le*We,ce*tt)),ut=v.call(this,ot),At=[],St=0;St<ut.length;St+=1)At.indexOf(ut[St])===-1&&At.push(ut[St]);if(N(At),this.autoPaging)for(var Rt=At[0],Ht=At[At.length-1],Pt=Rt;Pt<Ht+1;Pt++){this.pdf.setPage(Pt);var Qt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],en=Pt===1?this.posY+this.margin[0]:this.margin[0],Bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],an=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],gt=Pt===1?0:Bt+(Pt-2)*an;if(this.ctx.clip_path.length!==0){var pr=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(fe,this.posX+this.margin[3],-gt+en+this.ctx.prevPageLastElemOffset),L.call(this,"fill",!0),this.path=pr}var ln=JSON.parse(JSON.stringify(ot));ln=C([ln],this.posX+this.margin[3],-gt+en+this.ctx.prevPageLastElemOffset)[0];var Pr=(Pt>Rt||Pt<Ht)&&w.call(this);Pr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qt,an,null).clip().discardPath()),this.pdf.addImage(Q,"JPEG",ln.x,ln.y,ln.w,ln.h,null,null,lt),Pr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Q,"JPEG",ot.x,ot.y,ot.w,ot.h,null,null,lt)};var v=function(Q,V,Z){var le=[];V=V||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(Q.type){default:case"mt":case"lt":le.push(Math.floor((Q.y+ce)/Z)+1);break;case"arc":le.push(Math.floor((Q.y+ce-Q.radius)/Z)+1),le.push(Math.floor((Q.y+ce+Q.radius)/Z)+1);break;case"qct":var pe=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Q.x1,Q.y1,Q.x,Q.y);le.push(Math.floor((pe.y+ce)/Z)+1),le.push(Math.floor((pe.y+pe.h+ce)/Z)+1);break;case"bct":var ye=j(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Q.x1,Q.y1,Q.x2,Q.y2,Q.x,Q.y);le.push(Math.floor((ye.y+ce)/Z)+1),le.push(Math.floor((ye.y+ye.h+ce)/Z)+1);break;case"rect":le.push(Math.floor((Q.y+ce)/Z)+1),le.push(Math.floor((Q.y+Q.h+ce)/Z)+1)}for(var xe=0;xe<le.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<le[xe];)b.call(this);return le},b=function(){var Q=this.fillStyle,V=this.strokeStyle,Z=this.font,le=this.lineCap,ce=this.lineWidth,pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=Q,this.strokeStyle=V,this.font=Z,this.lineCap=le,this.lineWidth=ce,this.lineJoin=pe},C=function(Q,V,Z){for(var le=0;le<Q.length;le++)switch(Q[le].type){case"bct":Q[le].x2+=V,Q[le].y2+=Z;case"qct":Q[le].x1+=V,Q[le].y1+=Z;case"mt":case"lt":case"arc":default:Q[le].x+=V,Q[le].y+=Z}return Q},N=function(Q){return Q.sort(function(V,Z){return V-Z})},I=function(Q,V){for(var Z,le,ce=this.fillStyle,pe=this.strokeStyle,ye=this.lineCap,xe=this.lineWidth,Me=Math.abs(xe*this.ctx.transform.scaleX),ze=this.lineJoin,We=JSON.parse(JSON.stringify(this.path)),tt=JSON.parse(JSON.stringify(this.path)),dt=[],_e=0;_e<tt.length;_e++)if(tt[_e].x!==void 0)for(var fe=v.call(this,tt[_e]),ct=0;ct<fe.length;ct+=1)dt.indexOf(fe[ct])===-1&&dt.push(fe[ct]);for(var lt=0;lt<dt.length;lt++)for(;this.pdf.internal.getNumberOfPages()<dt[lt];)b.call(this);if(N(dt),this.autoPaging)for(var rt=dt[0],ot=dt[dt.length-1],ut=rt;ut<ot+1;ut++){this.pdf.setPage(ut),this.fillStyle=ce,this.strokeStyle=pe,this.lineCap=ye,this.lineWidth=Me,this.lineJoin=ze;var At=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],St=ut===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pt=ut===1?0:Rt+(ut-2)*Ht;if(this.ctx.clip_path.length!==0){var Qt=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(Z,this.posX+this.margin[3],-Pt+St+this.ctx.prevPageLastElemOffset),L.call(this,Q,!0),this.path=Qt}if(le=JSON.parse(JSON.stringify(We)),this.path=C(le,this.posX+this.margin[3],-Pt+St+this.ctx.prevPageLastElemOffset),V===!1||ut===0){var en=(ut>rt||ut<ot)&&w.call(this);en&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,Ht,null).clip().discardPath()),L.call(this,Q,V),en&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=Me,L.call(this,Q,V),this.lineWidth=xe;this.path=We},L=function(Q,V){if((Q!=="stroke"||V||!g.call(this))&&(Q==="stroke"||V||!m.call(this))){for(var Z,le,ce=[],pe=this.path,ye=0;ye<pe.length;ye++){var xe=pe[ye];switch(xe.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:xe,deltas:[],abs:[]});break;case"lt":var Me=ce.length;if(pe[ye-1]&&!isNaN(pe[ye-1].x)&&(Z=[xe.x-pe[ye-1].x,xe.y-pe[ye-1].y],Me>0)){for(;Me>=0;Me--)if(ce[Me-1].close!==!0&&ce[Me-1].begin!==!0){ce[Me-1].deltas.push(Z),ce[Me-1].abs.push(xe);break}}break;case"bct":Z=[xe.x1-pe[ye-1].x,xe.y1-pe[ye-1].y,xe.x2-pe[ye-1].x,xe.y2-pe[ye-1].y,xe.x-pe[ye-1].x,xe.y-pe[ye-1].y],ce[ce.length-1].deltas.push(Z);break;case"qct":var ze=pe[ye-1].x+2/3*(xe.x1-pe[ye-1].x),We=pe[ye-1].y+2/3*(xe.y1-pe[ye-1].y),tt=xe.x+2/3*(xe.x1-xe.x),dt=xe.y+2/3*(xe.y1-xe.y),_e=xe.x,fe=xe.y;Z=[ze-pe[ye-1].x,We-pe[ye-1].y,tt-pe[ye-1].x,dt-pe[ye-1].y,_e-pe[ye-1].x,fe-pe[ye-1].y],ce[ce.length-1].deltas.push(Z);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(xe)}}le=V?null:Q==="stroke"?"stroke":"fill";for(var ct=!1,lt=0;lt<ce.length;lt++)if(ce[lt].arc)for(var rt=ce[lt].abs,ot=0;ot<rt.length;ot++){var ut=rt[ot];ut.type==="arc"?U.call(this,ut.x,ut.y,ut.radius,ut.startAngle,ut.endAngle,ut.counterclockwise,void 0,V,!ct):W.call(this,ut.x,ut.y),ct=!0}else if(ce[lt].close===!0)this.pdf.internal.out("h"),ct=!1;else if(ce[lt].begin!==!0){var At=ce[lt].start.x,St=ce[lt].start.y;K.call(this,ce[lt].deltas,At,St),ct=!0}le&&O.call(this,le),V&&z.call(this)}},$=function(Q){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Q-Z;case"top":return Q+V-Z;case"hanging":return Q+V-2*Z;case"middle":return Q+V/2-Z;case"ideographic":return Q;case"alphabetic":default:return Q}},H=function(Q){return Q+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var Q=function(){};return Q.colorStops=[],Q.addColorStop=function(V,Z){this.colorStops.push([V,Z])},Q.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Q.isCanvasGradient=!0,Q},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var U=function(Q,V,Z,le,ce,pe,ye,xe,Me){for(var ze=P.call(this,Z,le,ce,pe),We=0;We<ze.length;We++){var tt=ze[We];We===0&&(Me?T.call(this,tt.x1+Q,tt.y1+V):W.call(this,tt.x1+Q,tt.y1+V)),re.call(this,Q,V,tt.x2,tt.y2,tt.x3,tt.y3,tt.x4,tt.y4)}xe?z.call(this):O.call(this,ye)},O=function(Q){switch(Q){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},z=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(Q,V){this.pdf.internal.out(t(Q)+" "+s(V)+" m")},R=function(Q){var V;switch(Q.align){case"right":case"end":V="right";break;case"center":V="center";break;case"left":case"start":default:V="left"}var Z=this.pdf.getTextDimensions(Q.text),le=$.call(this,Q.y),ce=H.call(this,le)-Z.h,pe=this.ctx.transform.applyToPoint(new i(Q.x,le)),ye=this.ctx.transform.decompose(),xe=new l;xe=(xe=(xe=xe.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale);for(var Me,ze,We,tt=this.ctx.transform.applyToRectangle(new o(Q.x,le,Z.w,Z.h)),dt=xe.applyToRectangle(new o(Q.x,ce,Z.w,Z.h)),_e=v.call(this,dt),fe=[],ct=0;ct<_e.length;ct+=1)fe.indexOf(_e[ct])===-1&&fe.push(_e[ct]);if(N(fe),this.autoPaging)for(var lt=fe[0],rt=fe[fe.length-1],ot=lt;ot<rt+1;ot++){this.pdf.setPage(ot);var ut=ot===1?this.posY+this.margin[0]:this.margin[0],At=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],St=this.pdf.internal.pageSize.height-this.margin[2],Rt=St-this.margin[0],Ht=this.pdf.internal.pageSize.width-this.margin[1],Pt=Ht-this.margin[3],Qt=ot===1?0:At+(ot-2)*Rt;if(this.ctx.clip_path.length!==0){var en=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(Me,this.posX+this.margin[3],-1*Qt+ut),L.call(this,"fill",!0),this.path=en}var Bt=C([JSON.parse(JSON.stringify(dt))],this.posX+this.margin[3],-Qt+ut+this.ctx.prevPageLastElemOffset)[0];Q.scale>=.01&&(ze=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ze*Q.scale),We=this.lineWidth,this.lineWidth=We*Q.scale);var an=this.autoPaging!=="text";if(an||Bt.y+Bt.h<=St){if(an||Bt.y>=ut&&Bt.x<=Ht){var gt=an?Q.text:this.pdf.splitTextToSize(Q.text,Q.maxWidth||Ht-Bt.x)[0],pr=C([JSON.parse(JSON.stringify(tt))],this.posX+this.margin[3],-Qt+ut+this.ctx.prevPageLastElemOffset)[0],ln=an&&(ot>lt||ot<rt)&&w.call(this);ln&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pt,Rt,null).clip().discardPath()),this.pdf.text(gt,pr.x,pr.y,{angle:Q.angle,align:V,renderingMode:Q.renderingMode}),ln&&this.pdf.restoreGraphicsState()}}else Bt.y<St&&(this.ctx.prevPageLastElemOffset+=St-Bt.y);Q.scale>=.01&&(this.pdf.setFontSize(ze),this.lineWidth=We)}else Q.scale>=.01&&(ze=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ze*Q.scale),We=this.lineWidth,this.lineWidth=We*Q.scale),this.pdf.text(Q.text,pe.x+this.posX,pe.y+this.posY,{angle:Q.angle,align:V,renderingMode:Q.renderingMode,maxWidth:Q.maxWidth}),Q.scale>=.01&&(this.pdf.setFontSize(ze),this.lineWidth=We)},W=function(Q,V,Z,le){Z=Z||0,le=le||0,this.pdf.internal.out(t(Q+Z)+" "+s(V+le)+" l")},K=function(Q,V,Z){return this.pdf.lines(Q,V,Z,null,null)},re=function(Q,V,Z,le,ce,pe,ye,xe){this.pdf.internal.out([e(r(Z+Q)),e(a(le+V)),e(r(ce+Q)),e(a(pe+V)),e(r(ye+Q)),e(a(xe+V)),"c"].join(" "))},P=function(Q,V,Z,le){for(var ce=2*Math.PI,pe=Math.PI/2;V>Z;)V-=ce;var ye=Math.abs(Z-V);ye<ce&&le&&(ye=ce-ye);for(var xe=[],Me=le?-1:1,ze=V;ye>1e-5;){var We=ze+Me*Math.min(ye,pe);xe.push(Y.call(this,Q,ze,We)),ye-=Math.abs(We-ze),ze=We}return xe},Y=function(Q,V,Z){var le=(Z-V)/2,ce=Q*Math.cos(le),pe=Q*Math.sin(le),ye=ce,xe=-pe,Me=ye*ye+xe*xe,ze=Me+ye*ce+xe*pe,We=4/3*(Math.sqrt(2*Me*ze)-ze)/(ye*pe-xe*ce),tt=ye-We*xe,dt=xe+We*ye,_e=tt,fe=-dt,ct=le+V,lt=Math.cos(ct),rt=Math.sin(ct);return{x1:Q*Math.cos(V),y1:Q*Math.sin(V),x2:tt*lt-dt*rt,y2:tt*rt+dt*lt,x3:_e*lt-fe*rt,y3:_e*rt+fe*lt,x4:Q*Math.cos(Z),y4:Q*Math.sin(Z)}},J=function(Q){return 180*Q/Math.PI},te=function(Q,V,Z,le,ce,pe){var ye=Q+.5*(Z-Q),xe=V+.5*(le-V),Me=ce+.5*(Z-ce),ze=pe+.5*(le-pe),We=Math.min(Q,ce,ye,Me),tt=Math.max(Q,ce,ye,Me),dt=Math.min(V,pe,xe,ze),_e=Math.max(V,pe,xe,ze);return new o(We,dt,tt-We,_e-dt)},j=function(Q,V,Z,le,ce,pe,ye,xe){var Me,ze,We,tt,dt,_e,fe,ct,lt,rt,ot,ut,At,St,Rt=Z-Q,Ht=le-V,Pt=ce-Z,Qt=pe-le,en=ye-ce,Bt=xe-pe;for(ze=0;ze<41;ze++)lt=(fe=(We=Q+(Me=ze/40)*Rt)+Me*((dt=Z+Me*Pt)-We))+Me*(dt+Me*(ce+Me*en-dt)-fe),rt=(ct=(tt=V+Me*Ht)+Me*((_e=le+Me*Qt)-tt))+Me*(_e+Me*(pe+Me*Bt-_e)-ct),ze==0?(ot=lt,ut=rt,At=lt,St=rt):(ot=Math.min(ot,lt),ut=Math.min(ut,rt),At=Math.max(At,lt),St=Math.max(St,rt));return new o(Math.round(ot),Math.round(ut),Math.round(At-ot),Math.round(St-ut))},ue=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Q,V,Z=(Q=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:Q,lineDashOffset:V}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(Vt.API),function(n){var e=function(a){var i,o,l,u,h,f,d,m,g,w;for(o=[],l=0,u=(a+=i="\0\0\0\0".slice(a.length%4||4)).length;u>l;l+=4)(h=(a.charCodeAt(l)<<24)+(a.charCodeAt(l+1)<<16)+(a.charCodeAt(l+2)<<8)+a.charCodeAt(l+3))!==0?(f=(h=((h=((h=((h=(h-(w=h%85))/85)-(g=h%85))/85)-(m=h%85))/85)-(d=h%85))/85)%85,o.push(f+33,d+33,m+33,g+33,w+33)):o.push(122);return function(v,b){for(var C=b;C>0;C--)v.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},t=function(a){var i,o,l,u,h,f=String,d="length",m=255,g="charCodeAt",w="slice",v="replace";for(a[w](-2),a=a[w](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),l=[],u=0,h=(a+=i="uuuuu"[w](a[d]%5||5))[d];h>u;u+=5)o=52200625*(a[g](u)-33)+614125*(a[g](u+1)-33)+7225*(a[g](u+2)-33)+85*(a[g](u+3)-33)+(a[g](u+4)-33),l.push(m&o>>24,m&o>>16,m&o>>8,m&o);return function(b,C){for(var N=C;N>0;N--)b.pop()}(l,i[d]),f.fromCharCode.apply(f,l)},s=function(a){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),i.test(a)===!1)return"";for(var o="",l=0;l<a.length;l+=2)o+=String.fromCharCode("0x"+(a[l]+a[l+1]));return o},r=function(a){for(var i=new Uint8Array(a.length),o=a.length;o--;)i[o]=a.charCodeAt(o);return a=(i=JC(i)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(a,i){var o=0,l=a||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=s(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=r(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(Vt.API),function(n){n.loadFile=function(e,t,s){return function(r,a,i){a=a!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(l,u,h){var f=new XMLHttpRequest,d=0,m=function(g){var w=g.length,v=[],b=String.fromCharCode;for(d=0;d<w;d+=1)v.push(b(255&g.charCodeAt(d)));return v.join("")};if(f.open("GET",l,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?h(m(this.responseText)):h(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)}(r,a,i)}catch{}return o}(e,t,s)},n.loadImageFile=n.loadFile}(Vt.API),function(n){function e(){return(qt.html2canvas?Promise.resolve(qt.html2canvas):KC(()=>Promise.resolve().then(()=>HW),[])).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function t(){return(qt.DOMPurify?Promise.resolve(qt.DOMPurify):KC(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var s=function(i){var o=Yn(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},r=function(i,o){var l=document.createElement(i);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},a=function i(o){var l=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(i,o){return i.__proto__=o||a.prototype,i},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(l){switch(s(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(t).then(function(l){return this.set({src:r("div",{innerHTML:i,dompurify:l})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},a.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,h){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),d=u.firstChild;d;d=d.nextSibling)h!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||f.appendChild(l(d,h));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var d=0;d<u.length;++d){var m=u[d],g=m.src.find(function(w){return w.format==="truetype"});g&&l.addFont(g.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(i,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},a.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},a.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},a.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(i){if(s(i)!=="object")return this;var o=Object.keys(i||{}).map(function(l){if(l in a.template.prop)return function(){this.prop[l]=i[l]};switch(l){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[l]=i[l]}}},this);return this.then(function(){return this.thenList(o)})},a.prototype.get=function(i,o){return this.then(function(){var l=i in a.template.prop?this.prop[i]:this.opt[i];return o?o(l):l})},a.prototype.setMargin=function(i){return this.then(function(){switch(s(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},a.prototype.setPageSize=function(i){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(i=i||Vt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},a.prototype.setProgress=function(i,o,l,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(i,o,l,u){return this.setProgress(i?this.progress.val+i:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(i,o){var l=this;return this.thenCore(i,o,function(u,h){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return l.updateProgress(null,u),f}).then(u,h).then(function(f){return l.updateProgress(1),f})})},a.prototype.thenCore=function(i,o,l){l=l||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),h=l.call(u,i,o);return a.convert(h,this.__proto__)},a.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},a.prototype.thenList=function(i){var o=this;return i.forEach(function(l){o=o.thenCore(l)}),o},a.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return a.convert(o,this)},a.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},a.prototype.error=function(i){return this.then(function(){throw new Error(i)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Vt.getPageSize=function(i,o,l){if(Yn(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",i=(""+(i||"P")).toLowerCase();var h,f=(""+l).toLowerCase(),d={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+o}var m,g=0,w=0;if(d.hasOwnProperty(f))g=d[f][1]/h,w=d[f][0]/h;else try{g=l[1],w=l[0]}catch{throw new Error("Invalid format: "+l)}if(i==="p"||i==="portrait")i="p",w>g&&(m=w,w=g,g=m);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",g>w&&(m=w,w=g,g=m)}return{width:w,height:g,unit:o,k:h,orientation:i}},n.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(rB):null;var l=new a(o);return o.worker?l:l.from(i).doCallback()}}(Vt.API),Vt.API.addJS=function(n){return TF=n,this.internal.events.subscribe("postPutResources",function(){vy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(vy+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),FF=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+TF+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){vy!==void 0&&FF!==void 0&&this.internal.out("/Names <</JavaScript "+vy+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=t.outline.render().split(/\r\n/),a=0;a<r.length;a++){var i=r[a],o=s.exec(i);if(o!=null){var l=o[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,h=[];for(a=0;a<u;a++){var f=t.internal.newObject();h.push(f);var d=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var m=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<h.length;a++)t.internal.write("(page_"+(a+1)+")"+h[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+m+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,r,a){var i={title:r,options:a,children:[]};return s==null&&(s=this.root),s.children.push(i),i},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var r=0;r<s.children.length;r++)this.genIds_r(s.children[r])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<s.children.length;a++){var i=s.children[a];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(s)),a>0&&this.line("/Prev "+this.makeRef(s.children[a-1])),a<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[a+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=t.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var u=0;u<s.children.length;u++)this.renderItems(s.children[u])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,r){for(var a=0;a<r.children.length;a++)s.count++,this.count_r(s,r.children[a]);return s.count}}])}(Vt.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,s,r,a,i,o){var l,u=this.decode.DCT_DECODE,h=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=i||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(f){for(var d,m=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,w={width:0,height:0,numcomponents:1},v=4;v<g;v+=2){if(v+=m,e.indexOf(f.charCodeAt(v+1))!==-1){d=256*f.charCodeAt(v+5)+f.charCodeAt(v+6),w={width:256*f.charCodeAt(v+7)+f.charCodeAt(v+8),height:d,numcomponents:f.charCodeAt(v+9)};break}m=256*f.charCodeAt(v+2)+f.charCodeAt(v+3)}return w}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}h={data:t,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:s,alias:r}}return h}}(Vt.API);var Hd,Cy,DF,LF,UF,Zz=function(){var n,e,t;function s(a){var i,o,l,u,h,f,d,m,g,w,v,b,C,N;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(i=this.readUInt32(),g=(function(){var I,L;for(L=[],I=0;I<4;++I)L.push(String.fromCharCode(this.data[this.pos++]));return L}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*h/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,i-=4),a=(f!=null?f.data:void 0)||this.imgData,b=0;0<=i?b<i:b>i;0<=i?++b:--b)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((w=l-this.transparency.indexed.length)>0)for(C=0;0<=w?C<w:C>w;0<=w?++C:--C)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":d=(v=this.read(i)).indexOf(0),m=String.fromCharCode.apply(String,v.slice(0,d)),this.text[m]=String.fromCharCode.apply(String,v.slice(d+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(a){var i,o;for(o=[],i=0;0<=a?i<a:i>a;0<=a?++i:--i)o.push(this.data[this.pos++]);return o},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(a){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),l=0,u=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function h(f,d,m,g){var w,v,b,C,N,I,L,$,H,U,O,z,T,R,W,K,re,P,Y,J,te,j=Math.ceil((u.width-f)/m),ue=Math.ceil((u.height-d)/g),Q=u.width==j&&u.height==ue;for(R=i*j,z=Q?o:new Uint8Array(R*ue),I=a.length,T=0,v=0;T<ue&&l<I;){switch(a[l++]){case 0:for(C=re=0;re<R;C=re+=1)z[v++]=a[l++];break;case 1:for(C=P=0;P<R;C=P+=1)w=a[l++],N=C<i?0:z[v-i],z[v++]=(w+N)%256;break;case 2:for(C=Y=0;Y<R;C=Y+=1)w=a[l++],b=(C-C%i)/i,W=T&&z[(T-1)*R+b*i+C%i],z[v++]=(W+w)%256;break;case 3:for(C=J=0;J<R;C=J+=1)w=a[l++],b=(C-C%i)/i,N=C<i?0:z[v-i],W=T&&z[(T-1)*R+b*i+C%i],z[v++]=(w+Math.floor((N+W)/2))%256;break;case 4:for(C=te=0;te<R;C=te+=1)w=a[l++],b=(C-C%i)/i,N=C<i?0:z[v-i],T===0?W=K=0:(W=z[(T-1)*R+b*i+C%i],K=b&&z[(T-1)*R+(b-1)*i+C%i]),L=N+W-K,$=Math.abs(L-N),U=Math.abs(L-W),O=Math.abs(L-K),H=$<=U&&$<=O?N:U<=O?W:K,z[v++]=(w+H)%256;break;default:throw new Error("Invalid filter algorithm: "+a[l-1])}if(!Q){var V=((d+T*g)*u.width+f)*i,Z=T*R;for(C=0;C<j;C+=1){for(var le=0;le<i;le+=1)o[V++]=z[Z++];V+=(m-1)*i}}T++}}return a=Tz(a),u.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),o},s.prototype.decodePalette=function(){var a,i,o,l,u,h,f,d,m;for(o=this.palette,h=this.transparency.indexed||[],u=new Uint8Array((h.length||0)+o.length),l=0,a=0,i=f=0,d=o.length;f<d;i=f+=3)u[l++]=o[i],u[l++]=o[i+1],u[l++]=o[i+2],u[l++]=(m=h[a++])!=null?m:255;return u},s.prototype.copyToImageData=function(a,i){var o,l,u,h,f,d,m,g,w,v,b;if(l=this.colors,w=null,o=this.hasAlphaChannel,this.palette.length&&(w=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),l=4,o=!0),g=(u=a.data||a).length,f=w||i,h=d=0,l===1)for(;h<g;)m=w?4*i[h/4]:d,v=f[m++],u[h++]=v,u[h++]=v,u[h++]=v,u[h++]=o?f[m++]:255,d=m;else for(;h<g;)m=w?4*i[h/4]:d,u[h++]=f[m++],u[h++]=f[m++],u[h++]=f[m++],u[h++]=o?f[m++]:255,d=m},s.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var r=function(){if(Object.prototype.toString.call(qt)==="[object Window]"){try{e=qt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return r(),n=function(a){var i;if(r()===!0)return t.width=a.width,t.height=a.height,t.clearRect(0,0,a.width,a.height),t.putImageData(a,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(a){var i,o,l,u,h,f,d,m;if(this.animation){for(m=[],o=h=0,f=(d=this.animation.frames).length;h<f;o=++h)i=d[o],l=a.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(l,u),i.imageData=l,m.push(i.image=n(l));return m}},s.prototype.renderFrame=function(a,i){var o,l,u;return o=(l=this.animation.frames)[i],u=l[i-1],i===0&&a.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?a.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&a.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&a.clearRect(o.xOffset,o.yOffset,o.width,o.height),a.drawImage(o.image,o.xOffset,o.yOffset)},s.prototype.animate=function(a){var i,o,l,u,h,f,d=this;return o=0,f=this.animation,u=f.numFrames,l=f.frames,h=f.numPlays,(i=function(){var m,g;if(m=o++%u,g=l[m],d.renderFrame(a,m),u>1&&o/u<h)return d.animation._timeout=setTimeout(i,g.delay)})()},s.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},s.prototype.render=function(a){var i,o;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,i=a.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},s}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function e7(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,s=n[e++]|n[e++]<<8,r=n[e++],a=r>>7,i=1<<(7&r)+1;n[e++],n[e++];var o=null,l=null;a&&(o=e,l=i,e+=3*i);var u=!0,h=[],f=0,d=null,m=0,g=null;for(this.width=t,this.height=s;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,g=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=n[e++];f=n[e++]|n[e++]<<8,d=n[e++],(1&w)==0&&(d=null),m=w>>2&7,e++;break;case 254:for(;;){if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var v=n[e++]|n[e++]<<8,b=n[e++]|n[e++]<<8,C=n[e++]|n[e++]<<8,N=n[e++]|n[e++]<<8,I=n[e++],L=I>>6&1,$=1<<(7&I)+1,H=o,U=l,O=!1;I>>7&&(O=!0,H=e,U=$,e+=3*$);var z=e;for(e++;;){var T;if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}h.push({x:v,y:b,width:C,height:N,has_local_palette:O,palette_offset:H,palette_size:U,data_offset:z,data_length:e-z,transparent_index:d,interlaced:!!L,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return g},this.frameInfo=function(R){if(R<0||R>=h.length)throw new Error("Frame index out of range.");return h[R]},this.decodeAndBlitFrameBGRA=function(R,W){var K=this.frameInfo(R),re=K.width*K.height,P=new Uint8Array(re);RF(n,K.data_offset,P,re);var Y=K.palette_offset,J=K.transparent_index;J===null&&(J=256);var te=K.width,j=t-te,ue=te,Q=4*(K.y*t+K.x),V=4*((K.y+K.height)*t+K.x),Z=Q,le=4*j;K.interlaced===!0&&(le+=4*t*7);for(var ce=8,pe=0,ye=P.length;pe<ye;++pe){var xe=P[pe];if(ue===0&&(ue=te,(Z+=le)>=V&&(le=4*j+4*t*(ce-1),Z=Q+(te+j)*(ce<<1),ce>>=1)),xe===J)Z+=4;else{var Me=n[Y+3*xe],ze=n[Y+3*xe+1],We=n[Y+3*xe+2];W[Z++]=We,W[Z++]=ze,W[Z++]=Me,W[Z++]=255}--ue}},this.decodeAndBlitFrameRGBA=function(R,W){var K=this.frameInfo(R),re=K.width*K.height,P=new Uint8Array(re);RF(n,K.data_offset,P,re);var Y=K.palette_offset,J=K.transparent_index;J===null&&(J=256);var te=K.width,j=t-te,ue=te,Q=4*(K.y*t+K.x),V=4*((K.y+K.height)*t+K.x),Z=Q,le=4*j;K.interlaced===!0&&(le+=4*t*7);for(var ce=8,pe=0,ye=P.length;pe<ye;++pe){var xe=P[pe];if(ue===0&&(ue=te,(Z+=le)>=V&&(le=4*j+4*t*(ce-1),Z=Q+(te+j)*(ce<<1),ce>>=1)),xe===J)Z+=4;else{var Me=n[Y+3*xe],ze=n[Y+3*xe+1],We=n[Y+3*xe+2];W[Z++]=Me,W[Z++]=ze,W[Z++]=We,W[Z++]=255}--ue}}}function RF(n,e,t,s){for(var r=n[e++],a=1<<r,i=a+1,o=i+1,l=r+1,u=(1<<l)-1,h=0,f=0,d=0,m=n[e++],g=new Int32Array(4096),w=null;;){for(;h<16&&m!==0;)f|=n[e++]<<h,h+=8,m===1?m=n[e++]:--m;if(h<l)break;var v=f&u;if(f>>=l,h-=l,v!==a){if(v===i)break;for(var b=v<o?v:w,C=0,N=b;N>a;)N=g[N]>>8,++C;var I=N;if(d+C+(b!==v?1:0)>s)return void ls.log("Warning, gif stream longer than expected.");t[d++]=I;var L=d+=C;for(b!==v&&(t[d++]=I),N=b;C--;)N=g[N],t[--L]=255&N,N>>=8;w!==null&&o<4096&&(g[o++]=w<<8|I,o>=u+1&&l<12&&(++l,u=u<<1|1)),w=v}else o=i+1,u=(1<<(l=r+1))-1,w=null}return d!==s&&ls.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Zv(n){var e,t,s,r,a,i=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),h=new Array(64),f=new Array(65535),d=new Array(65535),m=new Array(64),g=new Array(64),w=[],v=0,b=7,C=new Array(64),N=new Array(64),I=new Array(64),L=new Array(256),$=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],U=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],re=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function P(Q,V){for(var Z=0,le=0,ce=new Array,pe=1;pe<=16;pe++){for(var ye=1;ye<=Q[pe];ye++)ce[V[le]]=[],ce[V[le]][0]=Z,ce[V[le]][1]=pe,le++,Z++;Z*=2}return ce}function Y(Q){for(var V=Q[0],Z=Q[1]-1;Z>=0;)V&1<<Z&&(v|=1<<b),Z--,--b<0&&(v==255?(J(255),J(0)):J(v),b=7,v=0)}function J(Q){w.push(Q)}function te(Q){J(Q>>8&255),J(255&Q)}function j(Q,V,Z,le,ce){for(var pe,ye=ce[0],xe=ce[240],Me=function(rt,ot){var ut,At,St,Rt,Ht,Pt,Qt,en,Bt,an,gt=0;for(Bt=0;Bt<8;++Bt){ut=rt[gt],At=rt[gt+1],St=rt[gt+2],Rt=rt[gt+3],Ht=rt[gt+4],Pt=rt[gt+5],Qt=rt[gt+6];var pr=ut+(en=rt[gt+7]),ln=ut-en,Pr=At+Qt,bn=At-Qt,Gn=St+Pt,wa=St-Pt,_n=Rt+Ht,Ql=Rt-Ht,gs=pr+_n,ja=pr-_n,Va=Pr+Gn,Bs=Pr-Gn;rt[gt]=gs+Va,rt[gt+4]=gs-Va;var Jt=.707106781*(Bs+ja);rt[gt+2]=ja+Jt,rt[gt+6]=ja-Jt;var Rn=.382683433*((gs=Ql+wa)-(Bs=bn+ln)),zo=.5411961*gs+Rn,tr=1.306562965*Bs+Rn,Ui=.707106781*(Va=wa+bn),ao=ln+Ui,Lt=ln-Ui;rt[gt+5]=Lt+zo,rt[gt+3]=Lt-zo,rt[gt+1]=ao+tr,rt[gt+7]=ao-tr,gt+=8}for(gt=0,Bt=0;Bt<8;++Bt){ut=rt[gt],At=rt[gt+8],St=rt[gt+16],Rt=rt[gt+24],Ht=rt[gt+32],Pt=rt[gt+40],Qt=rt[gt+48];var Zn=ut+(en=rt[gt+56]),ys=ut-en,nr=At+Qt,Rs=At-Qt,js=St+Pt,Ga=St-Pt,PA=Rt+Ht,Ka=Rt-Ht,Wa=Zn+PA,zr=Zn-PA,jr=nr+js,ba=nr-js;rt[gt]=Wa+jr,rt[gt+32]=Wa-jr;var Dr=.707106781*(ba+zr);rt[gt+16]=zr+Dr,rt[gt+48]=zr-Dr;var Kn=.382683433*((Wa=Ka+Ga)-(ba=Rs+ys)),Ml=.5411961*Wa+Kn,zA=1.306562965*ba+Kn,oi=.707106781*(jr=Ga+Rs),Ri=ys+oi,Pu=ys-oi;rt[gt+40]=Pu+Ml,rt[gt+24]=Pu-Ml,rt[gt+8]=Ri+zA,rt[gt+56]=Ri-zA,gt++}for(Bt=0;Bt<64;++Bt)an=rt[Bt]*ot[Bt],m[Bt]=an>0?an+.5|0:an-.5|0;return m}(Q,V),ze=0;ze<64;++ze)g[H[ze]]=Me[ze];var We=g[0]-Z;Z=g[0],We==0?Y(le[0]):(Y(le[d[pe=32767+We]]),Y(f[pe]));for(var tt=63;tt>0&&g[tt]==0;)tt--;if(tt==0)return Y(ye),Z;for(var dt,_e=1;_e<=tt;){for(var fe=_e;g[_e]==0&&_e<=tt;)++_e;var ct=_e-fe;if(ct>=16){dt=ct>>4;for(var lt=1;lt<=dt;++lt)Y(xe);ct&=15}pe=32767+g[_e],Y(ce[(ct<<4)+d[pe]]),Y(f[pe]),_e++}return tt!=63&&Y(ye),Z}function ue(Q){Q=Math.min(Math.max(Q,1),100),a!=Q&&(function(V){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],le=0;le<64;le++){var ce=i((Z[le]*V+50)/100);ce=Math.min(Math.max(ce,1),255),o[H[le]]=ce}for(var pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ye=0;ye<64;ye++){var xe=i((pe[ye]*V+50)/100);xe=Math.min(Math.max(xe,1),255),l[H[ye]]=xe}for(var Me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ze=0,We=0;We<8;We++)for(var tt=0;tt<8;tt++)u[ze]=1/(o[H[ze]]*Me[We]*Me[tt]*8),h[ze]=1/(l[H[ze]]*Me[We]*Me[tt]*8),ze++}(Q<50?Math.floor(5e3/Q):Math.floor(200-2*Q)),a=Q)}this.encode=function(Q,V){V&&ue(V),w=new Array,v=0,b=7,te(65496),te(65504),te(16),J(74),J(70),J(73),J(70),J(0),J(1),J(1),J(0),te(1),te(1),J(0),J(0),function(){te(65499),te(132),J(0);for(var At=0;At<64;At++)J(o[At]);J(1);for(var St=0;St<64;St++)J(l[St])}(),function(At,St){te(65472),te(17),J(8),te(St),te(At),J(3),J(1),J(17),J(0),J(2),J(17),J(1),J(3),J(17),J(1)}(Q.width,Q.height),function(){te(65476),te(418),J(0);for(var At=0;At<16;At++)J(U[At+1]);for(var St=0;St<=11;St++)J(O[St]);J(16);for(var Rt=0;Rt<16;Rt++)J(z[Rt+1]);for(var Ht=0;Ht<=161;Ht++)J(T[Ht]);J(1);for(var Pt=0;Pt<16;Pt++)J(R[Pt+1]);for(var Qt=0;Qt<=11;Qt++)J(W[Qt]);J(17);for(var en=0;en<16;en++)J(K[en+1]);for(var Bt=0;Bt<=161;Bt++)J(re[Bt])}(),te(65498),te(12),J(3),J(1),J(0),J(2),J(17),J(3),J(17),J(0),J(63),J(0);var Z=0,le=0,ce=0;v=0,b=7,this.encode.displayName="_encode_";for(var pe,ye,xe,Me,ze,We,tt,dt,_e,fe=Q.data,ct=Q.width,lt=Q.height,rt=4*ct,ot=0;ot<lt;){for(pe=0;pe<rt;){for(ze=rt*ot+pe,tt=-1,dt=0,_e=0;_e<64;_e++)We=ze+(dt=_e>>3)*rt+(tt=4*(7&_e)),ot+dt>=lt&&(We-=rt*(ot+1+dt-lt)),pe+tt>=rt&&(We-=pe+tt-rt+4),ye=fe[We++],xe=fe[We++],Me=fe[We++],C[_e]=($[ye]+$[xe+256>>0]+$[Me+512>>0]>>16)-128,N[_e]=($[ye+768>>0]+$[xe+1024>>0]+$[Me+1280>>0]>>16)-128,I[_e]=($[ye+1280>>0]+$[xe+1536>>0]+$[Me+1792>>0]>>16)-128;Z=j(C,u,Z,e,s),le=j(N,h,le,t,r),ce=j(I,h,ce,t,r),pe+=32}ot+=8}if(b>=0){var ut=[];ut[1]=b+1,ut[0]=(1<<b+1)-1,Y(ut)}return te(65497),new Uint8Array(w)},n=n||50,function(){for(var Q=String.fromCharCode,V=0;V<256;V++)L[V]=Q(V)}(),e=P(U,O),t=P(R,W),s=P(z,T),r=P(K,re),function(){for(var Q=1,V=2,Z=1;Z<=15;Z++){for(var le=Q;le<V;le++)d[32767+le]=Z,f[32767+le]=[],f[32767+le][1]=Z,f[32767+le][0]=le;for(var ce=-(V-1);ce<=-Q;ce++)d[32767+ce]=Z,f[32767+ce]=[],f[32767+ce][1]=Z,f[32767+ce][0]=V-1+ce;Q<<=1,V<<=1}}(),function(){for(var Q=0;Q<256;Q++)$[Q]=19595*Q,$[Q+256>>0]=38470*Q,$[Q+512>>0]=7471*Q+32768,$[Q+768>>0]=-11059*Q,$[Q+1024>>0]=-21709*Q,$[Q+1280>>0]=32768*Q+8421375,$[Q+1536>>0]=-27439*Q,$[Q+1792>>0]=-5329*Q}(),ue(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function gl(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function $F(n){function e(U){if(!U)throw Error("assert :P")}function t(U,O,z){for(var T=0;4>T;T++)if(U[O+T]!=z.charCodeAt(T))return!0;return!1}function s(U,O,z,T,R){for(var W=0;W<R;W++)U[O+W]=z[T+W]}function r(U,O,z,T){for(var R=0;R<T;R++)U[O+R]=z}function a(U){return new Int32Array(U)}function i(U,O){for(var z=[],T=0;T<U;T++)z.push(new O);return z}function o(U,O){var z=[];return function T(R,W,K){for(var re=K[W],P=0;P<re&&(R.push(K.length>W+1?[]:new O),!(K.length<W+1));P++)T(R[P],W+1,K)}(z,0,U),z}var l=function(){var U=this;function O(x,S){for(var D=1<<S-1>>>0;x&D;)D>>>=1;return D?(x&D-1)+D:x}function z(x,S,D,_,q){e(!(_%D));do x[S+(_-=D)]=q;while(0<_)}function T(x,S,D,_,q){if(e(2328>=q),512>=q)var ee=a(512);else if((ee=a(q))==null)return 0;return function(ne,ae,Ae,he,Ce,$e){var Ue,Fe,Ze=ae,Ve=1<<Ae,Se=a(16),ke=a(16);for(e(Ce!=0),e(he!=null),e(ne!=null),e(0<Ae),Fe=0;Fe<Ce;++Fe){if(15<he[Fe])return 0;++Se[he[Fe]]}if(Se[0]==Ce)return 0;for(ke[1]=0,Ue=1;15>Ue;++Ue){if(Se[Ue]>1<<Ue)return 0;ke[Ue+1]=ke[Ue]+Se[Ue]}for(Fe=0;Fe<Ce;++Fe)Ue=he[Fe],0<he[Fe]&&($e[ke[Ue]++]=Fe);if(ke[15]==1)return(he=new R).g=0,he.value=$e[0],z(ne,Ze,1,Ve,he),Ve;var qe,et=-1,Ye=Ve-1,wt=0,ht=1,$t=1,ft=1<<Ae;for(Fe=0,Ue=1,Ce=2;Ue<=Ae;++Ue,Ce<<=1){if(ht+=$t<<=1,0>($t-=Se[Ue]))return 0;for(;0<Se[Ue];--Se[Ue])(he=new R).g=Ue,he.value=$e[Fe++],z(ne,Ze+wt,Ce,ft,he),wt=O(wt,Ue)}for(Ue=Ae+1,Ce=2;15>=Ue;++Ue,Ce<<=1){if(ht+=$t<<=1,0>($t-=Se[Ue]))return 0;for(;0<Se[Ue];--Se[Ue]){if(he=new R,(wt&Ye)!=et){for(Ze+=ft,qe=1<<(et=Ue)-Ae;15>et&&!(0>=(qe-=Se[et]));)++et,qe<<=1;Ve+=ft=1<<(qe=et-Ae),ne[ae+(et=wt&Ye)].g=qe+Ae,ne[ae+et].value=Ze-ae-et}he.g=Ue-Ae,he.value=$e[Fe++],z(ne,Ze+(wt>>Ae),Ce,ft,he),wt=O(wt,Ue)}}return ht!=2*ke[15]-1?0:Ve}(x,S,D,_,q,ee)}function R(){this.value=this.g=0}function W(){this.value=this.g=0}function K(){this.G=i(5,R),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(sr,W)}function re(x,S,D,_){e(x!=null),e(S!=null),e(2147483648>_),x.Ca=254,x.I=0,x.b=-8,x.Ka=0,x.oa=S,x.pa=D,x.Jd=S,x.Yc=D+_,x.Zc=4<=_?D+_-4+1:D,pe(x)}function P(x,S){for(var D=0;0<S--;)D|=xe(x,128)<<S;return D}function Y(x,S){var D=P(x,S);return ye(x)?-D:D}function J(x,S,D,_){var q,ee=0;for(e(x!=null),e(S!=null),e(4294967288>_),x.Sb=_,x.Ra=0,x.u=0,x.h=0,4<_&&(_=4),q=0;q<_;++q)ee+=S[D+q]<<8*q;x.Ra=ee,x.bb=_,x.oa=S,x.pa=D}function te(x){for(;8<=x.u&&x.bb<x.Sb;)x.Ra>>>=8,x.Ra+=x.oa[x.pa+x.bb]<<JA-8>>>0,++x.bb,x.u-=8;Z(x)&&(x.h=1,x.u=0)}function j(x,S){if(e(0<=S),!x.h&&S<=YA){var D=V(x)&Yl[S];return x.u+=S,te(x),D}return x.h=1,x.u=0}function ue(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(x){return x.Ra>>>(x.u&JA-1)>>>0}function Z(x){return e(x.bb<=x.Sb),x.h||x.bb==x.Sb&&x.u>JA}function le(x,S){x.u=S,x.h=Z(x)}function ce(x){x.u>=rc&&(e(x.u>=rc),te(x))}function pe(x){e(x!=null&&x.oa!=null),x.pa<x.Zc?(x.I=(x.oa[x.pa++]|x.I<<8)>>>0,x.b+=8):(e(x!=null&&x.oa!=null),x.pa<x.Yc?(x.b+=8,x.I=x.oa[x.pa++]|x.I<<8):x.Ka?x.b=0:(x.I<<=8,x.b+=8,x.Ka=1))}function ye(x){return P(x,1)}function xe(x,S){var D=x.Ca;0>x.b&&pe(x);var _=x.b,q=D*S>>>8,ee=(x.I>>>_>q)+0;for(ee?(D-=q,x.I-=q+1<<_>>>0):D=q+1,_=D,q=0;256<=_;)q+=8,_>>=8;return _=7^q+Ca[_],x.b-=_,x.Ca=(D<<_)-1,ee}function Me(x,S,D){x[S+0]=D>>24&255,x[S+1]=D>>16&255,x[S+2]=D>>8&255,x[S+3]=D>>0&255}function ze(x,S){return x[S+0]<<0|x[S+1]<<8}function We(x,S){return ze(x,S)|x[S+2]<<16}function tt(x,S){return ze(x,S)|ze(x,S+2)<<16}function dt(x,S){var D=1<<S;return e(x!=null),e(0<S),x.X=a(D),x.X==null?0:(x.Mb=32-S,x.Xa=S,1)}function _e(x,S){e(x!=null),e(S!=null),e(x.Xa==S.Xa),s(S.X,0,x.X,0,1<<S.Xa)}function fe(){this.X=[],this.Xa=this.Mb=0}function ct(x,S,D,_){e(D!=null),e(_!=null);var q=D[0],ee=_[0];return q==0&&(q=(x*ee+S/2)/S),ee==0&&(ee=(S*q+x/2)/x),0>=q||0>=ee?0:(D[0]=q,_[0]=ee,1)}function lt(x,S){return x+(1<<S)-1>>>S}function rt(x,S){return((4278255360&x)+(4278255360&S)>>>0&4278255360)+((16711935&x)+(16711935&S)>>>0&16711935)>>>0}function ot(x,S){U[S]=function(D,_,q,ee,ne,ae,Ae){var he;for(he=0;he<ne;++he){var Ce=U[x](ae[Ae+he-1],q,ee+he);ae[Ae+he]=rt(D[_+he],Ce)}}}function ut(){this.ud=this.hd=this.jd=0}function At(x,S){return((4278124286&(x^S))>>>1)+(x&S)>>>0}function St(x){return 0<=x&&256>x?x:0>x?0:255<x?255:void 0}function Rt(x,S){return St(x+(x-S+.5>>1))}function Ht(x,S,D){return Math.abs(S-D)-Math.abs(x-D)}function Pt(x,S,D,_,q,ee,ne){for(_=ee[ne-1],D=0;D<q;++D)ee[ne+D]=_=rt(x[S+D],_)}function Qt(x,S,D,_,q){var ee;for(ee=0;ee<D;++ee){var ne=x[S+ee],ae=ne>>8&255,Ae=16711935&(Ae=(Ae=16711935&ne)+((ae<<16)+ae));_[q+ee]=(4278255360&ne)+Ae>>>0}}function en(x,S){S.jd=x>>0&255,S.hd=x>>8&255,S.ud=x>>16&255}function Bt(x,S,D,_,q,ee){var ne;for(ne=0;ne<_;++ne){var ae=S[D+ne],Ae=ae>>>8,he=ae,Ce=255&(Ce=(Ce=ae>>>16)+((x.jd<<24>>24)*(Ae<<24>>24)>>>5));he=255&(he=(he=he+((x.hd<<24>>24)*(Ae<<24>>24)>>>5))+((x.ud<<24>>24)*(Ce<<24>>24)>>>5)),q[ee+ne]=(4278255360&ae)+(Ce<<16)+he}}function an(x,S,D,_,q){U[S]=function(ee,ne,ae,Ae,he,Ce,$e,Ue,Fe){for(Ae=$e;Ae<Ue;++Ae)for($e=0;$e<Fe;++$e)he[Ce++]=q(ae[_(ee[ne++])])},U[x]=function(ee,ne,ae,Ae,he,Ce,$e){var Ue=8>>ee.b,Fe=ee.Ea,Ze=ee.K[0],Ve=ee.w;if(8>Ue)for(ee=(1<<ee.b)-1,Ve=(1<<Ue)-1;ne<ae;++ne){var Se,ke=0;for(Se=0;Se<Fe;++Se)Se&ee||(ke=_(Ae[he++])),Ce[$e++]=q(Ze[ke&Ve]),ke>>=Ue}else U["VP8LMapColor"+D](Ae,he,Ze,Ve,Ce,$e,ne,ae,Fe)}}function gt(x,S,D,_,q){for(D=S+D;S<D;){var ee=x[S++];_[q++]=ee>>16&255,_[q++]=ee>>8&255,_[q++]=ee>>0&255}}function pr(x,S,D,_,q){for(D=S+D;S<D;){var ee=x[S++];_[q++]=ee>>16&255,_[q++]=ee>>8&255,_[q++]=ee>>0&255,_[q++]=ee>>24&255}}function ln(x,S,D,_,q){for(D=S+D;S<D;){var ee=(ne=x[S++])>>16&240|ne>>12&15,ne=ne>>0&240|ne>>28&15;_[q++]=ee,_[q++]=ne}}function Pr(x,S,D,_,q){for(D=S+D;S<D;){var ee=(ne=x[S++])>>16&248|ne>>13&7,ne=ne>>5&224|ne>>3&31;_[q++]=ee,_[q++]=ne}}function bn(x,S,D,_,q){for(D=S+D;S<D;){var ee=x[S++];_[q++]=ee>>0&255,_[q++]=ee>>8&255,_[q++]=ee>>16&255}}function Gn(x,S,D,_,q,ee){if(ee==0)for(D=S+D;S<D;)Me(_,((ee=x[S++])[0]>>24|ee[1]>>8&65280|ee[2]<<8&16711680|ee[3]<<24)>>>0),q+=32;else s(_,q,x,S,D)}function wa(x,S){U[S][0]=U[x+"0"],U[S][1]=U[x+"1"],U[S][2]=U[x+"2"],U[S][3]=U[x+"3"],U[S][4]=U[x+"4"],U[S][5]=U[x+"5"],U[S][6]=U[x+"6"],U[S][7]=U[x+"7"],U[S][8]=U[x+"8"],U[S][9]=U[x+"9"],U[S][10]=U[x+"10"],U[S][11]=U[x+"11"],U[S][12]=U[x+"12"],U[S][13]=U[x+"13"],U[S][14]=U[x+"0"],U[S][15]=U[x+"0"]}function _n(x){return x==Hh||x==oA||x==sl||x==lc}function Ql(){this.eb=[],this.size=this.A=this.fb=0}function gs(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ja(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ql,this.f.kb=new gs,this.sd=null}function Va(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Bs(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Jt(x){return alert("todo:WebPSamplerProcessPlane"),x.T}function Rn(x,S){var D=x.T,_=S.ba.f.RGBA,q=_.eb,ee=_.fb+x.ka*_.A,ne=br[S.ba.S],ae=x.y,Ae=x.O,he=x.f,Ce=x.N,$e=x.ea,Ue=x.W,Fe=S.cc,Ze=S.dc,Ve=S.Mc,Se=S.Nc,ke=x.ka,qe=x.ka+x.T,et=x.U,Ye=et+1>>1;for(ke==0?ne(ae,Ae,null,null,he,Ce,$e,Ue,he,Ce,$e,Ue,q,ee,null,null,et):(ne(S.ec,S.fc,ae,Ae,Fe,Ze,Ve,Se,he,Ce,$e,Ue,q,ee-_.A,q,ee,et),++D);ke+2<qe;ke+=2)Fe=he,Ze=Ce,Ve=$e,Se=Ue,Ce+=x.Rc,Ue+=x.Rc,ee+=2*_.A,ne(ae,(Ae+=2*x.fa)-x.fa,ae,Ae,Fe,Ze,Ve,Se,he,Ce,$e,Ue,q,ee-_.A,q,ee,et);return Ae+=x.fa,x.j+qe<x.o?(s(S.ec,S.fc,ae,Ae,et),s(S.cc,S.dc,he,Ce,Ye),s(S.Mc,S.Nc,$e,Ue,Ye),D--):1&qe||ne(ae,Ae,null,null,he,Ce,$e,Ue,he,Ce,$e,Ue,q,ee+_.A,null,null,et),D}function zo(x,S,D){var _=x.F,q=[x.J];if(_!=null){var ee=x.U,ne=S.ba.S,ae=ne==su||ne==sl;S=S.ba.f.RGBA;var Ae=[0],he=x.ka;Ae[0]=x.T,x.Kb&&(he==0?--Ae[0]:(--he,q[0]-=x.width),x.j+x.ka+x.T==x.o&&(Ae[0]=x.o-x.j-he));var Ce=S.eb;he=S.fb+he*S.A,x=gn(_,q[0],x.width,ee,Ae,Ce,he+(ae?0:3),S.A),e(D==Ae),x&&_n(ne)&&Ja(Ce,he,ae,ee,Ae,S.A)}return 0}function tr(x){var S=x.ma,D=S.ba.S,_=11>D,q=D==oc||D==Mh||D==su||D==nl||D==12||_n(D);if(S.memory=null,S.Ib=null,S.Jb=null,S.Nd=null,!Xl(S.Oa,x,q?11:12))return 0;if(q&&_n(D)&&it(),x.da)alert("todo:use_scaling");else{if(_){if(S.Ib=Jt,x.Kb){if(D=x.U+1>>1,S.memory=a(x.U+2*D),S.memory==null)return 0;S.ec=S.memory,S.fc=0,S.cc=S.ec,S.dc=S.fc+x.U,S.Mc=S.cc,S.Nc=S.dc+D,S.Ib=Rn,it()}}else alert("todo:EmitYUV");q&&(S.Jb=zo,_&&Le())}if(_&&!S1){for(x=0;256>x;++x)Lx[x]=89858*(x-128)+ar>>go,jh[x]=-22014*(x-128)+ar,um[x]=-45773*(x-128),ir[x]=113618*(x-128)+ar>>go;for(x=uA;x<yd;++x)S=76283*(x-16)+ar>>go,Vh[x-uA]=Ya(S,255),cm[x-uA]=Ya(S+8>>4,15);S1=1}return 1}function Ui(x){var S=x.ma,D=x.U,_=x.T;return e(!(1&x.ka)),0>=D||0>=_?0:(D=S.Ib(x,S),S.Jb!=null&&S.Jb(x,S,D),S.Dc+=D,1)}function ao(x){x.ma.memory=null}function Lt(x,S,D,_){return j(x,8)!=47?0:(S[0]=j(x,14)+1,D[0]=j(x,14)+1,_[0]=j(x,1),j(x,3)!=0?0:!x.h)}function Zn(x,S){if(4>x)return x+1;var D=x-2>>1;return(2+(1&x)<<D)+j(S,D)+1}function ys(x,S){return 120<S?S-120:1<=(D=((D=al[S-1])>>4)*x+(8-(15&D)))?D:1;var D}function nr(x,S,D){var _=V(D),q=x[S+=255&_].g-8;return 0<q&&(le(D,D.u+8),_=V(D),S+=x[S].value,S+=_&(1<<q)-1),le(D,D.u+x[S].g),x[S].value}function Rs(x,S,D){return D.g+=x.g,D.value+=x.value<<S>>>0,e(8>=D.g),x.g}function js(x,S,D){var _=x.xc;return e((S=_==0?0:x.vc[x.md*(D>>_)+(S>>_)])<x.Wb),x.Ya[S]}function Ga(x,S,D,_){var q=x.ab,ee=x.c*S,ne=x.C;S=ne+S;var ae=D,Ae=_;for(_=x.Ta,D=x.Ua;0<q--;){var he=x.gc[q],Ce=ne,$e=S,Ue=ae,Fe=Ae,Ze=(Ae=_,ae=D,he.Ea);switch(e(Ce<$e),e($e<=he.nc),he.hc){case 2:cd(Ue,Fe,($e-Ce)*Ze,Ae,ae);break;case 0:var Ve=Ce,Se=$e,ke=Ae,qe=ae,et=(ft=he).Ea;Ve==0&&(lm(Ue,Fe,null,null,1,ke,qe),Pt(Ue,Fe+1,0,0,et-1,ke,qe+1),Fe+=et,qe+=et,++Ve);for(var Ye=1<<ft.b,wt=Ye-1,ht=lt(et,ft.b),$t=ft.K,ft=ft.w+(Ve>>ft.b)*ht;Ve<Se;){var Tn=$t,On=ft,fn=1;for(Oh(Ue,Fe,ke,qe-et,1,ke,qe);fn<et;){var cn=(fn&~wt)+Ye;cn>et&&(cn=et),(0,Zo[Tn[On++]>>8&15])(Ue,Fe+ +fn,ke,qe+fn-et,cn-fn,ke,qe+fn),fn=cn}Fe+=et,qe+=et,++Ve&wt||(ft+=ht)}$e!=he.nc&&s(Ae,ae-Ze,Ae,ae+($e-Ce-1)*Ze,Ze);break;case 1:for(Ze=Ue,Se=Fe,et=(Ue=he.Ea)-(qe=Ue&~(ke=(Fe=1<<he.b)-1)),Ve=lt(Ue,he.b),Ye=he.K,he=he.w+(Ce>>he.b)*Ve;Ce<$e;){for(wt=Ye,ht=he,$t=new ut,ft=Se+qe,Tn=Se+Ue;Se<ft;)en(wt[ht++],$t),Zl($t,Ze,Se,Fe,Ae,ae),Se+=Fe,ae+=Fe;Se<Tn&&(en(wt[ht++],$t),Zl($t,Ze,Se,et,Ae,ae),Se+=et,ae+=et),++Ce&ke||(he+=Ve)}break;case 3:if(Ue==Ae&&Fe==ae&&0<he.b){for(Se=Ae,Ue=Ze=ae+($e-Ce)*Ze-(qe=($e-Ce)*lt(he.Ea,he.b)),Fe=Ae,ke=ae,Ve=[],qe=(et=qe)-1;0<=qe;--qe)Ve[qe]=Fe[ke+qe];for(qe=et-1;0<=qe;--qe)Se[Ue+qe]=Ve[qe];ui(he,Ce,$e,Ae,Ze,Ae,ae)}else ui(he,Ce,$e,Ue,Fe,Ae,ae)}ae=_,Ae=D}Ae!=D&&s(_,D,ae,Ae,ee)}function PA(x,S){var D=x.V,_=x.Ba+x.c*x.C,q=S-x.C;if(e(S<=x.l.o),e(16>=q),0<q){var ee=x.l,ne=x.Ta,ae=x.Ua,Ae=ee.width;if(Ga(x,q,D,_),q=ae=[ae],e((D=x.C)<(_=S)),e(ee.v<ee.va),_>ee.o&&(_=ee.o),D<ee.j){var he=ee.j-D;D=ee.j,q[0]+=he*Ae}if(D>=_?D=0:(q[0]+=4*ee.v,ee.ka=D-ee.j,ee.U=ee.va-ee.v,ee.T=_-D,D=1),D){if(ae=ae[0],11>(D=x.ca).S){var Ce=D.f.RGBA,$e=(_=D.S,q=ee.U,ee=ee.T,he=Ce.eb,Ce.A),Ue=ee;for(Ce=Ce.fb+x.Ma*Ce.A;0<Ue--;){var Fe=ne,Ze=ae,Ve=q,Se=he,ke=Ce;switch(_){case Gr:oa(Fe,Ze,Ve,Se,ke);break;case oc:Lr(Fe,Ze,Ve,Se,ke);break;case Hh:Lr(Fe,Ze,Ve,Se,ke),Ja(Se,ke,0,Ve,1,0);break;case ho:Mi(Fe,Ze,Ve,Se,ke);break;case Mh:Gn(Fe,Ze,Ve,Se,ke,1);break;case oA:Gn(Fe,Ze,Ve,Se,ke,1),Ja(Se,ke,0,Ve,1,0);break;case su:Gn(Fe,Ze,Ve,Se,ke,0);break;case sl:Gn(Fe,Ze,Ve,Se,ke,0),Ja(Se,ke,1,Ve,1,0);break;case nl:eA(Fe,Ze,Ve,Se,ke);break;case lc:eA(Fe,Ze,Ve,Se,ke),mn(Se,ke,Ve,1,0);break;case fd:Ba(Fe,Ze,Ve,Se,ke);break;default:e(0)}ae+=Ae,Ce+=$e}x.Ma+=ee}else alert("todo:EmitRescaledRowsYUVA");e(x.Ma<=D.height)}}x.C=S,e(x.C<=x.i)}function Ka(x){var S;if(0<x.ua)return 0;for(S=0;S<x.Wb;++S){var D=x.Ya[S].G,_=x.Ya[S].H;if(0<D[1][_[1]+0].g||0<D[2][_[2]+0].g||0<D[3][_[3]+0].g)return 0}return 1}function Wa(x,S,D,_,q,ee){if(x.Z!=0){var ne=x.qd,ae=x.rd;for(e(po[x.Z]!=null);S<D;++S)po[x.Z](ne,ae,_,q,_,q,ee),ne=_,ae=q,q+=ee;x.qd=ne,x.rd=ae}}function zr(x,S){var D=x.l.ma,_=D.Z==0||D.Z==1?x.l.j:x.C;if(_=x.C<_?_:x.C,e(S<=x.l.o),S>_){var q=x.l.width,ee=D.ca,ne=D.tb+q*_,ae=x.V,Ae=x.Ba+x.c*_,he=x.gc;e(x.ab==1),e(he[0].hc==3),Jl(he[0],_,S,ae,Ae,ee,ne),Wa(D,_,S,ee,ne,q)}x.C=x.Ma=S}function jr(x,S,D,_,q,ee,ne){var ae=x.$/_,Ae=x.$%_,he=x.m,Ce=x.s,$e=D+x.$,Ue=$e;q=D+_*q;var Fe=D+_*ee,Ze=280+Ce.ua,Ve=x.Pb?ae:16777216,Se=0<Ce.ua?Ce.Wa:null,ke=Ce.wc,qe=$e<Fe?js(Ce,Ae,ae):null;e(x.C<ee),e(Fe<=q);var et=!1;e:for(;;){for(;et||$e<Fe;){var Ye=0;if(ae>=Ve){var wt=$e-D;e((Ve=x).Pb),Ve.wd=Ve.m,Ve.xd=wt,0<Ve.s.ua&&_e(Ve.s.Wa,Ve.s.vb),Ve=ae+v1}if(Ae&ke||(qe=js(Ce,Ae,ae)),e(qe!=null),qe.Qb&&(S[$e]=qe.qb,et=!0),!et)if(ce(he),qe.jc){Ye=he,wt=S;var ht=$e,$t=qe.pd[V(Ye)&sr-1];e(qe.jc),256>$t.g?(le(Ye,Ye.u+$t.g),wt[ht]=$t.value,Ye=0):(le(Ye,Ye.u+$t.g-256),e(256<=$t.value),Ye=$t.value),Ye==0&&(et=!0)}else Ye=nr(qe.G[0],qe.H[0],he);if(he.h)break;if(et||256>Ye){if(!et)if(qe.nd)S[$e]=(qe.qb|Ye<<8)>>>0;else{if(ce(he),et=nr(qe.G[1],qe.H[1],he),ce(he),wt=nr(qe.G[2],qe.H[2],he),ht=nr(qe.G[3],qe.H[3],he),he.h)break;S[$e]=(ht<<24|et<<16|Ye<<8|wt)>>>0}if(et=!1,++$e,++Ae>=_&&(Ae=0,++ae,ne!=null&&ae<=ee&&!(ae%16)&&ne(x,ae),Se!=null))for(;Ue<$e;)Ye=S[Ue++],Se.X[(506832829*Ye&4294967295)>>>Se.Mb]=Ye}else if(280>Ye){if(Ye=Zn(Ye-256,he),wt=nr(qe.G[4],qe.H[4],he),ce(he),wt=ys(_,wt=Zn(wt,he)),he.h)break;if($e-D<wt||q-$e<Ye)break e;for(ht=0;ht<Ye;++ht)S[$e+ht]=S[$e+ht-wt];for($e+=Ye,Ae+=Ye;Ae>=_;)Ae-=_,++ae,ne!=null&&ae<=ee&&!(ae%16)&&ne(x,ae);if(e($e<=q),Ae&ke&&(qe=js(Ce,Ae,ae)),Se!=null)for(;Ue<$e;)Ye=S[Ue++],Se.X[(506832829*Ye&4294967295)>>>Se.Mb]=Ye}else{if(!(Ye<Ze))break e;for(et=Ye-280,e(Se!=null);Ue<$e;)Ye=S[Ue++],Se.X[(506832829*Ye&4294967295)>>>Se.Mb]=Ye;Ye=$e,e(!(et>>>(wt=Se).Xa)),S[Ye]=wt.X[et],et=!0}et||e(he.h==Z(he))}if(x.Pb&&he.h&&$e<q)e(x.m.h),x.a=5,x.m=x.wd,x.$=x.xd,0<x.s.ua&&_e(x.s.vb,x.s.Wa);else{if(he.h)break e;ne!=null&&ne(x,ae>ee?ee:ae),x.a=0,x.$=$e-D}return 1}return x.a=3,0}function ba(x){e(x!=null),x.vc=null,x.yc=null,x.Ya=null;var S=x.Wa;S!=null&&(S.X=null),x.vb=null,e(x!=null)}function Dr(){var x=new om;return x==null?null:(x.a=0,x.xb=Ac,wa("Predictor","VP8LPredictors"),wa("Predictor","VP8LPredictors_C"),wa("PredictorAdd","VP8LPredictorsAdd"),wa("PredictorAdd","VP8LPredictorsAdd_C"),cd=Qt,Zl=Bt,oa=gt,Lr=pr,eA=ln,Ba=Pr,Mi=bn,U.VP8LMapColor32b=yr,U.VP8LMapColor8b=Qh,x)}function Kn(x,S,D,_,q){var ee=1,ne=[x],ae=[S],Ae=_.m,he=_.s,Ce=null,$e=0;e:for(;;){if(D)for(;ee&&j(Ae,1);){var Ue=ne,Fe=ae,Ze=_,Ve=1,Se=Ze.m,ke=Ze.gc[Ze.ab],qe=j(Se,2);if(Ze.Oc&1<<qe)ee=0;else{switch(Ze.Oc|=1<<qe,ke.hc=qe,ke.Ea=Ue[0],ke.nc=Fe[0],ke.K=[null],++Ze.ab,e(4>=Ze.ab),qe){case 0:case 1:ke.b=j(Se,3)+2,Ve=Kn(lt(ke.Ea,ke.b),lt(ke.nc,ke.b),0,Ze,ke.K),ke.K=ke.K[0];break;case 3:var et,Ye=j(Se,8)+1,wt=16<Ye?0:4<Ye?1:2<Ye?2:3;if(Ue[0]=lt(ke.Ea,wt),ke.b=wt,et=Ve=Kn(Ye,1,0,Ze,ke.K)){var ht,$t=Ye,ft=ke,Tn=1<<(8>>ft.b),On=a(Tn);if(On==null)et=0;else{var fn=ft.K[0],cn=ft.w;for(On[0]=ft.K[0][0],ht=1;ht<1*$t;++ht)On[ht]=rt(fn[cn+ht],On[ht-1]);for(;ht<4*Tn;++ht)On[ht]=0;ft.K[0]=null,ft.K[0]=On,et=1}}Ve=et;break;case 2:break;default:e(0)}ee=Ve}}if(ne=ne[0],ae=ae[0],ee&&j(Ae,1)&&!(ee=1<=($e=j(Ae,4))&&11>=$e)){_.a=3;break e}var Pn;if(Pn=ee)t:{var Qn,tn,Wn,Mt=_,Wt=ne,kn=ae,Dn=$e,xr=D,or=Mt.m,Qs=Mt.s,Ms=[null],Gs=1,di=0,Mn=au[Dn];n:for(;;){if(xr&&j(or,1)){var Ks=j(or,3)+2,zi=lt(Wt,Ks),cA=lt(kn,Ks),lu=zi*cA;if(!Kn(zi,cA,0,Mt,Ms))break n;for(Ms=Ms[0],Qs.xc=Ks,Qn=0;Qn<lu;++Qn){var hA=Ms[Qn]>>8&65535;Ms[Qn]=hA,hA>=Gs&&(Gs=hA+1)}}if(or.h)break n;for(tn=0;5>tn;++tn){var hs=Za[tn];!tn&&0<Dn&&(hs+=1<<Dn),di<hs&&(di=hs)}var Gh=i(Gs*Mn,R),wd=Gs,Aa=i(wd,K);if(Aa==null)var bs=null;else e(65536>=wd),bs=Aa;var Au=a(di);if(bs==null||Au==null||Gh==null){Mt.a=1;break n}var fA=Gh;for(Qn=Wn=0;Qn<Gs;++Qn){var Na=bs[Qn],dA=Na.G,Ia=Na.H,Kh=0,cc=1,bd=0;for(tn=0;5>tn;++tn){hs=Za[tn],dA[tn]=fA,Ia[tn]=Wn,!tn&&0<Dn&&(hs+=1<<Dn);r:{var Wh,xd=hs,qh=Mt,hc=Au,E1=fA,k1=Wn,Xh=0,Al=qh.m,Rx=j(Al,1);if(r(hc,0,0,xd),Rx){var F1=j(Al,1)+1,T1=j(Al,1),hm=j(Al,T1==0?1:8);hc[hm]=1,F1==2&&(hc[hm=j(Al,8)]=1);var fc=1}else{var fm=a(19),dm=j(Al,4)+4;if(19<dm){qh.a=3;var Yh=0;break r}for(Wh=0;Wh<dm;++Wh)fm[rl[Wh]]=j(Al,3);var vd=void 0,dc=void 0,D1=qh,L1=fm,ul=xd,Jh=hc,Cd=0,ji=D1.m,pc=8,pm=i(128,R);s:for(;T(pm,0,7,L1,19);){if(j(ji,1)){var U1=2+2*j(ji,3);if((vd=2+j(ji,U1))>ul)break s}else vd=ul;for(dc=0;dc<ul&&vd--;){ce(ji);var mm=pm[0+(127&V(ji))];le(ji,ji.u+mm.g);var uu=mm.value;if(16>uu)Jh[dc++]=uu,uu!=0&&(pc=uu);else{var R1=uu==16,gm=uu-16,ym=fi[gm],wm=j(ji,dd[gm])+ym;if(dc+wm>ul)break s;for(var $1=R1?pc:0;0<wm--;)Jh[dc++]=$1}}Cd=1;break s}Cd||(D1.a=3),fc=Cd}(fc=fc&&!Al.h)&&(Xh=T(E1,k1,8,hc,xd)),fc&&Xh!=0?Yh=Xh:(qh.a=3,Yh=0)}if(Yh==0)break n;if(cc&&ru[tn]==1&&(cc=fA[Wn].g==0),Kh+=fA[Wn].g,Wn+=Yh,3>=tn){var cu,Bd=Au[0];for(cu=1;cu<hs;++cu)Au[cu]>Bd&&(Bd=Au[cu]);bd+=Bd}}if(Na.nd=cc,Na.Qb=0,cc&&(Na.qb=(dA[3][Ia[3]+0].value<<24|dA[1][Ia[1]+0].value<<16|dA[2][Ia[2]+0].value)>>>0,Kh==0&&256>dA[0][Ia[0]+0].value&&(Na.Qb=1,Na.qb+=dA[0][Ia[0]+0].value<<8)),Na.jc=!Na.Qb&&6>bd,Na.jc){var Zh,cl=Na;for(Zh=0;Zh<sr;++Zh){var yo=Zh,hl=cl.pd[yo],ef=cl.G[0][cl.H[0]+yo];256<=ef.value?(hl.g=ef.g+256,hl.value=ef.value):(hl.g=0,hl.value=0,yo>>=Rs(ef,8,hl),yo>>=Rs(cl.G[1][cl.H[1]+yo],16,hl),yo>>=Rs(cl.G[2][cl.H[2]+yo],0,hl),Rs(cl.G[3][cl.H[3]+yo],24,hl))}}}Qs.vc=Ms,Qs.Wb=Gs,Qs.Ya=bs,Qs.yc=Gh,Pn=1;break t}Pn=0}if(!(ee=Pn)){_.a=3;break e}if(0<$e){if(he.ua=1<<$e,!dt(he.Wa,$e)){_.a=1,ee=0;break e}}else he.ua=0;var tf=_,bm=ne,_1=ae,xm=tf.s,vm=xm.xc;if(tf.c=bm,tf.i=_1,xm.md=lt(bm,vm),xm.wc=vm==0?-1:(1<<vm)-1,D){_.xb=B1;break e}if((Ce=a(ne*ae))==null){_.a=1,ee=0;break e}ee=(ee=jr(_,Ce,0,ne,ae,ae,null))&&!Ae.h;break e}return ee?(q!=null?q[0]=Ce:(e(Ce==null),e(D)),_.$=0,D||ba(he)):ba(he),ee}function Ml(x,S){var D=x.c*x.i,_=D+S+16*S;return e(x.c<=S),x.V=a(_),x.V==null?(x.Ta=null,x.Ua=0,x.a=1,0):(x.Ta=x.V,x.Ua=x.Ba+D+S,1)}function zA(x,S){var D=x.C,_=S-D,q=x.V,ee=x.Ba+x.c*D;for(e(S<=x.l.o);0<_;){var ne=16<_?16:_,ae=x.l.ma,Ae=x.l.width,he=Ae*ne,Ce=ae.ca,$e=ae.tb+Ae*D,Ue=x.Ta,Fe=x.Ua;Ga(x,ne,q,ee),es(Ue,Fe,Ce,$e,he),Wa(ae,D,D+ne,Ce,$e,Ae),_-=ne,q+=ne*x.c,D+=ne}e(D==S),x.C=x.Ma=S}function oi(){this.ub=this.yd=this.td=this.Rb=0}function Ri(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Pu(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Ch(){this.Yb=function(){var x=[];return function S(D,_,q){for(var ee=q[_],ne=0;ne<ee&&(D.push(q.length>_+1?[]:0),!(q.length<_+1));ne++)S(D[ne],_+1,q)}(x,0,[3,11]),x}()}function ed(){this.jb=a(3),this.Wc=o([4,8],Ch),this.Xc=o([4,17],Ch)}function nm(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function jo(){this.ld=this.La=this.dd=this.tc=0}function jA(){this.Na=this.la=0}function $i(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function VA(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function td(){this.uc=this.M=this.Nb=0,this.wa=Array(new jo),this.Y=0,this.ya=Array(new VA),this.aa=0,this.l=new Hl}function Vo(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Bh(){this.cb=this.a=0,this.sc="",this.m=new ue,this.Od=new oi,this.Kc=new Ri,this.ed=new nm,this.Qa=new Pu,this.Ic=this.$c=this.Aa=0,this.D=new td,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,ue),this.ia=0,this.pb=i(4,$i),this.Pa=new ed,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Vo),this.Hd=0,this.rb=Array(new jA),this.sb=0,this.wa=Array(new jo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new VA),this.L=this.aa=0,this.gd=o([4,2],jo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Hl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function sm(){var x=new Bh;return x!=null&&(x.a=0,x.sc="OK",x.cb=0,x.Xb=0,rr||(rr=nd)),x}function Ss(x,S,D){return x.a==0&&(x.a=S,x.sc=D,x.cb=0),0}function ia(x,S,D){return 3<=D&&x[S+0]==157&&x[S+1]==1&&x[S+2]==42}function Sh(x,S){if(x==null)return 0;if(x.a=0,x.sc="OK",S==null)return Ss(x,2,"null VP8Io passed to VP8GetHeaders()");var D=S.data,_=S.w,q=S.ha;if(4>q)return Ss(x,7,"Truncated header.");var ee=D[_+0]|D[_+1]<<8|D[_+2]<<16,ne=x.Od;if(ne.Rb=!(1&ee),ne.td=ee>>1&7,ne.yd=ee>>4&1,ne.ub=ee>>5,3<ne.td)return Ss(x,3,"Incorrect keyframe parameters.");if(!ne.yd)return Ss(x,4,"Frame not displayable.");_+=3,q-=3;var ae=x.Kc;if(ne.Rb){if(7>q)return Ss(x,7,"cannot parse picture header");if(!ia(D,_,q))return Ss(x,3,"Bad code word");ae.c=16383&(D[_+4]<<8|D[_+3]),ae.Td=D[_+4]>>6,ae.i=16383&(D[_+6]<<8|D[_+5]),ae.Ud=D[_+6]>>6,_+=7,q-=7,x.za=ae.c+15>>4,x.Ub=ae.i+15>>4,S.width=ae.c,S.height=ae.i,S.Da=0,S.j=0,S.v=0,S.va=S.width,S.o=S.height,S.da=0,S.ib=S.width,S.hb=S.height,S.U=S.width,S.T=S.height,r((ee=x.Pa).jb,0,255,ee.jb.length),e((ee=x.Qa)!=null),ee.Cb=0,ee.Bb=0,ee.Fb=1,r(ee.Zb,0,0,ee.Zb.length),r(ee.Lb,0,0,ee.Lb)}if(ne.ub>q)return Ss(x,7,"bad partition length");re(ee=x.m,D,_,ne.ub),_+=ne.ub,q-=ne.ub,ne.Rb&&(ae.Ld=ye(ee),ae.Kd=ye(ee)),ae=x.Qa;var Ae,he=x.Pa;if(e(ee!=null),e(ae!=null),ae.Cb=ye(ee),ae.Cb){if(ae.Bb=ye(ee),ye(ee)){for(ae.Fb=ye(ee),Ae=0;4>Ae;++Ae)ae.Zb[Ae]=ye(ee)?Y(ee,7):0;for(Ae=0;4>Ae;++Ae)ae.Lb[Ae]=ye(ee)?Y(ee,6):0}if(ae.Bb)for(Ae=0;3>Ae;++Ae)he.jb[Ae]=ye(ee)?P(ee,8):255}else ae.Bb=0;if(ee.Ka)return Ss(x,3,"cannot parse segment header");if((ae=x.ed).zd=ye(ee),ae.Tb=P(ee,6),ae.wb=P(ee,3),ae.Pc=ye(ee),ae.Pc&&ye(ee)){for(he=0;4>he;++he)ye(ee)&&(ae.vd[he]=Y(ee,6));for(he=0;4>he;++he)ye(ee)&&(ae.od[he]=Y(ee,6))}if(x.L=ae.Tb==0?0:ae.zd?1:2,ee.Ka)return Ss(x,3,"cannot parse filter header");var Ce=q;if(q=Ae=_,_=Ae+Ce,ae=Ce,x.Xb=(1<<P(x.m,2))-1,Ce<3*(he=x.Xb))D=7;else{for(Ae+=3*he,ae-=3*he,Ce=0;Ce<he;++Ce){var $e=D[q+0]|D[q+1]<<8|D[q+2]<<16;$e>ae&&($e=ae),re(x.Jc[+Ce],D,Ae,$e),Ae+=$e,ae-=$e,q+=3}re(x.Jc[+he],D,Ae,ae),D=Ae<_?0:5}if(D!=0)return Ss(x,D,"cannot parse partitions");for(D=P(Ae=x.m,7),q=ye(Ae)?Y(Ae,4):0,_=ye(Ae)?Y(Ae,4):0,ae=ye(Ae)?Y(Ae,4):0,he=ye(Ae)?Y(Ae,4):0,Ae=ye(Ae)?Y(Ae,4):0,Ce=x.Qa,$e=0;4>$e;++$e){if(Ce.Cb){var Ue=Ce.Zb[$e];Ce.Fb||(Ue+=D)}else{if(0<$e){x.pb[$e]=x.pb[0];continue}Ue=D}var Fe=x.pb[$e];Fe.Sc[0]=Ph[Ya(Ue+q,127)],Fe.Sc[1]=zh[Ya(Ue+0,127)],Fe.Eb[0]=2*Ph[Ya(Ue+_,127)],Fe.Eb[1]=101581*zh[Ya(Ue+ae,127)]>>16,8>Fe.Eb[1]&&(Fe.Eb[1]=8),Fe.Qc[0]=Ph[Ya(Ue+he,117)],Fe.Qc[1]=zh[Ya(Ue+Ae,127)],Fe.lc=Ue+Ae}if(!ne.Rb)return Ss(x,4,"Not a key frame.");for(ye(ee),ne=x.Pa,D=0;4>D;++D){for(q=0;8>q;++q)for(_=0;3>_;++_)for(ae=0;11>ae;++ae)he=xe(ee,iu[D][q][_][ae])?P(ee,8):fo[D][q][_][ae],ne.Wc[D][q].Yb[_][ae]=he;for(q=0;17>q;++q)ne.Xc[D][q]=ne.Wc[D][C1[q]]}return x.kc=ye(ee),x.kc&&(x.Bd=P(ee,8)),x.cb=1}function nd(x,S,D,_,q,ee,ne){var ae=S[q].Yb[D];for(D=0;16>q;++q){if(!xe(x,ae[D+0]))return q;for(;!xe(x,ae[D+1]);)if(ae=S[++q].Yb[0],D=0,q==16)return 16;var Ae=S[q+1].Yb;if(xe(x,ae[D+2])){var he=x,Ce=0;if(xe(he,(Ue=ae)[($e=D)+3]))if(xe(he,Ue[$e+6])){for(ae=0,$e=2*(Ce=xe(he,Ue[$e+8]))+(Ue=xe(he,Ue[$e+9+Ce])),Ce=0,Ue=Es[$e];Ue[ae];++ae)Ce+=Ce+xe(he,Ue[ae]);Ce+=3+(8<<$e)}else xe(he,Ue[$e+7])?(Ce=7+2*xe(he,165),Ce+=xe(he,145)):Ce=5+xe(he,159);else Ce=xe(he,Ue[$e+4])?3+xe(he,Ue[$e+5]):2;ae=Ae[2]}else Ce=1,ae=Ae[1];Ae=ne+$n[q],0>(he=x).b&&pe(he);var $e,Ue=he.b,Fe=($e=he.Ca>>1)-(he.I>>Ue)>>31;--he.b,he.Ca+=Fe,he.Ca|=1,he.I-=($e+1&Fe)<<Ue,ee[Ae]=((Ce^Fe)-Fe)*_[(0<q)+0]}return 16}function Pl(x){var S=x.rb[x.sb-1];S.la=0,S.Na=0,r(x.zc,0,0,x.zc.length),x.ja=0}function sd(x,S){if(x==null)return 0;if(S==null)return Ss(x,2,"NULL VP8Io parameter in VP8Decode().");if(!x.cb&&!Sh(x,S))return 0;if(e(x.cb),S.ac==null||S.ac(S)){S.ob&&(x.L=0);var D=ll[x.L];if(x.L==2?(x.yb=0,x.zb=0):(x.yb=S.v-D>>4,x.zb=S.j-D>>4,0>x.yb&&(x.yb=0),0>x.zb&&(x.zb=0)),x.Va=S.o+15+D>>4,x.Hb=S.va+15+D>>4,x.Hb>x.za&&(x.Hb=x.za),x.Va>x.Ub&&(x.Va=x.Ub),0<x.L){var _=x.ed;for(D=0;4>D;++D){var q;if(x.Qa.Cb){var ee=x.Qa.Lb[D];x.Qa.Fb||(ee+=_.Tb)}else ee=_.Tb;for(q=0;1>=q;++q){var ne=x.gd[D][q],ae=ee;if(_.Pc&&(ae+=_.vd[0],q&&(ae+=_.od[0])),0<(ae=0>ae?0:63<ae?63:ae)){var Ae=ae;0<_.wb&&(Ae=4<_.wb?Ae>>2:Ae>>1)>9-_.wb&&(Ae=9-_.wb),1>Ae&&(Ae=1),ne.dd=Ae,ne.tc=2*ae+Ae,ne.ld=40<=ae?2:15<=ae?1:0}else ne.tc=0;ne.La=q}}}D=0}else Ss(x,6,"Frame setup failed"),D=x.a;if(D=D==0){if(D){x.$c=0,0<x.Aa||(x.Ic=N1);e:{D=x.Ic,_=4*(Ae=x.za);var he=32*Ae,Ce=Ae+1,$e=0<x.L?Ae*(0<x.Aa?2:1):0,Ue=(x.Aa==2?2:1)*Ae;if((ne=_+832+(q=3*(16*D+ll[x.L])/2*he)+(ee=x.Fa!=null&&0<x.Fa.length?x.Kc.c*x.Kc.i:0))!=ne)D=0;else{if(ne>x.Vb){if(x.Vb=0,x.Ec=a(ne),x.Fc=0,x.Ec==null){D=Ss(x,1,"no memory during frame initialization.");break e}x.Vb=ne}ne=x.Ec,ae=x.Fc,x.Ac=ne,x.Bc=ae,ae+=_,x.Gd=i(he,Vo),x.Hd=0,x.rb=i(Ce+1,jA),x.sb=1,x.wa=$e?i($e,jo):null,x.Y=0,x.D.Nb=0,x.D.wa=x.wa,x.D.Y=x.Y,0<x.Aa&&(x.D.Y+=Ae),e(!0),x.oc=ne,x.pc=ae,ae+=832,x.ya=i(Ue,VA),x.aa=0,x.D.ya=x.ya,x.D.aa=x.aa,x.Aa==2&&(x.D.aa+=Ae),x.R=16*Ae,x.B=8*Ae,Ae=(he=ll[x.L])*x.R,he=he/2*x.B,x.sa=ne,x.ta=ae+Ae,x.qa=x.sa,x.ra=x.ta+16*D*x.R+he,x.Ha=x.qa,x.Ia=x.ra+8*D*x.B+he,x.$c=0,ae+=q,x.mb=ee?ne:null,x.nb=ee?ae:null,e(ae+ee<=x.Fc+x.Vb),Pl(x),r(x.Ac,x.Bc,0,_),D=1}}if(D){if(S.ka=0,S.y=x.sa,S.O=x.ta,S.f=x.qa,S.N=x.ra,S.ea=x.Ha,S.Vd=x.Ia,S.fa=x.R,S.Rc=x.B,S.F=null,S.J=0,!tl){for(D=-255;255>=D;++D)Os[255+D]=0>D?-D:D;for(D=-1020;1020>=D;++D)ci[1020+D]=-128>D?-128:127<D?127:D;for(D=-112;112>=D;++D)aA[112+D]=-16>D?-16:15<D?15:D;for(D=-255;510>=D;++D)iA[255+D]=0>D?0:255<D?255:D;tl=1}uo=zl,Hi=Ih,Pi=Go,Vs=rd,Sa=Eh,Ns=Nh,ZA=KA,co=WA,ac=im,tA=Lh,nA=am,sA=Xu,eu=Yu,ic=ud,rA=Kl,el=Xa,tu=Ao,Is=rm,la[0]=va,la[1]=ad,la[2]=Th,la[3]=od,la[4]=li,la[5]=io,la[6]=Gu,la[7]=Ai,la[8]=Ku,la[9]=Dh,il[0]=Vu,il[1]=Fh,il[2]=Ko,il[3]=ju,il[4]=mr,il[5]=jl,il[6]=qo,ei[0]=Xo,ei[1]=id,ei[2]=ld,ei[3]=Vl,ei[4]=qa,ei[5]=Vr,ei[6]=Gl,D=1}else D=0}D&&(D=function(Fe,Ze){for(Fe.M=0;Fe.M<Fe.Va;++Fe.M){var Ve,Se=Fe.Jc[Fe.M&Fe.Xb],ke=Fe.m,qe=Fe;for(Ve=0;Ve<qe.za;++Ve){var et=ke,Ye=qe,wt=Ye.Ac,ht=Ye.Bc+4*Ve,$t=Ye.zc,ft=Ye.ya[Ye.aa+Ve];if(Ye.Qa.Bb?ft.$b=xe(et,Ye.Pa.jb[0])?2+xe(et,Ye.Pa.jb[2]):xe(et,Ye.Pa.jb[1]):ft.$b=0,Ye.kc&&(ft.Ad=xe(et,Ye.Bd)),ft.Za=!xe(et,145)+0,ft.Za){var Tn=ft.Ob,On=0;for(Ye=0;4>Ye;++Ye){var fn,cn=$t[0+Ye];for(fn=0;4>fn;++fn){cn=Am[wt[ht+fn]][cn];for(var Pn=lA[xe(et,cn[0])];0<Pn;)Pn=lA[2*Pn+xe(et,cn[Pn])];cn=-Pn,wt[ht+fn]=cn}s(Tn,On,wt,ht,4),On+=4,$t[0+Ye]=cn}}else cn=xe(et,156)?xe(et,128)?1:3:xe(et,163)?2:0,ft.Ob[0]=cn,r(wt,ht,cn,4),r($t,0,cn,4);ft.Dd=xe(et,142)?xe(et,114)?xe(et,183)?1:3:2:0}if(qe.m.Ka)return Ss(Fe,7,"Premature end-of-partition0 encountered.");for(;Fe.ja<Fe.za;++Fe.ja){if(qe=Se,et=(ke=Fe).rb[ke.sb-1],wt=ke.rb[ke.sb+ke.ja],Ve=ke.ya[ke.aa+ke.ja],ht=ke.kc?Ve.Ad:0)et.la=wt.la=0,Ve.Za||(et.Na=wt.Na=0),Ve.Hc=0,Ve.Gc=0,Ve.ia=0;else{var Qn,tn;if(et=wt,wt=qe,ht=ke.Pa.Xc,$t=ke.ya[ke.aa+ke.ja],ft=ke.pb[$t.$b],Ye=$t.ad,Tn=0,On=ke.rb[ke.sb-1],cn=fn=0,r(Ye,Tn,0,384),$t.Za)var Wn=0,Mt=ht[3];else{Pn=a(16);var Wt=et.Na+On.Na;if(Wt=rr(wt,ht[1],Wt,ft.Eb,0,Pn,0),et.Na=On.Na=(0<Wt)+0,1<Wt)uo(Pn,0,Ye,Tn);else{var kn=Pn[0]+3>>3;for(Pn=0;256>Pn;Pn+=16)Ye[Tn+Pn]=kn}Wn=1,Mt=ht[0]}var Dn=15&et.la,xr=15&On.la;for(Pn=0;4>Pn;++Pn){var or=1&xr;for(kn=tn=0;4>kn;++kn)Dn=Dn>>1|(or=(Wt=rr(wt,Mt,Wt=or+(1&Dn),ft.Sc,Wn,Ye,Tn))>Wn)<<7,tn=tn<<2|(3<Wt?3:1<Wt?2:Ye[Tn+0]!=0),Tn+=16;Dn>>=4,xr=xr>>1|or<<7,fn=(fn<<8|tn)>>>0}for(Mt=Dn,Wn=xr>>4,Qn=0;4>Qn;Qn+=2){for(tn=0,Dn=et.la>>4+Qn,xr=On.la>>4+Qn,Pn=0;2>Pn;++Pn){for(or=1&xr,kn=0;2>kn;++kn)Wt=or+(1&Dn),Dn=Dn>>1|(or=0<(Wt=rr(wt,ht[2],Wt,ft.Qc,0,Ye,Tn)))<<3,tn=tn<<2|(3<Wt?3:1<Wt?2:Ye[Tn+0]!=0),Tn+=16;Dn>>=2,xr=xr>>1|or<<5}cn|=tn<<4*Qn,Mt|=Dn<<4<<Qn,Wn|=(240&xr)<<Qn}et.la=Mt,On.la=Wn,$t.Hc=fn,$t.Gc=cn,$t.ia=43690&cn?0:ft.ia,ht=!(fn|cn)}if(0<ke.L&&(ke.wa[ke.Y+ke.ja]=ke.gd[Ve.$b][Ve.Za],ke.wa[ke.Y+ke.ja].La|=!ht),qe.Ka)return Ss(Fe,7,"Premature end-of-file encountered.")}if(Pl(Fe),ke=Ze,qe=1,Ve=(Se=Fe).D,et=0<Se.L&&Se.M>=Se.zb&&Se.M<=Se.Va,Se.Aa==0)e:{if(Ve.M=Se.M,Ve.uc=et,Jo(Se,Ve),qe=1,Ve=(tn=Se.D).Nb,et=(cn=ll[Se.L])*Se.R,wt=cn/2*Se.B,Pn=16*Ve*Se.R,kn=8*Ve*Se.B,ht=Se.sa,$t=Se.ta-et+Pn,ft=Se.qa,Ye=Se.ra-wt+kn,Tn=Se.Ha,On=Se.Ia-wt+kn,xr=(Dn=tn.M)==0,fn=Dn>=Se.Va-1,Se.Aa==2&&Jo(Se,tn),tn.uc)for(or=(Wt=Se).D.M,e(Wt.D.uc),tn=Wt.yb;tn<Wt.Hb;++tn){Wn=tn,Mt=or;var Qs=(Ms=(hs=Wt).D).Nb;Qn=hs.R;var Ms=Ms.wa[Ms.Y+Wn],Gs=hs.sa,di=hs.ta+16*Qs*Qn+16*Wn,Mn=Ms.dd,Ks=Ms.tc;if(Ks!=0)if(e(3<=Ks),hs.L==1)0<Wn&&el(Gs,di,Qn,Ks+4),Ms.La&&Is(Gs,di,Qn,Ks),0<Mt&&rA(Gs,di,Qn,Ks+4),Ms.La&&tu(Gs,di,Qn,Ks);else{var zi=hs.B,cA=hs.qa,lu=hs.ra+8*Qs*zi+8*Wn,hA=hs.Ha,hs=hs.Ia+8*Qs*zi+8*Wn;Qs=Ms.ld,0<Wn&&(co(Gs,di,Qn,Ks+4,Mn,Qs),tA(cA,lu,hA,hs,zi,Ks+4,Mn,Qs)),Ms.La&&(sA(Gs,di,Qn,Ks,Mn,Qs),ic(cA,lu,hA,hs,zi,Ks,Mn,Qs)),0<Mt&&(ZA(Gs,di,Qn,Ks+4,Mn,Qs),ac(cA,lu,hA,hs,zi,Ks+4,Mn,Qs)),Ms.La&&(nA(Gs,di,Qn,Ks,Mn,Qs),eu(cA,lu,hA,hs,zi,Ks,Mn,Qs))}}if(Se.ia&&alert("todo:DitherRow"),ke.put!=null){if(tn=16*Dn,Dn=16*(Dn+1),xr?(ke.y=Se.sa,ke.O=Se.ta+Pn,ke.f=Se.qa,ke.N=Se.ra+kn,ke.ea=Se.Ha,ke.W=Se.Ia+kn):(tn-=cn,ke.y=ht,ke.O=$t,ke.f=ft,ke.N=Ye,ke.ea=Tn,ke.W=On),fn||(Dn-=cn),Dn>ke.o&&(Dn=ke.o),ke.F=null,ke.J=null,Se.Fa!=null&&0<Se.Fa.length&&tn<Dn&&(ke.J=$h(Se,ke,tn,Dn-tn),ke.F=Se.mb,ke.F==null&&ke.F.length==0)){qe=Ss(Se,3,"Could not decode alpha data.");break e}tn<ke.j&&(cn=ke.j-tn,tn=ke.j,e(!(1&cn)),ke.O+=Se.R*cn,ke.N+=Se.B*(cn>>1),ke.W+=Se.B*(cn>>1),ke.F!=null&&(ke.J+=ke.width*cn)),tn<Dn&&(ke.O+=ke.v,ke.N+=ke.v>>1,ke.W+=ke.v>>1,ke.F!=null&&(ke.J+=ke.v),ke.ka=tn-ke.j,ke.U=ke.va-ke.v,ke.T=Dn-tn,qe=ke.put(ke))}Ve+1!=Se.Ic||fn||(s(Se.sa,Se.ta-et,ht,$t+16*Se.R,et),s(Se.qa,Se.ra-wt,ft,Ye+8*Se.B,wt),s(Se.Ha,Se.Ia-wt,Tn,On+8*Se.B,wt))}if(!qe)return Ss(Fe,6,"Output aborted.")}return 1}(x,S)),S.bc!=null&&S.bc(S),D&=1}return D?(x.cb=0,D):0}function xa(x,S,D,_,q){q=x[S+D+32*_]+(q>>3),x[S+D+32*_]=-256&q?0>q?0:255:q}function zu(x,S,D,_,q,ee){xa(x,S,0,D,_+q),xa(x,S,1,D,_+ee),xa(x,S,2,D,_-ee),xa(x,S,3,D,_-q)}function is(x){return(20091*x>>16)+x}function GA(x,S,D,_){var q,ee=0,ne=a(16);for(q=0;4>q;++q){var ae=x[S+0]+x[S+8],Ae=x[S+0]-x[S+8],he=(35468*x[S+4]>>16)-is(x[S+12]),Ce=is(x[S+4])+(35468*x[S+12]>>16);ne[ee+0]=ae+Ce,ne[ee+1]=Ae+he,ne[ee+2]=Ae-he,ne[ee+3]=ae-Ce,ee+=4,S++}for(q=ee=0;4>q;++q)ae=(x=ne[ee+0]+4)+ne[ee+8],Ae=x-ne[ee+8],he=(35468*ne[ee+4]>>16)-is(ne[ee+12]),xa(D,_,0,0,ae+(Ce=is(ne[ee+4])+(35468*ne[ee+12]>>16))),xa(D,_,1,0,Ae+he),xa(D,_,2,0,Ae-he),xa(D,_,3,0,ae-Ce),ee++,_+=32}function Nh(x,S,D,_){var q=x[S+0]+4,ee=35468*x[S+4]>>16,ne=is(x[S+4]),ae=35468*x[S+1]>>16;zu(D,_,0,q+ne,x=is(x[S+1]),ae),zu(D,_,1,q+ee,x,ae),zu(D,_,2,q-ee,x,ae),zu(D,_,3,q-ne,x,ae)}function Ih(x,S,D,_,q){GA(x,S,D,_),q&&GA(x,S+16,D,_+4)}function Go(x,S,D,_){Hi(x,S+0,D,_,1),Hi(x,S+32,D,_+128,1)}function rd(x,S,D,_){var q;for(x=x[S+0]+4,q=0;4>q;++q)for(S=0;4>S;++S)xa(D,_,S,q,x)}function Eh(x,S,D,_){x[S+0]&&Vs(x,S+0,D,_),x[S+16]&&Vs(x,S+16,D,_+4),x[S+32]&&Vs(x,S+32,D,_+128),x[S+48]&&Vs(x,S+48,D,_+128+4)}function zl(x,S,D,_){var q,ee=a(16);for(q=0;4>q;++q){var ne=x[S+0+q]+x[S+12+q],ae=x[S+4+q]+x[S+8+q],Ae=x[S+4+q]-x[S+8+q],he=x[S+0+q]-x[S+12+q];ee[0+q]=ne+ae,ee[8+q]=ne-ae,ee[4+q]=he+Ae,ee[12+q]=he-Ae}for(q=0;4>q;++q)ne=(x=ee[0+4*q]+3)+ee[3+4*q],ae=ee[1+4*q]+ee[2+4*q],Ae=ee[1+4*q]-ee[2+4*q],he=x-ee[3+4*q],D[_+0]=ne+ae>>3,D[_+16]=he+Ae>>3,D[_+32]=ne-ae>>3,D[_+48]=he-Ae>>3,_+=64}function kh(x,S,D){var _,q=S-32,ee=wr,ne=255-x[q-1];for(_=0;_<D;++_){var ae,Ae=ee,he=ne+x[S-1];for(ae=0;ae<D;++ae)x[S+ae]=Ae[he+x[q+ae]];S+=32}}function ad(x,S){kh(x,S,4)}function id(x,S){kh(x,S,8)}function Fh(x,S){kh(x,S,16)}function Ko(x,S){var D;for(D=0;16>D;++D)s(x,S+32*D,x,S-32,16)}function ju(x,S){var D;for(D=16;0<D;--D)r(x,S,x[S-1],16),S+=32}function Wo(x,S,D){var _;for(_=0;16>_;++_)r(S,D+32*_,x,16)}function Vu(x,S){var D,_=16;for(D=0;16>D;++D)_+=x[S-1+32*D]+x[S+D-32];Wo(_>>5,x,S)}function mr(x,S){var D,_=8;for(D=0;16>D;++D)_+=x[S-1+32*D];Wo(_>>4,x,S)}function jl(x,S){var D,_=8;for(D=0;16>D;++D)_+=x[S+D-32];Wo(_>>4,x,S)}function qo(x,S){Wo(128,x,S)}function Xt(x,S,D){return x+2*S+D+2>>2}function Th(x,S){var D,_=S-32;for(_=new Uint8Array([Xt(x[_-1],x[_+0],x[_+1]),Xt(x[_+0],x[_+1],x[_+2]),Xt(x[_+1],x[_+2],x[_+3]),Xt(x[_+2],x[_+3],x[_+4])]),D=0;4>D;++D)s(x,S+32*D,_,0,_.length)}function od(x,S){var D=x[S-1],_=x[S-1+32],q=x[S-1+64],ee=x[S-1+96];Me(x,S+0,16843009*Xt(x[S-1-32],D,_)),Me(x,S+32,16843009*Xt(D,_,q)),Me(x,S+64,16843009*Xt(_,q,ee)),Me(x,S+96,16843009*Xt(q,ee,ee))}function va(x,S){var D,_=4;for(D=0;4>D;++D)_+=x[S+D-32]+x[S-1+32*D];for(_>>=3,D=0;4>D;++D)r(x,S+32*D,_,4)}function li(x,S){var D=x[S-1+0],_=x[S-1+32],q=x[S-1+64],ee=x[S-1-32],ne=x[S+0-32],ae=x[S+1-32],Ae=x[S+2-32],he=x[S+3-32];x[S+0+96]=Xt(_,q,x[S-1+96]),x[S+1+96]=x[S+0+64]=Xt(D,_,q),x[S+2+96]=x[S+1+64]=x[S+0+32]=Xt(ee,D,_),x[S+3+96]=x[S+2+64]=x[S+1+32]=x[S+0+0]=Xt(ne,ee,D),x[S+3+64]=x[S+2+32]=x[S+1+0]=Xt(ae,ne,ee),x[S+3+32]=x[S+2+0]=Xt(Ae,ae,ne),x[S+3+0]=Xt(he,Ae,ae)}function Gu(x,S){var D=x[S+1-32],_=x[S+2-32],q=x[S+3-32],ee=x[S+4-32],ne=x[S+5-32],ae=x[S+6-32],Ae=x[S+7-32];x[S+0+0]=Xt(x[S+0-32],D,_),x[S+1+0]=x[S+0+32]=Xt(D,_,q),x[S+2+0]=x[S+1+32]=x[S+0+64]=Xt(_,q,ee),x[S+3+0]=x[S+2+32]=x[S+1+64]=x[S+0+96]=Xt(q,ee,ne),x[S+3+32]=x[S+2+64]=x[S+1+96]=Xt(ee,ne,ae),x[S+3+64]=x[S+2+96]=Xt(ne,ae,Ae),x[S+3+96]=Xt(ae,Ae,Ae)}function io(x,S){var D=x[S-1+0],_=x[S-1+32],q=x[S-1+64],ee=x[S-1-32],ne=x[S+0-32],ae=x[S+1-32],Ae=x[S+2-32],he=x[S+3-32];x[S+0+0]=x[S+1+64]=ee+ne+1>>1,x[S+1+0]=x[S+2+64]=ne+ae+1>>1,x[S+2+0]=x[S+3+64]=ae+Ae+1>>1,x[S+3+0]=Ae+he+1>>1,x[S+0+96]=Xt(q,_,D),x[S+0+64]=Xt(_,D,ee),x[S+0+32]=x[S+1+96]=Xt(D,ee,ne),x[S+1+32]=x[S+2+96]=Xt(ee,ne,ae),x[S+2+32]=x[S+3+96]=Xt(ne,ae,Ae),x[S+3+32]=Xt(ae,Ae,he)}function Ai(x,S){var D=x[S+0-32],_=x[S+1-32],q=x[S+2-32],ee=x[S+3-32],ne=x[S+4-32],ae=x[S+5-32],Ae=x[S+6-32],he=x[S+7-32];x[S+0+0]=D+_+1>>1,x[S+1+0]=x[S+0+64]=_+q+1>>1,x[S+2+0]=x[S+1+64]=q+ee+1>>1,x[S+3+0]=x[S+2+64]=ee+ne+1>>1,x[S+0+32]=Xt(D,_,q),x[S+1+32]=x[S+0+96]=Xt(_,q,ee),x[S+2+32]=x[S+1+96]=Xt(q,ee,ne),x[S+3+32]=x[S+2+96]=Xt(ee,ne,ae),x[S+3+64]=Xt(ne,ae,Ae),x[S+3+96]=Xt(ae,Ae,he)}function Dh(x,S){var D=x[S-1+0],_=x[S-1+32],q=x[S-1+64],ee=x[S-1+96];x[S+0+0]=D+_+1>>1,x[S+2+0]=x[S+0+32]=_+q+1>>1,x[S+2+32]=x[S+0+64]=q+ee+1>>1,x[S+1+0]=Xt(D,_,q),x[S+3+0]=x[S+1+32]=Xt(_,q,ee),x[S+3+32]=x[S+1+64]=Xt(q,ee,ee),x[S+3+64]=x[S+2+64]=x[S+0+96]=x[S+1+96]=x[S+2+96]=x[S+3+96]=ee}function Ku(x,S){var D=x[S-1+0],_=x[S-1+32],q=x[S-1+64],ee=x[S-1+96],ne=x[S-1-32],ae=x[S+0-32],Ae=x[S+1-32],he=x[S+2-32];x[S+0+0]=x[S+2+32]=D+ne+1>>1,x[S+0+32]=x[S+2+64]=_+D+1>>1,x[S+0+64]=x[S+2+96]=q+_+1>>1,x[S+0+96]=ee+q+1>>1,x[S+3+0]=Xt(ae,Ae,he),x[S+2+0]=Xt(ne,ae,Ae),x[S+1+0]=x[S+3+32]=Xt(D,ne,ae),x[S+1+32]=x[S+3+64]=Xt(_,D,ne),x[S+1+64]=x[S+3+96]=Xt(q,_,D),x[S+1+96]=Xt(ee,q,_)}function ld(x,S){var D;for(D=0;8>D;++D)s(x,S+32*D,x,S-32,8)}function Vl(x,S){var D;for(D=0;8>D;++D)r(x,S,x[S-1],8),S+=32}function oo(x,S,D){var _;for(_=0;8>_;++_)r(S,D+32*_,x,8)}function Xo(x,S){var D,_=8;for(D=0;8>D;++D)_+=x[S+D-32]+x[S-1+32*D];oo(_>>4,x,S)}function Vr(x,S){var D,_=4;for(D=0;8>D;++D)_+=x[S+D-32];oo(_>>3,x,S)}function qa(x,S){var D,_=4;for(D=0;8>D;++D)_+=x[S-1+32*D];oo(_>>3,x,S)}function Gl(x,S){oo(128,x,S)}function lo(x,S,D){var _=x[S-D],q=x[S+0],ee=3*(q-_)+hd[1020+x[S-2*D]-x[S+D]],ne=nu[112+(ee+4>>3)];x[S-D]=wr[255+_+nu[112+(ee+3>>3)]],x[S+0]=wr[255+q-ne]}function Ad(x,S,D,_){var q=x[S+0],ee=x[S+D];return hi[255+x[S-2*D]-x[S-D]]>_||hi[255+ee-q]>_}function Wu(x,S,D,_){return 4*hi[255+x[S-D]-x[S+0]]+hi[255+x[S-2*D]-x[S+D]]<=_}function qu(x,S,D,_,q){var ee=x[S-3*D],ne=x[S-2*D],ae=x[S-D],Ae=x[S+0],he=x[S+D],Ce=x[S+2*D],$e=x[S+3*D];return 4*hi[255+ae-Ae]+hi[255+ne-he]>_?0:hi[255+x[S-4*D]-ee]<=q&&hi[255+ee-ne]<=q&&hi[255+ne-ae]<=q&&hi[255+$e-Ce]<=q&&hi[255+Ce-he]<=q&&hi[255+he-Ae]<=q}function Kl(x,S,D,_){var q=2*_+1;for(_=0;16>_;++_)Wu(x,S+_,D,q)&&lo(x,S+_,D)}function Xa(x,S,D,_){var q=2*_+1;for(_=0;16>_;++_)Wu(x,S+_*D,1,q)&&lo(x,S+_*D,1)}function Ao(x,S,D,_){var q;for(q=3;0<q;--q)Kl(x,S+=4*D,D,_)}function rm(x,S,D,_){var q;for(q=3;0<q;--q)Xa(x,S+=4,D,_)}function Wl(x,S,D,_,q,ee,ne,ae){for(ee=2*ee+1;0<q--;){if(qu(x,S,D,ee,ne))if(Ad(x,S,D,ae))lo(x,S,D);else{var Ae=x,he=S,Ce=D,$e=Ae[he-2*Ce],Ue=Ae[he-Ce],Fe=Ae[he+0],Ze=Ae[he+Ce],Ve=Ae[he+2*Ce],Se=27*(qe=hd[1020+3*(Fe-Ue)+hd[1020+$e-Ze]])+63>>7,ke=18*qe+63>>7,qe=9*qe+63>>7;Ae[he-3*Ce]=wr[255+Ae[he-3*Ce]+qe],Ae[he-2*Ce]=wr[255+$e+ke],Ae[he-Ce]=wr[255+Ue+Se],Ae[he+0]=wr[255+Fe-Se],Ae[he+Ce]=wr[255+Ze-ke],Ae[he+2*Ce]=wr[255+Ve-qe]}S+=_}}function _i(x,S,D,_,q,ee,ne,ae){for(ee=2*ee+1;0<q--;){if(qu(x,S,D,ee,ne))if(Ad(x,S,D,ae))lo(x,S,D);else{var Ae=x,he=S,Ce=D,$e=Ae[he-Ce],Ue=Ae[he+0],Fe=Ae[he+Ce],Ze=nu[112+((Ve=3*(Ue-$e))+4>>3)],Ve=nu[112+(Ve+3>>3)],Se=Ze+1>>1;Ae[he-2*Ce]=wr[255+Ae[he-2*Ce]+Se],Ae[he-Ce]=wr[255+$e+Ve],Ae[he+0]=wr[255+Ue-Ze],Ae[he+Ce]=wr[255+Fe-Se]}S+=_}}function KA(x,S,D,_,q,ee){Wl(x,S,D,1,16,_,q,ee)}function WA(x,S,D,_,q,ee){Wl(x,S,1,D,16,_,q,ee)}function am(x,S,D,_,q,ee){var ne;for(ne=3;0<ne;--ne)_i(x,S+=4*D,D,1,16,_,q,ee)}function Xu(x,S,D,_,q,ee){var ne;for(ne=3;0<ne;--ne)_i(x,S+=4,1,D,16,_,q,ee)}function im(x,S,D,_,q,ee,ne,ae){Wl(x,S,q,1,8,ee,ne,ae),Wl(D,_,q,1,8,ee,ne,ae)}function Lh(x,S,D,_,q,ee,ne,ae){Wl(x,S,1,q,8,ee,ne,ae),Wl(D,_,1,q,8,ee,ne,ae)}function Yu(x,S,D,_,q,ee,ne,ae){_i(x,S+4*q,q,1,8,ee,ne,ae),_i(D,_+4*q,q,1,8,ee,ne,ae)}function ud(x,S,D,_,q,ee,ne,ae){_i(x,S+4,1,q,8,ee,ne,ae),_i(D,_+4,1,q,8,ee,ne,ae)}function Ju(){this.ba=new ja,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Bs,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Uh(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Rh(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Zu(){this.ua=0,this.Wa=new fe,this.vb=new fe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new K,this.yc=new R}function om(){this.xb=this.a=0,this.l=new Hl,this.ca=new ja,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Q,this.Pb=0,this.wd=new Q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Zu,this.ab=0,this.gc=i(4,Rh),this.Oc=0}function ec(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Hl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function qA(x,S,D,_,q,ee,ne){for(x=x==null?0:x[S+0],S=0;S<ne;++S)q[ee+S]=x+D[_+S]&255,x=q[ee+S]}function tc(x,S,D,_,q,ee,ne){var ae;if(x==null)qA(null,null,D,_,q,ee,ne);else for(ae=0;ae<ne;++ae)q[ee+ae]=x[S+ae]+D[_+ae]&255}function ql(x,S,D,_,q,ee,ne){if(x==null)qA(null,null,D,_,q,ee,ne);else{var ae,Ae=x[S+0],he=Ae,Ce=Ae;for(ae=0;ae<ne;++ae)he=Ce+(Ae=x[S+ae])-he,Ce=D[_+ae]+(-256&he?0>he?0:255:he)&255,he=Ae,q[ee+ae]=Ce}}function $h(x,S,D,_){var q=S.width,ee=S.o;if(e(x!=null&&S!=null),0>D||0>=_||D+_>ee)return null;if(!x.Cc){if(x.ga==null){var ne;if(x.ga=new ec,(ne=x.ga==null)||(ne=S.width*S.o,e(x.Gb.length==0),x.Gb=a(ne),x.Uc=0,x.Gb==null?ne=0:(x.mb=x.Gb,x.nb=x.Uc,x.rc=null,ne=1),ne=!ne),!ne){ne=x.ga;var ae=x.Fa,Ae=x.P,he=x.qc,Ce=x.mb,$e=x.nb,Ue=Ae+1,Fe=he-1,Ze=ne.l;if(e(ae!=null&&Ce!=null&&S!=null),po[0]=null,po[1]=qA,po[2]=tc,po[3]=ql,ne.ca=Ce,ne.tb=$e,ne.c=S.width,ne.i=S.height,e(0<ne.c&&0<ne.i),1>=he)S=0;else if(ne.$a=ae[Ae+0]>>0&3,ne.Z=ae[Ae+0]>>2&3,ne.Lc=ae[Ae+0]>>4&3,Ae=ae[Ae+0]>>6&3,0>ne.$a||1<ne.$a||4<=ne.Z||1<ne.Lc||Ae)S=0;else if(Ze.put=Ui,Ze.ac=tr,Ze.bc=ao,Ze.ma=ne,Ze.width=S.width,Ze.height=S.height,Ze.Da=S.Da,Ze.v=S.v,Ze.va=S.va,Ze.j=S.j,Ze.o=S.o,ne.$a)e:{e(ne.$a==1),S=Dr();t:for(;;){if(S==null){S=0;break e}if(e(ne!=null),ne.mc=S,S.c=ne.c,S.i=ne.i,S.l=ne.l,S.l.ma=ne,S.l.width=ne.c,S.l.height=ne.i,S.a=0,J(S.m,ae,Ue,Fe),!Kn(ne.c,ne.i,1,S,null)||(S.ab==1&&S.gc[0].hc==3&&Ka(S.s)?(ne.ic=1,ae=S.c*S.i,S.Ta=null,S.Ua=0,S.V=a(ae),S.Ba=0,S.V==null?(S.a=1,S=0):S=1):(ne.ic=0,S=Ml(S,ne.c)),!S))break t;S=1;break e}ne.mc=null,S=0}else S=Fe>=ne.c*ne.i;ne=!S}if(ne)return null;x.ga.Lc!=1?x.Ga=0:_=ee-D}e(x.ga!=null),e(D+_<=ee);e:{if(S=(ae=x.ga).c,ee=ae.l.o,ae.$a==0){if(Ue=x.rc,Fe=x.Vc,Ze=x.Fa,Ae=x.P+1+D*S,he=x.mb,Ce=x.nb+D*S,e(Ae<=x.P+x.qc),ae.Z!=0)for(e(po[ae.Z]!=null),ne=0;ne<_;++ne)po[ae.Z](Ue,Fe,Ze,Ae,he,Ce,S),Ue=he,Fe=Ce,Ce+=S,Ae+=S;else for(ne=0;ne<_;++ne)s(he,Ce,Ze,Ae,S),Ue=he,Fe=Ce,Ce+=S,Ae+=S;x.rc=Ue,x.Vc=Fe}else{if(e(ae.mc!=null),S=D+_,e((ne=ae.mc)!=null),e(S<=ne.i),ne.C>=S)S=1;else if(ae.ic||Le(),ae.ic){ae=ne.V,Ue=ne.Ba,Fe=ne.c;var Ve=ne.i,Se=(Ze=1,Ae=ne.$/Fe,he=ne.$%Fe,Ce=ne.m,$e=ne.s,ne.$),ke=Fe*Ve,qe=Fe*S,et=$e.wc,Ye=Se<qe?js($e,he,Ae):null;e(Se<=ke),e(S<=Ve),e(Ka($e));t:for(;;){for(;!Ce.h&&Se<qe;){if(he&et||(Ye=js($e,he,Ae)),e(Ye!=null),ce(Ce),256>(Ve=nr(Ye.G[0],Ye.H[0],Ce)))ae[Ue+Se]=Ve,++Se,++he>=Fe&&(he=0,++Ae<=S&&!(Ae%16)&&zr(ne,Ae));else{if(!(280>Ve)){Ze=0;break t}Ve=Zn(Ve-256,Ce);var wt,ht=nr(Ye.G[4],Ye.H[4],Ce);if(ce(Ce),!(Se>=(ht=ys(Fe,ht=Zn(ht,Ce)))&&ke-Se>=Ve)){Ze=0;break t}for(wt=0;wt<Ve;++wt)ae[Ue+Se+wt]=ae[Ue+Se+wt-ht];for(Se+=Ve,he+=Ve;he>=Fe;)he-=Fe,++Ae<=S&&!(Ae%16)&&zr(ne,Ae);Se<qe&&he&et&&(Ye=js($e,he,Ae))}e(Ce.h==Z(Ce))}zr(ne,Ae>S?S:Ae);break t}!Ze||Ce.h&&Se<ke?(Ze=0,ne.a=Ce.h?5:3):ne.$=Se,S=Ze}else S=jr(ne,ne.V,ne.Ba,ne.c,ne.i,S,zA);if(!S){_=0;break e}}D+_>=ee&&(x.Cc=1),_=1}if(!_)return null;if(x.Cc&&((_=x.ga)!=null&&(_.mc=null),x.ga=null,0<x.Ga))return alert("todo:WebPDequantizeLevels"),null}return x.nb+D*q}function k(x,S,D,_,q,ee){for(;0<q--;){var ne,ae=x,Ae=S+(D?1:0),he=x,Ce=S+(D?0:3);for(ne=0;ne<_;++ne){var $e=he[Ce+4*ne];$e!=255&&($e*=32897,ae[Ae+4*ne+0]=ae[Ae+4*ne+0]*$e>>23,ae[Ae+4*ne+1]=ae[Ae+4*ne+1]*$e>>23,ae[Ae+4*ne+2]=ae[Ae+4*ne+2]*$e>>23)}S+=ee}}function X(x,S,D,_,q){for(;0<_--;){var ee;for(ee=0;ee<D;++ee){var ne=x[S+2*ee+0],ae=15&(he=x[S+2*ee+1]),Ae=4369*ae,he=(240&he|he>>4)*Ae>>16;x[S+2*ee+0]=(240&ne|ne>>4)*Ae>>16&240|(15&ne|ne<<4)*Ae>>16>>4&15,x[S+2*ee+1]=240&he|ae}S+=q}}function de(x,S,D,_,q,ee,ne,ae){var Ae,he,Ce=255;for(he=0;he<q;++he){for(Ae=0;Ae<_;++Ae){var $e=x[S+Ae];ee[ne+4*Ae]=$e,Ce&=$e}S+=D,ne+=ae}return Ce!=255}function ve(x,S,D,_,q){var ee;for(ee=0;ee<q;++ee)D[_+ee]=x[S+ee]>>8}function Le(){Ja=k,mn=X,gn=de,es=ve}function Ke(x,S,D){U[x]=function(_,q,ee,ne,ae,Ae,he,Ce,$e,Ue,Fe,Ze,Ve,Se,ke,qe,et){var Ye,wt=et-1>>1,ht=ae[Ae+0]|he[Ce+0]<<16,$t=$e[Ue+0]|Fe[Ze+0]<<16;e(_!=null);var ft=3*ht+$t+131074>>2;for(S(_[q+0],255&ft,ft>>16,Ve,Se),ee!=null&&(ft=3*$t+ht+131074>>2,S(ee[ne+0],255&ft,ft>>16,ke,qe)),Ye=1;Ye<=wt;++Ye){var Tn=ae[Ae+Ye]|he[Ce+Ye]<<16,On=$e[Ue+Ye]|Fe[Ze+Ye]<<16,fn=ht+Tn+$t+On+524296,cn=fn+2*(Tn+$t)>>3;ft=cn+ht>>1,ht=(fn=fn+2*(ht+On)>>3)+Tn>>1,S(_[q+2*Ye-1],255&ft,ft>>16,Ve,Se+(2*Ye-1)*D),S(_[q+2*Ye-0],255&ht,ht>>16,Ve,Se+(2*Ye-0)*D),ee!=null&&(ft=fn+$t>>1,ht=cn+On>>1,S(ee[ne+2*Ye-1],255&ft,ft>>16,ke,qe+(2*Ye-1)*D),S(ee[ne+2*Ye+0],255&ht,ht>>16,ke,qe+(2*Ye+0)*D)),ht=Tn,$t=On}1&et||(ft=3*ht+$t+131074>>2,S(_[q+et-1],255&ft,ft>>16,Ve,Se+(et-1)*D),ee!=null&&(ft=3*$t+ht+131074>>2,S(ee[ne+et-1],255&ft,ft>>16,ke,qe+(et-1)*D)))}}function it(){br[Gr]=ol,br[oc]=mo,br[ho]=AA,br[Mh]=pd,br[su]=md,br[nl]=uc,br[fd]=gd,br[Hh]=mo,br[oA]=pd,br[sl]=md,br[lc]=uc}function yt(x){return x&-16384?0>x?0:255:x>>Dx}function Dt(x,S){return yt((19077*x>>8)+(26149*S>>8)-14234)}function nn(x,S,D){return yt((19077*x>>8)-(6419*S>>8)-(13320*D>>8)+8708)}function Zt(x,S){return yt((19077*x>>8)+(33050*S>>8)-17685)}function xn(x,S,D,_,q){_[q+0]=Dt(x,D),_[q+1]=nn(x,S,D),_[q+2]=Zt(x,S)}function cs(x,S,D,_,q){_[q+0]=Zt(x,S),_[q+1]=nn(x,S,D),_[q+2]=Dt(x,D)}function ws(x,S,D,_,q){var ee=nn(x,S,D);S=ee<<3&224|Zt(x,S)>>3,_[q+0]=248&Dt(x,D)|ee>>5,_[q+1]=S}function $s(x,S,D,_,q){var ee=240&Zt(x,S)|15;_[q+0]=240&Dt(x,D)|nn(x,S,D)>>4,_[q+1]=ee}function _s(x,S,D,_,q){_[q+0]=255,xn(x,S,D,_,q+1)}function gr(x,S,D,_,q){cs(x,S,D,_,q),_[q+3]=255}function Oi(x,S,D,_,q){xn(x,S,D,_,q),_[q+3]=255}function Ya(x,S){return 0>x?0:x>S?S:x}function Qi(x,S,D){U[x]=function(_,q,ee,ne,ae,Ae,he,Ce,$e){for(var Ue=Ce+(-2&$e)*D;Ce!=Ue;)S(_[q+0],ee[ne+0],ae[Ae+0],he,Ce),S(_[q+1],ee[ne+0],ae[Ae+0],he,Ce+D),q+=2,++ne,++Ae,Ce+=2*D;1&$e&&S(_[q+0],ee[ne+0],ae[Ae+0],he,Ce)}}function _h(x,S,D){return D==0?x==0?S==0?6:5:S==0?4:0:D}function Yo(x,S,D,_,q){switch(x>>>30){case 3:Hi(S,D,_,q,0);break;case 2:Ns(S,D,_,q);break;case 1:Vs(S,D,_,q)}}function Jo(x,S){var D,_,q=S.M,ee=S.Nb,ne=x.oc,ae=x.pc+40,Ae=x.oc,he=x.pc+584,Ce=x.oc,$e=x.pc+600;for(D=0;16>D;++D)ne[ae+32*D-1]=129;for(D=0;8>D;++D)Ae[he+32*D-1]=129,Ce[$e+32*D-1]=129;for(0<q?ne[ae-1-32]=Ae[he-1-32]=Ce[$e-1-32]=129:(r(ne,ae-32-1,127,21),r(Ae,he-32-1,127,9),r(Ce,$e-32-1,127,9)),_=0;_<x.za;++_){var Ue=S.ya[S.aa+_];if(0<_){for(D=-1;16>D;++D)s(ne,ae+32*D-4,ne,ae+32*D+12,4);for(D=-1;8>D;++D)s(Ae,he+32*D-4,Ae,he+32*D+4,4),s(Ce,$e+32*D-4,Ce,$e+32*D+4,4)}var Fe=x.Gd,Ze=x.Hd+_,Ve=Ue.ad,Se=Ue.Hc;if(0<q&&(s(ne,ae-32,Fe[Ze].y,0,16),s(Ae,he-32,Fe[Ze].f,0,8),s(Ce,$e-32,Fe[Ze].ea,0,8)),Ue.Za){var ke=ne,qe=ae-32+16;for(0<q&&(_>=x.za-1?r(ke,qe,Fe[Ze].y[15],4):s(ke,qe,Fe[Ze+1].y,0,4)),D=0;4>D;D++)ke[qe+128+D]=ke[qe+256+D]=ke[qe+384+D]=ke[qe+0+D];for(D=0;16>D;++D,Se<<=2)ke=ne,qe=ae+ou[D],la[Ue.Ob[D]](ke,qe),Yo(Se,Ve,16*+D,ke,qe)}else if(ke=_h(_,q,Ue.Ob[0]),il[ke](ne,ae),Se!=0)for(D=0;16>D;++D,Se<<=2)Yo(Se,Ve,16*+D,ne,ae+ou[D]);for(D=Ue.Gc,ke=_h(_,q,Ue.Dd),ei[ke](Ae,he),ei[ke](Ce,$e),Se=Ve,ke=Ae,qe=he,255&(Ue=D>>0)&&(170&Ue?Pi(Se,256,ke,qe):Sa(Se,256,ke,qe)),Ue=Ce,Se=$e,255&(D>>=8)&&(170&D?Pi(Ve,320,Ue,Se):Sa(Ve,320,Ue,Se)),q<x.Ub-1&&(s(Fe[Ze].y,0,ne,ae+480,16),s(Fe[Ze].f,0,Ae,he+224,8),s(Fe[Ze].ea,0,Ce,$e+224,8)),D=8*ee*x.B,Fe=x.sa,Ze=x.ta+16*_+16*ee*x.R,Ve=x.qa,Ue=x.ra+8*_+D,Se=x.Ha,ke=x.Ia+8*_+D,D=0;16>D;++D)s(Fe,Ze+D*x.R,ne,ae+32*D,16);for(D=0;8>D;++D)s(Ve,Ue+D*x.B,Ae,he+32*D,8),s(Se,ke+D*x.B,Ce,$e+32*D,8)}}function nc(x,S,D,_,q,ee,ne,ae,Ae){var he=[0],Ce=[0],$e=0,Ue=Ae!=null?Ae.kd:0,Fe=Ae??new Uh;if(x==null||12>D)return 7;Fe.data=x,Fe.w=S,Fe.ha=D,S=[S],D=[D],Fe.gb=[Fe.gb];e:{var Ze=S,Ve=D,Se=Fe.gb;if(e(x!=null),e(Ve!=null),e(Se!=null),Se[0]=0,12<=Ve[0]&&!t(x,Ze[0],"RIFF")){if(t(x,Ze[0]+8,"WEBP")){Se=3;break e}var ke=tt(x,Ze[0]+4);if(12>ke||4294967286<ke){Se=3;break e}if(Ue&&ke>Ve[0]-8){Se=7;break e}Se[0]=ke,Ze[0]+=12,Ve[0]-=12}Se=0}if(Se!=0)return Se;for(ke=0<Fe.gb[0],D=D[0];;){e:{var qe=x;Ve=S,Se=D;var et=he,Ye=Ce,wt=Ze=[0];if((ft=$e=[$e])[0]=0,8>Se[0])Se=7;else{if(!t(qe,Ve[0],"VP8X")){if(tt(qe,Ve[0]+4)!=10){Se=3;break e}if(18>Se[0]){Se=7;break e}var ht=tt(qe,Ve[0]+8),$t=1+We(qe,Ve[0]+12);if(2147483648<=$t*(qe=1+We(qe,Ve[0]+15))){Se=3;break e}wt!=null&&(wt[0]=ht),et!=null&&(et[0]=$t),Ye!=null&&(Ye[0]=qe),Ve[0]+=18,Se[0]-=18,ft[0]=1}Se=0}}if($e=$e[0],Ze=Ze[0],Se!=0)return Se;if(Ve=!!(2&Ze),!ke&&$e)return 3;if(ee!=null&&(ee[0]=!!(16&Ze)),ne!=null&&(ne[0]=Ve),ae!=null&&(ae[0]=0),ne=he[0],Ze=Ce[0],$e&&Ve&&Ae==null){Se=0;break}if(4>D){Se=7;break}if(ke&&$e||!ke&&!$e&&!t(x,S[0],"ALPH")){D=[D],Fe.na=[Fe.na],Fe.P=[Fe.P],Fe.Sa=[Fe.Sa];e:{ht=x,Se=S,ke=D;var ft=Fe.gb;et=Fe.na,Ye=Fe.P,wt=Fe.Sa,$t=22,e(ht!=null),e(ke!=null),qe=Se[0];var Tn=ke[0];for(e(et!=null),e(wt!=null),et[0]=null,Ye[0]=null,wt[0]=0;;){if(Se[0]=qe,ke[0]=Tn,8>Tn){Se=7;break e}var On=tt(ht,qe+4);if(4294967286<On){Se=3;break e}var fn=8+On+1&-2;if($t+=fn,0<ft&&$t>ft){Se=3;break e}if(!t(ht,qe,"VP8 ")||!t(ht,qe,"VP8L")){Se=0;break e}if(Tn[0]<fn){Se=7;break e}t(ht,qe,"ALPH")||(et[0]=ht,Ye[0]=qe+8,wt[0]=On),qe+=fn,Tn-=fn}}if(D=D[0],Fe.na=Fe.na[0],Fe.P=Fe.P[0],Fe.Sa=Fe.Sa[0],Se!=0)break}D=[D],Fe.Ja=[Fe.Ja],Fe.xa=[Fe.xa];e:if(ft=x,Se=S,ke=D,et=Fe.gb[0],Ye=Fe.Ja,wt=Fe.xa,ht=Se[0],qe=!t(ft,ht,"VP8 "),$t=!t(ft,ht,"VP8L"),e(ft!=null),e(ke!=null),e(Ye!=null),e(wt!=null),8>ke[0])Se=7;else{if(qe||$t){if(ft=tt(ft,ht+4),12<=et&&ft>et-12){Se=3;break e}if(Ue&&ft>ke[0]-8){Se=7;break e}Ye[0]=ft,Se[0]+=8,ke[0]-=8,wt[0]=$t}else wt[0]=5<=ke[0]&&ft[ht+0]==47&&!(ft[ht+4]>>5),Ye[0]=ke[0];Se=0}if(D=D[0],Fe.Ja=Fe.Ja[0],Fe.xa=Fe.xa[0],S=S[0],Se!=0)break;if(4294967286<Fe.Ja)return 3;if(ae==null||Ve||(ae[0]=Fe.xa?2:1),ne=[ne],Ze=[Ze],Fe.xa){if(5>D){Se=7;break}ae=ne,Ue=Ze,Ve=ee,x==null||5>D?x=0:5<=D&&x[S+0]==47&&!(x[S+4]>>5)?(ke=[0],ft=[0],et=[0],J(Ye=new Q,x,S,D),Lt(Ye,ke,ft,et)?(ae!=null&&(ae[0]=ke[0]),Ue!=null&&(Ue[0]=ft[0]),Ve!=null&&(Ve[0]=et[0]),x=1):x=0):x=0}else{if(10>D){Se=7;break}ae=Ze,x==null||10>D||!ia(x,S+3,D-3)?x=0:(Ue=x[S+0]|x[S+1]<<8|x[S+2]<<16,Ve=16383&(x[S+7]<<8|x[S+6]),x=16383&(x[S+9]<<8|x[S+8]),1&Ue||3<(Ue>>1&7)||!(Ue>>4&1)||Ue>>5>=Fe.Ja||!Ve||!x?x=0:(ne&&(ne[0]=Ve),ae&&(ae[0]=x),x=1))}if(!x||(ne=ne[0],Ze=Ze[0],$e&&(he[0]!=ne||Ce[0]!=Ze)))return 3;Ae!=null&&(Ae[0]=Fe,Ae.offset=S-Ae.w,e(4294967286>S-Ae.w),e(Ae.offset==Ae.ha-D));break}return Se==0||Se==7&&$e&&Ae==null?(ee!=null&&(ee[0]|=Fe.na!=null&&0<Fe.na.length),_!=null&&(_[0]=ne),q!=null&&(q[0]=Ze),0):Se}function Xl(x,S,D){var _=S.width,q=S.height,ee=0,ne=0,ae=_,Ae=q;if(S.Da=x!=null&&0<x.Da,S.Da&&(ae=x.cd,Ae=x.bd,ee=x.v,ne=x.j,11>D||(ee&=-2,ne&=-2),0>ee||0>ne||0>=ae||0>=Ae||ee+ae>_||ne+Ae>q))return 0;if(S.v=ee,S.j=ne,S.va=ee+ae,S.o=ne+Ae,S.U=ae,S.T=Ae,S.da=x!=null&&0<x.da,S.da){if(!ct(ae,Ae,D=[x.ib],ee=[x.hb]))return 0;S.ib=D[0],S.hb=ee[0]}return S.ob=x!=null&&x.ob,S.Kb=x==null||!x.Sd,S.da&&(S.ob=S.ib<3*_/4&&S.hb<3*q/4,S.Kb=0),1}function sc(x){if(x==null)return 2;if(11>x.S){var S=x.f.RGBA;S.fb+=(x.height-1)*S.A,S.A=-S.A}else S=x.f.kb,x=x.height,S.O+=(x-1)*S.fa,S.fa=-S.fa,S.N+=(x-1>>1)*S.Ab,S.Ab=-S.Ab,S.W+=(x-1>>1)*S.Db,S.Db=-S.Db,S.F!=null&&(S.J+=(x-1)*S.lb,S.lb=-S.lb);return 0}function XA(x,S,D,_){if(_==null||0>=x||0>=S)return 2;if(D!=null){if(D.Da){var q=D.cd,ee=D.bd,ne=-2&D.v,ae=-2&D.j;if(0>ne||0>ae||0>=q||0>=ee||ne+q>x||ae+ee>S)return 2;x=q,S=ee}if(D.da){if(!ct(x,S,q=[D.ib],ee=[D.hb]))return 2;x=q[0],S=ee[0]}}_.width=x,_.height=S;e:{var Ae=_.width,he=_.height;if(x=_.S,0>=Ae||0>=he||!(x>=Gr&&13>x))x=2;else{if(0>=_.Rd&&_.sd==null){ne=ee=q=S=0;var Ce=(ae=Ae*I1[x])*he;if(11>x||(ee=(he+1)/2*(S=(Ae+1)/2),x==12&&(ne=(q=Ae)*he)),(he=a(Ce+2*ee+ne))==null){x=1;break e}_.sd=he,11>x?((Ae=_.f.RGBA).eb=he,Ae.fb=0,Ae.A=ae,Ae.size=Ce):((Ae=_.f.kb).y=he,Ae.O=0,Ae.fa=ae,Ae.Fd=Ce,Ae.f=he,Ae.N=0+Ce,Ae.Ab=S,Ae.Cd=ee,Ae.ea=he,Ae.W=0+Ce+ee,Ae.Db=S,Ae.Ed=ee,x==12&&(Ae.F=he,Ae.J=0+Ce+2*ee),Ae.Tc=ne,Ae.lb=q)}if(S=1,q=_.S,ee=_.width,ne=_.height,q>=Gr&&13>q)if(11>q)x=_.f.RGBA,S&=(ae=Math.abs(x.A))*(ne-1)+ee<=x.size,S&=ae>=ee*I1[q],S&=x.eb!=null;else{x=_.f.kb,ae=(ee+1)/2,Ce=(ne+1)/2,Ae=Math.abs(x.fa),he=Math.abs(x.Ab);var $e=Math.abs(x.Db),Ue=Math.abs(x.lb),Fe=Ue*(ne-1)+ee;S&=Ae*(ne-1)+ee<=x.Fd,S&=he*(Ce-1)+ae<=x.Cd,S=(S&=$e*(Ce-1)+ae<=x.Ed)&Ae>=ee&he>=ae&$e>=ae,S&=x.y!=null,S&=x.f!=null,S&=x.ea!=null,q==12&&(S&=Ue>=ee,S&=Fe<=x.Tc,S&=x.F!=null)}else S=0;x=S?0:2}}return x!=0||D!=null&&D.fd&&(x=sc(_)),x}var sr=64,Yl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],YA=24,JA=32,rc=8,Ca=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ot("Predictor0","PredictorAdd0"),U.Predictor0=function(){return 4278190080},U.Predictor1=function(x){return x},U.Predictor2=function(x,S,D){return S[D+0]},U.Predictor3=function(x,S,D){return S[D+1]},U.Predictor4=function(x,S,D){return S[D-1]},U.Predictor5=function(x,S,D){return At(At(x,S[D+1]),S[D+0])},U.Predictor6=function(x,S,D){return At(x,S[D-1])},U.Predictor7=function(x,S,D){return At(x,S[D+0])},U.Predictor8=function(x,S,D){return At(S[D-1],S[D+0])},U.Predictor9=function(x,S,D){return At(S[D+0],S[D+1])},U.Predictor10=function(x,S,D){return At(At(x,S[D-1]),At(S[D+0],S[D+1]))},U.Predictor11=function(x,S,D){var _=S[D+0];return 0>=Ht(_>>24&255,x>>24&255,(S=S[D-1])>>24&255)+Ht(_>>16&255,x>>16&255,S>>16&255)+Ht(_>>8&255,x>>8&255,S>>8&255)+Ht(255&_,255&x,255&S)?_:x},U.Predictor12=function(x,S,D){var _=S[D+0];return(St((x>>24&255)+(_>>24&255)-((S=S[D-1])>>24&255))<<24|St((x>>16&255)+(_>>16&255)-(S>>16&255))<<16|St((x>>8&255)+(_>>8&255)-(S>>8&255))<<8|St((255&x)+(255&_)-(255&S)))>>>0},U.Predictor13=function(x,S,D){var _=S[D-1];return(Rt((x=At(x,S[D+0]))>>24&255,_>>24&255)<<24|Rt(x>>16&255,_>>16&255)<<16|Rt(x>>8&255,_>>8&255)<<8|Rt(x>>0&255,_>>0&255))>>>0};var lm=U.PredictorAdd0;U.PredictorAdd1=Pt,ot("Predictor2","PredictorAdd2"),ot("Predictor3","PredictorAdd3"),ot("Predictor4","PredictorAdd4"),ot("Predictor5","PredictorAdd5"),ot("Predictor6","PredictorAdd6"),ot("Predictor7","PredictorAdd7"),ot("Predictor8","PredictorAdd8"),ot("Predictor9","PredictorAdd9"),ot("Predictor10","PredictorAdd10"),ot("Predictor11","PredictorAdd11"),ot("Predictor12","PredictorAdd12"),ot("Predictor13","PredictorAdd13");var Oh=U.PredictorAdd2;an("ColorIndexInverseTransform","MapARGB","32b",function(x){return x>>8&255},function(x){return x}),an("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(x){return x},function(x){return x>>8&255});var cd,ui=U.ColorIndexInverseTransform,yr=U.MapARGB,Jl=U.VP8LColorIndexInverseTransformAlpha,Qh=U.MapAlpha,Zo=U.VP8LPredictorsAdd=[];Zo.length=16,(U.VP8LPredictors=[]).length=16,(U.VP8LPredictorsAdd_C=[]).length=16,(U.VP8LPredictors_C=[]).length=16;var Zl,oa,Lr,eA,Ba,Mi,uo,Hi,Ns,Pi,Vs,Sa,ZA,co,ac,tA,nA,sA,eu,ic,rA,el,tu,Is,Ja,mn,gn,es,Os=a(511),ci=a(2041),aA=a(225),iA=a(767),tl=0,hd=ci,nu=aA,wr=iA,hi=Os,Gr=0,oc=1,ho=2,Mh=3,su=4,nl=5,fd=6,Hh=7,oA=8,sl=9,lc=10,dd=[2,3,7],fi=[3,3,11],Za=[280,256,256,256,40],ru=[0,1,1,1,0],rl=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],al=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],au=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],v1=8,Ph=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],zh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],rr=null,Es=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],$n=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],lA=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],fo=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Am=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],iu=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],C1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],il=[],la=[],ei=[],B1=1,Ac=2,po=[],br=[];Ke("UpsampleRgbLinePair",xn,3),Ke("UpsampleBgrLinePair",cs,3),Ke("UpsampleRgbaLinePair",Oi,4),Ke("UpsampleBgraLinePair",gr,4),Ke("UpsampleArgbLinePair",_s,4),Ke("UpsampleRgba4444LinePair",$s,2),Ke("UpsampleRgb565LinePair",ws,2);var ol=U.UpsampleRgbLinePair,AA=U.UpsampleBgrLinePair,mo=U.UpsampleRgbaLinePair,pd=U.UpsampleBgraLinePair,md=U.UpsampleArgbLinePair,uc=U.UpsampleRgba4444LinePair,gd=U.UpsampleRgb565LinePair,go=16,ar=1<<go-1,uA=-227,yd=482,Dx=6,S1=0,Lx=a(256),ir=a(256),um=a(256),jh=a(256),Vh=a(yd-uA),cm=a(yd-uA);Qi("YuvToRgbRow",xn,3),Qi("YuvToBgrRow",cs,3),Qi("YuvToRgbaRow",Oi,4),Qi("YuvToBgraRow",gr,4),Qi("YuvToArgbRow",_s,4),Qi("YuvToRgba4444Row",$s,2),Qi("YuvToRgb565Row",ws,2);var ou=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ll=[0,2,8],Ux=[8,7,6,4,4,2,2,2,1,1,1,1],N1=1;this.WebPDecodeRGBA=function(x,S,D,_,q){var ee=oc,ne=new Ju,ae=new ja;ne.ba=ae,ae.S=ee,ae.width=[ae.width],ae.height=[ae.height];var Ae=ae.width,he=ae.height,Ce=new Va;if(Ce==null||x==null)var $e=2;else e(Ce!=null),$e=nc(x,S,D,Ce.width,Ce.height,Ce.Pd,Ce.Qd,Ce.format,null);if($e!=0?Ae=0:(Ae!=null&&(Ae[0]=Ce.width[0]),he!=null&&(he[0]=Ce.height[0]),Ae=1),Ae){ae.width=ae.width[0],ae.height=ae.height[0],_!=null&&(_[0]=ae.width),q!=null&&(q[0]=ae.height);e:{if(_=new Hl,(q=new Uh).data=x,q.w=S,q.ha=D,q.kd=1,S=[0],e(q!=null),((x=nc(q.data,q.w,q.ha,null,null,null,S,null,q))==0||x==7)&&S[0]&&(x=4),(S=x)==0){if(e(ne!=null),_.data=q.data,_.w=q.w+q.offset,_.ha=q.ha-q.offset,_.put=Ui,_.ac=tr,_.bc=ao,_.ma=ne,q.xa){if((x=Dr())==null){ne=1;break e}if(function(Ue,Fe){var Ze=[0],Ve=[0],Se=[0];t:for(;;){if(Ue==null)return 0;if(Fe==null)return Ue.a=2,0;if(Ue.l=Fe,Ue.a=0,J(Ue.m,Fe.data,Fe.w,Fe.ha),!Lt(Ue.m,Ze,Ve,Se)){Ue.a=3;break t}if(Ue.xb=Ac,Fe.width=Ze[0],Fe.height=Ve[0],!Kn(Ze[0],Ve[0],1,Ue,null))break t;return 1}return e(Ue.a!=0),0}(x,_)){if(_=(S=XA(_.width,_.height,ne.Oa,ne.ba))==0){t:{_=x;n:for(;;){if(_==null){_=0;break t}if(e(_.s.yc!=null),e(_.s.Ya!=null),e(0<_.s.Wb),e((D=_.l)!=null),e((q=D.ma)!=null),_.xb!=0){if(_.ca=q.ba,_.tb=q.tb,e(_.ca!=null),!Xl(q.Oa,D,Mh)){_.a=2;break n}if(!Ml(_,D.width)||D.da)break n;if((D.da||_n(_.ca.S))&&Le(),11>_.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),_.ca.f.kb.F!=null&&Le()),_.Pb&&0<_.s.ua&&_.s.vb.X==null&&!dt(_.s.vb,_.s.Wa.Xa)){_.a=1;break n}_.xb=0}if(!jr(_,_.V,_.Ba,_.c,_.i,D.o,PA))break n;q.Dc=_.Ma,_=1;break t}e(_.a!=0),_=0}_=!_}_&&(S=x.a)}else S=x.a}else{if((x=new sm)==null){ne=1;break e}if(x.Fa=q.na,x.P=q.P,x.qc=q.Sa,Sh(x,_)){if((S=XA(_.width,_.height,ne.Oa,ne.ba))==0){if(x.Aa=0,D=ne.Oa,e((q=x)!=null),D!=null){if(0<(Ae=0>(Ae=D.Md)?0:100<Ae?255:255*Ae/100)){for(he=Ce=0;4>he;++he)12>($e=q.pb[he]).lc&&($e.ia=Ae*Ux[0>$e.lc?0:$e.lc]>>3),Ce|=$e.ia;Ce&&(alert("todo:VP8InitRandom"),q.ia=1)}q.Ga=D.Id,100<q.Ga?q.Ga=100:0>q.Ga&&(q.Ga=0)}sd(x,_)||(S=x.a)}}else S=x.a}S==0&&ne.Oa!=null&&ne.Oa.fd&&(S=sc(ne.ba))}ne=S}ee=ne!=0?null:11>ee?ae.f.RGBA.eb:ae.f.kb.y}else ee=null;return ee};var I1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(U,O){for(var z="",T=0;T<4;T++)z+=String.fromCharCode(U[O++]);return z}function h(U,O){return(U[O+0]<<0|U[O+1]<<8|U[O+2]<<16)>>>0}function f(U,O){return(U[O+0]<<0|U[O+1]<<8|U[O+2]<<16|U[O+3]<<24)>>>0}new l;var d=[0],m=[0],g=[],w=new l,v=n,b=function(U,O){var z={},T=0,R=!1,W=0,K=0;if(z.frames=[],!function(V,Z,le,ce){for(var pe=0;pe<ce;pe++)if(V[Z+pe]!=le.charCodeAt(pe))return!0;return!1}(U,O,"RIFF",4)){for(f(U,O+=4),O+=8;O<U.length;){var re=u(U,O),P=f(U,O+=4);O+=4;var Y=P+(1&P);switch(re){case"VP8 ":case"VP8L":z.frames[T]===void 0&&(z.frames[T]={}),(j=z.frames[T]).src_off=R?K:O-8,j.src_size=W+P+8,T++,R&&(R=!1,W=0,K=0);break;case"VP8X":(j=z.header={}).feature_flags=U[O];var J=O+4;j.canvas_width=1+h(U,J),J+=3,j.canvas_height=1+h(U,J),J+=3;break;case"ALPH":R=!0,W=Y+8,K=O-8;break;case"ANIM":(j=z.header).bgcolor=f(U,O),J=O+4,j.loop_count=(ue=U)[(Q=J)+0]<<0|ue[Q+1]<<8,J+=2;break;case"ANMF":var te,j;(j=z.frames[T]={}).offset_x=2*h(U,O),O+=3,j.offset_y=2*h(U,O),O+=3,j.width=1+h(U,O),O+=3,j.height=1+h(U,O),O+=3,j.duration=h(U,O),O+=3,te=U[O++],j.dispose=1&te,j.blend=te>>1&1}re!="ANMF"&&(O+=Y)}var ue,Q;return z}}(v,0);b.response=v,b.rgbaoutput=!0,b.dataurl=!1;var C=b.header?b.header:null,N=b.frames?b.frames:null;if(C){C.loop_counter=C.loop_count,d=[C.canvas_height],m=[C.canvas_width];for(var I=0;I<N.length&&N[I].blend!=0;I++);}var L=N[0],$=w.WebPDecodeRGBA(v,L.src_off,L.src_size,m,d);L.rgba=$,L.imgwidth=m[0],L.imgheight=d[0];for(var H=0;H<m[0]*d[0]*4;H++)g[H]=$[H];return this.width=m,this.height=d,this.data=g,this}(function(n){var e=function(){return typeof JC=="function"},t=function(d,m,g,w){var v=4,b=i;switch(w){case n.image_compression.FAST:v=1,b=a;break;case n.image_compression.MEDIUM:v=6,b=o;break;case n.image_compression.SLOW:v=9,b=l}d=s(d,m,g,b);var C=JC(d,{level:v});return n.__addimage__.arrayBufferToBinaryString(C)},s=function(d,m,g,w){for(var v,b,C,N=d.length/m,I=new Uint8Array(d.length+N),L=h(),$=0;$<N;$+=1){if(C=$*m,v=d.subarray(C,C+m),w)I.set(w(v,g,b),C+$);else{for(var H,U=L.length,O=[];H<U;H+=1)O[H]=L[H](v,g,b);var z=f(O.concat());I.set(O[z],C+$)}b=v}return I},r=function(d){var m=Array.apply([],d);return m.unshift(0),m},a=function(d,m){var g,w=[],v=d.length;w[0]=1;for(var b=0;b<v;b+=1)g=d[b-m]||0,w[b+1]=d[b]-g+256&255;return w},i=function(d,m,g){var w,v=[],b=d.length;v[0]=2;for(var C=0;C<b;C+=1)w=g&&g[C]||0,v[C+1]=d[C]-w+256&255;return v},o=function(d,m,g){var w,v,b=[],C=d.length;b[0]=3;for(var N=0;N<C;N+=1)w=d[N-m]||0,v=g&&g[N]||0,b[N+1]=d[N]+256-(w+v>>>1)&255;return b},l=function(d,m,g){var w,v,b,C,N=[],I=d.length;N[0]=4;for(var L=0;L<I;L+=1)w=d[L-m]||0,v=g&&g[L]||0,b=g&&g[L-m]||0,C=u(w,v,b),N[L+1]=d[L]-C+256&255;return N},u=function(d,m,g){if(d===m&&m===g)return d;var w=Math.abs(m-g),v=Math.abs(d-g),b=Math.abs(d+m-g-g);return w<=v&&w<=b?d:v<=b?m:g},h=function(){return[r,a,i,o,l]},f=function(d){var m=d.map(function(g){return g.reduce(function(w,v){return w+Math.abs(v)},0)});return m.indexOf(Math.min.apply(null,m))};n.processPNG=function(d,m,g,w){var v,b,C,N,I,L,$,H,U,O,z,T,R,W,K,re=this.decode.FLATE_DECODE,P="";if(this.__addimage__.isArrayBuffer(d)&&(d=new Uint8Array(d)),this.__addimage__.isArrayBufferView(d)){if(d=(C=new Zz(d)).imgData,b=C.bits,v=C.colorSpace,I=C.colors,[4,6].indexOf(C.colorType)!==-1){if(C.bits===8){U=(H=C.pixelBitlength==32?new Uint32Array(C.decodePixels().buffer):C.pixelBitlength==16?new Uint16Array(C.decodePixels().buffer):new Uint8Array(C.decodePixels().buffer)).length,z=new Uint8Array(U*C.colors),O=new Uint8Array(U);var Y,J=C.pixelBitlength-C.bits;for(W=0,K=0;W<U;W++){for(R=H[W],Y=0;Y<J;)z[K++]=R>>>Y&255,Y+=C.bits;O[W]=R>>>Y&255}}if(C.bits===16){U=(H=new Uint32Array(C.decodePixels().buffer)).length,z=new Uint8Array(U*(32/C.pixelBitlength)*C.colors),O=new Uint8Array(U*(32/C.pixelBitlength)),T=C.colors>1,W=0,K=0;for(var te=0;W<U;)R=H[W++],z[K++]=R>>>0&255,T&&(z[K++]=R>>>16&255,R=H[W++],z[K++]=R>>>0&255),O[te++]=R>>>16&255;b=8}w!==n.image_compression.NONE&&e()?(d=t(z,C.width*C.colors,C.colors,w),$=t(O,C.width,1,w)):(d=z,$=O,re=void 0)}if(C.colorType===3&&(v=this.color_spaces.INDEXED,L=C.palette,C.transparency.indexed)){var j=C.transparency.indexed,ue=0;for(W=0,U=j.length;W<U;++W)ue+=j[W];if((ue/=255)===U-1&&j.indexOf(0)!==-1)N=[j.indexOf(0)];else if(ue!==U){for(H=C.decodePixels(),O=new Uint8Array(H.length),W=0,U=H.length;W<U;W++)O[W]=j[H[W]];$=t(O,C.width,1)}}var Q=function(V){var Z;switch(V){case n.image_compression.FAST:Z=11;break;case n.image_compression.MEDIUM:Z=13;break;case n.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(w);return re===this.decode.FLATE_DECODE&&(P="/Predictor "+Q+" "),P+="/Colors "+I+" /BitsPerComponent "+b+" /Columns "+C.width,(this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),($&&this.__addimage__.isArrayBuffer($)||this.__addimage__.isArrayBufferView($))&&($=this.__addimage__.arrayBufferToBinaryString($)),{alias:g,data:d,index:m,filter:re,decodeParameters:P,transparency:N,palette:L,sMask:$,predictor:Q,width:C.width,height:C.height,bitsPerComponent:b,colorSpace:v}}}})(Vt.API),function(n){n.processGIF89A=function(e,t,s,r){var a=new e7(e),i=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:i,height:o},h=new Zv(100).encode(u,100);return n.processJPEG.call(this,h,t,s,r)},n.processGIF87A=n.processGIF89A}(Vt.API),gl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:s,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},gl.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){ls.log("bit decode error:"+t)}},gl.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,r=0;r<e;r++)for(var a=this.datav.getUint8(this.pos++,!0),i=s*this.width*4+8*r*4,o=0;o<8&&8*r+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}t!==0&&(this.pos+=4-t)}},gl.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,r=0;r<n;r++){var a=this.datav.getUint8(this.pos++,!0),i=s*this.width*4+2*r*4,o=a>>4,l=15&a,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*r+1>=this.width)break;u=this.palette[l],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},gl.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var r=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*s;if(r<this.palette.length){var i=this.palette[r];this.data[a]=i.red,this.data[a+1]=i.green,this.data[a+2]=i.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}n!==0&&(this.pos+=4-n)}},gl.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,u=a>>15?255:0,h=s*this.width*4+4*r;this.data[h]=l,this.data[h+1]=o,this.data[h+2]=i,this.data[h+3]=u}this.pos+=n}},gl.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var r=this.bottom_up?s:this.height-1-s,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&t)/t*255|0,u=(i>>11)/e*255|0,h=r*this.width*4+4*a;this.data[h]=u,this.data[h+1]=l,this.data[h+2]=o,this.data[h+3]=255}this.pos+=n}},gl.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*t;this.data[i]=a,this.data[i+1]=r,this.data[i+2]=s,this.data[i+3]=255}this.pos+=this.width%4}},gl.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=a,this.data[o+1]=r,this.data[o+2]=s,this.data[o+3]=i}},gl.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,s,r){var a=new gl(e,!1),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},u=new Zv(100).encode(l,100);return n.processJPEG.call(this,u,t,s,r)}}(Vt.API),$F.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,s,r){var a=new $F(e),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},u=new Zv(100).encode(l,100);return n.processJPEG.call(this,u,t,s,r)}}(Vt.API),Vt.API.processRGBA=function(n,e,t){for(var s=n.data,r=s.length,a=new Uint8Array(r/4*3),i=new Uint8Array(r/4),o=0,l=0,u=0;u<r;u+=4){var h=s[u],f=s[u+1],d=s[u+2],m=s[u+3];a[o++]=h,a[o++]=f,a[o++]=d,i[l++]=m}var g=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:g,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Vt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Hd=Vt.API,Cy=Hd.getCharWidthsArray=function(n,e){var t,s,r=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:r.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:r.metadata.Unicode.kerning,h=u.fof?u.fof:1,f=e.doKerning!==!1,d=0,m=n.length,g=0,w=o[0]||l,v=[];for(t=0;t<m;t++)s=n.charCodeAt(t),typeof r.metadata.widthOfString=="function"?v.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(s))+i*(1e3/a)||0)/1e3):(d=f&&Yn(u[s])==="object"&&!isNaN(parseInt(u[s][g],10))?u[s][g]/h:0,v.push((o[s]||w)/l+d)),g=s;return v},DF=Hd.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return Hd.processArabic&&(n=Hd.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,t,r)/t:Cy.apply(this,arguments).reduce(function(a,i){return a+i},0)},LF=function(n,e,t,s){for(var r=[],a=0,i=n.length,o=0;a!==i&&o+e[a]<t;)o+=e[a],a++;r.push(n.slice(0,a));var l=a;for(o=0;a!==i;)o+e[a]>s&&(r.push(n.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&r.push(n.slice(l,a)),r},UF=function(n,e,t){t||(t={});var s,r,a,i,o,l,u,h=[],f=[h],d=t.textIndent||0,m=0,g=0,w=n.split(" "),v=Cy.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?w[0].length+2:t.lineIndent||0){var b=Array(l).join(" "),C=[];w.map(function(I){(I=I.split(/\s*\n/)).length>1?C=C.concat(I.map(function(L,$){return($&&L.length?`
`:"")+L})):C.push(I[0])}),w=C,l=DF.apply(this,[b,t])}for(a=0,i=w.length;a<i;a++){var N=0;if(s=w[a],l&&s[0]==`
`&&(s=s.substr(1),N=1),d+m+(g=(r=Cy.apply(this,[s,t])).reduce(function(I,L){return I+L},0))>e||N){if(g>e){for(o=LF.apply(this,[s,r,e-(d+m),e]),h.push(o.shift()),h=[o.pop()];o.length;)f.push([o.shift()]);g=r.slice(s.length-(h[0]?h[0].length:0)).reduce(function(I,L){return I+L},0)}else h=[s];f.push(h),d=g+l,m=v}else h.push(s),d+=m+g,m=v}return u=l?function(I,L){return(L?b:"")+I.join(" ")}:function(I){return I.join(" ")},f.map(u)},Hd.splitTextToSize=function(n,e,t){var s,r=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var f=this.internal.getFont(h.fontName,h.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/r;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/r:0,a.lineIndent=t.lineIndent;var o,l,u=[];for(o=0,l=s.length;o<l;o++)u=u.concat(UF.apply(this,[s[o],i,a]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},s={},r=0;r<e.length;r++)t[e[r]]="0123456789abcdef"[r],s["0123456789abcdef"[r]]=e[r];var a=function(f){return"0x"+parseInt(f,10).toString(16)},i=n.__fontmetrics__.compress=function(f){var d,m,g,w,v=["{"];for(var b in f){if(d=f[b],isNaN(parseInt(b,10))?m="'"+b+"'":(b=parseInt(b,10),m=(m=a(b).slice(2)).slice(0,-1)+s[m.slice(-1)]),typeof d=="number")d<0?(g=a(d).slice(3),w="-"):(g=a(d).slice(2),w=""),g=w+g.slice(0,-1)+s[g.slice(-1)];else{if(Yn(d)!=="object")throw new Error("Don't know what to do with value type "+Yn(d)+".");g=i(d)}v.push(m+g)}return v.push("}"),v.join("")},o=n.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var d,m,g,w,v={},b=1,C=v,N=[],I="",L="",$=f.length-1,H=1;H<$;H+=1)(w=f[H])=="'"?d?(g=d.join(""),d=void 0):d=[]:d?d.push(w):w=="{"?(N.push([C,g]),C={},g=void 0):w=="}"?((m=N.pop())[0][m[1]]=C,g=void 0,C=m[0]):w=="-"?b=-1:g===void 0?t.hasOwnProperty(w)?(I+=t[w],g=parseInt(I,16)*b,b=1,I=""):I+=w:t.hasOwnProperty(w)?(L+=t[w],C[g]=parseInt(L,16)*b,b=1,g=void 0,L=""):L+=w;return v},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(f){var d=f.font,m=h.Unicode[d.postScriptName];m&&(d.metadata.Unicode={},d.metadata.Unicode.widths=m.widths,d.metadata.Unicode.kerning=m.kerning);var g=u.Unicode[d.postScriptName];g&&(d.metadata.Unicode.encoding=g,d.encoding=g.codePages[0])}])}(Vt.API),function(n){var e=function(t){for(var s=t.length,r=new Uint8Array(s),a=0;a<s;a++)r[a]=t.charCodeAt(a);return r};n.API.events.push(["addFont",function(t){var s=void 0,r=t.font,a=t.instance;if(!r.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(s=a.existsFileInVFS(r.postScriptName)===!1?a.loadFile(r.postScriptName):a.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(xg(o)),i.metadata=n.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(r,s)}}])}(Vt),function(n){function e(){return(qt.canvg?Promise.resolve(qt.canvg):KC(()=>import("./index.es-CbAu1uSb.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Vt.API.addSvgAsImage=function(t,s,r,a,i,o,l,u){if(isNaN(s)||isNaN(r))throw ls.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(i))throw ls.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=a,h.height=i;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(g){return g.fromString(f,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(d)}).then(function(){m.addImage(h.toDataURL("image/jpeg",1),s,r,a,i,l,u)})}}(),Vt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var r=0;r<this.internal.pages[s].length;r++)this.internal.pages[s][r]=this.internal.pages[s][r].replace(e,t);return this},Vt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var s,r,a,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],u=0,h=0,f=0;function d(g,w){var v,b=!1;for(v=0;v<g.length;v+=1)g[v]===w&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var m=o.length;for(f=0;f<m;f+=1)t[o[f]].value=t[o[f]].defaultValue,t[o[f]].explicitSet=!1}if(Yn(n)==="object"){for(r in n)if(a=n[r],d(o,r)&&a!==void 0){if(t[r].type==="boolean"&&typeof a=="boolean")t[r].value=a;else if(t[r].type==="name"&&d(t[r].valueSet,a))t[r].value=a;else if(t[r].type==="integer"&&Number.isInteger(a))t[r].value=a;else if(t[r].type==="array"){for(u=0;u<a.length;u+=1)if(s=!0,a[u].length===1&&typeof a[u][0]=="number")l.push(String(a[u]-1));else if(a[u].length>1){for(h=0;h<a[u].length;h+=1)typeof a[u][h]!="number"&&(s=!1);s===!0&&l.push([a[u][0]-1,a[u][1]-1].join(" "))}t[r].value="["+l.join(" ")+"]"}else t[r].value=t[r].defaultValue;t[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,w=[];for(g in t)t[g].explicitSet===!0&&(t[g].type==="name"?w.push("/"+g+" /"+t[g].value):w.push("/"+g+" "+t[g].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(s)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+i.length+o.length+r.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(r+a+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Vt.API),function(n){var e=n.API,t=e.pdfEscape16=function(a,i){for(var o,l=i.metadata.Unicode.widths,u=["","0","00","000","0000"],h=[""],f=0,d=a.length;f<d;++f){if(o=i.metadata.characterToGlyph(a.charCodeAt(f)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=a.charCodeAt(f),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return h.join("");o=o.toString(16),h.push(u[4-o.length],o)}return h.join("")},s=function(a){var i,o,l,u,h,f,d;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,d=(o=Object.keys(a).sort(function(m,g){return m-g})).length;f<d;f++)i=o[f],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[i]!==void 0&&a[i]!==null&&typeof a[i].toString=="function"&&(u=("0000"+a[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+u+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,u=i.newObject,h=i.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,d=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),m="",g=0;g<d.length;g++)m+=String.fromCharCode(d[g]);var w=u();h({data:m,addLength1:!0,objectId:w}),l("endobj");var v=u();h({data:s(o.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var b=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Jd(o.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var C=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Jd(o.fontName)),l("/FontDescriptor "+b+" 0 R"),l("/W "+n.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+v+" 0 R"),l("/BaseFont /"+Jd(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+C+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,u=i.newObject,h=i.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,d="",m=0;m<f.length;m++)d+=String.fromCharCode(f[m]);var g=u();h({data:d,addLength1:!0,objectId:g}),l("endobj");var w=u();h({data:s(o.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var v=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+g+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Jd(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var b=0;b<o.metadata.hmtx.widths.length;b++)o.metadata.hmtx.widths[b]=parseInt(o.metadata.hmtx.widths[b]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+Jd(o.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var r=function(a){var i,o=a.text||"",l=a.x,u=a.y,h=a.options||{},f=a.mutex||{},d=f.pdfEscape,m=f.activeFontKey,g=f.fonts,w=m,v="",b=0,C="",N=g[w].encoding;if(g[w].encoding!=="Identity-H")return{text:o,x:l,y:u,options:h,mutex:f};for(C=o,w=m,Array.isArray(o)&&(C=o[0]),b=0;b<C.length;b+=1)g[w].metadata.hasOwnProperty("cmap")&&(i=g[w].metadata.cmap.unicode.codeMap[C[b].charCodeAt(0)]),i||C[b].charCodeAt(0)<256&&g[w].metadata.hasOwnProperty("Unicode")?v+=C[b]:v+="";var I="";return parseInt(w.slice(1))<14||N==="WinAnsiEncoding"?I=d(v,w).split("").map(function(L){return L.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(I=t(v,g[w])),f.isHex=!0,{text:I,x:l,y:u,options:h,mutex:f}};e.events.push(["postProcessText",function(a){var i=a.text||"",o=[],l={text:i,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([r(Object.assign({},l,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(r(Object.assign({},l,{text:i[u]})).text);a.text=o}else a.text=r(Object.assign({},l,{text:i})).text}])}(Vt),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Vt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var r,a,i,o,l,u,h,f=e,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),C=!1,N=0;this.__bidiEngine__={};var I=function(T){var R=T.charCodeAt(),W=R>>8,K=w[W];return K!==void 0?f[256*K+(255&R)]:W===252||W===253?"AL":b.test(W)?"L":W===8?"R":"N"},L=function(T){for(var R,W=0;W<T.length;W++){if((R=I(T.charAt(W)))==="L")return!1;if(R==="R")return!0}return!1},$=function(T,R,W,K){var re,P,Y,J,te=R[K];switch(te){case"L":case"R":C=!1;break;case"N":case"AN":break;case"EN":C&&(te="AN");break;case"AL":C=!0,te="R";break;case"WS":te="N";break;case"CS":K<1||K+1>=R.length||(re=W[K-1])!=="EN"&&re!=="AN"||(P=R[K+1])!=="EN"&&P!=="AN"?te="N":C&&(P="AN"),te=P===re?P:"N";break;case"ES":te=(re=K>0?W[K-1]:"B")==="EN"&&K+1<R.length&&R[K+1]==="EN"?"EN":"N";break;case"ET":if(K>0&&W[K-1]==="EN"){te="EN";break}if(C){te="N";break}for(Y=K+1,J=R.length;Y<J&&R[Y]==="ET";)Y++;te=Y<J&&R[Y]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(J=R.length,Y=K+1;Y<J&&R[Y]==="NSM";)Y++;if(Y<J){var j=T[K],ue=j>=1425&&j<=2303||j===64286;if(re=R[Y],ue&&(re==="R"||re==="AL")){te="R";break}}}te=K<1||(re=R[K-1])==="B"?"N":W[K-1];break;case"B":C=!1,r=!0,te=N;break;case"S":a=!0,te="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":C=!1;break;case"BN":te="N"}return te},H=function(T,R,W){var K=T.split("");return W&&U(K,W,{hiLevel:N}),K.reverse(),R&&R.reverse(),K.join("")},U=function(T,R,W){var K,re,P,Y,J,te=-1,j=T.length,ue=0,Q=[],V=N?m:d,Z=[];for(C=!1,r=!1,a=!1,re=0;re<j;re++)Z[re]=I(T[re]);for(P=0;P<j;P++){if(J=ue,Q[P]=$(T,Z,Q,P),K=240&(ue=V[J][g[Q[P]]]),ue&=15,R[P]=Y=V[ue][5],K>0)if(K===16){for(re=te;re<P;re++)R[re]=1;te=-1}else te=-1;if(V[ue][6])te===-1&&(te=P);else if(te>-1){for(re=te;re<P;re++)R[re]=Y;te=-1}Z[P]==="B"&&(R[P]=0),W.hiLevel|=Y}a&&function(le,ce,pe){for(var ye=0;ye<pe;ye++)if(le[ye]==="S"){ce[ye]=N;for(var xe=ye-1;xe>=0&&le[xe]==="WS";xe--)ce[xe]=N}}(Z,R,j)},O=function(T,R,W,K,re){if(!(re.hiLevel<T)){if(T===1&&N===1&&!r)return R.reverse(),void(W&&W.reverse());for(var P,Y,J,te,j=R.length,ue=0;ue<j;){if(K[ue]>=T){for(J=ue+1;J<j&&K[J]>=T;)J++;for(te=ue,Y=J-1;te<Y;te++,Y--)P=R[te],R[te]=R[Y],R[Y]=P,W&&(P=W[te],W[te]=W[Y],W[Y]=P);ue=J}ue++}}},z=function(T,R,W){var K=T.split(""),re={hiLevel:N};return W||(W=[]),U(K,W,re),function(P,Y,J){if(J.hiLevel!==0&&h)for(var te,j=0;j<P.length;j++)Y[j]===1&&(te=v.indexOf(P[j]))>=0&&(P[j]=v[te+1])}(K,W,re),O(2,K,R,W,re),O(1,K,R,W,re),K.join("")};return this.__bidiEngine__.doBidiReorder=function(T,R,W){if(function(re,P){if(P)for(var Y=0;Y<re.length;Y++)P[Y]=Y;o===void 0&&(o=L(re)),u===void 0&&(u=L(re))}(T,R),i||!l||u)if(i&&l&&o^u)N=o?1:0,T=H(T,R,W);else if(!i&&l&&u)N=o?1:0,T=z(T,R,W),T=H(T,R);else if(!i||o||l||u){if(i&&!l&&o^u)T=H(T,R),o?(N=0,T=z(T,R,W)):(N=1,T=z(T,R,W),T=H(T,R));else if(i&&o&&!l&&u)N=1,T=z(T,R,W),T=H(T,R);else if(!i&&!l&&o^u){var K=h;o?(N=1,T=z(T,R,W),N=0,h=!1,T=z(T,R,W),h=K):(N=0,T=z(T,R,W),T=H(T,R),N=1,h=!1,T=z(T,R,W),h=K,T=H(T,R))}}else N=0,T=z(T,R,W);else N=o?1:0,T=z(T,R,W);return T},this.__bidiEngine__.setOptions=function(T){T&&(i=T.isInputVisual,l=T.isOutputVisual,o=T.isInputRtl,u=T.isOutputRtl,h=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var r=s.text;s.x,s.y;var a=s.options||{};s.mutex,a.lang;var i=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(r)==="[object Array]"){var o=0;for(i=[],o=0;o<r.length;o+=1)Object.prototype.toString.call(r[o])==="[object Array]"?i.push([t.doBidiReorder(r[o][0]),r[o][1],r[o][2]]):i.push([t.doBidiReorder(r[o])]);s.text=i}else s.text=t.doBidiReorder(r);t.setOptions({isInputVisual:!0})}])}(Vt),Vt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Zc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new p7(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new t7(this.contents),this.head=new s7(this),this.name=new l7(this),this.cmap=new yD(this),this.toUnicode={},this.hhea=new r7(this),this.maxp=new A7(this),this.hmtx=new u7(this),this.post=new i7(this),this.os2=new a7(this),this.loca=new d7(this),this.glyf=new c7(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,s,r,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,u;for(u=[],i=0,o=(l=this.bbox).length;i<o;i++)e=l[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(s=255&(r=this.post.italic_angle),(32768&(t=r>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,s){var r,a,i,o;for(i=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)r=e.charCodeAt(a),i+=this.widthOfGlyph(this.characterToGlyph(r))+s*(1e3/t)||0;return i*(t/1e3)},n.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},n}();var Rl,Zc=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(e){var t,s,r;for(r=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,s,r,a,i,o,l;return e=this.readByte(),t=this.readByte(),s=this.readByte(),r=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^r)+16777216*(255^a)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*r+16777216*a+65536*i+256*o+l},n.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},n.prototype.write=function(e){var t,s,r,a;for(a=[],s=0,r=e.length;s<r;s++)t=e[s],a.push(this.writeByte(t));return a},n}(),t7=function(){var n;function e(t){var s,r,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},r=0,a=this.tableCount;0<=a?r<a:r>a;r=0<=a?++r:--r)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,r,a,i,o,l,u,h,f,d,m,g,w;for(w in m=Object.keys(t).length,l=Math.log(2),f=16*Math.floor(Math.log(m)/l),i=Math.floor(f/l),h=16*m-f,(r=new Zc).writeInt(this.scalarType),r.writeShort(m),r.writeShort(f),r.writeShort(i),r.writeShort(h),a=16*m,u=r.pos+a,o=null,g=[],t)for(d=t[w],r.writeString(w),r.writeInt(n(d)),r.writeInt(u),r.writeInt(d.length),g=g.concat(d),w==="head"&&(o=u),u+=d.length;u%4;)g.push(0),u++;return r.write(g),s=2981146554-n(r.data),r.pos=o+8,r.writeUInt32(s),r.data},n=function(t){var s,r,a,i;for(t=wD.call(t);t.length%4;)t.push(0);for(a=new Zc(t),r=0,s=0,i=t.length;s<i;s=s+=4)r+=a.readUInt32();return 4294967295&r},e}(),n7={}.hasOwnProperty,_A=function(n,e){for(var t in e)n7.call(e,t)&&(n[t]=e[t]);function s(){this.constructor=n}return s.prototype=e.prototype,n.prototype=new s,n.__super__=e.prototype,n};Rl=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var s7=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return _A(e,Rl),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var s;return(s=new Zc).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(t),s.writeShort(this.glyphDataFormat),s.data},e}(),_F=function(){function n(e,t){var s,r,a,i,o,l,u,h,f,d,m,g,w,v,b,C,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),d=m/2,e.pos+=6,a=function(){var I,L;for(L=[],l=I=0;0<=d?I<d:I>d;l=0<=d?++I:--I)L.push(e.readUInt16());return L}(),e.pos+=2,w=function(){var I,L;for(L=[],l=I=0;0<=d?I<d:I>d;l=0<=d?++I:--I)L.push(e.readUInt16());return L}(),u=function(){var I,L;for(L=[],l=I=0;0<=d?I<d:I>d;l=0<=d?++I:--I)L.push(e.readUInt16());return L}(),h=function(){var I,L;for(L=[],l=I=0;0<=d?I<d:I>d;l=0<=d?++I:--I)L.push(e.readUInt16());return L}(),r=(this.length-e.pos+this.offset)/2,o=function(){var I,L;for(L=[],l=I=0;0<=r?I<r:I>r;l=0<=r?++I:--I)L.push(e.readUInt16());return L}(),l=b=0,N=a.length;b<N;l=++b)for(v=a[l],s=C=g=w[l];g<=v?C<=v:C>=v;s=g<=v?++C:--C)h[l]===0?i=s+u[l]:(i=o[h[l]/2+(s-g)-(d-l)]||0)!==0&&(i+=u[l]),this.codeMap[s]=65535&i}e.pos=f}return n.encode=function(e,t){var s,r,a,i,o,l,u,h,f,d,m,g,w,v,b,C,N,I,L,$,H,U,O,z,T,R,W,K,re,P,Y,J,te,j,ue,Q,V,Z,le,ce,pe,ye,xe,Me,ze,We;switch(K=new Zc,i=Object.keys(e).sort(function(tt,dt){return tt-dt}),t){case"macroman":for(w=0,v=function(){var tt=[];for(g=0;g<256;++g)tt.push(0);return tt}(),C={0:0},a={},re=0,te=i.length;re<te;re++)C[xe=e[r=i[re]]]==null&&(C[xe]=++w),a[r]={old:e[r],new:C[e[r]]},v[r]=C[e[r]];return K.writeUInt16(1),K.writeUInt16(0),K.writeUInt32(12),K.writeUInt16(0),K.writeUInt16(262),K.writeUInt16(0),K.write(v),{charMap:a,subtable:K.data,maxGlyphID:w+1};case"unicode":for(R=[],f=[],N=0,C={},s={},b=u=null,P=0,j=i.length;P<j;P++)C[L=e[r=i[P]]]==null&&(C[L]=++N),s[r]={old:L,new:C[L]},o=C[L]-r,b!=null&&o===u||(b&&f.push(b),R.push(r),u=o),b=r;for(b&&f.push(b),f.push(65535),R.push(65535),z=2*(O=R.length),U=2*Math.pow(Math.log(O)/Math.LN2,2),d=Math.log(U/2)/Math.LN2,H=2*O-U,l=[],$=[],m=[],g=Y=0,ue=R.length;Y<ue;g=++Y){if(T=R[g],h=f[g],T===65535){l.push(0),$.push(0);break}if(T-(W=s[T].new)>=32768)for(l.push(0),$.push(2*(m.length+O-g)),r=J=T;T<=h?J<=h:J>=h;r=T<=h?++J:--J)m.push(s[r].new);else l.push(W-T),$.push(0)}for(K.writeUInt16(3),K.writeUInt16(1),K.writeUInt32(12),K.writeUInt16(4),K.writeUInt16(16+8*O+2*m.length),K.writeUInt16(0),K.writeUInt16(z),K.writeUInt16(U),K.writeUInt16(d),K.writeUInt16(H),pe=0,Q=f.length;pe<Q;pe++)r=f[pe],K.writeUInt16(r);for(K.writeUInt16(0),ye=0,V=R.length;ye<V;ye++)r=R[ye],K.writeUInt16(r);for(Me=0,Z=l.length;Me<Z;Me++)o=l[Me],K.writeUInt16(o);for(ze=0,le=$.length;ze<le;ze++)I=$[ze],K.writeUInt16(I);for(We=0,ce=m.length;We<ce;We++)w=m[We],K.writeUInt16(w);return{charMap:s,subtable:K.data,maxGlyphID:N+1}}},n}(),yD=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return _A(e,Rl),e.prototype.tag="cmap",e.prototype.parse=function(t){var s,r,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=a?r<a:r>a;r=0<=a?++r:--r)s=new _F(t,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},e.encode=function(t,s){var r,a;return s==null&&(s="macroman"),r=_F.encode(t,s),(a=new Zc).writeUInt16(0),a.writeUInt16(1),r.table=a.data.concat(r.subtable),r},e}(),r7=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return _A(e,Rl),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),a7=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return _A(e,Rl),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var s,r;for(r=[],s=0;s<10;++s)r.push(t.readByte());return r}(),this.charRange=function(){var s,r;for(r=[],s=0;s<4;++s)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var s,r;for(r=[],s=0;s<2;s=++s)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),i7=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return _A(e,Rl),e.prototype.tag="post",e.prototype.parse=function(t){var s,r,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var i;for(r=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)s=t.readByte(),a.push(this.names.push(t.readString(s)));return a;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)u.push(t.readUInt32());return u}).call(this)}},e}(),o7=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},l7=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return _A(e,Rl),e.prototype.tag="name",e.prototype.parse=function(t){var s,r,a,i,o,l,u,h,f,d,m;for(t.pos=this.offset,t.readShort(),s=t.readShort(),l=t.readShort(),r=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(u={},i=f=0,d=r.length;f<d;i=++f)a=r[i],t.pos=a.offset,h=t.readString(a.length),o=new o7(h,a),u[m=a.nameID]==null&&(u[m]=[]),u[a.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),A7=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return _A(e,Rl),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),u7=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return _A(e,Rl),e.prototype.tag="hmtx",e.prototype.parse=function(t){var s,r,a,i,o,l,u;for(t.pos=this.offset,this.metrics=[],s=0,l=this.file.hhea.numberOfMetrics;0<=l?s<l:s>l;s=0<=l?++s:--s)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,f;for(f=[],s=h=0;0<=a?h<a:h>a;s=0<=a?++h:--h)f.push(t.readInt16());return f}(),this.widths=(function(){var h,f,d,m;for(m=[],h=0,f=(d=this.metrics).length;h<f;h++)i=d[h],m.push(i.advance);return m}).call(this),r=this.widths[this.widths.length-1],u=[],s=o=0;0<=a?o<a:o>a;s=0<=a?++o:--o)u.push(this.widths.push(r));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),wD=[].slice,c7=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return _A(e,Rl),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var s,r,a,i,o,l,u,h,f,d;return t in this.cache?this.cache[t]:(i=this.file.loca,s=this.file.contents,r=i.indexOf(t),(a=i.lengthOf(t))===0?this.cache[t]=null:(s.pos=this.offset+r,o=(l=new Zc(s.read(a))).readShort(),h=l.readShort(),d=l.readShort(),u=l.readShort(),f=l.readShort(),this.cache[t]=o===-1?new f7(l,h,d,u,f):new h7(l,o,h,d,u,f),this.cache[t]))},e.prototype.encode=function(t,s,r){var a,i,o,l,u;for(o=[],i=[],l=0,u=s.length;l<u;l++)a=t[s[l]],i.push(o.length),a&&(o=o.concat(a.encode(r)));return i.push(o.length),{table:o,offsets:i}},e}(),h7=function(){function n(e,t,s,r,a,i){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=r,this.xMax=a,this.yMax=i,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),f7=function(){function n(e,t,s,r,a){var i,o;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=r,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return n.prototype.encode=function(){var e,t,s;for(t=new Zc(wD.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),d7=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return _A(e,Rl),e.prototype.tag="loca",e.prototype.parse=function(t){var s,r;return t.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var a,i;for(i=[],r=0,a=this.length;r<a;r+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],r=0,a=this.length;r<a;r+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,s){for(var r=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<r.length;++o)if(r[o]=a,i<s.length&&s[i]==o){++i,r[o]=a;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(a+=u)}for(var h=new Array(4*r.length),f=0;f<r.length;++f)h[4*f+3]=255&r[f],h[4*f+2]=(65280&r[f])>>8,h[4*f+1]=(16711680&r[f])>>16,h[4*f]=(4278190080&r[f])>>24;return h},e}(),p7=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,s,r,a;for(t in r=this.font.cmap.tables[0].codeMap,e={},a=this.subset)s=a[t],e[t]=r[s];return e},n.prototype.glyphsFor=function(e){var t,s,r,a,i,o,l;for(r={},i=0,o=e.length;i<o;i++)r[a=e[i]]=this.font.glyf.glyphFor(a);for(a in t=[],r)(s=r[a])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(a in l=this.glyphsFor(t))s=l[a],r[a]=s;return r},n.prototype.encode=function(e,t){var s,r,a,i,o,l,u,h,f,d,m,g,w,v,b;for(r in s=yD.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),m={0:0},b=s.charMap)m[(l=b[r]).old]=l.new;for(g in d=s.maxGlyphID,i)g in m||(m[g]=d++);return h=function(C){var N,I;for(N in I={},C)I[C[N]]=N;return I}(m),f=Object.keys(h).sort(function(C,N){return C-N}),w=function(){var C,N,I;for(I=[],C=0,N=f.length;C<N;C++)o=f[C],I.push(h[o]);return I}(),a=this.font.glyf.encode(i,w,m),u=this.font.loca.encode(a.offsets,w),v={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},n}();Vt.API.PDFObject=function(){var n;function e(){}return n=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,r,a,i;if(Array.isArray(t))return"["+function(){var o,l,u;for(u=[],o=0,l=t.length;o<l;o++)s=t[o],u.push(e.convert(s));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(r in a=["<<"],t)i=t[r],a.push("/"+r+" "+e.convert(i));return a.push(">>"),a.join(`
`)}return""+t},e}();/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var aB=function(n,e){return aB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])},aB(n,e)};function $l(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");aB(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var iB=function(){return iB=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},iB.apply(this,arguments)};function ti(n,e,t,s){function r(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(h){try{u(s.next(h))}catch(f){i(f)}}function l(h){try{u(s.throw(h))}catch(f){i(f)}}function u(h){h.done?a(h.value):r(h.value).then(o,l)}u((s=s.apply(n,[])).next())})}function La(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,r,a,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(h){return l([u,h])}}function l(u){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,r&&(a=u[0]&2?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,r=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(h){u=[6,h],r=0}finally{s=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function By(n,e,t){if(arguments.length===2)for(var s=0,r=e.length,a;s<r;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return n.concat(a||e)}var Tu=function(){function n(e,t,s,r){this.left=e,this.top=t,this.width=s,this.height=r}return n.prototype.add=function(e,t,s,r){return new n(this.left+e,this.top+t,this.width+s,this.height+r)},n.fromClientRect=function(e,t){return new n(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},n.fromDOMRectList=function(e,t){var s=Array.from(t).find(function(r){return r.width!==0});return s?new n(s.left+e.windowBounds.left,s.top+e.windowBounds.top,s.width,s.height):n.EMPTY},n.EMPTY=new n(0,0,0,0),n}(),kw=function(n,e){return Tu.fromClientRect(n,e.getBoundingClientRect())},m7=function(n){var e=n.body,t=n.documentElement;if(!e||!t)throw new Error("Unable to get document size");var s=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),r=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new Tu(0,0,s,r)},Fw=function(n){for(var e=[],t=0,s=n.length;t<s;){var r=n.charCodeAt(t++);if(r>=55296&&r<=56319&&t<s){var a=n.charCodeAt(t++);(a&64512)===56320?e.push(((r&1023)<<10)+(a&1023)+65536):(e.push(r),t--)}else e.push(r)}return e},ur=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var s=[],r=-1,a="";++r<t;){var i=n[r];i<=65535?s.push(i):(i-=65536,s.push((i>>10)+55296,i%1024+56320)),(r+1===t||s.length>16384)&&(a+=String.fromCharCode.apply(String,s),s.length=0)}return a},OF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g7=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Sy=0;Sy<OF.length;Sy++)g7[OF.charCodeAt(Sy)]=Sy;var QF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",og=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ny=0;Ny<QF.length;Ny++)og[QF.charCodeAt(Ny)]=Ny;var y7=function(n){var e=n.length*.75,t=n.length,s,r=0,a,i,o,l;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),h=Array.isArray(u)?u:new Uint8Array(u);for(s=0;s<t;s+=4)a=og[n.charCodeAt(s)],i=og[n.charCodeAt(s+1)],o=og[n.charCodeAt(s+2)],l=og[n.charCodeAt(s+3)],h[r++]=a<<2|i>>4,h[r++]=(i&15)<<4|o>>2,h[r++]=(o&3)<<6|l&63;return u},w7=function(n){for(var e=n.length,t=[],s=0;s<e;s+=2)t.push(n[s+1]<<8|n[s]);return t},b7=function(n){for(var e=n.length,t=[],s=0;s<e;s+=4)t.push(n[s+3]<<24|n[s+2]<<16|n[s+1]<<8|n[s]);return t},Cf=5,HS=11,eC=2,x7=HS-Cf,bD=65536>>Cf,v7=1<<Cf,tC=v7-1,C7=1024>>Cf,B7=bD+C7,S7=B7,N7=32,I7=S7+N7,E7=65536>>HS,k7=1<<x7,F7=k7-1,MF=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},T7=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},D7=function(n,e){var t=y7(n),s=Array.isArray(t)?b7(t):new Uint32Array(t),r=Array.isArray(t)?w7(t):new Uint16Array(t),a=24,i=MF(r,a/2,s[4]/2),o=s[5]===2?MF(r,(a+s[4])/2):T7(s,Math.ceil((a+s[4])/4));return new L7(s[0],s[1],s[2],s[3],i,o)},L7=function(){function n(e,t,s,r,a,i){this.initialValue=e,this.errorValue=t,this.highStart=s,this.highValueIndex=r,this.index=a,this.data=i}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Cf],t=(t<<eC)+(e&tC),this.data[t];if(e<=65535)return t=this.index[bD+(e-55296>>Cf)],t=(t<<eC)+(e&tC),this.data[t];if(e<this.highStart)return t=I7-E7+(e>>HS),t=this.index[t],t+=e>>Cf&F7,t=this.index[t],t=(t<<eC)+(e&tC),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),HF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U7=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Iy=0;Iy<HF.length;Iy++)U7[HF.charCodeAt(Iy)]=Iy;var R7="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",PF=50,$7=1,xD=2,vD=3,_7=4,O7=5,zF=7,CD=8,jF=9,Qc=10,oB=11,VF=12,lB=13,Q7=14,lg=15,AB=16,Ey=17,Jm=18,M7=19,GF=20,uB=21,Zm=22,nC=23,Pd=24,Yi=25,Ag=26,ug=27,zd=28,H7=29,df=30,P7=31,ky=32,Fy=33,cB=34,hB=35,fB=36,Tg=37,dB=38,g2=39,y2=40,sC=41,BD=42,z7=43,j7=[9001,65288],SD="!",Sn="",Ty="",pB=D7(R7),bu=[df,fB],mB=[$7,xD,vD,O7],ND=[Qc,CD],KF=[ug,Ag],V7=mB.concat(ND),WF=[dB,g2,y2,cB,hB],G7=[lg,lB],K7=function(n,e){e===void 0&&(e="strict");var t=[],s=[],r=[];return n.forEach(function(a,i){var o=pB.get(a);if(o>PF?(r.push(!0),o-=PF):r.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return s.push(i),t.push(AB);if(o===_7||o===oB){if(i===0)return s.push(i),t.push(df);var l=t[i-1];return V7.indexOf(l)===-1?(s.push(s[i-1]),t.push(l)):(s.push(i),t.push(df))}if(s.push(i),o===P7)return t.push(e==="strict"?uB:Tg);if(o===BD||o===H7)return t.push(df);if(o===z7)return a>=131072&&a<=196605||a>=196608&&a<=262141?t.push(Tg):t.push(df);t.push(o)}),[s,t,r]},rC=function(n,e,t,s){var r=s[t];if(Array.isArray(n)?n.indexOf(r)!==-1:n===r)for(var a=t;a<=s.length;){a++;var i=s[a];if(i===e)return!0;if(i!==Qc)break}if(r===Qc)for(var a=t;a>0;){a--;var o=s[a];if(Array.isArray(n)?n.indexOf(o)!==-1:n===o)for(var l=t;l<=s.length;){l++;var i=s[l];if(i===e)return!0;if(i!==Qc)break}if(o!==Qc)break}return!1},qF=function(n,e){for(var t=n;t>=0;){var s=e[t];if(s===Qc)t--;else return s}return 0},W7=function(n,e,t,s,r){if(t[s]===0)return Sn;var a=s-1;if(Array.isArray(r)&&r[a]===!0)return Sn;var i=a-1,o=a+1,l=e[a],u=i>=0?e[i]:0,h=e[o];if(l===xD&&h===vD)return Sn;if(mB.indexOf(l)!==-1)return SD;if(mB.indexOf(h)!==-1||ND.indexOf(h)!==-1)return Sn;if(qF(a,e)===CD)return Ty;if(pB.get(n[a])===oB||(l===ky||l===Fy)&&pB.get(n[o])===oB||l===zF||h===zF||l===jF||[Qc,lB,lg].indexOf(l)===-1&&h===jF||[Ey,Jm,M7,Pd,zd].indexOf(h)!==-1||qF(a,e)===Zm||rC(nC,Zm,a,e)||rC([Ey,Jm],uB,a,e)||rC(VF,VF,a,e))return Sn;if(l===Qc)return Ty;if(l===nC||h===nC)return Sn;if(h===AB||l===AB)return Ty;if([lB,lg,uB].indexOf(h)!==-1||l===Q7||u===fB&&G7.indexOf(l)!==-1||l===zd&&h===fB||h===GF||bu.indexOf(h)!==-1&&l===Yi||bu.indexOf(l)!==-1&&h===Yi||l===ug&&[Tg,ky,Fy].indexOf(h)!==-1||[Tg,ky,Fy].indexOf(l)!==-1&&h===Ag||bu.indexOf(l)!==-1&&KF.indexOf(h)!==-1||KF.indexOf(l)!==-1&&bu.indexOf(h)!==-1||[ug,Ag].indexOf(l)!==-1&&(h===Yi||[Zm,lg].indexOf(h)!==-1&&e[o+1]===Yi)||[Zm,lg].indexOf(l)!==-1&&h===Yi||l===Yi&&[Yi,zd,Pd].indexOf(h)!==-1)return Sn;if([Yi,zd,Pd,Ey,Jm].indexOf(h)!==-1)for(var f=a;f>=0;){var d=e[f];if(d===Yi)return Sn;if([zd,Pd].indexOf(d)!==-1)f--;else break}if([ug,Ag].indexOf(h)!==-1)for(var f=[Ey,Jm].indexOf(l)!==-1?i:a;f>=0;){var d=e[f];if(d===Yi)return Sn;if([zd,Pd].indexOf(d)!==-1)f--;else break}if(dB===l&&[dB,g2,cB,hB].indexOf(h)!==-1||[g2,cB].indexOf(l)!==-1&&[g2,y2].indexOf(h)!==-1||[y2,hB].indexOf(l)!==-1&&h===y2||WF.indexOf(l)!==-1&&[GF,Ag].indexOf(h)!==-1||WF.indexOf(h)!==-1&&l===ug||bu.indexOf(l)!==-1&&bu.indexOf(h)!==-1||l===Pd&&bu.indexOf(h)!==-1||bu.concat(Yi).indexOf(l)!==-1&&h===Zm&&j7.indexOf(n[o])===-1||bu.concat(Yi).indexOf(h)!==-1&&l===Jm)return Sn;if(l===sC&&h===sC){for(var m=t[a],g=1;m>0&&(m--,e[m]===sC);)g++;if(g%2!==0)return Sn}return l===ky&&h===Fy?Sn:Ty},q7=function(n,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=K7(n,e.lineBreak),s=t[0],r=t[1],a=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(r=r.map(function(o){return[Yi,df,BD].indexOf(o)!==-1?Tg:o}));var i=e.wordBreak==="keep-all"?a.map(function(o,l){return o&&n[l]>=19968&&n[l]<=40959}):void 0;return[s,r,i]},X7=function(){function n(e,t,s,r){this.codePoints=e,this.required=t===SD,this.start=s,this.end=r}return n.prototype.slice=function(){return ur.apply(void 0,this.codePoints.slice(this.start,this.end))},n}(),Y7=function(n,e){var t=Fw(n),s=q7(t,e),r=s[0],a=s[1],i=s[2],o=t.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var h=Sn;u<o&&(h=W7(t,a,r,++u,i))===Sn;);if(h!==Sn||u===o){var f=new X7(t,h,l,u);return l=u,{value:f,done:!1}}return{done:!0,value:null}}}},J7=1,Z7=2,Jg=4,XF=8,O2=10,YF=47,vg=92,ej=9,tj=32,Dy=34,eg=61,nj=35,sj=36,rj=37,Ly=39,Uy=40,tg=41,aj=95,bi=45,ij=33,oj=60,lj=62,Aj=64,uj=91,cj=93,hj=61,fj=123,Ry=63,dj=125,JF=124,pj=126,mj=128,ZF=65533,aC=42,wf=43,gj=44,yj=58,wj=59,Dg=46,bj=0,xj=8,vj=11,Cj=14,Bj=31,Sj=127,wA=-1,ID=48,ED=97,kD=101,Nj=102,Ij=117,Ej=122,FD=65,TD=69,DD=70,kj=85,Fj=90,Ua=function(n){return n>=ID&&n<=57},Tj=function(n){return n>=55296&&n<=57343},jd=function(n){return Ua(n)||n>=FD&&n<=DD||n>=ED&&n<=Nj},Dj=function(n){return n>=ED&&n<=Ej},Lj=function(n){return n>=FD&&n<=Fj},Uj=function(n){return Dj(n)||Lj(n)},Rj=function(n){return n>=mj},$y=function(n){return n===O2||n===ej||n===tj},Q2=function(n){return Uj(n)||Rj(n)||n===aj},eT=function(n){return Q2(n)||Ua(n)||n===bi},$j=function(n){return n>=bj&&n<=xj||n===vj||n>=Cj&&n<=Bj||n===Sj},$c=function(n,e){return n!==vg?!1:e!==O2},_y=function(n,e,t){return n===bi?Q2(e)||$c(e,t):Q2(n)?!0:!!(n===vg&&$c(n,e))},iC=function(n,e,t){return n===wf||n===bi?Ua(e)?!0:e===Dg&&Ua(t):Ua(n===Dg?e:n)},_j=function(n){var e=0,t=1;(n[e]===wf||n[e]===bi)&&(n[e]===bi&&(t=-1),e++);for(var s=[];Ua(n[e]);)s.push(n[e++]);var r=s.length?parseInt(ur.apply(void 0,s),10):0;n[e]===Dg&&e++;for(var a=[];Ua(n[e]);)a.push(n[e++]);var i=a.length,o=i?parseInt(ur.apply(void 0,a),10):0;(n[e]===TD||n[e]===kD)&&e++;var l=1;(n[e]===wf||n[e]===bi)&&(n[e]===bi&&(l=-1),e++);for(var u=[];Ua(n[e]);)u.push(n[e++]);var h=u.length?parseInt(ur.apply(void 0,u),10):0;return t*(r+o*Math.pow(10,-i))*Math.pow(10,l*h)},Oj={type:2},Qj={type:3},Mj={type:4},Hj={type:13},Pj={type:8},zj={type:21},jj={type:9},Vj={type:10},Gj={type:11},Kj={type:12},Wj={type:14},Oy={type:23},qj={type:1},Xj={type:25},Yj={type:24},Jj={type:26},Zj={type:27},eV={type:28},tV={type:29},nV={type:31},gB={type:32},LD=function(){function n(){this._value=[]}return n.prototype.write=function(e){this._value=this._value.concat(Fw(e))},n.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==gB;)e.push(t),t=this.consumeToken();return e},n.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Dy:return this.consumeStringToken(Dy);case nj:var t=this.peekCodePoint(0),s=this.peekCodePoint(1),r=this.peekCodePoint(2);if(eT(t)||$c(s,r)){var a=_y(t,s,r)?Z7:J7,i=this.consumeName();return{type:5,value:i,flags:a}}break;case sj:if(this.peekCodePoint(0)===eg)return this.consumeCodePoint(),Hj;break;case Ly:return this.consumeStringToken(Ly);case Uy:return Oj;case tg:return Qj;case aC:if(this.peekCodePoint(0)===eg)return this.consumeCodePoint(),Wj;break;case wf:if(iC(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case gj:return Mj;case bi:var o=e,l=this.peekCodePoint(0),u=this.peekCodePoint(1);if(iC(o,l,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(_y(o,l,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===bi&&u===lj)return this.consumeCodePoint(),this.consumeCodePoint(),Yj;break;case Dg:if(iC(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case YF:if(this.peekCodePoint(0)===aC)for(this.consumeCodePoint();;){var h=this.consumeCodePoint();if(h===aC&&(h=this.consumeCodePoint(),h===YF))return this.consumeToken();if(h===wA)return this.consumeToken()}break;case yj:return Jj;case wj:return Zj;case oj:if(this.peekCodePoint(0)===ij&&this.peekCodePoint(1)===bi&&this.peekCodePoint(2)===bi)return this.consumeCodePoint(),this.consumeCodePoint(),Xj;break;case Aj:var f=this.peekCodePoint(0),d=this.peekCodePoint(1),m=this.peekCodePoint(2);if(_y(f,d,m)){var i=this.consumeName();return{type:7,value:i}}break;case uj:return eV;case vg:if($c(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case cj:return tV;case hj:if(this.peekCodePoint(0)===eg)return this.consumeCodePoint(),Pj;break;case fj:return Gj;case dj:return Kj;case Ij:case kj:var g=this.peekCodePoint(0),w=this.peekCodePoint(1);return g===wf&&(jd(w)||w===Ry)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case JF:if(this.peekCodePoint(0)===eg)return this.consumeCodePoint(),jj;if(this.peekCodePoint(0)===JF)return this.consumeCodePoint(),zj;break;case pj:if(this.peekCodePoint(0)===eg)return this.consumeCodePoint(),Vj;break;case wA:return gB}return $y(e)?(this.consumeWhiteSpace(),nV):Ua(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Q2(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ur(e)}},n.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},n.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},n.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},n.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();jd(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var s=!1;t===Ry&&e.length<6;)e.push(t),t=this.consumeCodePoint(),s=!0;if(s){var r=parseInt(ur.apply(void 0,e.map(function(l){return l===Ry?ID:l})),16),a=parseInt(ur.apply(void 0,e.map(function(l){return l===Ry?DD:l})),16);return{type:30,start:r,end:a}}var i=parseInt(ur.apply(void 0,e),16);if(this.peekCodePoint(0)===bi&&jd(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var o=[];jd(t)&&o.length<6;)o.push(t),t=this.consumeCodePoint();var a=parseInt(ur.apply(void 0,o),16);return{type:30,start:i,end:a}}else return{type:30,start:i,end:i}},n.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Uy?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Uy?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},n.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===wA)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===Ly||t===Dy){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===wA||this.peekCodePoint(0)===tg)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),Oy)}for(;;){var r=this.consumeCodePoint();if(r===wA||r===tg)return{type:22,value:ur.apply(void 0,e)};if($y(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===wA||this.peekCodePoint(0)===tg?(this.consumeCodePoint(),{type:22,value:ur.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Oy);if(r===Dy||r===Ly||r===Uy||$j(r))return this.consumeBadUrlRemnants(),Oy;if(r===vg)if($c(r,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Oy;else e.push(r)}},n.prototype.consumeWhiteSpace=function(){for(;$y(this.peekCodePoint(0));)this.consumeCodePoint()},n.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===tg||e===wA)return;$c(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},n.prototype.consumeStringSlice=function(e){for(var t=5e4,s="";e>0;){var r=Math.min(t,e);s+=ur.apply(void 0,this._value.splice(0,r)),e-=r}return this._value.shift(),s},n.prototype.consumeStringToken=function(e){var t="",s=0;do{var r=this._value[s];if(r===wA||r===void 0||r===e)return t+=this.consumeStringSlice(s),{type:0,value:t};if(r===O2)return this._value.splice(0,s),qj;if(r===vg){var a=this._value[s+1];a!==wA&&a!==void 0&&(a===O2?(t+=this.consumeStringSlice(s),s=-1,this._value.shift()):$c(r,a)&&(t+=this.consumeStringSlice(s),t+=ur(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},n.prototype.consumeNumber=function(){var e=[],t=Jg,s=this.peekCodePoint(0);for((s===wf||s===bi)&&e.push(this.consumeCodePoint());Ua(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(s===Dg&&Ua(r))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=XF;Ua(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0),r=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((s===TD||s===kD)&&((r===wf||r===bi)&&Ua(a)||Ua(r)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=XF;Ua(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[_j(e),t]},n.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],s=e[1],r=this.peekCodePoint(0),a=this.peekCodePoint(1),i=this.peekCodePoint(2);if(_y(r,a,i)){var o=this.consumeName();return{type:15,number:t,flags:s,unit:o}}return r===rj?(this.consumeCodePoint(),{type:16,number:t,flags:s}):{type:17,number:t,flags:s}},n.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(jd(e)){for(var t=ur(e);jd(this.peekCodePoint(0))&&t.length<6;)t+=ur(this.consumeCodePoint());$y(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(t,16);return s===0||Tj(s)||s>1114111?ZF:s}return e===wA?ZF:e},n.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(eT(t))e+=ur(t);else if($c(t,this.peekCodePoint(0)))e+=ur(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},n}(),UD=function(){function n(e){this._tokens=e}return n.create=function(e){var t=new LD;return t.write(e),new n(t.read())},n.parseValue=function(e){return n.create(e).parseComponentValue()},n.parseValues=function(e){return n.create(e).parseComponentValues()},n.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},n.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},n.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},n.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},s=this.consumeToken();;){if(s.type===32||rV(s,e))return t;this.reconsumeToken(s),t.values.push(this.consumeComponentValue()),s=this.consumeToken()}},n.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return t;this.reconsumeToken(s),t.values.push(this.consumeComponentValue())}},n.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?gB:e},n.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},n}(),Zg=function(n){return n.type===15},_p=function(n){return n.type===17},ss=function(n){return n.type===20},sV=function(n){return n.type===0},yB=function(n,e){return ss(n)&&n.value===e},RD=function(n){return n.type!==31},bp=function(n){return n.type!==31&&n.type!==4},OA=function(n){var e=[],t=[];return n.forEach(function(s){if(s.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}s.type!==31&&t.push(s)}),t.length&&e.push(t),e},rV=function(n,e){return e===11&&n.type===12||e===28&&n.type===29?!0:e===2&&n.type===3},eh=function(n){return n.type===17||n.type===15},Cr=function(n){return n.type===16||eh(n)},$D=function(n){return n.length>1?[n[0],n[1]]:[n[0]]},da={type:17,number:0,flags:Jg},PS={type:16,number:50,flags:Jg},Mc={type:16,number:100,flags:Jg},cg=function(n,e,t){var s=n[0],r=n[1];return[ds(s,e),ds(typeof r<"u"?r:s,t)]},ds=function(n,e){if(n.type===16)return n.number/100*e;if(Zg(n))switch(n.unit){case"rem":case"em":return 16*n.number;case"px":default:return n.number}return n.number},_D="deg",OD="grad",QD="rad",MD="turn",Tw={name:"angle",parse:function(n,e){if(e.type===15)switch(e.unit){case _D:return Math.PI*e.number/180;case OD:return Math.PI/200*e.number;case QD:return e.number;case MD:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},HD=function(n){return n.type===15&&(n.unit===_D||n.unit===OD||n.unit===QD||n.unit===MD)},PD=function(n){var e=n.filter(ss).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[da,da];case"to top":case"bottom":return ko(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[da,Mc];case"to right":case"left":return ko(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Mc,Mc];case"to bottom":case"top":return ko(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Mc,da];case"to left":case"right":return ko(270)}return 0},ko=function(n){return Math.PI*n/180},Gc={name:"color",parse:function(n,e){if(e.type===18){var t=aV[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(n,e.values)}if(e.type===5){if(e.value.length===3){var s=e.value.substring(0,1),r=e.value.substring(1,2),a=e.value.substring(2,3);return Hc(parseInt(s+s,16),parseInt(r+r,16),parseInt(a+a,16),1)}if(e.value.length===4){var s=e.value.substring(0,1),r=e.value.substring(1,2),a=e.value.substring(2,3),i=e.value.substring(3,4);return Hc(parseInt(s+s,16),parseInt(r+r,16),parseInt(a+a,16),parseInt(i+i,16)/255)}if(e.value.length===6){var s=e.value.substring(0,2),r=e.value.substring(2,4),a=e.value.substring(4,6);return Hc(parseInt(s,16),parseInt(r,16),parseInt(a,16),1)}if(e.value.length===8){var s=e.value.substring(0,2),r=e.value.substring(2,4),a=e.value.substring(4,6),i=e.value.substring(6,8);return Hc(parseInt(s,16),parseInt(r,16),parseInt(a,16),parseInt(i,16)/255)}}if(e.type===20){var o=Iu[e.value.toUpperCase()];if(typeof o<"u")return o}return Iu.TRANSPARENT}},Kc=function(n){return(255&n)===0},Xr=function(n){var e=255&n,t=255&n>>8,s=255&n>>16,r=255&n>>24;return e<255?"rgba("+r+","+s+","+t+","+e/255+")":"rgb("+r+","+s+","+t+")"},Hc=function(n,e,t,s){return(n<<24|e<<16|t<<8|Math.round(s*255)<<0)>>>0},tT=function(n,e){if(n.type===17)return n.number;if(n.type===16){var t=e===3?1:255;return e===3?n.number/100*t:Math.round(n.number/100*t)}return 0},nT=function(n,e){var t=e.filter(bp);if(t.length===3){var s=t.map(tT),r=s[0],a=s[1],i=s[2];return Hc(r,a,i,1)}if(t.length===4){var o=t.map(tT),r=o[0],a=o[1],i=o[2],l=o[3];return Hc(r,a,i,l)}return 0};function oC(n,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-n)*t*6+n:t<1/2?e:t<2/3?(e-n)*6*(2/3-t)+n:n}var sT=function(n,e){var t=e.filter(bp),s=t[0],r=t[1],a=t[2],i=t[3],o=(s.type===17?ko(s.number):Tw.parse(n,s))/(Math.PI*2),l=Cr(r)?r.number/100:0,u=Cr(a)?a.number/100:0,h=typeof i<"u"&&Cr(i)?ds(i,1):1;if(l===0)return Hc(u*255,u*255,u*255,1);var f=u<=.5?u*(l+1):u+l-u*l,d=u*2-f,m=oC(d,f,o+1/3),g=oC(d,f,o),w=oC(d,f,o-1/3);return Hc(m*255,g*255,w*255,h)},aV={hsl:sT,hsla:sT,rgb:nT,rgba:nT},Cg=function(n,e){return Gc.parse(n,UD.create(e).parseComponentValue())},Iu={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},iV={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(ss(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},oV={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Dw=function(n,e){var t=Gc.parse(n,e[0]),s=e[1];return s&&Cr(s)?{color:t,stop:s}:{color:t,stop:null}},rT=function(n,e){var t=n[0],s=n[n.length-1];t.stop===null&&(t.stop=da),s.stop===null&&(s.stop=Mc);for(var r=[],a=0,i=0;i<n.length;i++){var o=n[i].stop;if(o!==null){var l=ds(o,e);l>a?r.push(l):r.push(a),a=l}else r.push(null)}for(var u=null,i=0;i<r.length;i++){var h=r[i];if(h===null)u===null&&(u=i);else if(u!==null){for(var f=i-u,d=r[u-1],m=(h-d)/(f+1),g=1;g<=f;g++)r[u+g-1]=m*g;u=null}}return n.map(function(w,v){var b=w.color;return{color:b,stop:Math.max(Math.min(1,r[v]/e),0)}})},lV=function(n,e,t){var s=e/2,r=t/2,a=ds(n[0],e)-s,i=r-ds(n[1],t);return(Math.atan2(i,a)+Math.PI*2)%(Math.PI*2)},AV=function(n,e,t){var s=typeof n=="number"?n:lV(n,e,t),r=Math.abs(e*Math.sin(s))+Math.abs(t*Math.cos(s)),a=e/2,i=t/2,o=r/2,l=Math.sin(s-Math.PI/2)*o,u=Math.cos(s-Math.PI/2)*o;return[r,a-u,a+u,i-l,i+l]},wl=function(n,e){return Math.sqrt(n*n+e*e)},aT=function(n,e,t,s,r){var a=[[0,0],[0,e],[n,0],[n,e]];return a.reduce(function(i,o){var l=o[0],u=o[1],h=wl(t-l,s-u);return(r?h<i.optimumDistance:h>i.optimumDistance)?{optimumCorner:o,optimumDistance:h}:i},{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},uV=function(n,e,t,s,r){var a=0,i=0;switch(n.size){case 0:n.shape===0?a=i=Math.min(Math.abs(e),Math.abs(e-s),Math.abs(t),Math.abs(t-r)):n.shape===1&&(a=Math.min(Math.abs(e),Math.abs(e-s)),i=Math.min(Math.abs(t),Math.abs(t-r)));break;case 2:if(n.shape===0)a=i=Math.min(wl(e,t),wl(e,t-r),wl(e-s,t),wl(e-s,t-r));else if(n.shape===1){var o=Math.min(Math.abs(t),Math.abs(t-r))/Math.min(Math.abs(e),Math.abs(e-s)),l=aT(s,r,e,t,!0),u=l[0],h=l[1];a=wl(u-e,(h-t)/o),i=o*a}break;case 1:n.shape===0?a=i=Math.max(Math.abs(e),Math.abs(e-s),Math.abs(t),Math.abs(t-r)):n.shape===1&&(a=Math.max(Math.abs(e),Math.abs(e-s)),i=Math.max(Math.abs(t),Math.abs(t-r)));break;case 3:if(n.shape===0)a=i=Math.max(wl(e,t),wl(e,t-r),wl(e-s,t),wl(e-s,t-r));else if(n.shape===1){var o=Math.max(Math.abs(t),Math.abs(t-r))/Math.max(Math.abs(e),Math.abs(e-s)),f=aT(s,r,e,t,!1),u=f[0],h=f[1];a=wl(u-e,(h-t)/o),i=o*a}break}return Array.isArray(n.size)&&(a=ds(n.size[0],s),i=n.size.length===2?ds(n.size[1],r):a),[a,i]},cV=function(n,e){var t=ko(180),s=[];return OA(e).forEach(function(r,a){if(a===0){var i=r[0];if(i.type===20&&i.value==="to"){t=PD(r);return}else if(HD(i)){t=Tw.parse(n,i);return}}var o=Dw(n,r);s.push(o)}),{angle:t,stops:s,type:1}},Qy=function(n,e){var t=ko(180),s=[];return OA(e).forEach(function(r,a){if(a===0){var i=r[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){t=PD(r);return}else if(HD(i)){t=(Tw.parse(n,i)+ko(270))%ko(360);return}}var o=Dw(n,r);s.push(o)}),{angle:t,stops:s,type:1}},hV=function(n,e){var t=ko(180),s=[],r=1,a=0,i=3,o=[];return OA(e).forEach(function(l,u){var h=l[0];if(u===0){if(ss(h)&&h.value==="linear"){r=1;return}else if(ss(h)&&h.value==="radial"){r=2;return}}if(h.type===18){if(h.name==="from"){var f=Gc.parse(n,h.values[0]);s.push({stop:da,color:f})}else if(h.name==="to"){var f=Gc.parse(n,h.values[0]);s.push({stop:Mc,color:f})}else if(h.name==="color-stop"){var d=h.values.filter(bp);if(d.length===2){var f=Gc.parse(n,d[1]),m=d[0];_p(m)&&s.push({stop:{type:16,number:m.number*100,flags:m.flags},color:f})}}}}),r===1?{angle:(t+ko(180))%ko(360),stops:s,type:r}:{size:i,shape:a,stops:s,position:o,type:r}},zD="closest-side",jD="farthest-side",VD="closest-corner",GD="farthest-corner",KD="circle",WD="ellipse",qD="cover",XD="contain",fV=function(n,e){var t=0,s=3,r=[],a=[];return OA(e).forEach(function(i,o){var l=!0;if(o===0){var u=!1;l=i.reduce(function(f,d){if(u)if(ss(d))switch(d.value){case"center":return a.push(PS),f;case"top":case"left":return a.push(da),f;case"right":case"bottom":return a.push(Mc),f}else(Cr(d)||eh(d))&&a.push(d);else if(ss(d))switch(d.value){case KD:return t=0,!1;case WD:return t=1,!1;case"at":return u=!0,!1;case zD:return s=0,!1;case qD:case jD:return s=1,!1;case XD:case VD:return s=2,!1;case GD:return s=3,!1}else if(eh(d)||Cr(d))return Array.isArray(s)||(s=[]),s.push(d),!1;return f},l)}if(l){var h=Dw(n,i);r.push(h)}}),{size:s,shape:t,stops:r,position:a,type:2}},My=function(n,e){var t=0,s=3,r=[],a=[];return OA(e).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(h,f){if(ss(f))switch(f.value){case"center":return a.push(PS),!1;case"top":case"left":return a.push(da),!1;case"right":case"bottom":return a.push(Mc),!1}else if(Cr(f)||eh(f))return a.push(f),!1;return h},l):o===1&&(l=i.reduce(function(h,f){if(ss(f))switch(f.value){case KD:return t=0,!1;case WD:return t=1,!1;case XD:case zD:return s=0,!1;case jD:return s=1,!1;case VD:return s=2,!1;case qD:case GD:return s=3,!1}else if(eh(f)||Cr(f))return Array.isArray(s)||(s=[]),s.push(f),!1;return h},l)),l){var u=Dw(n,i);r.push(u)}}),{size:s,shape:t,stops:r,position:a,type:2}},dV=function(n){return n.type===1},pV=function(n){return n.type===2},zS={name:"image",parse:function(n,e){if(e.type===22){var t={url:e.value,type:0};return n.cache.addImage(e.value),t}if(e.type===18){var s=YD[e.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return s(n,e.values)}throw new Error("Unsupported image type "+e.type)}};function mV(n){return!(n.type===20&&n.value==="none")&&(n.type!==18||!!YD[n.name])}var YD={"linear-gradient":cV,"-moz-linear-gradient":Qy,"-ms-linear-gradient":Qy,"-o-linear-gradient":Qy,"-webkit-linear-gradient":Qy,"radial-gradient":fV,"-moz-radial-gradient":My,"-ms-radial-gradient":My,"-o-radial-gradient":My,"-webkit-radial-gradient":My,"-webkit-gradient":hV},gV={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(s){return bp(s)&&mV(s)}).map(function(s){return zS.parse(n,s)})}},yV={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(ss(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},wV={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(n,e){return OA(e).map(function(t){return t.filter(Cr)}).map($D)}},bV={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(n,e){return OA(e).map(function(t){return t.filter(ss).map(function(s){return s.value}).join(" ")}).map(xV)}},xV=function(n){switch(n){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},hp;(function(n){n.AUTO="auto",n.CONTAIN="contain",n.COVER="cover"})(hp||(hp={}));var vV={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(n,e){return OA(e).map(function(t){return t.filter(CV)})}},CV=function(n){return ss(n)||Cr(n)},Lw=function(n){return{name:"border-"+n+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},BV=Lw("top"),SV=Lw("right"),NV=Lw("bottom"),IV=Lw("left"),Uw=function(n){return{name:"border-radius-"+n,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return $D(t.filter(Cr))}}},EV=Uw("top-left"),kV=Uw("top-right"),FV=Uw("bottom-right"),TV=Uw("bottom-left"),Rw=function(n){return{name:"border-"+n+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},DV=Rw("top"),LV=Rw("right"),UV=Rw("bottom"),RV=Rw("left"),$w=function(n){return{name:"border-"+n+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Zg(t)?t.number:0}}},$V=$w("top"),_V=$w("right"),OV=$w("bottom"),QV=$w("left"),MV={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},HV={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(n,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},PV={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(n,e){return e.filter(ss).reduce(function(t,s){return t|zV(s.value)},0)}},zV=function(n){switch(n){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},jV={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},VV={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(n,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},M2;(function(n){n.NORMAL="normal",n.STRICT="strict"})(M2||(M2={}));var GV={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"strict":return M2.STRICT;case"normal":default:return M2.NORMAL}}},KV={name:"line-height",initialValue:"normal",prefix:!1,type:4},iT=function(n,e){return ss(n)&&n.value==="normal"?1.2*e:n.type===17?e*n.number:Cr(n)?ds(n,e):e},WV={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(n,e){return e.type===20&&e.value==="none"?null:zS.parse(n,e)}},qV={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(n,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},wB={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},_w=function(n){return{name:"margin-"+n,initialValue:"0",prefix:!1,type:4}},XV=_w("top"),YV=_w("right"),JV=_w("bottom"),ZV=_w("left"),eG={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(n,e){return e.filter(ss).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},tG={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Ow=function(n){return{name:"padding-"+n,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},nG=Ow("top"),sG=Ow("right"),rG=Ow("bottom"),aG=Ow("left"),iG={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(n,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},oG={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(n,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},lG={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&yB(e[0],"none")?[]:OA(e).map(function(t){for(var s={color:Iu.TRANSPARENT,offsetX:da,offsetY:da,blur:da},r=0,a=0;a<t.length;a++){var i=t[a];eh(i)?(r===0?s.offsetX=i:r===1?s.offsetY=i:s.blur=i,r++):s.color=Gc.parse(n,i)}return s})}},AG={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},uG={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(n,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=fG[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},cG=function(n){var e=n.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},hG=function(n){var e=n.filter(function(l){return l.type===17}).map(function(l){return l.number}),t=e[0],s=e[1];e[2],e[3];var r=e[4],a=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[t,s,r,a,i,o]:null},fG={matrix:cG,matrix3d:hG},oT={type:16,number:50,flags:Jg},dG=[oT,oT],pG={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(n,e){var t=e.filter(Cr);return t.length!==2?dG:[t[0],t[1]]}},mG={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Bg;(function(n){n.NORMAL="normal",n.BREAK_ALL="break-all",n.KEEP_ALL="keep-all"})(Bg||(Bg={}));var gG={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-all":return Bg.BREAK_ALL;case"keep-all":return Bg.KEEP_ALL;case"normal":default:return Bg.NORMAL}}},yG={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(n,e){if(e.type===20)return{auto:!0,order:0};if(_p(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},JD={name:"time",parse:function(n,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},wG={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(n,e){return _p(e)?e.number:1}},bG={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},xG={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(n,e){return e.filter(ss).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},vG={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(n,e){var t=[],s=[];return e.forEach(function(r){switch(r.type){case 20:case 0:t.push(r.value);break;case 17:t.push(r.number.toString());break;case 4:s.push(t.join(" ")),t.length=0;break}}),t.length&&s.push(t.join(" ")),s.map(function(r){return r.indexOf(" ")===-1?r:"'"+r+"'"})}},CG={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},BG={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(n,e){if(_p(e))return e.number;if(ss(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},SG={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.filter(ss).map(function(t){return t.value})}},NG={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Rr=function(n,e){return(n&e)!==0},IG={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},EG={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var s=[],r=e.filter(RD),a=0;a<r.length;a++){var i=r[a],o=r[a+1];if(i.type===20){var l=o&&_p(o)?o.number:1;s.push({counter:i.value,increment:l})}}return s}},kG={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return[];for(var t=[],s=e.filter(RD),r=0;r<s.length;r++){var a=s[r],i=s[r+1];if(ss(a)&&a.value!=="none"){var o=i&&_p(i)?i.number:0;t.push({counter:a.value,reset:o})}}return t}},FG={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(n,e){return e.filter(Zg).map(function(t){return JD.parse(n,t)})}},TG={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var s=[],r=e.filter(sV);if(r.length%2!==0)return null;for(var a=0;a<r.length;a+=2){var i=r[a].value,o=r[a+1].value;s.push({open:i,close:o})}return s}},lT=function(n,e,t){if(!n)return"";var s=n[Math.min(e,n.length-1)];return s?t?s.open:s.close:""},DG={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&yB(e[0],"none")?[]:OA(e).map(function(t){for(var s={color:255,offsetX:da,offsetY:da,blur:da,spread:da,inset:!1},r=0,a=0;a<t.length;a++){var i=t[a];yB(i,"inset")?s.inset=!0:eh(i)?(r===0?s.offsetX=i:r===1?s.offsetY=i:r===2?s.blur=i:s.spread=i,r++):s.color=Gc.parse(n,i)}return s})}},LG={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(n,e){var t=[0,1,2],s=[];return e.filter(ss).forEach(function(r){switch(r.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),t.forEach(function(r){s.indexOf(r)===-1&&s.push(r)}),s}},UG={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},RG={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(n,e){return Zg(e)?e.number:0}},$G=function(){function n(e,t){var s,r;this.animationDuration=Ct(e,FG,t.animationDuration),this.backgroundClip=Ct(e,iV,t.backgroundClip),this.backgroundColor=Ct(e,oV,t.backgroundColor),this.backgroundImage=Ct(e,gV,t.backgroundImage),this.backgroundOrigin=Ct(e,yV,t.backgroundOrigin),this.backgroundPosition=Ct(e,wV,t.backgroundPosition),this.backgroundRepeat=Ct(e,bV,t.backgroundRepeat),this.backgroundSize=Ct(e,vV,t.backgroundSize),this.borderTopColor=Ct(e,BV,t.borderTopColor),this.borderRightColor=Ct(e,SV,t.borderRightColor),this.borderBottomColor=Ct(e,NV,t.borderBottomColor),this.borderLeftColor=Ct(e,IV,t.borderLeftColor),this.borderTopLeftRadius=Ct(e,EV,t.borderTopLeftRadius),this.borderTopRightRadius=Ct(e,kV,t.borderTopRightRadius),this.borderBottomRightRadius=Ct(e,FV,t.borderBottomRightRadius),this.borderBottomLeftRadius=Ct(e,TV,t.borderBottomLeftRadius),this.borderTopStyle=Ct(e,DV,t.borderTopStyle),this.borderRightStyle=Ct(e,LV,t.borderRightStyle),this.borderBottomStyle=Ct(e,UV,t.borderBottomStyle),this.borderLeftStyle=Ct(e,RV,t.borderLeftStyle),this.borderTopWidth=Ct(e,$V,t.borderTopWidth),this.borderRightWidth=Ct(e,_V,t.borderRightWidth),this.borderBottomWidth=Ct(e,OV,t.borderBottomWidth),this.borderLeftWidth=Ct(e,QV,t.borderLeftWidth),this.boxShadow=Ct(e,DG,t.boxShadow),this.color=Ct(e,MV,t.color),this.direction=Ct(e,HV,t.direction),this.display=Ct(e,PV,t.display),this.float=Ct(e,jV,t.cssFloat),this.fontFamily=Ct(e,vG,t.fontFamily),this.fontSize=Ct(e,CG,t.fontSize),this.fontStyle=Ct(e,NG,t.fontStyle),this.fontVariant=Ct(e,SG,t.fontVariant),this.fontWeight=Ct(e,BG,t.fontWeight),this.letterSpacing=Ct(e,VV,t.letterSpacing),this.lineBreak=Ct(e,GV,t.lineBreak),this.lineHeight=Ct(e,KV,t.lineHeight),this.listStyleImage=Ct(e,WV,t.listStyleImage),this.listStylePosition=Ct(e,qV,t.listStylePosition),this.listStyleType=Ct(e,wB,t.listStyleType),this.marginTop=Ct(e,XV,t.marginTop),this.marginRight=Ct(e,YV,t.marginRight),this.marginBottom=Ct(e,JV,t.marginBottom),this.marginLeft=Ct(e,ZV,t.marginLeft),this.opacity=Ct(e,wG,t.opacity);var a=Ct(e,eG,t.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=Ct(e,tG,t.overflowWrap),this.paddingTop=Ct(e,nG,t.paddingTop),this.paddingRight=Ct(e,sG,t.paddingRight),this.paddingBottom=Ct(e,rG,t.paddingBottom),this.paddingLeft=Ct(e,aG,t.paddingLeft),this.paintOrder=Ct(e,LG,t.paintOrder),this.position=Ct(e,oG,t.position),this.textAlign=Ct(e,iG,t.textAlign),this.textDecorationColor=Ct(e,bG,(s=t.textDecorationColor)!==null&&s!==void 0?s:t.color),this.textDecorationLine=Ct(e,xG,(r=t.textDecorationLine)!==null&&r!==void 0?r:t.textDecoration),this.textShadow=Ct(e,lG,t.textShadow),this.textTransform=Ct(e,AG,t.textTransform),this.transform=Ct(e,uG,t.transform),this.transformOrigin=Ct(e,pG,t.transformOrigin),this.visibility=Ct(e,mG,t.visibility),this.webkitTextStrokeColor=Ct(e,UG,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ct(e,RG,t.webkitTextStrokeWidth),this.wordBreak=Ct(e,gG,t.wordBreak),this.zIndex=Ct(e,yG,t.zIndex)}return n.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},n.prototype.isTransparent=function(){return Kc(this.backgroundColor)},n.prototype.isTransformed=function(){return this.transform!==null},n.prototype.isPositioned=function(){return this.position!==0},n.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},n.prototype.isFloating=function(){return this.float!==0},n.prototype.isInlineLevel=function(){return Rr(this.display,4)||Rr(this.display,33554432)||Rr(this.display,268435456)||Rr(this.display,536870912)||Rr(this.display,67108864)||Rr(this.display,134217728)},n}(),_G=function(){function n(e,t){this.content=Ct(e,IG,t.content),this.quotes=Ct(e,TG,t.quotes)}return n}(),AT=function(){function n(e,t){this.counterIncrement=Ct(e,EG,t.counterIncrement),this.counterReset=Ct(e,kG,t.counterReset)}return n}(),Ct=function(n,e,t){var s=new LD,r=t!==null&&typeof t<"u"?t.toString():e.initialValue;s.write(r);var a=new UD(s.read());switch(e.type){case 2:var i=a.parseComponentValue();return e.parse(n,ss(i)?i.value:e.initialValue);case 0:return e.parse(n,a.parseComponentValue());case 1:return e.parse(n,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(e.format){case"angle":return Tw.parse(n,a.parseComponentValue());case"color":return Gc.parse(n,a.parseComponentValue());case"image":return zS.parse(n,a.parseComponentValue());case"length":var o=a.parseComponentValue();return eh(o)?o:da;case"length-percentage":var l=a.parseComponentValue();return Cr(l)?l:da;case"time":return JD.parse(n,a.parseComponentValue())}break}},OG="data-html2canvas-debug",QG=function(n){var e=n.getAttribute(OG);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},bB=function(n,e){var t=QG(n);return t===1||e===t},QA=function(){function n(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,bB(t,3))debugger;this.styles=new $G(e,window.getComputedStyle(t,null)),CB(t)&&(this.styles.animationDuration.some(function(s){return s>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=kw(this.context,t),bB(t,4)&&(this.flags|=16)}return n}(),MG="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",uT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Hy=0;Hy<uT.length;Hy++)hg[uT.charCodeAt(Hy)]=Hy;var HG=function(n){var e=n.length*.75,t=n.length,s,r=0,a,i,o,l;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),h=Array.isArray(u)?u:new Uint8Array(u);for(s=0;s<t;s+=4)a=hg[n.charCodeAt(s)],i=hg[n.charCodeAt(s+1)],o=hg[n.charCodeAt(s+2)],l=hg[n.charCodeAt(s+3)],h[r++]=a<<2|i>>4,h[r++]=(i&15)<<4|o>>2,h[r++]=(o&3)<<6|l&63;return u},PG=function(n){for(var e=n.length,t=[],s=0;s<e;s+=2)t.push(n[s+1]<<8|n[s]);return t},zG=function(n){for(var e=n.length,t=[],s=0;s<e;s+=4)t.push(n[s+3]<<24|n[s+2]<<16|n[s+1]<<8|n[s]);return t},Bf=5,jS=11,lC=2,jG=jS-Bf,ZD=65536>>Bf,VG=1<<Bf,AC=VG-1,GG=1024>>Bf,KG=ZD+GG,WG=KG,qG=32,XG=WG+qG,YG=65536>>jS,JG=1<<jG,ZG=JG-1,cT=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},eK=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},tK=function(n,e){var t=HG(n),s=Array.isArray(t)?zG(t):new Uint32Array(t),r=Array.isArray(t)?PG(t):new Uint16Array(t),a=24,i=cT(r,a/2,s[4]/2),o=s[5]===2?cT(r,(a+s[4])/2):eK(s,Math.ceil((a+s[4])/4));return new nK(s[0],s[1],s[2],s[3],i,o)},nK=function(){function n(e,t,s,r,a,i){this.initialValue=e,this.errorValue=t,this.highStart=s,this.highValueIndex=r,this.index=a,this.data=i}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Bf],t=(t<<lC)+(e&AC),this.data[t];if(e<=65535)return t=this.index[ZD+(e-55296>>Bf)],t=(t<<lC)+(e&AC),this.data[t];if(e<this.highStart)return t=XG-YG+(e>>jS),t=this.index[t],t+=e>>Bf&ZG,t=this.index[t],t=(t<<lC)+(e&AC),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),hT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Py=0;Py<hT.length;Py++)sK[hT.charCodeAt(Py)]=Py;var rK=1,uC=2,cC=3,fT=4,dT=5,aK=7,pT=8,hC=9,fC=10,mT=11,gT=12,yT=13,wT=14,dC=15,iK=function(n){for(var e=[],t=0,s=n.length;t<s;){var r=n.charCodeAt(t++);if(r>=55296&&r<=56319&&t<s){var a=n.charCodeAt(t++);(a&64512)===56320?e.push(((r&1023)<<10)+(a&1023)+65536):(e.push(r),t--)}else e.push(r)}return e},oK=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var s=[],r=-1,a="";++r<t;){var i=n[r];i<=65535?s.push(i):(i-=65536,s.push((i>>10)+55296,i%1024+56320)),(r+1===t||s.length>16384)&&(a+=String.fromCharCode.apply(String,s),s.length=0)}return a},lK=tK(MG),Bo="",pC="",AK=function(n){return lK.get(n)},uK=function(n,e,t){var s=t-2,r=e[s],a=e[t-1],i=e[t];if(a===uC&&i===cC)return Bo;if(a===uC||a===cC||a===fT||i===uC||i===cC||i===fT)return pC;if(a===pT&&[pT,hC,mT,gT].indexOf(i)!==-1||(a===mT||a===hC)&&(i===hC||i===fC)||(a===gT||a===fC)&&i===fC||i===yT||i===dT||i===aK||a===rK)return Bo;if(a===yT&&i===wT){for(;r===dT;)r=e[--s];if(r===wT)return Bo}if(a===dC&&i===dC){for(var o=0;r===dC;)o++,r=e[--s];if(o%2===0)return Bo}return pC},cK=function(n){var e=iK(n),t=e.length,s=0,r=0,a=e.map(AK);return{next:function(){if(s>=t)return{done:!0,value:null};for(var i=Bo;s<t&&(i=uK(e,a,++s))===Bo;);if(i!==Bo||s===t){var o=oK.apply(null,e.slice(r,s));return r=s,{value:o,done:!1}}return{done:!0,value:null}}}},hK=function(n){for(var e=cK(n),t=[],s;!(s=e.next()).done;)s.value&&t.push(s.value.slice());return t},fK=function(n){var e=123;if(n.createRange){var t=n.createRange();if(t.getBoundingClientRect){var s=n.createElement("boundtest");s.style.height=e+"px",s.style.display="block",n.body.appendChild(s),t.selectNode(s);var r=t.getBoundingClientRect(),a=Math.round(r.height);if(n.body.removeChild(s),a===e)return!0}}return!1},dK=function(n){var e=n.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",n.body.appendChild(e);var t=n.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=e.firstChild,r=Fw(s.data).map(function(l){return ur(l)}),a=0,i={},o=r.every(function(l,u){t.setStart(s,a),t.setEnd(s,a+l.length);var h=t.getBoundingClientRect();a+=l.length;var f=h.x>i.x||h.y>i.y;return i=h,u===0?!0:f});return n.body.removeChild(e),o},pK=function(){return typeof new Image().crossOrigin<"u"},mK=function(){return typeof new XMLHttpRequest().responseType=="string"},gK=function(n){var e=new Image,t=n.createElement("canvas"),s=t.getContext("2d");if(!s)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},bT=function(n){return n[0]===0&&n[1]===255&&n[2]===0&&n[3]===255},yK=function(n){var e=n.createElement("canvas"),t=100;e.width=t,e.height=t;var s=e.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,t,t);var r=new Image,a=e.toDataURL();r.src=a;var i=xB(t,t,0,0,r);return s.fillStyle="red",s.fillRect(0,0,t,t),xT(i).then(function(o){s.drawImage(o,0,0);var l=s.getImageData(0,0,t,t).data;s.fillStyle="red",s.fillRect(0,0,t,t);var u=n.createElement("div");return u.style.backgroundImage="url("+a+")",u.style.height=t+"px",bT(l)?xT(xB(t,t,0,0,u)):Promise.reject(!1)}).then(function(o){return s.drawImage(o,0,0),bT(s.getImageData(0,0,t,t).data)}).catch(function(){return!1})},xB=function(n,e,t,s,r){var a="http://www.w3.org/2000/svg",i=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return i.setAttributeNS(null,"width",n.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",t.toString()),o.setAttributeNS(null,"y",s.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(r),i},xT=function(n){return new Promise(function(e,t){var s=new Image;s.onload=function(){return e(s)},s.onerror=t,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},fa={get SUPPORT_RANGE_BOUNDS(){var n=fK(document);return Object.defineProperty(fa,"SUPPORT_RANGE_BOUNDS",{value:n}),n},get SUPPORT_WORD_BREAKING(){var n=fa.SUPPORT_RANGE_BOUNDS&&dK(document);return Object.defineProperty(fa,"SUPPORT_WORD_BREAKING",{value:n}),n},get SUPPORT_SVG_DRAWING(){var n=gK(document);return Object.defineProperty(fa,"SUPPORT_SVG_DRAWING",{value:n}),n},get SUPPORT_FOREIGNOBJECT_DRAWING(){var n=typeof Array.from=="function"&&typeof window.fetch=="function"?yK(document):Promise.resolve(!1);return Object.defineProperty(fa,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:n}),n},get SUPPORT_CORS_IMAGES(){var n=pK();return Object.defineProperty(fa,"SUPPORT_CORS_IMAGES",{value:n}),n},get SUPPORT_RESPONSE_TYPE(){var n=mK();return Object.defineProperty(fa,"SUPPORT_RESPONSE_TYPE",{value:n}),n},get SUPPORT_CORS_XHR(){var n="withCredentials"in new XMLHttpRequest;return Object.defineProperty(fa,"SUPPORT_CORS_XHR",{value:n}),n},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var n=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(fa,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:n}),n}},Sg=function(){function n(e,t){this.text=e,this.bounds=t}return n}(),wK=function(n,e,t,s){var r=vK(e,t),a=[],i=0;return r.forEach(function(o){if(t.textDecorationLine.length||o.trim().length>0)if(fa.SUPPORT_RANGE_BOUNDS){var l=vT(s,i,o.length).getClientRects();if(l.length>1){var u=VS(o),h=0;u.forEach(function(d){a.push(new Sg(d,Tu.fromDOMRectList(n,vT(s,h+i,d.length).getClientRects()))),h+=d.length})}else a.push(new Sg(o,Tu.fromDOMRectList(n,l)))}else{var f=s.splitText(o.length);a.push(new Sg(o,bK(n,s))),s=f}else fa.SUPPORT_RANGE_BOUNDS||(s=s.splitText(o.length));i+=o.length}),a},bK=function(n,e){var t=e.ownerDocument;if(t){var s=t.createElement("html2canvaswrapper");s.appendChild(e.cloneNode(!0));var r=e.parentNode;if(r){r.replaceChild(s,e);var a=kw(n,s);return s.firstChild&&r.replaceChild(s.firstChild,s),a}}return Tu.EMPTY},vT=function(n,e,t){var s=n.ownerDocument;if(!s)throw new Error("Node has no owner document");var r=s.createRange();return r.setStart(n,e),r.setEnd(n,e+t),r},VS=function(n){if(fa.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(n)).map(function(t){return t.segment})}return hK(n)},xK=function(n,e){if(fa.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(n)).map(function(s){return s.segment})}return BK(n,e)},vK=function(n,e){return e.letterSpacing!==0?VS(n):xK(n,e)},CK=[32,160,4961,65792,65793,4153,4241],BK=function(n,e){for(var t=Y7(n,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),s=[],r,a=function(){if(r.value){var i=r.value.slice(),o=Fw(i),l="";o.forEach(function(u){CK.indexOf(u)===-1?l+=ur(u):(l.length&&s.push(l),s.push(ur(u)),l="")}),l.length&&s.push(l)}};!(r=t.next()).done;)a();return s},SK=function(){function n(e,t,s){this.text=NK(t.data,s.textTransform),this.textBounds=wK(e,this.text,s,t)}return n}(),NK=function(n,e){switch(e){case 1:return n.toLowerCase();case 3:return n.replace(IK,EK);case 2:return n.toUpperCase();default:return n}},IK=/(^|\s|:|-|\(|\))([a-z])/g,EK=function(n,e,t){return n.length>0?e+t.toUpperCase():n},eL=function(n){$l(e,n);function e(t,s){var r=n.call(this,t,s)||this;return r.src=s.currentSrc||s.src,r.intrinsicWidth=s.naturalWidth,r.intrinsicHeight=s.naturalHeight,r.context.cache.addImage(r.src),r}return e}(QA),tL=function(n){$l(e,n);function e(t,s){var r=n.call(this,t,s)||this;return r.canvas=s,r.intrinsicWidth=s.width,r.intrinsicHeight=s.height,r}return e}(QA),nL=function(n){$l(e,n);function e(t,s){var r=n.call(this,t,s)||this,a=new XMLSerializer,i=kw(t,s);return s.setAttribute("width",i.width+"px"),s.setAttribute("height",i.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(s)),r.intrinsicWidth=s.width.baseVal.value,r.intrinsicHeight=s.height.baseVal.value,r.context.cache.addImage(r.svg),r}return e}(QA),sL=function(n){$l(e,n);function e(t,s){var r=n.call(this,t,s)||this;return r.value=s.value,r}return e}(QA),vB=function(n){$l(e,n);function e(t,s){var r=n.call(this,t,s)||this;return r.start=s.start,r.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,r}return e}(QA),kK=[{type:15,flags:0,unit:"px",number:3}],FK=[{type:16,flags:0,number:50}],TK=function(n){return n.width>n.height?new Tu(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new Tu(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n},DK=function(n){var e=n.type===LK?new Array(n.value.length+1).join(""):n.value;return e.length===0?n.placeholder||"":e},H2="checkbox",P2="radio",LK="password",CT=707406591,GS=function(n){$l(e,n);function e(t,s){var r=n.call(this,t,s)||this;switch(r.type=s.type.toLowerCase(),r.checked=s.checked,r.value=DK(s),(r.type===H2||r.type===P2)&&(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=TK(r.bounds)),r.type){case H2:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=kK;break;case P2:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=FK;break}return r}return e}(QA),rL=function(n){$l(e,n);function e(t,s){var r=n.call(this,t,s)||this,a=s.options[s.selectedIndex||0];return r.value=a&&a.text||"",r}return e}(QA),aL=function(n){$l(e,n);function e(t,s){var r=n.call(this,t,s)||this;return r.value=s.value,r}return e}(QA),iL=function(n){$l(e,n);function e(t,s){var r=n.call(this,t,s)||this;r.src=s.src,r.width=parseInt(s.width,10)||0,r.height=parseInt(s.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){r.tree=lL(t,s.contentWindow.document.documentElement);var a=s.contentWindow.document.documentElement?Cg(t,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):Iu.TRANSPARENT,i=s.contentWindow.document.body?Cg(t,getComputedStyle(s.contentWindow.document.body).backgroundColor):Iu.TRANSPARENT;r.backgroundColor=Kc(a)?Kc(i)?r.styles.backgroundColor:i:a}}catch{}return r}return e}(QA),UK=["OL","UL","MENU"],w2=function(n,e,t,s){for(var r=e.firstChild,a=void 0;r;r=a)if(a=r.nextSibling,AL(r)&&r.data.trim().length>0)t.textNodes.push(new SK(n,r,t.styles));else if(ip(r))if(fL(r)&&r.assignedNodes)r.assignedNodes().forEach(function(o){return w2(n,o,t,s)});else{var i=oL(n,r);i.styles.isVisible()&&(RK(r,i,s)?i.flags|=4:$K(i.styles)&&(i.flags|=2),UK.indexOf(r.tagName)!==-1&&(i.flags|=8),t.elements.push(i),r.slot,r.shadowRoot?w2(n,r.shadowRoot,i,s):!z2(r)&&!uL(r)&&!j2(r)&&w2(n,r,i,s))}},oL=function(n,e){return BB(e)?new eL(n,e):cL(e)?new tL(n,e):uL(e)?new nL(n,e):_K(e)?new sL(n,e):OK(e)?new vB(n,e):QK(e)?new GS(n,e):j2(e)?new rL(n,e):z2(e)?new aL(n,e):hL(e)?new iL(n,e):new QA(n,e)},lL=function(n,e){var t=oL(n,e);return t.flags|=4,w2(n,e,t,t),t},RK=function(n,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||KS(n)&&t.styles.isTransparent()},$K=function(n){return n.isPositioned()||n.isFloating()},AL=function(n){return n.nodeType===Node.TEXT_NODE},ip=function(n){return n.nodeType===Node.ELEMENT_NODE},CB=function(n){return ip(n)&&typeof n.style<"u"&&!b2(n)},b2=function(n){return typeof n.className=="object"},_K=function(n){return n.tagName==="LI"},OK=function(n){return n.tagName==="OL"},QK=function(n){return n.tagName==="INPUT"},MK=function(n){return n.tagName==="HTML"},uL=function(n){return n.tagName==="svg"},KS=function(n){return n.tagName==="BODY"},cL=function(n){return n.tagName==="CANVAS"},BT=function(n){return n.tagName==="VIDEO"},BB=function(n){return n.tagName==="IMG"},hL=function(n){return n.tagName==="IFRAME"},ST=function(n){return n.tagName==="STYLE"},HK=function(n){return n.tagName==="SCRIPT"},z2=function(n){return n.tagName==="TEXTAREA"},j2=function(n){return n.tagName==="SELECT"},fL=function(n){return n.tagName==="SLOT"},NT=function(n){return n.tagName.indexOf("-")>0},PK=function(){function n(){this.counters={}}return n.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},n.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},n.prototype.pop=function(e){var t=this;e.forEach(function(s){return t.counters[s].pop()})},n.prototype.parse=function(e){var t=this,s=e.counterIncrement,r=e.counterReset,a=!0;s!==null&&s.forEach(function(o){var l=t.counters[o.counter];l&&o.increment!==0&&(a=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return a&&r.forEach(function(o){var l=t.counters[o.counter];i.push(o.counter),l||(l=t.counters[o.counter]=[]),l.push(o.reset)}),i},n}(),IT={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ET={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},zK={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},jK={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Vd=function(n,e,t,s,r,a){return n<e||n>t?Lg(n,r,a.length>0):s.integers.reduce(function(i,o,l){for(;n>=o;)n-=o,i+=s.values[l];return i},"")+a},dL=function(n,e,t,s){var r="";do t||n--,r=s(n)+r,n/=e;while(n*e>=e);return r},Ar=function(n,e,t,s,r){var a=t-e+1;return(n<0?"-":"")+(dL(Math.abs(n),a,s,function(i){return ur(Math.floor(i%a)+e)})+r)},of=function(n,e,t){t===void 0&&(t=". ");var s=e.length;return dL(Math.abs(n),s,!1,function(r){return e[Math.floor(r%s)]})+t},Zd=1,Uc=2,Rc=4,fg=8,xu=function(n,e,t,s,r,a){if(n<-9999||n>9999)return Lg(n,4,r.length>0);var i=Math.abs(n),o=r;if(i===0)return e[0]+o;for(var l=0;i>0&&l<=4;l++){var u=i%10;u===0&&Rr(a,Zd)&&o!==""?o=e[u]+o:u>1||u===1&&l===0||u===1&&l===1&&Rr(a,Uc)||u===1&&l===1&&Rr(a,Rc)&&n>100||u===1&&l>1&&Rr(a,fg)?o=e[u]+(l>0?t[l-1]:"")+o:u===1&&l>0&&(o=t[l-1]+o),i=Math.floor(i/10)}return(n<0?s:"")+o},kT="",FT="",TT="",mC="",Lg=function(n,e,t){var s=t?". ":"",r=t?"":"",a=t?", ":"",i=t?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=Ar(n,48,57,!0,s);return o.length<4?"0"+o:o;case 4:return of(n,"",r);case 6:return Vd(n,1,3999,IT,3,s).toLowerCase();case 7:return Vd(n,1,3999,IT,3,s);case 8:return Ar(n,945,969,!1,s);case 9:return Ar(n,97,122,!1,s);case 10:return Ar(n,65,90,!1,s);case 11:return Ar(n,1632,1641,!0,s);case 12:case 49:return Vd(n,1,9999,ET,3,s);case 35:return Vd(n,1,9999,ET,3,s).toLowerCase();case 13:return Ar(n,2534,2543,!0,s);case 14:case 30:return Ar(n,6112,6121,!0,s);case 15:return of(n,"",r);case 16:return of(n,"",r);case 17:case 48:return xu(n,"",kT,"",r,Uc|Rc|fg);case 47:return xu(n,"",FT,"",r,Zd|Uc|Rc|fg);case 42:return xu(n,"",kT,"",r,Uc|Rc|fg);case 41:return xu(n,"",FT,"",r,Zd|Uc|Rc|fg);case 26:return xu(n,"","",TT,r,0);case 25:return xu(n,"","",TT,r,Zd|Uc|Rc);case 31:return xu(n,"","",mC,a,Zd|Uc|Rc);case 33:return xu(n,"","",mC,a,0);case 32:return xu(n,"","",mC,a,Zd|Uc|Rc);case 18:return Ar(n,2406,2415,!0,s);case 20:return Vd(n,1,19999,jK,3,s);case 21:return Ar(n,2790,2799,!0,s);case 22:return Ar(n,2662,2671,!0,s);case 22:return Vd(n,1,10999,zK,3,s);case 23:return of(n,"");case 24:return of(n,"");case 27:return Ar(n,3302,3311,!0,s);case 28:return of(n,"",r);case 29:return of(n,"",r);case 34:return Ar(n,3792,3801,!0,s);case 37:return Ar(n,6160,6169,!0,s);case 38:return Ar(n,4160,4169,!0,s);case 39:return Ar(n,2918,2927,!0,s);case 40:return Ar(n,1776,1785,!0,s);case 43:return Ar(n,3046,3055,!0,s);case 44:return Ar(n,3174,3183,!0,s);case 45:return Ar(n,3664,3673,!0,s);case 46:return Ar(n,3872,3881,!0,s);case 3:default:return Ar(n,48,57,!0,s)}},pL="data-html2canvas-ignore",DT=function(){function n(e,t,s){if(this.context=e,this.options=s,this.scrolledElements=[],this.referenceElement=t,this.counters=new PK,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return n.prototype.toIFrame=function(e,t){var s=this,r=VK(e,t);if(!r.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=r.contentWindow,l=o.document,u=WK(r).then(function(){return ti(s,void 0,void 0,function(){var h,f;return La(this,function(d){switch(d.label){case 0:return this.scrolledElements.forEach(JK),o&&(o.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==t.top||o.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-t.left,o.scrollY-t.top,0,0))),h=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:d.sent(),d.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,KK(l)]:[3,4];case 3:d.sent(),d.label=4;case 4:return typeof h=="function"?[2,Promise.resolve().then(function(){return h(l,f)}).then(function(){return r})]:[2,r]}})})});return l.open(),l.write(XK(document.doctype)+"<html></html>"),YK(this.referenceElement.ownerDocument,a,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),u},n.prototype.createElementClone=function(e){if(bB(e,2))debugger;if(cL(e))return this.createCanvasClone(e);if(BT(e))return this.createVideoClone(e);if(ST(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return BB(t)&&(BB(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),NT(t)?this.createCustomElementClone(t):t},n.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return gC(e.style,t),t},n.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var s=[].slice.call(t.cssRules,0).reduce(function(a,i){return i&&typeof i.cssText=="string"?a+i.cssText:a},""),r=e.cloneNode(!1);return r.textContent=s,r}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return e.cloneNode(!1)},n.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var s=e.ownerDocument.createElement("img");try{return s.src=e.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var r=e.cloneNode(!1);try{r.width=e.width,r.height=e.height;var a=e.getContext("2d"),i=r.getContext("2d");if(i)if(!this.options.allowTaint&&a)i.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var o=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return r}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return r},n.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var s=t.getContext("2d");try{return s&&(s.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||s.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var r=e.ownerDocument.createElement("canvas");return r.width=e.offsetWidth,r.height=e.offsetHeight,r},n.prototype.appendChildNode=function(e,t,s){(!ip(t)||!HK(t)&&!t.hasAttribute(pL)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!ip(t)||!ST(t))&&e.appendChild(this.cloneNode(t,s))},n.prototype.cloneChildNodes=function(e,t,s){for(var r=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(ip(a)&&fL(a)&&typeof a.assignedNodes=="function"){var i=a.assignedNodes();i.length&&i.forEach(function(o){return r.appendChildNode(t,o,s)})}else this.appendChildNode(t,a,s)},n.prototype.cloneNode=function(e,t){if(AL(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var s=e.ownerDocument.defaultView;if(s&&ip(e)&&(CB(e)||b2(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var a=s.getComputedStyle(e),i=s.getComputedStyle(e,":before"),o=s.getComputedStyle(e,":after");this.referenceElement===e&&CB(r)&&(this.clonedReferenceElement=r),KS(r)&&tW(r);var l=this.counters.parse(new AT(this.context,a)),u=this.resolvePseudoContent(e,r,i,Ng.BEFORE);NT(e)&&(t=!0),BT(e)||this.cloneChildNodes(e,r,t),u&&r.insertBefore(u,r.firstChild);var h=this.resolvePseudoContent(e,r,o,Ng.AFTER);return h&&r.appendChild(h),this.counters.pop(l),(a&&(this.options.copyStyles||b2(e))&&!hL(e)||t)&&gC(a,r),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(z2(e)||j2(e))&&(z2(r)||j2(r))&&(r.value=e.value),r}return e.cloneNode(!1)},n.prototype.resolvePseudoContent=function(e,t,s,r){var a=this;if(s){var i=s.content,o=t.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||s.display==="none")){this.counters.parse(new AT(this.context,s));var l=new _G(this.context,s),u=o.createElement("html2canvaspseudoelement");gC(s,u),l.content.forEach(function(f){if(f.type===0)u.appendChild(o.createTextNode(f.value));else if(f.type===22){var d=o.createElement("img");d.src=f.value,d.style.opacity="1",u.appendChild(d)}else if(f.type===18){if(f.name==="attr"){var m=f.values.filter(ss);m.length&&u.appendChild(o.createTextNode(e.getAttribute(m[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(bp),w=g[0],v=g[1];if(w&&ss(w)){var b=a.counters.getCounterValue(w.value),C=v&&ss(v)?wB.parse(a.context,v.value):3;u.appendChild(o.createTextNode(Lg(b,C,!1)))}}else if(f.name==="counters"){var N=f.values.filter(bp),w=N[0],I=N[1],v=N[2];if(w&&ss(w)){var L=a.counters.getCounterValues(w.value),$=v&&ss(v)?wB.parse(a.context,v.value):3,H=I&&I.type===0?I.value:"",U=L.map(function(T){return Lg(T,$,!1)}).join(H);u.appendChild(o.createTextNode(U))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(o.createTextNode(lT(l.quotes,a.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(lT(l.quotes,--a.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(f.value))}}),u.className=SB+" "+NB;var h=r===Ng.BEFORE?" "+SB:" "+NB;return b2(t)?t.className.baseValue+=h:t.className+=h,u}}},n.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},n}(),Ng;(function(n){n[n.BEFORE=0]="BEFORE",n[n.AFTER=1]="AFTER"})(Ng||(Ng={}));var VK=function(n,e){var t=n.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(pL,"true"),n.body.appendChild(t),t},GK=function(n){return new Promise(function(e){if(n.complete){e();return}if(!n.src){e();return}n.onload=e,n.onerror=e})},KK=function(n){return Promise.all([].slice.call(n.images,0).map(GK))},WK=function(n){return new Promise(function(e,t){var s=n.contentWindow;if(!s)return t("No window assigned for iframe");var r=s.document;s.onload=n.onload=function(){s.onload=n.onload=null;var a=setInterval(function(){r.body.childNodes.length>0&&r.readyState==="complete"&&(clearInterval(a),e(n))},50)}})},qK=["all","d","content"],gC=function(n,e){for(var t=n.length-1;t>=0;t--){var s=n.item(t);qK.indexOf(s)===-1&&e.style.setProperty(s,n.getPropertyValue(s))}return e},XK=function(n){var e="";return n&&(e+="<!DOCTYPE ",n.name&&(e+=n.name),n.internalSubset&&(e+=n.internalSubset),n.publicId&&(e+='"'+n.publicId+'"'),n.systemId&&(e+='"'+n.systemId+'"'),e+=">"),e},YK=function(n,e,t){n&&n.defaultView&&(e!==n.defaultView.pageXOffset||t!==n.defaultView.pageYOffset)&&n.defaultView.scrollTo(e,t)},JK=function(n){var e=n[0],t=n[1],s=n[2];e.scrollLeft=t,e.scrollTop=s},ZK=":before",eW=":after",SB="___html2canvas___pseudoelement_before",NB="___html2canvas___pseudoelement_after",LT=`{
    content: "" !important;
    display: none !important;
}`,tW=function(n){nW(n,"."+SB+ZK+LT+`
         .`+NB+eW+LT)},nW=function(n,e){var t=n.ownerDocument;if(t){var s=t.createElement("style");s.textContent=e,n.appendChild(s)}},mL=function(){function n(){}return n.getOrigin=function(e){var t=n._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},n.isSameOrigin=function(e){return n.getOrigin(e)===n._origin},n.setContext=function(e){n._link=e.document.createElement("a"),n._origin=n.getOrigin(e.location.href)},n._origin="about:blank",n}(),sW=function(){function n(e,t){this.context=e,this._options=t,this._cache={}}return n.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(wC(e)||oW(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},n.prototype.match=function(e){return this._cache[e]},n.prototype.loadImage=function(e){return ti(this,void 0,void 0,function(){var t,s,r,a,i=this;return La(this,function(o){switch(o.label){case 0:return t=mL.isSameOrigin(e),s=!yC(e)&&this._options.useCORS===!0&&fa.SUPPORT_CORS_IMAGES&&!t,r=!yC(e)&&!t&&!wC(e)&&typeof this._options.proxy=="string"&&fa.SUPPORT_CORS_XHR&&!s,!t&&this._options.allowTaint===!1&&!yC(e)&&!wC(e)&&!r&&!s?[2]:(a=e,r?[4,this.proxy(a)]:[3,2]);case 1:a=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,u){var h=new Image;h.onload=function(){return l(h)},h.onerror=u,(lW(a)||s)&&(h.crossOrigin="anonymous"),h.src=a,h.complete===!0&&setTimeout(function(){return l(h)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},n.prototype.has=function(e){return typeof this._cache[e]<"u"},n.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},n.prototype.proxy=function(e){var t=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var r=e.substring(0,256);return new Promise(function(a,i){var o=fa.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")a(l.response);else{var f=new FileReader;f.addEventListener("load",function(){return a(f.result)},!1),f.addEventListener("error",function(d){return i(d)},!1),f.readAsDataURL(l.response)}else i("Failed to proxy resource "+r+" with status code "+l.status)},l.onerror=i;var u=s.indexOf("?")>-1?"&":"?";if(l.open("GET",""+s+u+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),t._options.imageTimeout){var h=t._options.imageTimeout;l.timeout=h,l.ontimeout=function(){return i("Timed out ("+h+"ms) proxying "+r)}}l.send()})},n}(),rW=/^data:image\/svg\+xml/i,aW=/^data:image\/.*;base64,/i,iW=/^data:image\/.*/i,oW=function(n){return fa.SUPPORT_SVG_DRAWING||!AW(n)},yC=function(n){return iW.test(n)},lW=function(n){return aW.test(n)},wC=function(n){return n.substr(0,4)==="blob"},AW=function(n){return n.substr(-3).toLowerCase()==="svg"||rW.test(n)},xt=function(){function n(e,t){this.type=0,this.x=e,this.y=t}return n.prototype.add=function(e,t){return new n(this.x+e,this.y+t)},n}(),Gd=function(n,e,t){return new xt(n.x+(e.x-n.x)*t,n.y+(e.y-n.y)*t)},zy=function(){function n(e,t,s,r){this.type=1,this.start=e,this.startControl=t,this.endControl=s,this.end=r}return n.prototype.subdivide=function(e,t){var s=Gd(this.start,this.startControl,e),r=Gd(this.startControl,this.endControl,e),a=Gd(this.endControl,this.end,e),i=Gd(s,r,e),o=Gd(r,a,e),l=Gd(i,o,e);return t?new n(this.start,s,i,l):new n(l,o,a,this.end)},n.prototype.add=function(e,t){return new n(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},n.prototype.reverse=function(){return new n(this.end,this.endControl,this.startControl,this.start)},n}(),Io=function(n){return n.type===1},uW=function(){function n(e){var t=e.styles,s=e.bounds,r=cg(t.borderTopLeftRadius,s.width,s.height),a=r[0],i=r[1],o=cg(t.borderTopRightRadius,s.width,s.height),l=o[0],u=o[1],h=cg(t.borderBottomRightRadius,s.width,s.height),f=h[0],d=h[1],m=cg(t.borderBottomLeftRadius,s.width,s.height),g=m[0],w=m[1],v=[];v.push((a+l)/s.width),v.push((g+f)/s.width),v.push((i+w)/s.height),v.push((u+d)/s.height);var b=Math.max.apply(Math,v);b>1&&(a/=b,i/=b,l/=b,u/=b,f/=b,d/=b,g/=b,w/=b);var C=s.width-l,N=s.height-d,I=s.width-f,L=s.height-w,$=t.borderTopWidth,H=t.borderRightWidth,U=t.borderBottomWidth,O=t.borderLeftWidth,z=ds(t.paddingTop,e.bounds.width),T=ds(t.paddingRight,e.bounds.width),R=ds(t.paddingBottom,e.bounds.width),W=ds(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||i>0?Fs(s.left+O/3,s.top+$/3,a-O/3,i-$/3,zn.TOP_LEFT):new xt(s.left+O/3,s.top+$/3),this.topRightBorderDoubleOuterBox=a>0||i>0?Fs(s.left+C,s.top+$/3,l-H/3,u-$/3,zn.TOP_RIGHT):new xt(s.left+s.width-H/3,s.top+$/3),this.bottomRightBorderDoubleOuterBox=f>0||d>0?Fs(s.left+I,s.top+N,f-H/3,d-U/3,zn.BOTTOM_RIGHT):new xt(s.left+s.width-H/3,s.top+s.height-U/3),this.bottomLeftBorderDoubleOuterBox=g>0||w>0?Fs(s.left+O/3,s.top+L,g-O/3,w-U/3,zn.BOTTOM_LEFT):new xt(s.left+O/3,s.top+s.height-U/3),this.topLeftBorderDoubleInnerBox=a>0||i>0?Fs(s.left+O*2/3,s.top+$*2/3,a-O*2/3,i-$*2/3,zn.TOP_LEFT):new xt(s.left+O*2/3,s.top+$*2/3),this.topRightBorderDoubleInnerBox=a>0||i>0?Fs(s.left+C,s.top+$*2/3,l-H*2/3,u-$*2/3,zn.TOP_RIGHT):new xt(s.left+s.width-H*2/3,s.top+$*2/3),this.bottomRightBorderDoubleInnerBox=f>0||d>0?Fs(s.left+I,s.top+N,f-H*2/3,d-U*2/3,zn.BOTTOM_RIGHT):new xt(s.left+s.width-H*2/3,s.top+s.height-U*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||w>0?Fs(s.left+O*2/3,s.top+L,g-O*2/3,w-U*2/3,zn.BOTTOM_LEFT):new xt(s.left+O*2/3,s.top+s.height-U*2/3),this.topLeftBorderStroke=a>0||i>0?Fs(s.left+O/2,s.top+$/2,a-O/2,i-$/2,zn.TOP_LEFT):new xt(s.left+O/2,s.top+$/2),this.topRightBorderStroke=a>0||i>0?Fs(s.left+C,s.top+$/2,l-H/2,u-$/2,zn.TOP_RIGHT):new xt(s.left+s.width-H/2,s.top+$/2),this.bottomRightBorderStroke=f>0||d>0?Fs(s.left+I,s.top+N,f-H/2,d-U/2,zn.BOTTOM_RIGHT):new xt(s.left+s.width-H/2,s.top+s.height-U/2),this.bottomLeftBorderStroke=g>0||w>0?Fs(s.left+O/2,s.top+L,g-O/2,w-U/2,zn.BOTTOM_LEFT):new xt(s.left+O/2,s.top+s.height-U/2),this.topLeftBorderBox=a>0||i>0?Fs(s.left,s.top,a,i,zn.TOP_LEFT):new xt(s.left,s.top),this.topRightBorderBox=l>0||u>0?Fs(s.left+C,s.top,l,u,zn.TOP_RIGHT):new xt(s.left+s.width,s.top),this.bottomRightBorderBox=f>0||d>0?Fs(s.left+I,s.top+N,f,d,zn.BOTTOM_RIGHT):new xt(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=g>0||w>0?Fs(s.left,s.top+L,g,w,zn.BOTTOM_LEFT):new xt(s.left,s.top+s.height),this.topLeftPaddingBox=a>0||i>0?Fs(s.left+O,s.top+$,Math.max(0,a-O),Math.max(0,i-$),zn.TOP_LEFT):new xt(s.left+O,s.top+$),this.topRightPaddingBox=l>0||u>0?Fs(s.left+Math.min(C,s.width-H),s.top+$,C>s.width+H?0:Math.max(0,l-H),Math.max(0,u-$),zn.TOP_RIGHT):new xt(s.left+s.width-H,s.top+$),this.bottomRightPaddingBox=f>0||d>0?Fs(s.left+Math.min(I,s.width-O),s.top+Math.min(N,s.height-U),Math.max(0,f-H),Math.max(0,d-U),zn.BOTTOM_RIGHT):new xt(s.left+s.width-H,s.top+s.height-U),this.bottomLeftPaddingBox=g>0||w>0?Fs(s.left+O,s.top+Math.min(L,s.height-U),Math.max(0,g-O),Math.max(0,w-U),zn.BOTTOM_LEFT):new xt(s.left+O,s.top+s.height-U),this.topLeftContentBox=a>0||i>0?Fs(s.left+O+W,s.top+$+z,Math.max(0,a-(O+W)),Math.max(0,i-($+z)),zn.TOP_LEFT):new xt(s.left+O+W,s.top+$+z),this.topRightContentBox=l>0||u>0?Fs(s.left+Math.min(C,s.width+O+W),s.top+$+z,C>s.width+O+W?0:l-O+W,u-($+z),zn.TOP_RIGHT):new xt(s.left+s.width-(H+T),s.top+$+z),this.bottomRightContentBox=f>0||d>0?Fs(s.left+Math.min(I,s.width-(O+W)),s.top+Math.min(N,s.height+$+z),Math.max(0,f-(H+T)),d-(U+R),zn.BOTTOM_RIGHT):new xt(s.left+s.width-(H+T),s.top+s.height-(U+R)),this.bottomLeftContentBox=g>0||w>0?Fs(s.left+O+W,s.top+L,Math.max(0,g-(O+W)),w-(U+R),zn.BOTTOM_LEFT):new xt(s.left+O+W,s.top+s.height-(U+R))}return n}(),zn;(function(n){n[n.TOP_LEFT=0]="TOP_LEFT",n[n.TOP_RIGHT=1]="TOP_RIGHT",n[n.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",n[n.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(zn||(zn={}));var Fs=function(n,e,t,s,r){var a=4*((Math.sqrt(2)-1)/3),i=t*a,o=s*a,l=n+t,u=e+s;switch(r){case zn.TOP_LEFT:return new zy(new xt(n,u),new xt(n,u-o),new xt(l-i,e),new xt(l,e));case zn.TOP_RIGHT:return new zy(new xt(n,e),new xt(n+i,e),new xt(l,u-o),new xt(l,u));case zn.BOTTOM_RIGHT:return new zy(new xt(l,e),new xt(l,e+o),new xt(n+i,u),new xt(n,u));case zn.BOTTOM_LEFT:default:return new zy(new xt(l,u),new xt(l-i,u),new xt(n,e+o),new xt(n,e))}},V2=function(n){return[n.topLeftBorderBox,n.topRightBorderBox,n.bottomRightBorderBox,n.bottomLeftBorderBox]},cW=function(n){return[n.topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox]},G2=function(n){return[n.topLeftPaddingBox,n.topRightPaddingBox,n.bottomRightPaddingBox,n.bottomLeftPaddingBox]},hW=function(){function n(e,t,s){this.offsetX=e,this.offsetY=t,this.matrix=s,this.type=0,this.target=6}return n}(),jy=function(){function n(e,t){this.path=e,this.target=t,this.type=1}return n}(),fW=function(){function n(e){this.opacity=e,this.type=2,this.target=6}return n}(),dW=function(n){return n.type===0},gL=function(n){return n.type===1},pW=function(n){return n.type===2},UT=function(n,e){return n.length===e.length?n.some(function(t,s){return t===e[s]}):!1},mW=function(n,e,t,s,r){return n.map(function(a,i){switch(i){case 0:return a.add(e,t);case 1:return a.add(e+s,t);case 2:return a.add(e+s,t+r);case 3:return a.add(e,t+r)}return a})},yL=function(){function n(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return n}(),wL=function(){function n(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new uW(this.container),this.container.styles.opacity<1&&this.effects.push(new fW(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new hW(s,r,a))}if(this.container.styles.overflowX!==0){var i=V2(this.curves),o=G2(this.curves);UT(i,o)?this.effects.push(new jy(i,6)):(this.effects.push(new jy(i,2)),this.effects.push(new jy(o,4)))}}return n.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,r=this.effects.slice(0);s;){var a=s.effects.filter(function(l){return!gL(l)});if(t||s.container.styles.position!==0||!s.parent){if(r.unshift.apply(r,a),t=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var i=V2(s.curves),o=G2(s.curves);UT(i,o)||r.unshift(new jy(o,6))}}else r.unshift.apply(r,a);s=s.parent}return r.filter(function(l){return Rr(l.target,e)})},n}(),IB=function(n,e,t,s){n.container.elements.forEach(function(r){var a=Rr(r.flags,4),i=Rr(r.flags,2),o=new wL(r,n);Rr(r.styles.display,2048)&&s.push(o);var l=Rr(r.flags,8)?[]:s;if(a||i){var u=a||r.styles.isPositioned()?t:e,h=new yL(o);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var f=r.styles.zIndex.order;if(f<0){var d=0;u.negativeZIndex.some(function(g,w){return f>g.element.container.styles.zIndex.order?(d=w,!1):d>0}),u.negativeZIndex.splice(d,0,h)}else if(f>0){var m=0;u.positiveZIndex.some(function(g,w){return f>=g.element.container.styles.zIndex.order?(m=w+1,!1):m>0}),u.positiveZIndex.splice(m,0,h)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(h)}else r.styles.isFloating()?u.nonPositionedFloats.push(h):u.nonPositionedInlineLevel.push(h);IB(o,h,a?h:t,l)}else r.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),IB(o,e,t,l);Rr(r.flags,8)&&bL(r,l)})},bL=function(n,e){for(var t=n instanceof vB?n.start:1,s=n instanceof vB?n.reversed:!1,r=0;r<e.length;r++){var a=e[r];a.container instanceof sL&&typeof a.container.value=="number"&&a.container.value!==0&&(t=a.container.value),a.listValue=Lg(t,a.container.styles.listStyleType,!0),t+=s?-1:1}},gW=function(n){var e=new wL(n,null),t=new yL(e),s=[];return IB(e,t,t,s),bL(e.container,s),t},RT=function(n,e){switch(e){case 0:return Fo(n.topLeftBorderBox,n.topLeftPaddingBox,n.topRightBorderBox,n.topRightPaddingBox);case 1:return Fo(n.topRightBorderBox,n.topRightPaddingBox,n.bottomRightBorderBox,n.bottomRightPaddingBox);case 2:return Fo(n.bottomRightBorderBox,n.bottomRightPaddingBox,n.bottomLeftBorderBox,n.bottomLeftPaddingBox);case 3:default:return Fo(n.bottomLeftBorderBox,n.bottomLeftPaddingBox,n.topLeftBorderBox,n.topLeftPaddingBox)}},yW=function(n,e){switch(e){case 0:return Fo(n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox,n.topRightBorderBox,n.topRightBorderDoubleOuterBox);case 1:return Fo(n.topRightBorderBox,n.topRightBorderDoubleOuterBox,n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox);case 2:return Fo(n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox,n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox);case 3:default:return Fo(n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox,n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox)}},wW=function(n,e){switch(e){case 0:return Fo(n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox,n.topRightBorderDoubleInnerBox,n.topRightPaddingBox);case 1:return Fo(n.topRightBorderDoubleInnerBox,n.topRightPaddingBox,n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox);case 2:return Fo(n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox,n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox);case 3:default:return Fo(n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox,n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox)}},bW=function(n,e){switch(e){case 0:return Vy(n.topLeftBorderStroke,n.topRightBorderStroke);case 1:return Vy(n.topRightBorderStroke,n.bottomRightBorderStroke);case 2:return Vy(n.bottomRightBorderStroke,n.bottomLeftBorderStroke);case 3:default:return Vy(n.bottomLeftBorderStroke,n.topLeftBorderStroke)}},Vy=function(n,e){var t=[];return Io(n)?t.push(n.subdivide(.5,!1)):t.push(n),Io(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Fo=function(n,e,t,s){var r=[];return Io(n)?r.push(n.subdivide(.5,!1)):r.push(n),Io(t)?r.push(t.subdivide(.5,!0)):r.push(t),Io(s)?r.push(s.subdivide(.5,!0).reverse()):r.push(s),Io(e)?r.push(e.subdivide(.5,!1).reverse()):r.push(e),r},xL=function(n){var e=n.bounds,t=n.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},K2=function(n){var e=n.styles,t=n.bounds,s=ds(e.paddingLeft,t.width),r=ds(e.paddingRight,t.width),a=ds(e.paddingTop,t.width),i=ds(e.paddingBottom,t.width);return t.add(s+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+s+r),-(e.borderTopWidth+e.borderBottomWidth+a+i))},xW=function(n,e){return n===0?e.bounds:n===2?K2(e):xL(e)},vW=function(n,e){return n===0?e.bounds:n===2?K2(e):xL(e)},bC=function(n,e,t){var s=xW(ep(n.styles.backgroundOrigin,e),n),r=vW(ep(n.styles.backgroundClip,e),n),a=CW(ep(n.styles.backgroundSize,e),t,s),i=a[0],o=a[1],l=cg(ep(n.styles.backgroundPosition,e),s.width-i,s.height-o),u=BW(ep(n.styles.backgroundRepeat,e),l,a,s,r),h=Math.round(s.left+l[0]),f=Math.round(s.top+l[1]);return[u,h,f,i,o]},Kd=function(n){return ss(n)&&n.value===hp.AUTO},Gy=function(n){return typeof n=="number"},CW=function(n,e,t){var s=e[0],r=e[1],a=e[2],i=n[0],o=n[1];if(!i)return[0,0];if(Cr(i)&&o&&Cr(o))return[ds(i,t.width),ds(o,t.height)];var l=Gy(a);if(ss(i)&&(i.value===hp.CONTAIN||i.value===hp.COVER)){if(Gy(a)){var u=t.width/t.height;return u<a!=(i.value===hp.COVER)?[t.width,t.width/a]:[t.height*a,t.height]}return[t.width,t.height]}var h=Gy(s),f=Gy(r),d=h||f;if(Kd(i)&&(!o||Kd(o))){if(h&&f)return[s,r];if(!l&&!d)return[t.width,t.height];if(d&&l){var m=h?s:r*a,g=f?r:s/a;return[m,g]}var w=h?s:t.width,v=f?r:t.height;return[w,v]}if(l){var b=0,C=0;return Cr(i)?b=ds(i,t.width):Cr(o)&&(C=ds(o,t.height)),Kd(i)?b=C*a:(!o||Kd(o))&&(C=b/a),[b,C]}var N=null,I=null;if(Cr(i)?N=ds(i,t.width):o&&Cr(o)&&(I=ds(o,t.height)),N!==null&&(!o||Kd(o))&&(I=h&&f?N/s*r:t.height),I!==null&&Kd(i)&&(N=h&&f?I/r*s:t.width),N!==null&&I!==null)return[N,I];throw new Error("Unable to calculate background-size for element")},ep=function(n,e){var t=n[e];return typeof t>"u"?n[0]:t},BW=function(n,e,t,s,r){var a=e[0],i=e[1],o=t[0],l=t[1];switch(n){case 2:return[new xt(Math.round(s.left),Math.round(s.top+i)),new xt(Math.round(s.left+s.width),Math.round(s.top+i)),new xt(Math.round(s.left+s.width),Math.round(l+s.top+i)),new xt(Math.round(s.left),Math.round(l+s.top+i))];case 3:return[new xt(Math.round(s.left+a),Math.round(s.top)),new xt(Math.round(s.left+a+o),Math.round(s.top)),new xt(Math.round(s.left+a+o),Math.round(s.height+s.top)),new xt(Math.round(s.left+a),Math.round(s.height+s.top))];case 1:return[new xt(Math.round(s.left+a),Math.round(s.top+i)),new xt(Math.round(s.left+a+o),Math.round(s.top+i)),new xt(Math.round(s.left+a+o),Math.round(s.top+i+l)),new xt(Math.round(s.left+a),Math.round(s.top+i+l))];default:return[new xt(Math.round(r.left),Math.round(r.top)),new xt(Math.round(r.left+r.width),Math.round(r.top)),new xt(Math.round(r.left+r.width),Math.round(r.height+r.top)),new xt(Math.round(r.left),Math.round(r.height+r.top))]}},SW="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",$T="Hidden Text",NW=function(){function n(e){this._data={},this._document=e}return n.prototype.parseMetrics=function(e,t){var s=this._document.createElement("div"),r=this._document.createElement("img"),a=this._document.createElement("span"),i=this._document.body;s.style.visibility="hidden",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",i.appendChild(s),r.src=SW,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=t,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode($T)),s.appendChild(a),s.appendChild(r);var o=r.offsetTop-a.offsetTop+2;s.removeChild(a),s.appendChild(this._document.createTextNode($T)),s.style.lineHeight="normal",r.style.verticalAlign="super";var l=r.offsetTop-s.offsetTop+2;return i.removeChild(s),{baseline:o,middle:l}},n.prototype.getMetrics=function(e,t){var s=e+" "+t;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(e,t)),this._data[s]},n}(),vL=function(){function n(e,t){this.context=e,this.options=t}return n}(),IW=1e4,EW=function(n){$l(e,n);function e(t,s){var r=n.call(this,t,s)||this;return r._activeEffects=[],r.canvas=s.canvas?s.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),s.canvas||(r.canvas.width=Math.floor(s.width*s.scale),r.canvas.height=Math.floor(s.height*s.scale),r.canvas.style.width=s.width+"px",r.canvas.style.height=s.height+"px"),r.fontMetrics=new NW(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-s.x,-s.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),r}return e.prototype.applyEffects=function(t){for(var s=this;this._activeEffects.length;)this.popEffect();t.forEach(function(r){return s.applyEffect(r)})},e.prototype.applyEffect=function(t){this.ctx.save(),pW(t)&&(this.ctx.globalAlpha=t.opacity),dW(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),gL(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return ti(this,void 0,void 0,function(){var s;return La(this,function(r){switch(r.label){case 0:return s=t.element.container.styles,s.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return ti(this,void 0,void 0,function(){return La(this,function(s){switch(s.label){case 0:if(Rr(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(t)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,s,r){var a=this;if(s===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+r);else{var i=VS(t.text);i.reduce(function(o,l){return a.ctx.fillText(l,o,t.bounds.top+r),o+a.ctx.measureText(l).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var s=t.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),r=LW(t.fontFamily).join(", "),a=Zg(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,s,t.fontWeight,a,r].join(" "),r,a]},e.prototype.renderTextNode=function(t,s){return ti(this,void 0,void 0,function(){var r,a,i,o,l,u,h,f,d=this;return La(this,function(m){return r=this.createFontStyle(s),a=r[0],i=r[1],o=r[2],this.ctx.font=a,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),u=l.baseline,h=l.middle,f=s.paintOrder,t.textBounds.forEach(function(g){f.forEach(function(w){switch(w){case 0:d.ctx.fillStyle=Xr(s.color),d.renderTextWithLetterSpacing(g,s.letterSpacing,u);var v=s.textShadow;v.length&&g.text.trim().length&&(v.slice(0).reverse().forEach(function(b){d.ctx.shadowColor=Xr(b.color),d.ctx.shadowOffsetX=b.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=b.offsetY.number*d.options.scale,d.ctx.shadowBlur=b.blur.number,d.renderTextWithLetterSpacing(g,s.letterSpacing,u)}),d.ctx.shadowColor="",d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),s.textDecorationLine.length&&(d.ctx.fillStyle=Xr(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(b){switch(b){case 1:d.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:d.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:d.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+h),g.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&g.text.trim().length&&(d.ctx.strokeStyle=Xr(s.webkitTextStrokeColor),d.ctx.lineWidth=s.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?"miter":"round",d.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),d.ctx.strokeStyle="",d.ctx.lineWidth=0,d.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,s,r){if(r&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var a=K2(t),i=G2(s);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(r,0,0,t.intrinsicWidth,t.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return ti(this,void 0,void 0,function(){var s,r,a,i,o,l,C,C,u,h,f,d,I,m,g,L,w,v,b,C,N,I,L;return La(this,function($){switch($.label){case 0:this.applyEffects(t.getEffects(4)),s=t.container,r=t.curves,a=s.styles,i=0,o=s.textNodes,$.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,a)]):[3,4];case 2:$.sent(),$.label=3;case 3:return i++,[3,1];case 4:if(!(s instanceof eL))return[3,8];$.label=5;case 5:return $.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return C=$.sent(),this.renderReplacedElement(s,r,C),[3,8];case 7:return $.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof tL&&this.renderReplacedElement(s,r,s.canvas),!(s instanceof nL))return[3,12];$.label=9;case 9:return $.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return C=$.sent(),this.renderReplacedElement(s,r,C),[3,12];case 11:return $.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof iL&&s.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,u.render(s.tree)]):[3,14];case 13:h=$.sent(),s.width&&s.height&&this.ctx.drawImage(h,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),$.label=14;case 14:if(s instanceof GS&&(f=Math.min(s.bounds.width,s.bounds.height),s.type===H2?s.checked&&(this.ctx.save(),this.path([new xt(s.bounds.left+f*.39363,s.bounds.top+f*.79),new xt(s.bounds.left+f*.16,s.bounds.top+f*.5549),new xt(s.bounds.left+f*.27347,s.bounds.top+f*.44071),new xt(s.bounds.left+f*.39694,s.bounds.top+f*.5649),new xt(s.bounds.left+f*.72983,s.bounds.top+f*.23),new xt(s.bounds.left+f*.84,s.bounds.top+f*.34085),new xt(s.bounds.left+f*.39363,s.bounds.top+f*.79)]),this.ctx.fillStyle=Xr(CT),this.ctx.fill(),this.ctx.restore()):s.type===P2&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+f/2,s.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Xr(CT),this.ctx.fill(),this.ctx.restore())),kW(s)&&s.value.length){switch(d=this.createFontStyle(a),I=d[0],m=d[1],g=this.fontMetrics.getMetrics(I,m).baseline,this.ctx.font=I,this.ctx.fillStyle=Xr(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=TW(s.styles.textAlign),L=K2(s),w=0,s.styles.textAlign){case 1:w+=L.width/2;break;case 2:w+=L.width;break}v=L.add(w,0,0,-L.height/2+1),this.ctx.save(),this.path([new xt(L.left,L.top),new xt(L.left+L.width,L.top),new xt(L.left+L.width,L.top+L.height),new xt(L.left,L.top+L.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Sg(s.value,v),a.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Rr(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if(b=s.styles.listStyleImage,b.type!==0)return[3,18];C=void 0,N=b.url,$.label=15;case 15:return $.trys.push([15,17,,18]),[4,this.context.cache.match(N)];case 16:return C=$.sent(),this.ctx.drawImage(C,s.bounds.left-(C.width+10),s.bounds.top),[3,18];case 17:return $.sent(),this.context.logger.error("Error loading list-style-image "+N),[3,18];case 18:return[3,20];case 19:t.listValue&&s.styles.listStyleType!==-1&&(I=this.createFontStyle(a)[0],this.ctx.font=I,this.ctx.fillStyle=Xr(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",L=new Tu(s.bounds.left,s.bounds.top+ds(s.styles.paddingTop,s.bounds.width),s.bounds.width,iT(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Sg(t.listValue,L),a.letterSpacing,iT(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),$.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return ti(this,void 0,void 0,function(){var s,r,b,a,i,b,o,l,b,u,h,b,f,d,b,m,g,b,w,v,b;return La(this,function(C){switch(C.label){case 0:if(Rr(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:C.sent(),s=0,r=t.negativeZIndex,C.label=2;case 2:return s<r.length?(b=r[s],[4,this.renderStack(b)]):[3,5];case 3:C.sent(),C.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:C.sent(),a=0,i=t.nonInlineLevel,C.label=7;case 7:return a<i.length?(b=i[a],[4,this.renderNode(b)]):[3,10];case 8:C.sent(),C.label=9;case 9:return a++,[3,7];case 10:o=0,l=t.nonPositionedFloats,C.label=11;case 11:return o<l.length?(b=l[o],[4,this.renderStack(b)]):[3,14];case 12:C.sent(),C.label=13;case 13:return o++,[3,11];case 14:u=0,h=t.nonPositionedInlineLevel,C.label=15;case 15:return u<h.length?(b=h[u],[4,this.renderStack(b)]):[3,18];case 16:C.sent(),C.label=17;case 17:return u++,[3,15];case 18:f=0,d=t.inlineLevel,C.label=19;case 19:return f<d.length?(b=d[f],[4,this.renderNode(b)]):[3,22];case 20:C.sent(),C.label=21;case 21:return f++,[3,19];case 22:m=0,g=t.zeroOrAutoZIndexOrTransformedOrOpacity,C.label=23;case 23:return m<g.length?(b=g[m],[4,this.renderStack(b)]):[3,26];case 24:C.sent(),C.label=25;case 25:return m++,[3,23];case 26:w=0,v=t.positiveZIndex,C.label=27;case 27:return w<v.length?(b=v[w],[4,this.renderStack(b)]):[3,30];case 28:C.sent(),C.label=29;case 29:return w++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var s=this;t.forEach(function(r,a){var i=Io(r)?r.start:r;a===0?s.ctx.moveTo(i.x,i.y):s.ctx.lineTo(i.x,i.y),Io(r)&&s.ctx.bezierCurveTo(r.startControl.x,r.startControl.y,r.endControl.x,r.endControl.y,r.end.x,r.end.y)})},e.prototype.renderRepeat=function(t,s,r,a){this.path(t),this.ctx.fillStyle=s,this.ctx.translate(r,a),this.ctx.fill(),this.ctx.translate(-r,-a)},e.prototype.resizeImage=function(t,s,r){var a;if(t.width===s&&t.height===r)return t;var i=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,o=i.createElement("canvas");o.width=Math.max(1,s),o.height=Math.max(1,r);var l=o.getContext("2d");return l.drawImage(t,0,0,t.width,t.height,0,0,s,r),o},e.prototype.renderBackgroundImage=function(t){return ti(this,void 0,void 0,function(){var s,r,a,i,o,l;return La(this,function(u){switch(u.label){case 0:s=t.styles.backgroundImage.length-1,r=function(h){var f,d,m,z,P,Y,W,K,U,g,z,P,Y,W,K,w,v,b,C,N,I,L,$,H,U,O,z,T,R,W,K,re,P,Y,J,te,j,ue,Q,V,Z,le;return La(this,function(ce){switch(ce.label){case 0:if(h.type!==0)return[3,5];f=void 0,d=h.url,ce.label=1;case 1:return ce.trys.push([1,3,,4]),[4,a.context.cache.match(d)];case 2:return f=ce.sent(),[3,4];case 3:return ce.sent(),a.context.logger.error("Error loading background-image "+d),[3,4];case 4:return f&&(m=bC(t,s,[f.width,f.height,f.width/f.height]),z=m[0],P=m[1],Y=m[2],W=m[3],K=m[4],U=a.ctx.createPattern(a.resizeImage(f,W,K),"repeat"),a.renderRepeat(z,U,P,Y)),[3,6];case 5:dV(h)?(g=bC(t,s,[null,null,null]),z=g[0],P=g[1],Y=g[2],W=g[3],K=g[4],w=AV(h.angle,W,K),v=w[0],b=w[1],C=w[2],N=w[3],I=w[4],L=document.createElement("canvas"),L.width=W,L.height=K,$=L.getContext("2d"),H=$.createLinearGradient(b,N,C,I),rT(h.stops,v).forEach(function(pe){return H.addColorStop(pe.stop,Xr(pe.color))}),$.fillStyle=H,$.fillRect(0,0,W,K),W>0&&K>0&&(U=a.ctx.createPattern(L,"repeat"),a.renderRepeat(z,U,P,Y))):pV(h)&&(O=bC(t,s,[null,null,null]),z=O[0],T=O[1],R=O[2],W=O[3],K=O[4],re=h.position.length===0?[PS]:h.position,P=ds(re[0],W),Y=ds(re[re.length-1],K),J=uV(h,P,Y,W,K),te=J[0],j=J[1],te>0&&j>0&&(ue=a.ctx.createRadialGradient(T+P,R+Y,0,T+P,R+Y,te),rT(h.stops,te*2).forEach(function(pe){return ue.addColorStop(pe.stop,Xr(pe.color))}),a.path(z),a.ctx.fillStyle=ue,te!==j?(Q=t.bounds.left+.5*t.bounds.width,V=t.bounds.top+.5*t.bounds.height,Z=j/te,le=1/Z,a.ctx.save(),a.ctx.translate(Q,V),a.ctx.transform(1,0,0,Z,0,0),a.ctx.translate(-Q,-V),a.ctx.fillRect(T,le*(R-V)+V,W,K*le),a.ctx.restore()):a.ctx.fill())),ce.label=6;case 6:return s--,[2]}})},a=this,i=0,o=t.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(l=o[i],[5,r(l)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,s,r){return ti(this,void 0,void 0,function(){return La(this,function(a){return this.path(RT(r,s)),this.ctx.fillStyle=Xr(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,s,r,a){return ti(this,void 0,void 0,function(){var i,o;return La(this,function(l){switch(l.label){case 0:return s<3?[4,this.renderSolidBorder(t,r,a)]:[3,2];case 1:return l.sent(),[2];case 2:return i=yW(a,r),this.path(i),this.ctx.fillStyle=Xr(t),this.ctx.fill(),o=wW(a,r),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return ti(this,void 0,void 0,function(){var s,r,a,i,o,l,u,h,f=this;return La(this,function(d){switch(d.label){case 0:return this.applyEffects(t.getEffects(2)),s=t.container.styles,r=!Kc(s.backgroundColor)||s.backgroundImage.length,a=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],i=FW(ep(s.backgroundClip,0),t.curves),r||s.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Kc(s.backgroundColor)||(this.ctx.fillStyle=Xr(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:d.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(m){f.ctx.save();var g=V2(t.curves),w=m.inset?0:IW,v=mW(g,-w+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(f.path(g),f.ctx.clip(),f.mask(v)):(f.mask(g),f.ctx.clip(),f.path(v)),f.ctx.shadowOffsetX=m.offsetX.number+w,f.ctx.shadowOffsetY=m.offsetY.number,f.ctx.shadowColor=Xr(m.color),f.ctx.shadowBlur=m.blur.number,f.ctx.fillStyle=m.inset?Xr(m.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),d.label=2;case 2:o=0,l=0,u=a,d.label=3;case 3:return l<u.length?(h=u[l],h.style!==0&&!Kc(h.color)&&h.width>0?h.style!==2?[3,5]:[4,this.renderDashedDottedBorder(h.color,h.width,o,t.curves,2)]:[3,11]):[3,13];case 4:return d.sent(),[3,11];case 5:return h.style!==3?[3,7]:[4,this.renderDashedDottedBorder(h.color,h.width,o,t.curves,3)];case 6:return d.sent(),[3,11];case 7:return h.style!==4?[3,9]:[4,this.renderDoubleBorder(h.color,h.width,o,t.curves)];case 8:return d.sent(),[3,11];case 9:return[4,this.renderSolidBorder(h.color,o,t.curves)];case 10:d.sent(),d.label=11;case 11:o++,d.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,s,r,a,i){return ti(this,void 0,void 0,function(){var o,l,u,h,f,d,m,g,w,v,b,C,N,I,L,$,L,$;return La(this,function(H){return this.ctx.save(),o=bW(a,r),l=RT(a,r),i===2&&(this.path(l),this.ctx.clip()),Io(l[0])?(u=l[0].start.x,h=l[0].start.y):(u=l[0].x,h=l[0].y),Io(l[1])?(f=l[1].end.x,d=l[1].end.y):(f=l[1].x,d=l[1].y),r===0||r===2?m=Math.abs(u-f):m=Math.abs(h-d),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),g=s<3?s*3:s*2,w=s<3?s*2:s,i===3&&(g=s,w=s),v=!0,m<=g*2?v=!1:m<=g*2+w?(b=m/(2*g+w),g*=b,w*=b):(C=Math.floor((m+w)/(g+w)),N=(m-C*g)/(C-1),I=(m-(C+1)*g)/C,w=I<=0||Math.abs(w-N)<Math.abs(w-I)?N:I),v&&(i===3?this.ctx.setLineDash([0,g+w]):this.ctx.setLineDash([g,w])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=Xr(t),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Io(l[0])&&(L=l[3],$=l[0],this.ctx.beginPath(),this.formatPath([new xt(L.end.x,L.end.y),new xt($.start.x,$.start.y)]),this.ctx.stroke()),Io(l[1])&&(L=l[1],$=l[2],this.ctx.beginPath(),this.formatPath([new xt(L.end.x,L.end.y),new xt($.start.x,$.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return ti(this,void 0,void 0,function(){var s;return La(this,function(r){switch(r.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Xr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=gW(t),[4,this.renderStack(s)];case 1:return r.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(vL),kW=function(n){return n instanceof aL||n instanceof rL?!0:n instanceof GS&&n.type!==P2&&n.type!==H2},FW=function(n,e){switch(n){case 0:return V2(e);case 2:return cW(e);case 1:default:return G2(e)}},TW=function(n){switch(n){case 1:return"center";case 2:return"right";case 0:default:return"left"}},DW=["-apple-system","system-ui"],LW=function(n){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?n.filter(function(e){return DW.indexOf(e)===-1}):n},UW=function(n){$l(e,n);function e(t,s){var r=n.call(this,t,s)||this;return r.canvas=s.canvas?s.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=s,r.canvas.width=Math.floor(s.width*s.scale),r.canvas.height=Math.floor(s.height*s.scale),r.canvas.style.width=s.width+"px",r.canvas.style.height=s.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-s.x,-s.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),r}return e.prototype.render=function(t){return ti(this,void 0,void 0,function(){var s,r;return La(this,function(a){switch(a.label){case 0:return s=xB(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,RW(s)];case 1:return r=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Xr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(r,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(vL),RW=function(n){return new Promise(function(e,t){var s=new Image;s.onload=function(){e(s)},s.onerror=t,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},$W=function(){function n(e){var t=e.id,s=e.enabled;this.id=t,this.enabled=s,this.start=Date.now()}return n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,By([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.prototype.getTime=function(){return Date.now()-this.start},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,By([this.id,this.getTime()+"ms"],e))},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,By([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,By([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.instances={},n}(),_W=function(){function n(e,t){var s;this.windowBounds=t,this.instanceName="#"+n.instanceCount++,this.logger=new $W({id:this.instanceName,enabled:e.logging}),this.cache=(s=e.cache)!==null&&s!==void 0?s:new sW(this,e)}return n.instanceCount=1,n}(),OW=function(n,e){return e===void 0&&(e={}),QW(n,e)};typeof window<"u"&&mL.setContext(window);var QW=function(n,e){return ti(void 0,void 0,void 0,function(){var t,s,r,a,i,o,l,u,h,f,d,m,g,w,v,b,C,N,I,L,H,$,H,U,O,z,T,R,W,K,re,P,Y,J,te,j,ue,Q,V,Z;return La(this,function(le){switch(le.label){case 0:if(!n||typeof n!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=n.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(s=t.defaultView,!s)throw new Error("Document is not attached to a Window");return r={allowTaint:(U=e.allowTaint)!==null&&U!==void 0?U:!1,imageTimeout:(O=e.imageTimeout)!==null&&O!==void 0?O:15e3,proxy:e.proxy,useCORS:(z=e.useCORS)!==null&&z!==void 0?z:!1},a=iB({logging:(T=e.logging)!==null&&T!==void 0?T:!0,cache:e.cache},r),i={windowWidth:(R=e.windowWidth)!==null&&R!==void 0?R:s.innerWidth,windowHeight:(W=e.windowHeight)!==null&&W!==void 0?W:s.innerHeight,scrollX:(K=e.scrollX)!==null&&K!==void 0?K:s.pageXOffset,scrollY:(re=e.scrollY)!==null&&re!==void 0?re:s.pageYOffset},o=new Tu(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new _W(a,o),u=(P=e.foreignObjectRendering)!==null&&P!==void 0?P:!1,h={allowTaint:(Y=e.allowTaint)!==null&&Y!==void 0?Y:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),f=new DT(l,n,h),d=f.clonedReferenceElement,d?[4,f.toIFrame(t,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=le.sent(),g=KS(d)||MK(d)?m7(d.ownerDocument):kw(l,d),w=g.width,v=g.height,b=g.left,C=g.top,N=MW(l,d,e.backgroundColor),I={canvas:e.canvas,backgroundColor:N,scale:(te=(J=e.scale)!==null&&J!==void 0?J:s.devicePixelRatio)!==null&&te!==void 0?te:1,x:((j=e.x)!==null&&j!==void 0?j:0)+b,y:((ue=e.y)!==null&&ue!==void 0?ue:0)+C,width:(Q=e.width)!==null&&Q!==void 0?Q:Math.ceil(w),height:(V=e.height)!==null&&V!==void 0?V:Math.ceil(v)},u?(l.logger.debug("Document cloned, using foreign object rendering"),H=new UW(l,I),[4,H.render(d)]):[3,3];case 2:return L=le.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+b+","+C+" with size "+w+"x"+v+" using computed rendering"),l.logger.debug("Starting DOM parsing"),$=lL(l,d),N===$.styles.backgroundColor&&($.styles.backgroundColor=Iu.TRANSPARENT),l.logger.debug("Starting renderer for element at "+I.x+","+I.y+" with size "+I.width+"x"+I.height),H=new EW(l,I),[4,H.render($)];case 4:L=le.sent(),le.label=5;case 5:return(!((Z=e.removeContainer)!==null&&Z!==void 0)||Z)&&(DT.destroy(m)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,L]}})})},MW=function(n,e,t){var s=e.ownerDocument,r=s.documentElement?Cg(n,getComputedStyle(s.documentElement).backgroundColor):Iu.TRANSPARENT,a=s.body?Cg(n,getComputedStyle(s.body).backgroundColor):Iu.TRANSPARENT,i=typeof t=="string"?Cg(n,t):t===null?Iu.TRANSPARENT:4294967295;return e===s.documentElement?Kc(r)?Kc(a)?i:a:r:i};const HW=Object.freeze(Object.defineProperty({__proto__:null,default:OW},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PW=1e-7,zW=1e-4;class CL{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class WS{refCount(e){return gi("refCount")}incRef(e){return gi("incRef")}timerAvailable(){return!0}time(e){return gi("time")}read(e){return gi("read")}readSync(e){return gi("readSync")}readToGPU(e,t){return gi("readToGPU")}numDataIds(){return gi("numDataIds")}disposeData(e,t){return gi("disposeData")}write(e,t,s){return gi("write")}move(e,t,s,r,a){return gi("move")}createTensorFromGPUData(e,t,s){return gi("createTensorFromGPUData")}memory(){return gi("memory")}floatPrecision(){return gi("floatPrecision")}epsilon(){return this.floatPrecision()===32?PW:zW}dispose(){return gi("dispose")}}function gi(n){throw new Error(`'${n}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jW(n){let e=n.length,t=0;for(;e>0;)t=Math.random()*e|0,e--,tp(n,e,t)}function If(n,e,t){return Math.max(n,Math.min(e,t))}function qS(n){return n%2===0?n:n+1}function tp(n,e,t){const s=n[e];n[e]=n[t],n[t]=s}function VW(n){let e=0;for(let t=0;t<n.length;t++)e+=n[t];return e}function se(n,e){if(!n)throw new Error(typeof e=="string"?e:e())}function Di(n,e,t=""){se(Bn(n,e),()=>t+` Shapes ${n} and ${e} must match`)}function Op(n){se(n!=null,()=>"The input to the tensor constructor must be a non-null value.")}function je(n){if(n.length===0)return 1;let e=n[0];for(let t=1;t<n.length;t++)e*=n[t];return e}function GW(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==null&&e[t]!==null&&n[t]!==e[t])return!1;return!0}function Bn(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function xp(n){return n%1===0}function EB(n){const e=Math.ceil(Math.sqrt(n));return[e,Math.ceil(n/e)]}function fp(n,e){return e<=n.length?n:n+" ".repeat(e-n.length)}function _T(n,e=r=>0,t,s){return new Promise((r,a)=>{let i=0;const o=()=>{if(n()){r();return}i++;const l=e(i);if(t!=null&&i>=t){a();return}s!=null?s(o,l):setTimeout(o,l)};o()})}function BL(n,e){let t=1,s=-1;for(let a=0;a<n.length;++a)if(n[a]>=0)t*=n[a];else if(n[a]===-1){if(s!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${s} and dim ${a}`);s=a}else if(n[a]<0)throw Error(`Shapes can not be < 0. Found ${n[a]} at dim ${a}`);if(s===-1){if(e>0&&e!==t)throw Error(`Size(${e}) must match the product of shape ${n}`);return n}if(t===0)throw Error(`Cannot infer the missing size in [${n}] when there are 0 elements`);if(e%t!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${t}`);const r=n.slice();return r[s]=e/t,r}function dn(n,e){const t=e.length;return n=n==null?e.map((s,r)=>r):[].concat(n),se(n.every(s=>s>=-t&&s<t),()=>`All values in axis param must be in range [-${t}, ${t}) but got axis ${n}`),se(n.every(s=>xp(s)),()=>`All values in axis param must be integers but got axis ${n}`),n.map(s=>s<0?t+s:s)}function ch(n,e){const t=[],s=[],r=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||r?null:dn(e,n).sort();let i=0;for(let o=0;o<n.length;++o){if(a!=null){if(a[i]===o&&n[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${n[o]}' is not 1`);(a[i]==null||a[i]>o)&&n[o]===1&&(t.push(n[o]),s.push(o)),a[i]<=o&&i++}n[o]!==1&&(t.push(n[o]),s.push(o))}return{newShape:t,keptDims:s}}function ea(n,e){return Xs(n,e)}function Xs(n,e){let t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else if(n==="bool")t=new Uint8Array(e);else if(n==="string")t=new Array(e);else throw new Error(`Unknown data type ${n}`);return t}function KW(n,e){for(let t=0;t<n.length;t++){const s=n[t];if(isNaN(s)||!isFinite(s))throw Error(`A tensor of type ${e} being uploaded contains ${s}.`)}}function WW(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function SL(n,e){return!(e==="complex64"||e==="float32"&&n!=="complex64"||e==="int32"&&n!=="float32"&&n!=="complex64"||e==="bool"&&n==="bool")}function W2(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error(`Unknown dtype ${n}`)}function qW(n){if(n==null)return 0;let e=0;return n.forEach(t=>e+=t.length),e}function e0(n){return typeof n=="string"||n instanceof String}function XW(n){return typeof n=="boolean"}function kB(n){return typeof n=="number"}function Qp(n){return Array.isArray(n)?Qp(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray?"int32":kB(n)?"float32":e0(n)?"string":XW(n)?"bool":"float32"}function FB(n){return!!(n&&n.constructor&&n.call&&n.apply)}function TB(n,e){for(let t=e;t<n;++t)if(n%t===0)return t;return n}function _t(n){const e=n.length;if(e<2)return[];const t=new Array(e-1);t[e-2]=n[e-1];for(let s=e-3;s>=0;--s)t[s]=t[s+1]*n[s+1];return t}function NL(n,e,t,s=!1){const r=new Array;if(e.length===1){const a=e[0]*(s?2:1);for(let i=0;i<a;i++)r[i]=t[n+i]}else{const a=e[0],i=e.slice(1),o=i.reduce((l,u)=>l*u)*(s?2:1);for(let l=0;l<a;l++)r[l]=NL(n+l*o,i,t,s)}return r}function Uo(n,e,t=!1){if(n.length===0)return e[0];const s=n.reduce((r,a)=>r*a)*(t?2:1);if(s===0)return[];if(s!==e.length)throw new Error(`[${n}] does not match the input size ${e.length}${t?" for a complex tensor":""}.`);return NL(0,n,e,t)}function YW(n,e){if(Array.isArray(n))return n;if(e==="float32")return n instanceof Float32Array?n:new Float32Array(n);if(e==="int32")return n instanceof Int32Array?n:new Int32Array(n);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(n));throw new Error(`Unknown dtype ${e}`)}function XS(n,e){const t=ma(n,e);for(let s=0;s<t.length;s++)t[s]=1;return t}function ma(n,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool")return new Uint8Array(n);throw new Error(`Unknown data type ${e}`)}function IL(n,e){const t=n.reduce((s,r)=>s*r,1);if(e==null||e==="float32")return Uo(n,new Float32Array(t));if(e==="int32")return Uo(n,new Int32Array(t));if(e==="bool")return Uo(n,new Uint8Array(t));throw new Error(`Unknown data type ${e}`)}function so(n){n.forEach(e=>{se(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${n}].`)})}function EA(n,e,t){if(e===0)return 0;if(e===1)return n[0];let s=n[n.length-1];for(let r=0;r<n.length-1;++r)s+=t[r]*n[r];return s}function Mp(n,e,t){if(e===0)return[];if(e===1)return[n];const s=new Array(e);for(let r=0;r<s.length-1;++r)s[r]=Math.floor(n/t[r]),n-=s[r]*t[r];return s[s.length-1]=n,s}function Ef(n){return n&&n.then&&typeof n.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OT="tfjsflags";class JW{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=ZW,this.populateURLFlags()}setPlatform(e,t){this.platform!=null&&(Qe().getBool("IS_TEST")||Qe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,s){if(this.flagRegistry[e]={evaluationFn:t,setHook:s},this.urlFlags[e]!=null){const r=this.urlFlags[e];Qe().getBool("IS_TEST")||Qe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${r}.`),this.set(e,r)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(Ef(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);OT in e&&e[OT].split(",").forEach(s=>{const[r,a]=s.split(":");this.urlFlags[r]=t9(r,a)})}}function ZW(n){const e={};return n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...s)=>(e9(e,s[0],s[1]),s.join("="))),e}function e9(n,e,t){n[decodeURIComponent(e)]=decodeURIComponent(t||"")}function t9(n,e){const t=e.toLowerCase();return t==="true"||t==="false"?t==="true":`${+t}`===t?+t:e}function Qe(){return EL}let EL=null;function n9(n){EL=n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let xC;function kL(){if(xC==null){let n;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else if(typeof self<"u")n=self;else throw new Error("Could not find a global object");xC=n}return xC}function s9(){const n=kL();return n._tfGlobals==null&&(n._tfGlobals=new Map),n._tfGlobals}function YS(n,e){const t=s9();if(t.has(n))return t.get(n);{const s=e();return t.set(n,s),t.get(n)}}const Qw="Abs",t0="Acos",n0="Acosh",Hp="Add",Mw="AddN",JS="All",ZS="Any",Hw="ArgMax",Pw="ArgMin",s0="Asin",r0="Asinh",a0="Atan",i0="Atanh",o0="Atan2",zw="AvgPool",eN="AvgPoolGrad",jw="AvgPool3D",tN="AvgPool3DGrad",Vw="BatchMatMul",Gw="BatchToSpaceND",nN="Bincount",Kw="BitwiseAnd",r9="BroadcastTo",sN="BroadcastArgs",l0="Cast",A0="Ceil",u0="ClipByValue",rN="Complex",Ww="ComplexAbs",qw="Concat",Xw="Conv2D",aN="Conv2DBackpropFilter",Yw="Conv2DBackpropInput",Jw="Conv3D",iN="Conv3DBackpropFilterV2",oN="Conv3DBackpropInputV2",c0="Cos",h0="Cosh",lN="Cumprod",Zw="Cumsum",AN="CropAndResize",uN="DenseBincount",cN="DepthToSpace",eb="DepthwiseConv2dNative",hN="DepthwiseConv2dNativeBackpropFilter",fN="DepthwiseConv2dNativeBackpropInput",dN="Diag",tb="Dilation2D",DB="Dilation2DBackpropInput",LB="Dilation2DBackpropFilter",a9="Draw",f0="RealDiv",pN="Einsum",d0="Elu",mN="EluGrad",p0="Erf",nb="Equal",m0="Exp",sb="ExpandDims",g0="Expm1",gN="FFT",yN="Fill",wN="FlipLeftRight",y0="Floor",w0="FloorDiv",rb="FusedBatchNorm",ab="GatherV2",bN="GatherNd",ib="Greater",b0="GreaterEqual",x0="Identity",xN="IFFT",vN="Imag",v0="IsFinite",C0="IsInf",B0="IsNan",ob="LeakyRelu",lb="Less",Ab="LessEqual",CN="LinSpace",S0="Log",N0="Log1p",ub="LogicalAnd",cb="LogicalNot",hb="LogicalOr",i9="LogSoftmax",fb="LRN",BN="LRNGrad",db="Max",I0="Maximum",pb="MaxPool",SN="MaxPoolGrad",mb="MaxPool3D",NN="MaxPool3DGrad",IN="MaxPoolWithArgmax",gb="Mean",yb="Min",E0="Minimum",wb="MirrorPad",k0="Mod",EN="Multinomial",F0="Multiply",bb="Neg",xb="NotEqual",kN="NonMaxSuppressionV3",FN="NonMaxSuppressionV4",TN="NonMaxSuppressionV5",vb="OnesLike",Cb="OneHot",Bb="Pack",Sb="PadV2",T0="Pow",Nb="Prelu",Ib="Prod",DN="RaggedGather",LN="RaggedRange",UN="RaggedTensorToTensor",RN="Range",$N="Real",D0="Reciprocal",L0="Relu",Eb="Reshape",kb="ResizeNearestNeighbor",_N="ResizeNearestNeighborGrad",Fb="ResizeBilinear",ON="ResizeBilinearGrad",U0="Relu6",Tb="Reverse",R0="Round",$0="Rsqrt",QN="ScatterNd",MN="TensorScatterUpdate",HN="SearchSorted",Db="Select",_0="Selu",Lb="Slice",O0="Sin",Q0="Sinh",M0="Sign",H0="Sigmoid",P0="Softplus",z0="Sqrt",Ub="Sum",Rb="SpaceToBatchND",$b="SplitV",_b="Softmax",PN="SparseFillEmptyRows",zN="SparseReshape",jN="SparseSegmentMean",VN="SparseSegmentSum",GN="SparseToDense",j0="SquaredDifference",KN="Square",Ob="StaticRegexReplace",WN="StridedSlice",qN="StringNGrams",XN="StringSplit",YN="StringToHashBucketFast",V0="Sub",G0="Tan",K0="Tanh",W0="Tile",JN="TopK",ZN="Transform",dp="Transpose",e5="Unique",Qb="Unpack",Mb="UnsortedSegmentSum",Hb="ZerosLike",q0="Step",UB="FromPixels",t5="RotateWithOffset",q2="_FusedMatMul",X2="FusedConv2D",Y2="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ji(...n){Qe().getBool("IS_TEST")||Qe().getBool("PROD")||console.warn(...n)}function o9(...n){Qe().getBool("IS_TEST")||Qe().getBool("PROD")||console.log(...n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J2=YS("kernelRegistry",()=>new Map),RB=YS("gradRegistry",()=>new Map);function $B(n,e){const t=TL(n,e);return J2.get(t)}function QT(n){return RB.get(n)}function MT(n){const e=J2.entries(),t=[];for(;;){const{done:s,value:r}=e.next();if(s)break;const[a,i]=r,[o]=a.split("_");o===n&&t.push(i)}return t}function FL(n){const{kernelName:e,backendName:t}=n,s=TL(e,t);J2.has(s)&&Ji(`The kernel '${e}' for backend '${t}' is already registered`),J2.set(s,n)}function l9(n){const{kernelName:e}=n;RB.has(e)&&Qe().getBool("DEBUG")&&Ji(`Overriding the gradient for '${e}'`),RB.set(e,n)}function TL(n,e){return`${e}_${n}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DL(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray}var vC,HT;function A9(){if(HT)return vC;HT=1,vC=e;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(z,T,R){this.low=z|0,this.high=T|0,this.unsigned=!!R}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function t(z){return(z&&z.__isLong__)===!0}e.isLong=t;var s={},r={};function a(z,T){var R,W,K;return T?(z>>>=0,(K=0<=z&&z<256)&&(W=r[z],W)?W:(R=o(z,(z|0)<0?-1:0,!0),K&&(r[z]=R),R)):(z|=0,(K=-128<=z&&z<128)&&(W=s[z],W)?W:(R=o(z,z<0?-1:0,!1),K&&(s[z]=R),R))}e.fromInt=a;function i(z,T){if(isNaN(z))return T?C:b;if(T){if(z<0)return C;if(z>=g)return H}else{if(z<=-w)return U;if(z+1>=w)return $}return z<0?i(-z,T).neg():o(z%m|0,z/m|0,T)}e.fromNumber=i;function o(z,T,R){return new e(z,T,R)}e.fromBits=o;var l=Math.pow;function u(z,T,R){if(z.length===0)throw Error("empty string");if(z==="NaN"||z==="Infinity"||z==="+Infinity"||z==="-Infinity")return b;if(typeof T=="number"?(R=T,T=!1):T=!!T,R=R||10,R<2||36<R)throw RangeError("radix");var W;if((W=z.indexOf("-"))>0)throw Error("interior hyphen");if(W===0)return u(z.substring(1),T,R).neg();for(var K=i(l(R,8)),re=b,P=0;P<z.length;P+=8){var Y=Math.min(8,z.length-P),J=parseInt(z.substring(P,P+Y),R);if(Y<8){var te=i(l(R,Y));re=re.mul(te).add(i(J))}else re=re.mul(K),re=re.add(i(J))}return re.unsigned=T,re}e.fromString=u;function h(z,T){return typeof z=="number"?i(z,T):typeof z=="string"?u(z,T):o(z.low,z.high,typeof T=="boolean"?T:z.unsigned)}e.fromValue=h;var f=65536,d=1<<24,m=f*f,g=m*m,w=g/2,v=a(d),b=a(0);e.ZERO=b;var C=a(0,!0);e.UZERO=C;var N=a(1);e.ONE=N;var I=a(1,!0);e.UONE=I;var L=a(-1);e.NEG_ONE=L;var $=o(-1,2147483647,!1);e.MAX_VALUE=$;var H=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=H;var U=o(0,-2147483648,!1);e.MIN_VALUE=U;var O=e.prototype;return O.toInt=function(){return this.unsigned?this.low>>>0:this.low},O.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},O.toString=function(T){if(T=T||10,T<2||36<T)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(U)){var R=i(T),W=this.div(R),K=W.mul(R).sub(this);return W.toString(T)+K.toInt().toString(T)}else return"-"+this.neg().toString(T);for(var re=i(l(T,6),this.unsigned),P=this,Y="";;){var J=P.div(re),te=P.sub(J.mul(re)).toInt()>>>0,j=te.toString(T);if(P=J,P.isZero())return j+Y;for(;j.length<6;)j="0"+j;Y=""+j+Y}},O.getHighBits=function(){return this.high},O.getHighBitsUnsigned=function(){return this.high>>>0},O.getLowBits=function(){return this.low},O.getLowBitsUnsigned=function(){return this.low>>>0},O.getNumBitsAbs=function(){if(this.isNegative())return this.eq(U)?64:this.neg().getNumBitsAbs();for(var T=this.high!=0?this.high:this.low,R=31;R>0&&(T&1<<R)==0;R--);return this.high!=0?R+33:R+1},O.isZero=function(){return this.high===0&&this.low===0},O.eqz=O.isZero,O.isNegative=function(){return!this.unsigned&&this.high<0},O.isPositive=function(){return this.unsigned||this.high>=0},O.isOdd=function(){return(this.low&1)===1},O.isEven=function(){return(this.low&1)===0},O.equals=function(T){return t(T)||(T=h(T)),this.unsigned!==T.unsigned&&this.high>>>31===1&&T.high>>>31===1?!1:this.high===T.high&&this.low===T.low},O.eq=O.equals,O.notEquals=function(T){return!this.eq(T)},O.neq=O.notEquals,O.ne=O.notEquals,O.lessThan=function(T){return this.comp(T)<0},O.lt=O.lessThan,O.lessThanOrEqual=function(T){return this.comp(T)<=0},O.lte=O.lessThanOrEqual,O.le=O.lessThanOrEqual,O.greaterThan=function(T){return this.comp(T)>0},O.gt=O.greaterThan,O.greaterThanOrEqual=function(T){return this.comp(T)>=0},O.gte=O.greaterThanOrEqual,O.ge=O.greaterThanOrEqual,O.compare=function(T){if(t(T)||(T=h(T)),this.eq(T))return 0;var R=this.isNegative(),W=T.isNegative();return R&&!W?-1:!R&&W?1:this.unsigned?T.high>>>0>this.high>>>0||T.high===this.high&&T.low>>>0>this.low>>>0?-1:1:this.sub(T).isNegative()?-1:1},O.comp=O.compare,O.negate=function(){return!this.unsigned&&this.eq(U)?U:this.not().add(N)},O.neg=O.negate,O.add=function(T){t(T)||(T=h(T));var R=this.high>>>16,W=this.high&65535,K=this.low>>>16,re=this.low&65535,P=T.high>>>16,Y=T.high&65535,J=T.low>>>16,te=T.low&65535,j=0,ue=0,Q=0,V=0;return V+=re+te,Q+=V>>>16,V&=65535,Q+=K+J,ue+=Q>>>16,Q&=65535,ue+=W+Y,j+=ue>>>16,ue&=65535,j+=R+P,j&=65535,o(Q<<16|V,j<<16|ue,this.unsigned)},O.subtract=function(T){return t(T)||(T=h(T)),this.add(T.neg())},O.sub=O.subtract,O.multiply=function(T){if(this.isZero())return b;if(t(T)||(T=h(T)),n){var R=n.mul(this.low,this.high,T.low,T.high);return o(R,n.get_high(),this.unsigned)}if(T.isZero())return b;if(this.eq(U))return T.isOdd()?U:b;if(T.eq(U))return this.isOdd()?U:b;if(this.isNegative())return T.isNegative()?this.neg().mul(T.neg()):this.neg().mul(T).neg();if(T.isNegative())return this.mul(T.neg()).neg();if(this.lt(v)&&T.lt(v))return i(this.toNumber()*T.toNumber(),this.unsigned);var W=this.high>>>16,K=this.high&65535,re=this.low>>>16,P=this.low&65535,Y=T.high>>>16,J=T.high&65535,te=T.low>>>16,j=T.low&65535,ue=0,Q=0,V=0,Z=0;return Z+=P*j,V+=Z>>>16,Z&=65535,V+=re*j,Q+=V>>>16,V&=65535,V+=P*te,Q+=V>>>16,V&=65535,Q+=K*j,ue+=Q>>>16,Q&=65535,Q+=re*te,ue+=Q>>>16,Q&=65535,Q+=P*J,ue+=Q>>>16,Q&=65535,ue+=W*j+K*te+re*J+P*Y,ue&=65535,o(V<<16|Z,ue<<16|Q,this.unsigned)},O.mul=O.multiply,O.divide=function(T){if(t(T)||(T=h(T)),T.isZero())throw Error("division by zero");if(n){if(!this.unsigned&&this.high===-2147483648&&T.low===-1&&T.high===-1)return this;var R=(this.unsigned?n.div_u:n.div_s)(this.low,this.high,T.low,T.high);return o(R,n.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?C:b;var W,K,re;if(this.unsigned){if(T.unsigned||(T=T.toUnsigned()),T.gt(this))return C;if(T.gt(this.shru(1)))return I;re=C}else{if(this.eq(U)){if(T.eq(N)||T.eq(L))return U;if(T.eq(U))return N;var P=this.shr(1);return W=P.div(T).shl(1),W.eq(b)?T.isNegative()?N:L:(K=this.sub(T.mul(W)),re=W.add(K.div(T)),re)}else if(T.eq(U))return this.unsigned?C:b;if(this.isNegative())return T.isNegative()?this.neg().div(T.neg()):this.neg().div(T).neg();if(T.isNegative())return this.div(T.neg()).neg();re=b}for(K=this;K.gte(T);){W=Math.max(1,Math.floor(K.toNumber()/T.toNumber()));for(var Y=Math.ceil(Math.log(W)/Math.LN2),J=Y<=48?1:l(2,Y-48),te=i(W),j=te.mul(T);j.isNegative()||j.gt(K);)W-=J,te=i(W,this.unsigned),j=te.mul(T);te.isZero()&&(te=N),re=re.add(te),K=K.sub(j)}return re},O.div=O.divide,O.modulo=function(T){if(t(T)||(T=h(T)),n){var R=(this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,T.low,T.high);return o(R,n.get_high(),this.unsigned)}return this.sub(this.div(T).mul(T))},O.mod=O.modulo,O.rem=O.modulo,O.not=function(){return o(~this.low,~this.high,this.unsigned)},O.and=function(T){return t(T)||(T=h(T)),o(this.low&T.low,this.high&T.high,this.unsigned)},O.or=function(T){return t(T)||(T=h(T)),o(this.low|T.low,this.high|T.high,this.unsigned)},O.xor=function(T){return t(T)||(T=h(T)),o(this.low^T.low,this.high^T.high,this.unsigned)},O.shiftLeft=function(T){return t(T)&&(T=T.toInt()),(T&=63)===0?this:T<32?o(this.low<<T,this.high<<T|this.low>>>32-T,this.unsigned):o(0,this.low<<T-32,this.unsigned)},O.shl=O.shiftLeft,O.shiftRight=function(T){return t(T)&&(T=T.toInt()),(T&=63)===0?this:T<32?o(this.low>>>T|this.high<<32-T,this.high>>T,this.unsigned):o(this.high>>T-32,this.high>=0?0:-1,this.unsigned)},O.shr=O.shiftRight,O.shiftRightUnsigned=function(T){if(t(T)&&(T=T.toInt()),T&=63,T===0)return this;var R=this.high;if(T<32){var W=this.low;return o(W>>>T|R<<32-T,R>>>T,this.unsigned)}else return T===32?o(R,0,this.unsigned):o(R>>>T-32,0,this.unsigned)},O.shru=O.shiftRightUnsigned,O.shr_u=O.shiftRightUnsigned,O.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},O.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},O.toBytes=function(T){return T?this.toBytesLE():this.toBytesBE()},O.toBytesLE=function(){var T=this.high,R=this.low;return[R&255,R>>>8&255,R>>>16&255,R>>>24,T&255,T>>>8&255,T>>>16&255,T>>>24]},O.toBytesBE=function(){var T=this.high,R=this.low;return[T>>>24,T>>>16&255,T>>>8&255,T&255,R>>>24,R>>>16&255,R>>>8&255,R&255]},e.fromBytes=function(T,R,W){return W?e.fromBytesLE(T,R):e.fromBytesBE(T,R)},e.fromBytesLE=function(T,R){return new e(T[0]|T[1]<<8|T[2]<<16|T[3]<<24,T[4]|T[5]<<8|T[6]<<16|T[7]<<24,R)},e.fromBytesBE=function(T,R){return new e(T[4]<<24|T[5]<<16|T[6]<<8|T[7],T[0]<<24|T[1]<<16|T[2]<<8|T[3],R)},vC}var LL=A9();const UL=k3(LL),u9=LM({__proto__:null,default:UL},[LL]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pf=UL||u9;function Pb(n){return pf.fromString(n,!0,16)}const RL=Pb("c3a5c85c97cb3127"),hf=Pb("b492b66fbe98f273"),$a=Pb("9ae16a3b2f90404f");function _B(n){return n.xor(n.shru(47))}function $L(n,e,t){const s=n.slice(e,e+t);return pf.fromBytes(Array.from(s),!0,!0)}function As(n,e){return $L(n,e,8)}function PT(n,e){return $L(n,e,4)}function $r(n,e){return e===0?n:n.shru(e).or(n.shl(64-e))}function Wc(n,e,t=Pb("9ddfea08eb382d69")){let s=n.xor(e).mul(t);s=s.xor(s.shru(47));let r=e.xor(s).mul(t);return r=r.xor(r.shru(47)),r=r.mul(t),r}function c9(n,e,t,s,r,a){r=r.add(n),a=$r(a.add(r).add(s),21);const i=r;return r=r.add(e),r=r.add(t),a=a.add($r(r,44)),[r.add(s),a.add(i)]}function Ky(n,e,t,s){return c9(As(n,e),As(n,e+8),As(n,e+16),As(n,e+24),t,s)}function h9(n,e=n.length){if(e>=8){const t=$a.add(e*2),s=As(n,0).add($a),r=As(n,e-8),a=$r(r,37).mul(t).add(s),i=$r(s,25).add(r).mul(t);return Wc(a,i,t)}if(e>=4){const t=$a.add(e*2),s=PT(n,0);return Wc(s.shl(3).add(e),PT(n,e-4),t)}if(e>0){const t=n[0],s=n[e>>1],r=n[e-1],a=t+(s<<8),i=e+(r<<2);return _B($a.mul(a).xor(RL.mul(i))).mul($a)}return $a}function f9(n,e=n.length){const t=$a.add(e*2),s=As(n,0).mul(hf),r=As(n,8),a=As(n,e-8).mul(t),i=As(n,e-16).mul($a);return Wc($r(s.add(r),43).add($r(a,30)).add(i),s.add($r(r.add($a),18)).add(a),t)}function d9(n,e=n.length){const t=$a.add(e*2),s=As(n,0).mul($a),r=As(n,8),a=As(n,e-8).mul(t),i=As(n,e-16).mul($a),o=$r(s.add(r),43).add($r(a,30)).add(i),l=Wc(o,s.add($r(r.add($a),18)).add(a),t),u=As(n,16).mul(t),h=As(n,24),f=o.add(As(n,e-32)).mul(t),d=l.add(As(n,e-24)).mul(t);return Wc($r(u.add(h),43).add($r(f,30)).add(d),u.add($r(h.add(s),18)).add(f),t)}function p9(n,e=n.length){const t=pf.fromNumber(81,!0);if(e<=32)return e<=16?h9(n,e):f9(n,e);if(e<=64)return d9(n,e);let s=t,r=t.mul(hf).add(113),a=_B(r.mul($a).add(113)).mul($a),i=[pf.UZERO,pf.UZERO],o=[pf.UZERO,pf.UZERO];s=s.mul($a).add(As(n,0));let l=0;const u=(e-1>>6)*64,h=u+(e-1&63)-63;do s=$r(s.add(r).add(i[0]).add(As(n,l+8)),37).mul(hf),r=$r(r.add(i[1]).add(As(n,l+48)),42).mul(hf),s=s.xor(o[1]),r=r.add(i[0]).add(As(n,l+40)),a=$r(a.add(o[0]),33).mul(hf),i=Ky(n,l,i[1].mul(hf),s.add(o[0])),o=Ky(n,l+32,a.add(o[1]),r.add(As(n,l+16))),[a,s]=[s,a],l+=64;while(l!==u);const f=hf.add(a.and(255).shl(1));return l=h,o[0]=o[0].add(e-1&63),i[0]=i[0].add(o[0]),o[0]=o[0].add(i[0]),s=$r(s.add(r).add(i[0]).add(As(n,l+8)),37).mul(f),r=$r(r.add(i[1]).add(As(n,l+48)),42).mul(f),s=s.xor(o[1].mul(9)),r=r.add(i[0].mul(9).add(As(n,l+40))),a=$r(a.add(o[0]),33).mul(f),i=Ky(n,l,i[1].mul(f),s.add(o[0])),o=Ky(n,l+32,a.add(o[1]),r.add(As(n,l+16))),[a,s]=[s,a],Wc(Wc(i[0],o[0],f).add(_B(r).mul(RL)).add(a),Wc(i[1],o[1],f).add(s),f)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hh(n,e){return e==="string"?qc(n):zf([n],e)}function m9(n,e){return n instanceof Float32Array&&e==="float32"||n instanceof Int32Array&&e==="int32"||n instanceof Uint8Array&&e==="bool"}function zf(n,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=kf(n)),Qe().getBool("DEBUG")&&KW(n,e),m9(n,e))return n;if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool"){const t=new Uint8Array(n.length);for(let s=0;s<t.length;++s)Math.round(n[s])!==0&&(t[s]=1);return t}else throw new Error(`Unknown data type ${e}`)}function ni(){return Qe().platform.now()}function qc(n,e="utf-8"){return e=e||"utf-8",Qe().platform.encode(n,e)}function th(n,e="utf-8"){return e=e||"utf-8",Qe().platform.decode(n,e)}function $o(n){return Qe().platform.isTypedArray!=null?Qe().platform.isTypedArray(n):DL(n)}function kf(n,e=[],t=!1){if(e==null&&(e=[]),typeof n=="boolean"||typeof n=="number"||typeof n=="string"||Ef(n)||n==null||$o(n)&&t)e.push(n);else if(Array.isArray(n)||$o(n))for(let s=0;s<n.length;++s)kf(n[s],e,t);else{let s=-1;for(const r of Object.keys(n))/^([1-9]+[0-9]*|0)$/.test(r)&&(s=Math.max(s,Number(r)));for(let r=0;r<=s;r++)kf(n[r],e,t)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g9{constructor(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new w9)}profileKernel(e,t,s){let r;const a=()=>{r=s()};let i;const o=ni();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(a);else{a();for(const u of r)u.dataSync();i=Promise.resolve({kernelMs:ni()-o})}if(Qe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<r.length;u++){const h=r[u];h.data().then(f=>{y9(f,h.dtype,e)})}return{kernelName:e,outputs:r,inputs:t,timeMs:i.then(u=>u.kernelMs),extraInfo:i.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:s,timeMs:r,inputs:a,extraInfo:i}=e;s.forEach(o=>{Promise.all([o.data(),r,i]).then(l=>{this.logger.logKernelProfile(t,o,l[0],l[1],a,l[2])})})}}function y9(n,e,t){if(e!=="float32")return!1;for(let s=0;s<n.length;s++){const r=n[s];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${t}'`),!0}return!1}class w9{logKernelProfile(e,t,s,r,a,i){const o=typeof r=="number"?fp(`${r}ms`,9):r.error,l=fp(e,25),u=t.rank,h=t.size,f=fp(t.shape.toString(),14);let d="";for(const m in a){const g=a[m];if(g!=null){const w=g.shape||t.shape,v=w.length;d+=`${m}: ${v}D ${v>0?w:""} `}}console.log(`%c${l}	%c${o}	%c${u}D ${f}	%c${h}	%c${d}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b9(n,e,t){const s={},r={};for(let l=0;l<e.length;l++)s[e[l].id]=!0;for(let l=0;l<n.length;l++){const u=n[l],h=u.inputs;for(const f in h){const d=h[f];let m=!1;for(let g=0;g<e.length;g++)if(s[d.id]){u.outputs.forEach(w=>s[w.id]=!0),m=!0,r[u.id]=!0;break}if(m)break}}const a={};a[t.id]=!0;const i={};for(let l=n.length-1;l>=0;l--){const u=n[l],h=u.inputs;for(let f=0;f<u.outputs.length;f++)if(a[u.outputs[f].id]){for(const d in h)a[h[d].id]=!0,i[u.id]=!0;break}}const o=[];for(let l=0;l<n.length;l++){const u=n[l];if(r[u.id]&&i[u.id]){const h={};for(const d in u.inputs){const m=u.inputs[d];s[m.id]&&(h[d]=m)}const f=Object.assign({},u);f.inputs=h,f.outputs=u.outputs,o.push(f)}}return o}function x9(n,e,t,s){for(let r=e.length-1;r>=0;r--){const a=e[r],i=[];if(a.outputs.forEach(l=>{const u=n[l.id];u!=null?i.push(u):i.push(null)}),a.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const o=a.gradient(i);for(const l in a.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);const u=t(()=>o[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const h=a.inputs[l];if(!Bn(u.shape,h.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${h.shape}'`);if(n[h.id]==null)n[h.id]=u;else{const f=n[h.id];n[h.id]=s(f,u),f.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zT=20,ng=3,CC=7;function v9(n,e,t,s){const r=_t(e),a=C9(n,e,t,r),i=e.length,o=x2(n,e,t,r,a),l=["Tensor"];return s&&(l.push(`  dtype: ${t}`),l.push(`  rank: ${i}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(o.map(u=>"    "+u).join(`
`)),l.join(`
`)}function C9(n,e,t,s){const r=je(e),a=s[s.length-1],i=new Array(a).fill(0),o=e.length,l=t==="complex64"?pg(n):n;if(o>1)for(let u=0;u<r/a;u++){const h=u*a;for(let f=0;f<a;f++)i[f]=Math.max(i[f],dg(l[h+f],0,t).length)}return i}function dg(n,e,t){let s;return Array.isArray(n)?s=`${parseFloat(n[0].toFixed(CC))} + ${parseFloat(n[1].toFixed(CC))}j`:e0(n)?s=`'${n}'`:t==="bool"?s=_L(n):s=parseFloat(n.toFixed(CC)).toString(),fp(s,e)}function _L(n){return n===0?"false":"true"}function x2(n,e,t,s,r,a=!0){const i=t==="complex64"?2:1,o=e[0],l=e.length;if(l===0){if(t==="complex64"){const w=pg(n);return[dg(w[0],0,t)]}return t==="bool"?[_L(n[0])]:[n[0].toString()]}if(l===1){if(o>zT){const v=ng*i;let b=Array.from(n.slice(0,v)),C=Array.from(n.slice((o-ng)*i,o*i));return t==="complex64"&&(b=pg(b),C=pg(C)),["["+b.map((N,I)=>dg(N,r[I],t)).join(", ")+", ..., "+C.map((N,I)=>dg(N,r[o-ng+I],t)).join(", ")+"]"]}return["["+(t==="complex64"?pg(n):Array.from(n)).map((v,b)=>dg(v,r[b],t)).join(", ")+"]"]}const u=e.slice(1),h=s.slice(1),f=s[0]*i,d=[];if(o>zT){for(let w=0;w<ng;w++){const v=w*f,b=v+f;d.push(...x2(n.slice(v,b),u,t,h,r,!1))}d.push("...");for(let w=o-ng;w<o;w++){const v=w*f,b=v+f;d.push(...x2(n.slice(v,b),u,t,h,r,w===o-1))}}else for(let w=0;w<o;w++){const v=w*f,b=v+f;d.push(...x2(n.slice(v,b),u,t,h,r,w===o-1))}const m=l===2?",":"";d[0]="["+(o>0?d[0]+m:"");for(let w=1;w<d.length-1;w++)d[w]=" "+d[w]+m;let g=`,
`;for(let w=2;w<l;w++)g+=`
`;return d[d.length-1]=" "+d[d.length-1]+"]"+(a?"":g),d}function pg(n){const e=[];for(let t=0;t<n.length;t+=2)e.push([n[t],n[t+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ir{constructor(e,t,s){if(this.dtype=t,this.shape=e.slice(),this.size=je(e),s!=null){const r=s.length;se(r===this.size,()=>`Length of values '${r}' does not match the size inferred by the shape '${this.size}'.`)}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=s||Xs(t,this.size),this.strides=_t(e)}set(e,...t){t.length===0&&(t=[0]),se(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);const s=this.locToIndex(t);this.values[s]=e}get(...e){e.length===0&&(e=[0]);let t=0;for(const r of e){if(r<0||r>=this.shape[t]){const a=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(a)}t++}let s=e[e.length-1];for(let r=0;r<e.length-1;++r)s+=this.strides[r]*e[r];return this.values[s]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let t=e[e.length-1];for(let s=0;s<e.length-1;++s)t+=this.strides[s]*e[s];return t}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const t=new Array(this.shape.length);for(let s=0;s<t.length-1;++s)t[s]=Math.floor(e/this.strides[s]),e-=t[s]*this.strides[s];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return vl().makeTensor(this.values,this.shape,this.dtype)}}let vl=null,np=null;function B9(n){vl=n}function S9(n){np=n}class ps{constructor(e,t,s,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=je(e),this.strides=_t(e),this.dataId=s,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return np.buffer(this.shape,this.dtype,e)}bufferSync(){return np.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Uo(this.shape,e,this.dtype==="complex64")}arraySync(){return Uo(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=vl().read(this.dataId);if(this.dtype==="string"){const t=await e;try{return t.map(s=>th(s))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),vl().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=vl().readSync(this.dataId);if(this.dtype==="string")try{return e.map(t=>th(t))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await vl().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),vl().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return np.print(this,e)}clone(){return this.throwIfDisposed(),np.clone(this)}toString(e=!1){const t=this.dataSync();return v9(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),np.cast(this,e)}variable(e=!0,t,s){return this.throwIfDisposed(),vl().makeVariable(this,e,t,s)}}Object.defineProperty(ps,Symbol.hasInstance,{value:n=>!!n&&n.data!=null&&n.dataSync!=null&&n.throwIfDisposed!=null});function Ge(){return YS("Tensor",()=>ps)}Ge();class Z2 extends ps{constructor(e,t,s,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=s}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Bn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);vl().disposeTensor(this),this.dataId=e.dataId,vl().incRef(this,null)}dispose(){vl().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Z2,Symbol.hasInstance,{value:n=>n instanceof ps&&n.assign!=null&&n.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var jT;(function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"})(jT||(jT={}));var OB;(function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"})(OB||(OB={}));var QB;(function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"})(QB||(QB={}));var MB;(function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"})(MB||(MB={}));var HB;(function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"})(HB||(HB={}));const N9={float32:MB,int32:OB,bool:QB,complex64:HB};function Si(n,e){if(n==="string"||e==="string"){if(n==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${n} with ${e}`)}return N9[n][e]}function n5(n){return Si(n,"int32")}function OL(n){return n!=null&&typeof n=="object"&&"texture"in n&&n.texture instanceof WebGLTexture}function QL(n){return typeof GPUBuffer<"u"&&n!=null&&typeof n=="object"&&"buffer"in n&&n.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zs(n,e){if(n.dtype===e.dtype)return[n,e];const t=Si(n.dtype,e.dtype);return[n.cast(t),e.cast(t)]}function I9(n,e){se(n.dtype===e.dtype,()=>`The dtypes of the first(${n.dtype}) and second(${e.dtype}) input must match`)}function ML(n){const e=[];return HL(n,e,new Set),e}function HL(n,e,t){if(n==null)return;if(n instanceof ps){e.push(n);return}if(!E9(n))return;const s=n;for(const r in s){const a=s[r];t.has(a)||(t.add(a),HL(a,e,t))}}function E9(n){return Array.isArray(n)||typeof n=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BC(n){return n.kernelName!=null}class VT{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class vp{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new VT}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const s=e[t];if(await this.initializeBackend(s).success){await this.setBackend(s);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:t}=this.initializeBackend(e);if(t)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,s=1){return e in this.registryFactory?(Ji(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:s},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:t,asyncInit:s}=this.initializeBackend(e);if(!(s?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new g9(this.backendInstance),!0}setupRegisteredKernels(){MT(this.backendName).forEach(t=>{t.setupFunc!=null&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){MT(e).forEach(s=>{s.disposeFunc!=null&&s.disposeFunc(this.registry[e])})}initializeBackend(e){const t=this.registryFactory[e];if(t==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const s=t.factory();if(s&&!(s instanceof WS)&&typeof s.then=="function"){const r=++this.pendingBackendInitId,a=s.then(i=>r<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(r<this.pendingBackendInitId||(this.pendingBackendInit=null,Ji(`Initialization of backend ${e} failed`),Ji(i.stack||i.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[e]=s,{success:!0,asyncInit:!1}}catch(s){return Ji(`Initialization of backend ${e} failed`),Ji(s.stack||s.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const s=e[t],{success:r,asyncInit:a}=this.initializeBackend(s);if(a||r)return{name:s,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const s=this.state.tensorInfo.get(t),r=s.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),s.backend=e,e.move(t,a,s.shape,s.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let s=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");s=e}let r;return this.scopedRun(()=>this.startScope(s),()=>this.endScope(r),()=>(r=t(),r instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r))}scopedRun(e,t,s){e();try{const r=s();return t(),r}catch(r){throw t(),r}}nextTensorId(){return vp.nextTensorId++}nextVariableId(){return vp.nextVariableId++}clone(e){const t=we.runKernel(x0,{x:e}),s={x:e},r=i=>({x:()=>{const o="float32",l={x:i},u={dtype:o};return we.runKernel(l0,l,u)}}),a=[];return this.addTapeNode(this.state.activeScope.name,s,[t],r,a,{}),t}runKernel(e,t,s){if(this.backendName==null&&this.backend,!($B(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:s})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,s){const r=this.backend.numDataIds();let a=0;s.forEach(l=>{a+=l.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let t,s=[];const r=this.isTapeOn(),a=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let l;const u=BC(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(BC(e)){const{kernelName:g,inputs:w,attrs:v}=e;this.backendName==null&&this.backend;const b=$B(g,this.backendName);se(b!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),o=()=>{const C=this.backend.numDataIds();l=b.kernelFunc({inputs:w,attrs:v,backend:this.backend});const N=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,C,N);const I=N.map(L=>L.rank!=null?L:this.makeTensorFromTensorInfo(L));if(r){const L=this.getTensorsForGradient(g,w,I);s=this.saveTensorsForBackwardMode(L)}return I}}else{const{forwardFunc:g}=e,w=v=>{r&&(s=v.map(b=>this.keep(this.clone(b))))};o=()=>{const v=this.backend.numDataIds();l=this.tidy(()=>g(this.backend,w));const b=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,v,b),b}}const{inputs:h,attrs:f}=e,d=BC(e)?null:e.backwardsFunc;let m;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?t=o():(m=this.profiler.profileKernel(u,h,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(m),t=m.outputs)}),r&&this.addTapeNode(u,h,t,d,s,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(h).map(g=>h[g]!=null?h[g].shape:null),outputShapes:t.map(g=>g.shape),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(l)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(s=>this.keep(this.clone(s)))}getTensorsForGradient(e,t,s){const r=QT(e);if(r!=null){const a=r.inputsToSave||[],i=r.outputsToSave||[];let o;r.saveAllInputs?(se(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(t).map(u=>t[u])):o=a.map(u=>t[u]);const l=s.filter((u,h)=>i[h]);return o.concat(l)}return[]}makeTensor(e,t,s,r){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");s=s||"float32",r=r||this.backend;let a=e;s==="string"&&e0(e[0])&&(a=e.map(l=>qc(l)));const i=r.write(a,t,s),o=new ps(t,s,i,this.nextTensorId());if(this.trackTensor(o,r),s==="string"){const l=this.state.tensorInfo.get(i),u=qW(a);this.state.numBytes+=u-l.bytes,l.bytes=u}return o}makeTensorFromDataId(e,t,s,r){s=s||"float32";const a={dataId:e,shape:t,dtype:s};return this.makeTensorFromTensorInfo(a,r)}makeTensorFromTensorInfo(e,t){const{dataId:s,shape:r,dtype:a}=e,i=new ps(r,a,s,this.nextTensorId());return this.trackTensor(i,t),i}makeVariable(e,t=!0,s,r){s=s||this.nextVariableId().toString(),r!=null&&r!==e.dtype&&(e=e.cast(r));const a=new Z2(e,t,s,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let s=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(s=e.size*W2(e.dtype)),this.state.numBytes+=s,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:s})),e instanceof Z2||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const s=e.size*W2(e.dtype);this.state.numBytes-=s}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,s=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(r=>r.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-s;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,t,s,r,a,i){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:s,saved:a},l=QT(e);l!=null&&(r=l.gradFunc),r!=null&&(o.gradient=u=>(u=u.map((h,f)=>{if(h==null){const d=s[f],m=ma(d.size,d.dtype);return this.makeTensor(m,d.shape,d.dtype)}return h}),r(u.length>1?u:u[0],a,i))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=ML(e),s=new Set(t.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){const i=this.state.activeScope.track[a];!i.kept&&!s.has(i.id)&&i.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(a=>{!a.kept&&a.scopeId===r.id&&this.track(a)})}gradients(e,t,s,r=!1){if(se(t.length>0,()=>"gradients() received an empty list of xs."),s!=null&&s.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));se(a instanceof ps,()=>"The result y returned by f() must be a tensor.");const i=b9(this.state.activeTape,t,a);if(!r&&i.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[a.id]=s??k9(a.shape),x9(o,i,u=>this.tidy(u),F9);const l=t.map(u=>o[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const h of u.saved)h.dispose()}),this.state.activeTape=null),{value:a,grads:l}})}customGrad(e){return se(FB(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{se(t.every(o=>o instanceof ps),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let s;const r={};t.forEach((o,l)=>{r[l]=o});const a=(o,l)=>(s=e(...t,l),se(s.value instanceof ps,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),se(FB(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),i=(o,l)=>{const u=s.gradFunc(o,l),h=Array.isArray(u)?u:[u];se(h.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),se(h.every(d=>d instanceof ps),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const f={};return h.forEach((d,m)=>{f[m]=()=>d}),f};return this.runKernelFunc({forwardFunc:a,backwardsFunc:i,inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=ni(),s=await this.backend.time(e);return s.wallMs=ni()-t,s}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new VT;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}vp.nextTensorId=0;vp.nextVariableId=0;function k9(n){const e=XS(je(n),"float32");return we.makeTensor(e,n,"float32")}function PL(){const n=kL();if(n._tfengine==null){const e=new JW(n);n._tfengine=new vp(e)}return n9(n._tfengine.ENV),B9(()=>n._tfengine),n._tfengine}const we=PL();function F9(n,e){const t={a:n,b:e};return we.runKernel(Hp,t)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T9(){return typeof navigator<"u"&&navigator!=null}function zL(n){if(n||T9()){if(n||(n=navigator),n.product==="ReactNative")return!0;const e=n.userAgent||n.vendor||(typeof window<"u"?window.opera:"");if(!e){const t=n;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function jL(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ai=Qe();ai.registerFlag("DEBUG",()=>!1,n=>{n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ai.registerFlag("IS_BROWSER",()=>jL());ai.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");ai.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ai.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));ai.registerFlag("PROD",()=>!1);ai.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ai.getBool("DEBUG"));ai.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ai.registerFlag("IS_TEST",()=>!1);ai.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>ai.getBool("DEBUG"));ai.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);ai.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);ai.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fh(n,e){let t=n;if($o(n))return e==="string"?[]:[n.length];if(OL(n)){const r=n.channels||"RGBA";return[n.height,n.width*r.length]}else if(QL(n))return[n.buffer.size/(e==null?4:W2(e))];if(!Array.isArray(n))return[];const s=[];for(;Array.isArray(t)||$o(t)&&e!=="string";)s.push(t.length),t=t[0];return Array.isArray(n)&&Qe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&VL(n,s,[]),s}function VL(n,e,t){if(t=t||[],!Array.isArray(n)&&!$o(n)){se(e.length===0,()=>`Element arr[${t.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}se(e.length>0,()=>`Element arr[${t.join("][")}] should be a primitive, but is an array of ${n.length} elements`),se(n.length===e[0],()=>`Element arr[${t.join("][")}] should have ${e[0]} elements, but has ${n.length} elements`);const s=e.slice(1);for(let r=0;r<n.length;++r)VL(n[r],s,t.concat(r))}function GT(n,e,t,s){if(n!=="string_or_numeric"){if(n==null)throw new Error("Expected dtype cannot be null.");if(n!=="numeric"&&n!==e||n==="numeric"&&e==="string")throw new Error(`Argument '${t}' passed to '${s}' must be ${n} tensor, but got ${e} tensor`)}}function oe(n,e,t,s="numeric"){if(n instanceof Ge())return GT(s,n.dtype,e,t),n;let r=Qp(n);if(r!=="string"&&["bool","int32","float32"].indexOf(s)>=0&&(r=s),GT(s,r,e,t),n==null||!$o(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){const l=n==null?"null":n.constructor.name;throw new Error(`Argument '${e}' passed to '${t}' must be a Tensor or TensorLike, but got '${l}'`)}const a=fh(n,r);!$o(n)&&!Array.isArray(n)&&(n=[n]);const o=r!=="string"?zf(n,r):kf(n,[],!0);return we.makeTensor(o,a,r)}function ew(n,e,t,s="numeric"){if(!Array.isArray(n))throw new Error(`Argument ${e} passed to ${t} must be a \`Tensor[]\` or \`TensorLike[]\``);return n.map((a,i)=>oe(a,`${e}[${i}]`,t,s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GL="__op";function ge(n){const e=Object.keys(n);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let t=e[0];const s=n[t];t.endsWith("_")&&(t=t.substring(0,t.length-1)),t=t+GL;const r=(...a)=>{we.startScope(t);try{const i=s(...a);return Ef(i)&&console.error("Cannot return a Promise inside of tidy."),we.endScope(i),i}catch(i){throw we.endScope(null),i}};return Object.defineProperty(r,"name",{value:t,configurable:!0}),r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D9(n,e){const t=oe(n,"real","complex"),s=oe(e,"imag","complex");Di(t.shape,s.shape,`real and imag shapes, ${t.shape} and ${s.shape}, must match in call to tf.complex().`);const r={real:t,imag:s};return we.runKernel(rN,r)}const nh=ge({complex_:D9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dh(n,e,t,s){if(s==null)s=Qp(n);else if(s==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(QL(n)||OL(n)){if(s!=="float32"&&s!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${s}.`);return we.backend.createTensorFromGPUData(n,e||t,s)}if(!$o(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){so(e);const r=je(e),a=je(t);se(r===a,()=>`Based on the provided shape, [${e}], the tensor should have ${r} values but has ${a}`);for(let i=0;i<t.length;++i){const o=t[i],l=i===t.length-1?o!==je(e.slice(i)):!0;se(t[i]===e[i]||!l,()=>`Error creating a new Tensor. Inferred shape (${t}) does not match the provided shape (${e}). `)}}return!$o(n)&&!Array.isArray(n)&&(n=[n]),e=e||t,n=s!=="string"?zf(n,s):kf(n,[],!0),we.makeTensor(n,e,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nl(n,e,t){const s=fh(n,t);return dh(n,e,s,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ff={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class _l{static join(e){return new _l(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(s=>$o(s)?s.buffer:s),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let s=0;s<e.length;s++){const r=e[s];s!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const a=t+r.byteLength;this.shards.push({buffer:r,start:t,end:a}),t=a}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,t=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const s=this.findShardForByte(e);if(s===-1)throw new Error(`Could not find start shard for byte ${e}`);const r=t-e,a=new ArrayBuffer(r),i=new Uint8Array(a);let o=0;for(let l=s;l<this.shards.length;l++){const u=this.shards[l],f=e+o-u.start,d=o,g=Math.min(t,u.end)-u.start,w=new Uint8Array(u.buffer,f,g-f);if(i.set(w,d),o+=w.length,t<u.end)break}return a}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(r){return e<r.start?-1:e>=r.end?1:0}if(t(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const s=L9(this.shards,t);return s===-1?-1:(this.previousShardIndex=s,this.previousShardIndex)}}function L9(n,e){let t=0,s=n.length;for(;t<=s;){const r=Math.floor((s-t)/2)+t,a=e(n[r]);if(a===0)return r;a<0?s=r:t=r+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xA(){return we}function KT(){return we.memory()}function De(n,e){return we.tidy(n,e)}function on(n){ML(n).forEach(t=>t.dispose())}function _r(n){return we.keep(n)}function U9(){return we.ready()}function R9(){return we.backendName}function KL(n,e,t=1){return we.registerBackend(n,e,t)}function WL(){return we.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sh=4;async function PB(n,e){const t=[],s=[],r=Array.isArray(n)?n.map(i=>i.name):Object.keys(n);for(let i=0;i<r.length;++i){const o=r[i],l=Array.isArray(n)?n[i].tensor:n[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);const u={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const h=new Promise(async f=>{const d=await l.bytes(),m=d.reduce((v,b)=>v+b.length,0)+sh*d.length,g=new Uint8Array(m);let w=0;for(let v=0;v<d.length;v++){const b=d[v],C=new Uint8Array(new Uint32Array([b.length]).buffer);g.set(C,w),w+=sh,g.set(b,w),w+=b.length}f(g)});s.push(h)}else s.push(l.data());e!=null&&(u.group=e),t.push(u)}const a=await Promise.all(s);return{data:O9(a),specs:t}}function qL(n,e){const t=new _l(n),s={};let r=0;for(const a of e){const i=$9(a,(o,l)=>t.slice(r+o,r+l));s[a.name]=XL(a,t.slice(r,r+i)),r+=i}return s}function $9(n,e){const t=je(n.shape);let s;if("quantization"in n){const r=n.quantization;s=Ff[r.dtype]}else if(n.dtype==="string"){let r=0;for(let a=0;a<t;a++)r+=sh+new Uint32Array(e(r,r+sh))[0];return r}else s=Ff[n.dtype];return t*s}async function _9(n,e){const t=je(n.shape);let s;if("quantization"in n){const r=n.quantization;s=Ff[r.dtype]}else if(n.dtype==="string"){let r=0;for(let a=0;a<t;a++)r+=sh+new Uint32Array(await e(r,r+sh))[0];return r}else s=Ff[n.dtype];return t*s}function XL(n,e){const t=n.name,s=n.dtype,r=n.shape,a=je(r);let i,o=0;if("quantization"in n){const l=n.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${n.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(s!=="float32")throw new Error(`Weight ${n.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${s}.`)}else throw new Error(`Weight ${n.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const u=Ff[l.dtype],h=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(s==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){i=new Float32Array(h.length);for(let f=0;f<h.length;f++){const d=h[f];i[f]=d*l.scale+l.min}}else if(l.dtype==="float16")i=j9()(h);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(s==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);i=new Int32Array(h.length);for(let f=0;f<h.length;f++){const d=h[f];i[f]=Math.round(d*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${t}': ${s}`);o+=a*u}else if(s==="string"){const l=je(n.shape);i=[];for(let u=0;u<l;u++){const h=new Uint32Array(e.slice(o,o+sh))[0];o+=sh;const f=new Uint8Array(e.slice(o,o+h));i.push(f),o+=h}}else{const l=Ff[s];if(s==="float32")i=new Float32Array(e);else if(s==="int32")i=new Int32Array(e);else if(s==="bool")i=new Uint8Array(e);else if(s==="complex64"){i=new Float32Array(e);const u=new Float32Array(i.length/2),h=new Float32Array(i.length/2);for(let g=0;g<u.length;g++)u[g]=i[g*2],h[g]=i[g*2+1];const f=Nl(u,r,"float32"),d=Nl(h,r,"float32"),m=nh(f,d);return f.dispose(),d.dispose(),m}else throw new Error(`Unsupported dtype in weight '${t}': ${s}`);o+=a*l}return Nl(i,r,s)}async function WT(n,e,t){let s=new Uint8Array(e);for(;s.byteLength<t;){const{done:r,value:a}=await n.read();if(r&&a==null){const o=t-s.byteLength;throw new Error(`Reader is done but ${o} bytes are still expected`)}const i=new Uint8Array(s.length+a.byteLength);i.set(s,0),i.set(new Uint8Array(a),s.length),s=i}return s.buffer}async function YL(n,e){const t={},s=n.getReader();let r=new ArrayBuffer(0);for(const a of e){const i=await _9(a,async(u,h)=>(r=await WT(s,r,h),r.slice(u,h)));r=await WT(s,r,i);const o=r.slice(0,i);r=r.slice(i);const l=XL(a,o);if(t[a.name]=l,R9()==="webgpu"){const u=WL();"uploadToGPU"in u&&je(l.shape)>=Qe().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&u.uploadToGPU(l.dataId)}}return t}function O9(n){if(n===null)throw new Error(`Invalid input value: ${JSON.stringify(n)}`);let e=0;const t=[];n.forEach(a=>{if(e+=a.byteLength,t.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${a.constructor.name}`)});const s=new Uint8Array(e);let r=0;return t.forEach(a=>{s.set(new Uint8Array(a.buffer),r),r+=a.byteLength}),s.buffer}const s5=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function qT(n){return s5?Buffer.byteLength(n,"utf8"):new Blob([n]).size}function Q9(n){if(s5)return Buffer.from(n).toString("base64");const e=new Uint8Array(n);let t="";for(let s=0,r=e.length;s<r;s++)t+=String.fromCharCode(e[s]);return btoa(t)}function M9(n){if(s5){const s=Buffer.from(n,"base64");return s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)}const e=atob(n),t=new Uint8Array(e.length);for(let s=0;s<e.length;++s)t.set([e.charCodeAt(s)],s);return t.buffer}function JL(n){return _l.join(n)}function XT(n){const e="/";for(n=n.trim();n.endsWith(e);)n=n.slice(0,n.length-1);const t=n.split(e);return t[t.length-1]}function ZL(n,e){const t={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:e};return n.signature!=null&&(t.signature=n.signature),n.userDefinedMetadata!=null&&(t.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(t.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(t.initializerSignature=n.initializerSignature),n.trainingConfig!=null&&(t.trainingConfig=n.trainingConfig),t}function eU(n,e,t){const s={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy};if(n.trainingConfig!=null&&(s.trainingConfig=n.trainingConfig),n.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!t)throw new Error("modelJSON has weightsManifest but weightData is null");s.weightSpecs=e,s.weightData=t}return n.signature!=null&&(s.signature=n.signature),n.userDefinedMetadata!=null&&(s.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(s.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(s.initializerSignature=n.initializerSignature),s}async function r5(n,e){let t,s;return n.weightsManifest!=null&&([t,s]=await e(n.weightsManifest)),eU(n,t,s)}function X0(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:qT(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:qT(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:new _l(n.weightData).byteLength}}function zB(n){const e=[];for(const t of n)e.push(...t.weights);return e}function H9(){const n=t=>{let s=t<<13,r=0;for(;(s&8388608)===0;)r-=8388608,s<<=1;return s&=-8388609,r+=947912704,s|r},e=new Uint32Array(2048);e[0]=0;for(let t=1;t<1024;t++)e[t]=n(t);for(let t=1024;t<2048;t++)e[t]=939524096+(t-1024<<13);return e}function P9(){const n=new Uint32Array(64);n[0]=0,n[31]=1199570944,n[32]=2147483648,n[63]=3347054592;for(let e=1;e<31;e++)n[e]=e<<23;for(let e=33;e<63;e++)n[e]=2147483648+(e-32<<23);return n}function z9(){const n=new Uint32Array(64);for(let e=0;e<64;e++)n[e]=1024;return n[0]=n[32]=0,n}function j9(){const n=H9(),e=P9(),t=z9();return s=>{const r=new ArrayBuffer(4*s.length),a=new Uint32Array(r);for(let i=0;i<s.length;i++){const o=s[i],l=n[t[o>>10]+(o&1023)]+e[o>>10];a[i]=l}return new Float32Array(r)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ts{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Ts.instance==null&&(Ts.instance=new Ts),Ts.instance}static registerSaveRouter(e){Ts.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Ts.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Ts.getHandlers(e,"save")}static getLoadHandlers(e,t){return Ts.getHandlers(e,"load",t)}static getHandlers(e,t,s){const r=[];return(t==="load"?Ts.getInstance().loadRouters:Ts.getInstance().saveRouters).forEach(i=>{const o=i(e,s);o!==null&&r.push(o)}),r}}const V9=n=>Ts.registerSaveRouter(n),G9=n=>Ts.registerLoadRouter(n),tU=n=>Ts.getSaveHandlers(n),K9=(n,e)=>Ts.getLoadHandlers(n,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jB="tensorflowjs",VB=1,bf="models_store",Pc="model_info_store";function nU(){if(!Qe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const n=typeof window>"u"?self:window,e=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function GB(n){const e=n.result;e.createObjectStore(bf,{keyPath:"modelPath"}),e.createObjectStore(Pc,{keyPath:"modelPath"})}class Tf{constructor(e){if(this.indexedDB=nU(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((s,r)=>{const a=this.indexedDB.open(jB,VB);a.onupgradeneeded=()=>GB(a),a.onsuccess=()=>{const i=a.result;if(t==null){const o=i.transaction(bf,"readonly"),u=o.objectStore(bf).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return i.close(),r(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));s(u.result.modelArtifacts)},u.onerror=h=>(i.close(),r(u.error)),o.oncomplete=()=>i.close()}else{t.weightData=_l.join(t.weightData);const o=X0(t),l=i.transaction(Pc,"readwrite");let u=l.objectStore(Pc),h;try{h=u.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(d){return r(d)}let f;h.onsuccess=()=>{f=i.transaction(bf,"readwrite");const d=f.objectStore(bf);let m;try{m=d.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:o})}catch(g){return r(g)}m.onsuccess=()=>s({modelArtifactsInfo:o}),m.onerror=g=>{u=l.objectStore(Pc);const w=u.delete(this.modelPath);w.onsuccess=()=>(i.close(),r(m.error)),w.onerror=v=>(i.close(),r(m.error))}},h.onerror=d=>(i.close(),r(h.error)),l.oncomplete=()=>{f==null?i.close():f.oncomplete=()=>i.close()}}},a.onerror=i=>r(a.error)})}}Tf.URL_SCHEME="indexeddb://";const sU=n=>Qe().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(Tf.URL_SCHEME)?W9(n.slice(Tf.URL_SCHEME.length)):null;Ts.registerSaveRouter(sU);Ts.registerLoadRouter(sU);function W9(n){return new Tf(n)}function q9(n){return n.startsWith(Tf.URL_SCHEME)?n.slice(Tf.URL_SCHEME.length):n}class X9{constructor(){this.indexedDB=nU()}async listModels(){return new Promise((e,t)=>{const s=this.indexedDB.open(jB,VB);s.onupgradeneeded=()=>GB(s),s.onsuccess=()=>{const r=s.result,a=r.transaction(Pc,"readonly"),o=a.objectStore(Pc).getAll();o.onsuccess=()=>{const l={};for(const u of o.result)l[u.modelPath]=u.modelArtifactsInfo;e(l)},o.onerror=l=>(r.close(),t(o.error)),a.oncomplete=()=>r.close()},s.onerror=r=>t(s.error)})}async removeModel(e){return e=q9(e),new Promise((t,s)=>{const r=this.indexedDB.open(jB,VB);r.onupgradeneeded=()=>GB(r),r.onsuccess=()=>{const a=r.result,i=a.transaction(Pc,"readwrite"),o=i.objectStore(Pc),l=o.get(e);let u;l.onsuccess=()=>{if(l.result==null)return a.close(),s(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const h=o.delete(e),f=()=>{u=a.transaction(bf,"readwrite");const m=u.objectStore(bf).delete(e);m.onsuccess=()=>t(l.result.modelArtifactsInfo),m.onerror=g=>s(l.error)};h.onsuccess=f,h.onerror=d=>(f(),a.close(),s(l.error))}},l.onerror=h=>(a.close(),s(l.error)),i.oncomplete=()=>{u==null?a.close():u.oncomplete=()=>a.close()}},r.onerror=a=>s(r.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Su="/",sp="tensorflowjs_models",rU="info",Y9="model_topology",J9="weight_specs",Z9="weight_data",eq="model_metadata";function aU(n){return{info:[sp,n,rU].join(Su),topology:[sp,n,Y9].join(Su),weightSpecs:[sp,n,J9].join(Su),weightData:[sp,n,Z9].join(Su),modelMetadata:[sp,n,eq].join(Su)}}function iU(n){for(const e of Object.values(n))window.localStorage.removeItem(e)}function tq(n){const e=n.split(Su);if(e.length<3)throw new Error(`Invalid key format: ${n}`);return e.slice(1,e.length-1).join(Su)}function nq(n){return n.startsWith(Df.URL_SCHEME)?n.slice(Df.URL_SCHEME.length):n}class Df{constructor(e){if(!Qe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=aU(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),s=JSON.stringify(e.weightSpecs),r=X0(e),a=_l.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,s),this.LS.setItem(this.keys.weightData,Q9(a));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:r}}catch{throw iU(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},s=JSON.parse(this.LS.getItem(this.keys.topology));if(s==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=s;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(r==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;const a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){const o=JSON.parse(a);t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy,o.signature!=null&&(t.signature=o.signature),o.userDefinedMetadata!=null&&(t.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(t.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(t.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(t.trainingConfig=o.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=M9(i),t}}Df.URL_SCHEME="localstorage://";const oU=n=>Qe().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(Df.URL_SCHEME)?sq(n.slice(Df.URL_SCHEME.length)):null;Ts.registerSaveRouter(oU);Ts.registerLoadRouter(oU);function sq(n){return new Df(n)}class rq{constructor(){se(Qe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),se(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=sp+Su,s=Su+rU;for(let r=0;r<this.LS.length;++r){const a=this.LS.key(r);if(a.startsWith(t)&&a.endsWith(s)){const i=tq(a);e[i]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){e=nq(e);const t=aU(e);if(this.LS.getItem(t.info)==null)throw new Error(`Cannot find model at path '${e}'`);const s=JSON.parse(this.LS.getItem(t.info));return iU(t),s}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pp="://";class Ra{constructor(){this.managers={}}static getInstance(){return Ra.instance==null&&(Ra.instance=new Ra),Ra.instance}static registerManager(e,t){se(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(pp)&&(e=e.slice(0,e.indexOf(pp))),se(e.length>0,()=>"scheme must not be an empty string.");const s=Ra.getInstance();se(s.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),s.managers[e]=t}static getManager(e){const t=Ra.getInstance().managers[e];if(t==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(Ra.getInstance().managers)}}function v2(n){if(n.indexOf(pp)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Ra.getSchemes().join(",")}`);return{scheme:n.split(pp)[0],path:n.split(pp)[1]}}async function lU(n,e,t=!1){se(n!==e,()=>`Old path and new path are the same: '${n}'`);const s=Ts.getLoadHandlers(n);se(s.length>0,()=>`Copying failed because no load handler is found for source URL ${n}.`),se(s.length<2,()=>`Copying failed because more than one (${s.length}) load handlers for source URL ${n}.`);const r=s[0],a=Ts.getSaveHandlers(e);se(a.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),se(a.length<2,()=>`Copying failed because more than one (${s.length}) save handlers for destination URL ${e}.`);const i=a[0],o=v2(n).scheme,l=v2(n).path,u=o===v2(n).scheme,h=await r.load();t&&u&&await Ra.getManager(o).removeModel(l);const f=await i.save(h);return t&&!u&&await Ra.getManager(o).removeModel(l),f.modelArtifactsInfo}async function aq(){const n=Ra.getSchemes(),e={};for(const t of n){const s=await Ra.getManager(t).listModels();for(const r in s){const a=t+pp+r;e[a]=s[r]}}return e}async function iq(n){const e=v2(n);return Ra.getManager(e.scheme).removeModel(e.path)}async function oq(n,e){return lU(n,e,!1)}async function lq(n,e){return lU(n,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Aq{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){if(typeof window>"u"||!Qe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,t);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",s=>{if(s.source===window&&s.data.name===this.messageName){s.stopPropagation();const r=this.functionRefs[s.data.index];r(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return DL(e)}}if(Qe().get("IS_BROWSER")){Qe().setPlatform("browser",new Aq);try{Ra.registerManager(Df.URL_SCHEME,new rq)}catch{}try{Ra.registerManager(Tf.URL_SCHEME,new X9)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uq={importFetch:()=>require("node-fetch")};let SC;class cq{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return Qe().global.fetch!=null?Qe().global.fetch(e,t):(SC==null&&(SC=uq.importFetch()),SC(e,t))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}Qe().get("IS_NODE")&&!Qe().get("IS_BROWSER")&&Qe().setPlatform("node",new cq);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function un(n,e="float32",t){return e=e||"float32",so(n),new Ir(n,e,t)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hq(n,e){const t=oe(n,"x","cast");if(!WW(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");const s={x:t},r={dtype:e};return we.runKernel(l0,s,r)}const mt=ge({cast_:hq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fq(n){const t={x:oe(n,"x","clone","string_or_numeric")};return we.runKernel(x0,t)}const Eu=ge({clone_:fq});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AU(n,e=!1){console.log(n.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */PL();const dq={buffer:un,cast:mt,clone:Eu,print:AU};S9(dq);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pq(n,e){let t=oe(n,"a","add"),s=oe(e,"b","add");[t,s]=zs(t,s);const r={a:t,b:s};return we.runKernel(Hp,r)}const st=ge({add_:pq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mq(n,e){let t=oe(n,"a","floorDiv"),s=oe(e,"b","floorDiv");[t,s]=zs(t,s);const r={a:t,b:s};return we.runKernel(w0,r)}const a5=ge({floorDiv_:mq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gq(n,e){let t=oe(n,"a","div"),s=oe(e,"b","div");if([t,s]=zs(t,s),t.dtype==="int32"&&s.dtype==="int32")return a5(t,s);const r={a:t,b:s},a={};return we.runKernel(f0,r,a)}const Tt=ge({div_:gq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yq(n,e){let t=oe(n,"a","mul"),s=oe(e,"b","mul");[t,s]=zs(t,s);const r={a:t,b:s};return we.runKernel(F0,r)}const be=ge({mul_:yq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wq(n){const e=oe(n,"x","abs");if(e.dtype==="complex64"){const t={x:e};return we.runKernel(Ww,t)}else{const t={x:e};return we.runKernel(Qw,t)}}const vr=ge({abs_:wq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bq(n){const t={x:oe(n,"x","acos")};return we.runKernel(t0,t)}const uU=ge({acos_:bq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xq(n){const t={x:oe(n,"x","acosh")};return we.runKernel(n0,t)}const cU=ge({acosh_:xq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vq(n){se(Array.isArray(n),()=>"The argument passed to tf.addN() must be a list of tensors"),se(n.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${n.length}`);const e=n.map((r,a)=>oe(r,`tensors${a}`,"addN")),t=e[0];e.forEach(r=>{if(r.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(r=>{if(!Bn(r.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const s=e;return we.runKernel(Mw,s)}const Cq=ge({addN_:vq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bq(n,e=null,t=!1){const r={x:oe(n,"x","all","bool")},a={axis:e,keepDims:t};return we.runKernel(JS,r,a)}const i5=ge({all_:Bq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sq(n,e=null,t=!1){const r={x:oe(n,"x","any","bool")},a={axis:e,keepDims:t};return we.runKernel(ZS,r,a)}const tw=ge({any_:Sq});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nq(n,e=0){const s={x:oe(n,"x","argMax")},r={axis:e};return we.runKernel(Hw,s,r)}const Cp=ge({argMax_:Nq});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iq(n,e=0){const s={x:oe(n,"x","argMin")},r={axis:e};return we.runKernel(Pw,s,r)}const hU=ge({argMin_:Iq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eq(n){const t={x:oe(n,"x","asin")};return we.runKernel(s0,t)}const fU=ge({asin_:Eq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kq(n){const t={x:oe(n,"x","asinh")};return we.runKernel(r0,t)}const dU=ge({asinh_:kq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fq(n){const t={x:oe(n,"x","atan")};return we.runKernel(a0,t)}const pU=ge({atan_:Fq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tq(n,e){let t=oe(n,"a","atan2"),s=oe(e,"b","atan2");[t,s]=zs(t,s);const r={a:t,b:s};return we.runKernel(o0,r)}const mU=ge({atan2_:Tq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dq(n){const t={x:oe(n,"x","atanh")};return we.runKernel(i0,t)}const gU=ge({atanh_:Dq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y0(n,e,t,s,r="NHWC",a){const i=n[3],o=[...e,i],l=Ou(r);return Mr(n,o,t,a,s,null,null,l)}function Mo(n,e,t,s,r,a,i="channelsLast"){const[o,l]=Ug(e);let u;if(i==="channelsLast")u=[o,l,n[3],n[3]];else if(i==="channelsFirst")u=[o,l,n[1],n[1]];else throw new Error(`Unknown dataFormat ${i}`);return Mr(n,u,t,s,r,a,!1,i)}function _u(n,e,t,s,r,a,i="NDHWC"){const[o,l,u]=KB(e);let h,f;if(i==="NDHWC")f="channelsLast",h=[o,l,u,n[4],n[4]];else if(i==="NCDHW")f="channelsFirst",h=[o,l,u,n[1],n[1]];else throw new Error(`Unknown dataFormat ${i}`);return ph(n,h,t,s,r,!1,f,a)}function Mr(n,e,t,s,r,a,i=!1,o="channelsLast"){let[l,u,h,f]=[-1,-1,-1,-1];if(o==="channelsLast")[l,u,h,f]=n;else if(o==="channelsFirst")[l,f,u,h]=n;else throw new Error(`Unknown dataFormat ${o}`);const[d,m,,g]=e,[w,v]=Ug(t),[b,C]=Ug(s),N=mp(d,b),I=mp(m,C),{padInfo:L,outHeight:$,outWidth:H}=Rq(r,u,h,w,v,N,I,a,o),U=i?g*f:g;let O;return o==="channelsFirst"?O=[l,U,$,H]:o==="channelsLast"&&(O=[l,$,H,U]),{batchSize:l,dataFormat:o,inHeight:u,inWidth:h,inChannels:f,outHeight:$,outWidth:H,outChannels:U,padInfo:L,strideHeight:w,strideWidth:v,filterHeight:d,filterWidth:m,effectiveFilterHeight:N,effectiveFilterWidth:I,dilationHeight:b,dilationWidth:C,inShape:n,outShape:O,filterShape:e}}function ph(n,e,t,s,r,a=!1,i="channelsLast",o){let[l,u,h,f,d]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[l,u,h,f,d]=n;else if(i==="channelsFirst")[l,d,u,h,f]=n;else throw new Error(`Unknown dataFormat ${i}`);const[m,g,w,,v]=e,[b,C,N]=KB(t),[I,L,$]=KB(s),H=mp(m,I),U=mp(g,L),O=mp(w,$),{padInfo:z,outDepth:T,outHeight:R,outWidth:W}=$q(r,u,h,f,b,C,N,H,U,O,o),K=a?v*d:v;let re;return i==="channelsFirst"?re=[l,K,T,R,W]:i==="channelsLast"&&(re=[l,T,R,W,K]),{batchSize:l,dataFormat:i,inDepth:u,inHeight:h,inWidth:f,inChannels:d,outDepth:T,outHeight:R,outWidth:W,outChannels:K,padInfo:z,strideDepth:b,strideHeight:C,strideWidth:N,filterDepth:m,filterHeight:g,filterWidth:w,effectiveFilterDepth:H,effectiveFilterHeight:U,effectiveFilterWidth:O,dilationDepth:I,dilationHeight:L,dilationWidth:$,inShape:n,outShape:re,filterShape:e}}function Lq(n,e,t,s,r){s==null&&(s=o5(n,e,t));const a=n[0],i=n[1],o=Rg((a-e+2*s)/t+1,r),l=Rg((i-e+2*s)/t+1,r);return[o,l]}function Uq(n,e,t,s,r,a){r==null&&(r=o5(n,e[0],s[0]));const i=[0,0,0,t];for(let o=0;o<3;o++)n[o]+2*r>=e[o]&&(i[o]=Rg((n[o]-e[o]+2*r)/s[o]+1,a));return i}function o5(n,e,t,s=1){const r=mp(e,s);return Math.floor((n[0]*(t-1)-t+r)/2)}function Ug(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function KB(n){return typeof n=="number"?[n,n,n]:n}function mp(n,e){return e<=1?n:n+(n-1)*(e-1)}function Rq(n,e,t,s,r,a,i,o,l){let u,h,f;if(typeof n=="number"){u={top:n,bottom:n,left:n,right:n,type:n===0?"VALID":"NUMBER"};const m=Lq([e,t],a,s,n,o);h=m[0],f=m[1]}else if(n==="same"){h=Math.ceil(e/s),f=Math.ceil(t/r);const d=Math.max(0,(h-1)*s+a-e),m=Math.max(0,(f-1)*r+i-t),g=Math.floor(d/2),w=d-g,v=Math.floor(m/2),b=m-v;u={top:g,bottom:w,left:v,right:b,type:"SAME"}}else if(n==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},h=Math.ceil((e-a+1)/s),f=Math.ceil((t-i+1)/r);else if(typeof n=="object"){const d=l==="channelsLast"?n[1][0]:n[2][0],m=l==="channelsLast"?n[1][1]:n[2][1],g=l==="channelsLast"?n[2][0]:n[3][0],w=l==="channelsLast"?n[2][1]:n[3][1];u={top:d,bottom:m,left:g,right:w,type:d===0&&m===0&&g===0&&w===0?"VALID":"EXPLICIT"},h=Rg((e-a+d+m)/s+1,o),f=Rg((t-i+g+w)/r+1,o)}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:u,outHeight:h,outWidth:f}}function $q(n,e,t,s,r,a,i,o,l,u,h){let f,d,m,g;if(n==="valid"&&(n=0),typeof n=="number"){f={top:n,bottom:n,left:n,right:n,front:n,back:n,type:n===0?"VALID":"NUMBER"};const v=Uq([e,t,s,1],[o,l,u],1,[r,a,i],n,h);d=v[0],m=v[1],g=v[2]}else if(n==="same"){d=Math.ceil(e/r),m=Math.ceil(t/a),g=Math.ceil(s/i);const w=(d-1)*r+o-e,v=(m-1)*a+l-t,b=(g-1)*i+u-s,C=Math.floor(w/2),N=w-C,I=Math.floor(v/2),L=v-I,$=Math.floor(b/2),H=b-$;f={top:I,bottom:L,left:$,right:H,front:C,back:N,type:"SAME"}}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:f,outDepth:d,outHeight:m,outWidth:g}}function Rg(n,e){if(!e)return Math.trunc(n);switch(e){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error(`Unknown roundingMode ${e}`)}}function rh(n){const[e,t,s]=Ug(n);return e===1&&t===1&&s===1}function na(n,e){return rh(n)||rh(e)}function Lf(n){return Ug(n).every(e=>e>0)}function Ou(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${n}`)}function Pa(n,e,t){if(t!=null){if(typeof e=="string")throw Error(`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);if(typeof e=="number")se(xp(e),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);else if(typeof e=="object")e.forEach(s=>{s.forEach(r=>{se(xp(r),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${r}.`)})});else throw Error(`Error in ${n}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _q(n,e){const s={x:oe(n,"x","reshape","string_or_numeric")},r={shape:e};return we.runKernel(Eb,s,r)}const Be=ge({reshape_:_q});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oq(n,e,t,s,r){const a=oe(n,"x","avgPool","float32"),i=1;se(na(t,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${i}'`);let o=a,l=!1;a.rank===3&&(l=!0,o=Be(a,[1,a.shape[0],a.shape[1],a.shape[2]])),se(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),Pa("avgPool",s,r);const u={x:o},h={filterSize:e,strides:t,pad:s,dimRoundingMode:r};let f=we.runKernel(zw,u,h);return f=mt(f,a.dtype),l?Be(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const zb=ge({avgPool_:Oq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qq(n,e,t,s,r,a="NDHWC"){const i=oe(n,"x","avgPool3d","float32");let o=i,l=!1;i.rank===4&&(l=!0,o=Be(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),se(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),se(a==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),se(typeof t=="number"&&t>0||Array.isArray(t)&&t[0]>0&&t[1]>0&&t[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${t}'`),Pa("avgPool3d",s,r);const u={x:o},h={filterSize:e,strides:t,pad:s,dimRoundingMode:r,dataFormat:a};let f=we.runKernel(jw,u,h);return f=mt(f,o.dtype),l?Be(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const yU=ge({avgPool3d_:Qq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mq(n,e=0){se(n.length>=1,()=>"Pass at least one tensor to concat");const t=ew(n,"tensors","concat","string_or_numeric");if(t[0].dtype==="complex64"&&t.forEach(a=>{if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${a.dtype}. `)}),t.length===1)return Eu(t[0]);const s=t,r={axis:e};return we.runKernel(qw,s,r)}const dr=ge({concat_:Mq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hq(n,e,t=!1,s=!1){let r=oe(n,"a","matMul"),a=oe(e,"b","matMul");[r,a]=zs(r,a);const i={a:r,b:a},o={transposeA:t,transposeB:s};return we.runKernel(Vw,i,o)}const yn=ge({matMul_:Hq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pq(n){const t={x:oe(n,"x","sigmoid","float32")};return we.runKernel(H0,t)}const kA=ge({sigmoid_:Pq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zq(n,e,t){const s=oe(n,"x","slice","string_or_numeric");if(s.rank===0)throw new Error("Slicing scalar is not possible");const r={x:s},a={begin:e,size:t};return we.runKernel(Lb,r,a)}const Nn=ge({slice_:zq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jq(n){const t={x:oe(n,"x","tanh","float32")};return we.runKernel(K0,t)}const Uf=ge({tanh_:jq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vq(n,e,t,s,r,a){const i=oe(n,"forgetBias","basicLSTMCell"),o=oe(e,"lstmKernel","basicLSTMCell"),l=oe(t,"lstmBias","basicLSTMCell"),u=oe(s,"data","basicLSTMCell"),h=oe(r,"c","basicLSTMCell"),f=oe(a,"h","basicLSTMCell"),d=dr([u,f],1),m=yn(d,o),g=st(m,l),w=g.shape[0],v=g.shape[1]/4,b=[w,v],C=Nn(g,[0,0],b),N=Nn(g,[0,v],b),I=Nn(g,[0,v*2],b),L=Nn(g,[0,v*3],b),$=st(be(kA(C),Uf(N)),be(h,kA(st(i,I)))),H=be(Uf($),kA(L));return[$,H]}const Gq=ge({basicLSTMCell_:Vq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kq(n,e,t){const s=oe(n,"x","batchToSpaceND"),r=e.reduce((o,l)=>o*l);se(s.rank>=1+e.length,()=>`input rank is ${s.rank} but should be > than blockShape.length ${e.length}`),se(t.length===e.length,()=>`crops.length is ${t.length} but should be equal to blockShape.length  ${e.length}`),se(s.shape[0]%r===0,()=>`input tensor batch is ${s.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${r}`);const a={x:s},i={blockShape:e,crops:t};return we.runKernel(Gw,a,i)}const jb=ge({batchToSpaceND_:Kq});function Wq(n){let e;return n.rank===0||n.rank===1?e=Be(n,[1,1,1,n.size]):n.rank===2?e=Be(n,[1,1,n.shape[0],n.shape[1]]):n.rank===3?e=Be(n,[1,n.shape[0],n.shape[1],n.shape[2]]):e=n,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qq(n,e,t,s,r,a){a==null&&(a=.001);const i=oe(n,"x","batchNorm"),o=oe(e,"mean","batchNorm"),l=oe(t,"variance","batchNorm");let u;r!=null&&(u=oe(r,"scale","batchNorm"));let h;s!=null&&(h=oe(s,"offset","batchNorm")),se(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),se(h==null||o.rank===h.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),se(u==null||o.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:Wq(i),scale:u,offset:h,mean:o,variance:l},m={varianceEpsilon:a},g=we.runKernel(rb,d,m);return Be(g,i.shape)}const J0=ge({batchNorm_:qq});function Xq(n,e,t,s,r,a){const i=oe(n,"x","batchNorm"),o=oe(e,"mean","batchNorm"),l=oe(t,"variance","batchNorm");let u;r!=null&&(u=oe(r,"scale","batchNorm"));let h;return s!=null&&(h=oe(s,"offset","batchNorm")),se(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),se(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),se(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&se(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),h!=null&&se(h.rank===2||h.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${h.rank}.`),J0(i,o,l,h,u,a)}const wU=ge({batchNorm2d_:Xq});function Yq(n,e,t,s,r,a){const i=oe(n,"x","batchNorm"),o=oe(e,"mean","batchNorm"),l=oe(t,"variance","batchNorm");let u;r!=null&&(u=oe(r,"scale","batchNorm"));let h;return s!=null&&(h=oe(s,"offset","batchNorm")),se(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),se(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),se(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&se(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),h!=null&&se(h.rank===3||h.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${h.rank}.`),J0(i,o,l,h,u,a)}const bU=ge({batchNorm3d_:Yq});function Jq(n,e,t,s,r,a){const i=oe(n,"x","batchNorm"),o=oe(e,"mean","batchNorm"),l=oe(t,"variance","batchNorm");let u;r!=null&&(u=oe(r,"scale","batchNorm"));let h;return s!=null&&(h=oe(s,"offset","batchNorm")),se(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),se(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),se(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&se(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),h!=null&&se(h.rank===4||h.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${h.rank}.`),J0(i,o,l,h,u,a)}const xU=ge({batchNorm4d_:Jq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zq(n,e,t){const s=oe(n,"x","bincount"),r=oe(e,"weights","bincount");se(s.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${s.dtype}`),se(t>=0,()=>`size must be non-negative, but got ${t}.`),se(r.size===s.size||r.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${s.shape}, weights shape: ${r.shape}.`);const a={x:s,weights:r},i={size:t};return we.runKernel(nN,a,i)}const vU=ge({bincount_:Zq});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eX(n,e){const t=oe(n,"x","bitwiseAnd"),s=oe(e,"y","bitwiseAnd");if(!Bn(t.shape,s.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${t.shape}, y: ${s.shape}`);if(t.dtype!=="int32"||s.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${t.dtype} and type of y: ${s.dtype}`);const r={a:t,b:s};return we.runKernel(Kw,r)}const tX=ge({bitwiseAnd_:eX});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nX(n,e){const t=oe(n,"s0","broadcastArgs","int32"),s=oe(e,"s1","broadcastArgs","int32");if(t.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${t.rank}`);if(s.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${s.rank}`);const r={s0:t,s1:s};return we.runKernel(sN,r)}const sX=ge({broadcastArgs_:nX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rX(n,e){let t=oe(n,"broadcastTo","x");const s=t.shape;if(so(e),e.length<t.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${t.rank}.`);if(e.length>t.rank){const u=t.shape.slice();for(;u.length<e.length;)u.unshift(1);t=Be(t,u)}const r=t.shape,a=Array.from(e);for(let u=e.length-1;u>=0;u--)if(r[u]===e[u])a[u]=1;else if(t.shape[u]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${e}].`);if(a.map((u,h)=>u>1?h:-1).filter(u=>u>=0).length===0)return Eu(t);const o={x:t},l={reps:a};return we.runKernel(W0,o,l)}const gp=ge({broadcastTo_:rX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aX(n){const t={x:oe(n,"x","ceil","float32")};return we.runKernel(A0,t)}const CU=ge({ceil_:aX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pp(n,e,t){so(n),t=t||Qp(e);const s={shape:n,value:e,dtype:t};return we.runKernel(yN,{},s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iX(n,e,t){const s=oe(n,"x","clipByValue");if(se(e<=t,()=>`Error in clip: min (${e}) must be less than or equal to max (${t}).`),e===t)return Pp(s.shape,e,s.dtype);const r={x:s},a={clipValueMin:e,clipValueMax:t};return we.runKernel(u0,r,a)}const Ni=ge({clipByValue_:iX});function oX(n){return dr(n,0)}const BU=ge({concat1d_:oX});function lX(n,e){return dr(n,e)}const SU=ge({concat2d_:lX});function AX(n,e){return dr(n,e)}const NU=ge({concat3d_:AX});function uX(n,e){return dr(n,e)}const IU=ge({concat4d_:uX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cX(n,e,t,s,r="NHWC",a=[1,1],i){const o=oe(n,"x","conv2d","float32"),l=oe(e,"filter","conv2d","float32");let u=o,h=!1;o.rank===3&&(h=!0,u=Be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),se(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),se(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Pa("conv2d",s,i);const f=r==="NHWC"?u.shape[3]:u.shape[1];se(f===l.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${l.shape[2]}.`),se(na(t,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),se(Lf(a),()=>"Error in conv2D: Dilated rates should be larger than 0."),se(Lf(t),()=>"Error in conv2D: Strides should be larger than 0.");const d={x:u,filter:l},m={strides:t,pad:s,dataFormat:r,dilations:a,dimRoundingMode:i},g=we.runKernel(Xw,d,m);return h?Be(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const ah=ge({conv2d_:cX});function hX(n,e,t,s,r="NWC",a=1,i){const o=oe(n,"x","conv1d"),l=oe(e,"filter","conv1d");let u=o,h=!1;o.rank===2&&(h=!0,u=Be(o,[1,o.shape[0],o.shape[1]])),se(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),se(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Pa("conv1d",s,i),se(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),se(na(t,a),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${t} and dilation '${a}'`),se(Lf(a),()=>"Error in conv1D: Dilated rates should be larger than 0."),se(Lf(t),()=>"Error in conv1D: Stride should be larger than 0."),se(r==="NWC",()=>`Error in conv1d: got dataFormat of ${r} but only NWC is currently supported.`);const f=Be(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=Be(u,[u.shape[0],1,u.shape[1],u.shape[2]]),v=ah(d,f,[1,t],s,"NHWC",[1,a],i);return h?Be(v,[v.shape[2],v.shape[3]]):Be(v,[v.shape[0],v.shape[2],v.shape[3]])}const l5=ge({conv1d_:hX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fX(n,e,t,s,r,a="NHWC",i){se(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let o=n,l=e,u=!1;e.rank===3&&(u=!0,l=Be(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=[1,n[0],n[1],n[2]]),se(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),se(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),se(t.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${t.rank}`);const h=a==="NHWC"?o[3]:o[1],f=a==="NHWC"?l.shape[3]:l.shape[1];se(h===t.shape[2],()=>`Error in conv2dDerInput: depth of input (${h}) must match input depth for filter ${t.shape[2]}.`),se(f===t.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${t.shape[3]}.`),Pa("conv2dDerInput",r,i);const d={dy:l,filter:t},m={strides:s,pad:r,dataFormat:a,dimRoundingMode:i,inputShape:o},g=we.runKernel(Yw,d,m);return u?Be(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const A5=ge({conv2DBackpropInput_:fX});function dX(n,e,t,s,r,a){const i=oe(n,"x","conv2dTranspose"),o=oe(e,"filter","conv2dTranspose");return A5(t,i,o,s,r,"NHWC",a)}const u5=ge({conv2dTranspose_:dX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pX(n,e,t,s,r="NDHWC",a=[1,1,1]){const i=oe(n,"x","conv3d"),o=oe(e,"filter","conv3d");let l=i,u=!1;i.rank===4&&(u=!0,l=Be(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),se(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),se(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),se(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),se(na(t,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),se(r==="NDHWC",()=>`Error in conv3d: got dataFormat of ${r} but only NDHWC is currently supported.`),se(Lf(a),()=>"Error in conv3D: Dilated rates should be larger than 0."),se(Lf(t),()=>"Error in conv3D: Strides should be larger than 0.");const h={x:l,filter:o},f={strides:t,pad:s,dataFormat:r,dilations:a},d=we.runKernel(Jw,h,f);return u?Be(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const EU=ge({conv3d_:pX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mX(n,e,t,s,r){se(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let a=n,i=e,o=!1;e.rank===4&&(o=!0,i=Be(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),a=[1,n[0],n[1],n[2],n[3]]);const l=a[4],u=i.shape[4];se(a.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`),se(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),se(t.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${t.rank}`),se(l===t.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${t.shape[3]}.`),se(u===t.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${t.shape[4]}.`);const h={dy:i,filter:t},f={pad:r,strides:s,inputShape:a},d=we.runKernel(oN,h,f);return o?Be(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const kU=ge({conv3DBackpropInput_:mX});function gX(n,e,t,s,r){const a=oe(n,"x","conv3dTranspose"),i=oe(e,"filter","conv3dTranspose");return kU(t,a,i,s,r)}const FU=ge({conv3dTranspose_:gX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yX(n){const t={x:oe(n,"x","cos","float32")};return we.runKernel(c0,t)}const Vb=ge({cos_:yX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wX(n){const t={x:oe(n,"x","cosh","float32")};return we.runKernel(h0,t)}const c5=ge({cosh_:wX});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bX(n,e=0,t=!1,s=!1){const a={x:oe(n,"x","cumprod")},i={axis:e,exclusive:t,reverse:s};return we.runKernel(lN,a,i)}const nw=ge({cumprod_:bX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xX(n,e=0,t=!1,s=!1){const a={x:oe(n,"x","cumsum")},i={axis:e,exclusive:t,reverse:s};return we.runKernel(Zw,a,i)}const h5=ge({cumsum_:xX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vX(n,e,t,s=!1){const r=oe(n,"x","denseBincount"),a=oe(e,"weights","denseBincount");se(r.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${r.dtype}`),se(r.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${r.rank}.`),se(t>=0,()=>`size must be non-negative, but got ${t}.`),se(a.size===r.size||a.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${r.shape}, weights shape: ${a.shape}.`);const i={x:r,weights:a},o={size:t,binaryOutput:s};return we.runKernel(uN,i,o)}const WB=ge({denseBincount_:vX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CX(n,e,t="NHWC"){const s=oe(n,"x","depthToSpace","float32"),r=t==="NHWC"?s.shape[1]:s.shape[2],a=t==="NHWC"?s.shape[2]:s.shape[3],i=t==="NHWC"?s.shape[3]:s.shape[1];se(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),se(r*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${r} and ${e}  for depthToSpace with input shape
    ${s.shape}`),se(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e} for depthToSpace with input shape
        ${s.shape}`),se(i%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${i} for depthToSpace with input shape ${s.shape}`);const o={x:s},l={blockSize:e,dataFormat:t};return we.runKernel(cN,o,l)}const TU=ge({depthToSpace_:CX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BX(n,e,t,s,r="NHWC",a=[1,1],i){const o=oe(n,"x","depthwiseConv2d","float32"),l=oe(e,"filter","depthwiseConv2d","float32");let u=o,h=!1;o.rank===3&&(h=!0,u=Be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),se(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),se(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const f=r==="NHWC"?u.shape[3]:u.shape[1];se(f===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${l.shape[2]}.`),Pa("depthwiseConv2d",s,i);const d={x:u,filter:l},m={strides:t,pad:s,dataFormat:r,dilations:a,dimRoundingMode:i},g=we.runKernel(eb,d,m);return h?Be(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const Z0=ge({depthwiseConv2d_:BX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SX(n){const t={x:oe(n,"x","diag")};return we.runKernel(dN,t)}const NX=ge({diag_:SX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IX(n,e,t,s,r=[1,1],a="NHWC"){const i=oe(n,"x","dilation2d"),o=oe(e,"filter","dilation2d");se(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),se(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),se(a==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`);let l=i,u=!1;i.rank===3&&(l=Be(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=!0),se(l.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`);const h={x:l,filter:o},f={strides:t,pad:s,dilations:r},d=we.runKernel(tb,h,f);return u?Be(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const DU=ge({dilation2d_:IX});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bp(n,e){const t=n.length,s=[];for(let r=0;r<t;r++){const a=t-1-r,i=n[a]||1;(e[e.length-1-r]||1)>1&&i===1&&s.unshift(a)}return s}function Fr(n,e){const t=[];for(let s=0;s<e.length;s++){const r=n[n.length-s-1],a=e.length-s-1,i=e[a];(r==null||r===1&&i>1)&&t.unshift(a)}return t}function sn(n,e){const t=Math.max(n.length,e.length),s=new Array(t);for(let r=0;r<t;r++){let a=n[n.length-r-1];a==null&&(a=1);let i=e[e.length-r-1];if(i==null&&(i=1),a===1)s[t-r-1]=i;else if(i===1)s[t-r-1]=a;else if(a!==i){const o=`Operands could not be broadcast together with shapes ${n} and ${e}.`;throw Error(o)}else s[t-r-1]=a}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EX(n,e){let t=oe(n,"a","equal","string_or_numeric"),s=oe(e,"b","equal","string_or_numeric");[t,s]=zs(t,s),sn(t.shape,s.shape);const r={a:t,b:s};return we.runKernel(nb,r)}const kl=ge({equal_:EX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kX(n,e,t){const s=oe(e,"a","where"),r=oe(t,"b","where"),a=oe(n,"condition","where","bool"),i=sn(sn(a.shape,s.shape),r.shape),o=gp(a,i),l=gp(s,i),u=gp(r,i),h={condition:o,t:l,e:u};return we.runKernel(Db,h)}const pa=ge({where_:kX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FX(n){const t={x:oe(n,"x","zerosLike")};return we.runKernel(Hb,t)}const En=ge({zerosLike_:FX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TX(n,e){let t=oe(n,"a","div"),s=oe(e,"b","div");[t,s]=zs(t,s);const r=Tt(t,s),a=En(r),i=kl(s,a);return pa(i,a,r)}const LU=ge({divNoNan_:TX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DX(n,e){const t=oe(n,"t1","dot"),s=oe(e,"t2","dot");se((t.rank===1||t.rank===2)&&(s.rank===1||s.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${t.rank} and ${s.rank}.`);const r=t.rank===1?t.size:t.shape[1],a=s.rank===1?s.size:s.shape[0];if(se(r===a,()=>`Error in dot: inner dimensions of inputs must match, but got ${r} and ${a}.`),t.rank===1&&s.rank===1){const i=Be(t,[1,-1]),o=Be(s,[-1,1]),l=yn(i,o);return Be(l,[])}else if(t.rank===1&&s.rank===2){const i=Be(t,[1,-1]),o=Be(s,[s.shape[0],s.shape[1]]),l=yn(i,o);return Be(l,[l.size])}else if(t.rank===2&&s.rank===1){const i=Be(s,[-1,1]),o=yn(t,i);return Be(o,[o.size])}else{const i=Be(s,[s.shape[0],s.shape[1]]);return yn(t,i)}}const UU=ge({dot_:DX});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LX(n,...e){const t=e.map((r,a)=>oe(r,`tensors${a}`,"einsum")),s={equation:n};return we.runKernel(pN,t,s)}const rp=ge({einsum_:LX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UX(n){const t={x:oe(n,"x","elu","float32")};return we.runKernel(d0,t)}const e1=ge({elu_:UX});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RX(n,e){const t=oe(n,"x","ensureShape","string_or_numeric");if(!GW(t.shape,e))throw new Error(`EnsureShape: Shape of tensor ${t.shape} is not compatible with expected shape ${e}`);return n}const $X=ge({ensureShape_:RX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _X(n){let e=oe(n,"x","erf");se(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=mt(e,"float32"));const t={x:e};return we.runKernel(p0,t)}const f5=ge({erf_:_X});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d5(n,e){for(let t=0;t<n.length;++t)if(n[n.length-t-1]!==e-1-t)return!1;return!0}function RU(n,e,t){const s=n.length+e.length,r=[];let a=0,i=0;for(let o=0;o<s;o++)t.indexOf(o)===-1?r.push(n[a++]):r.push(e[i++]);return r}function Hr(n,e){const t=[],s=n.length;for(let a=0;a<s;a++)e.indexOf(a)===-1&&t.push(n[a]);const r=e.map(a=>n[a]);return[t,r]}function Ys(n,e){const t=e.map(s=>1);return RU(n,t,e)}function sa(n,e,t){se(d5(e,t),()=>`${n} supports only inner-most axes for now. Got axes ${e} and rank-${t} input.`)}function Us(n,e){if(d5(n,e))return null;const t=[];for(let s=0;s<e;++s)n.indexOf(s)===-1&&t.push(s);return n.forEach(s=>t.push(s)),t}function mh(n){return n.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function Js(n,e){const t=[];for(let s=e-n;s<e;++s)t.push(s);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OX(n,e=null,t=!1){const r={x:oe(n,"x","max")},a={reductionIndices:e,keepDims:t};return we.runKernel(db,r,a)}const Ro=ge({max_:OX});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QX(n,e=null,t=!1){const r={x:oe(n,"x","min")},a={axis:e,keepDims:t};return we.runKernel(yb,r,a)}const $g=ge({min_:QX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MX(n,e){let t=oe(n,"base","pow"),s=oe(e,"exp","pow");[t,s]=zs(t,s);const r={a:t,b:s};return we.runKernel(T0,r)}const Du=ge({pow_:MX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ut(n,e){if(($o(n)&&e!=="string"||Array.isArray(n))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&$o(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return dh(n,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HX(n){const t={x:oe(n,"x","sqrt","float32")};return we.runKernel(z0,t)}const ta=ge({sqrt_:HX});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PX(n){const e=oe(n,"x","square"),t={};return we.runKernel("Square",{x:e},t)}const rs=ge({square_:PX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zX(n,e=null,t=!1){let s=oe(n,"x","sum");s.dtype==="bool"&&(s=mt(s,"int32"));const r={x:s},a={axis:e,keepDims:t};return we.runKernel(Ub,r,a)}const Nt=ge({sum_:zX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jX(n,e="euclidean",t=null,s=!1){n=oe(n,"x","norm");const r=$U(n,e,t);let a=r.shape;if(s){const i=dn(t,n.shape);a=Ys(r.shape,i)}return Be(r,a)}function $U(n,e,t=null){if(n.rank===0)return vr(n);if(n.rank!==1&&t===null)return $U(Be(n,[-1]),e,t);if(n.rank===1||typeof t=="number"||Array.isArray(t)&&t.length===1){if(e===1)return Nt(vr(n),t);if(e===1/0)return Ro(vr(n),t);if(e===-1/0)return $g(vr(n),t);if(e==="euclidean"||e===2)return ta(Nt(Du(vr(n),Ut(2,"int32")),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(t)&&t.length===2){if(e===1)return Ro(Nt(vr(n),t[0]),t[1]-1);if(e===1/0)return Ro(Nt(vr(n),t[1]),t[0]);if(e===-1/0)return $g(Nt(vr(n),t[1]),t[0]);if(e==="fro"||e==="euclidean")return ta(Nt(rs(n),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${t}`)}const t1=ge({norm_:jX});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VX(n,e=null,t=!1){return t1(n,"euclidean",e,t)}const _U=ge({euclideanNorm_:VX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GX(n){const t={x:oe(n,"x","exp")};return we.runKernel(m0,t)}const Ii=ge({exp_:GX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KX(n,e=0){const t=oe(n,"x","expandDims","string_or_numeric");se(e<=t.rank,()=>"Axis must be <= rank of the tensor");const s={input:t},r={dim:e};return we.runKernel(sb,s,r)}const _a=ge({expandDims_:KX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WX(n){const t={x:oe(n,"x","expm1")};return we.runKernel(g0,t)}const OU=ge({expm1_:WX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qX(n,e){const t=oe(n,"x","tile","string_or_numeric");se(t.rank===e.length,()=>`Error in transpose: rank of input ${t.rank} must match length of reps ${e}.`);const s={x:t},r={reps:e};return we.runKernel(W0,s,r)}const To=ge({tile_:qX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XX(n,e,t,s="float32"){e==null&&(e=n);const r=un([n,e],s),a=n<=e?n:e;for(let o=0;o<a;++o)r.set(1,o,o);const i=Be(r.toTensor(),[n,e]);if(t==null)return i;if(t.length===1)return To(_a(i,0),[t[0],1,1]);if(t.length===2)return To(_a(_a(i,0),0),[t[0],t[1],1,1]);if(t.length===3)return To(_a(_a(_a(i,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${t.length}D.`)}const p5=ge({eye_:XX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YX(n){const t={x:oe(n,"x","floor","float32")};return we.runKernel(y0,t)}const n1=ge({floor_:YX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JX(n,e,t=0,s=0){const r=oe(n,"x","gather"),a=oe(e,"indices","gather","int32"),i={x:r,indices:a},o={axis:t,batchDims:s};return we.runKernel(ab,i,o)}const s1=ge({gather_:JX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZX(n,e){let t=oe(n,"a","greater","string_or_numeric"),s=oe(e,"b","greater","string_or_numeric");[t,s]=zs(t,s),sn(t.shape,s.shape);const r={a:t,b:s};return we.runKernel(ib,r)}const Li=ge({greater_:ZX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eY(n,e){let t=oe(n,"a","greaterEqual","string_or_numeric"),s=oe(e,"b","greaterEqual","string_or_numeric");[t,s]=zs(t,s),sn(t.shape,s.shape);const r={a:t,b:s};return we.runKernel(b0,r)}const gh=ge({greaterEqual_:eY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tY(n){const t={input:oe(n,"input","imag")};return we.runKernel(vN,t)}const Gb=ge({imag_:tY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nY(n){const t={x:oe(n,"x","isFinite")};return we.runKernel(v0,t)}const QU=ge({isFinite_:nY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sY(n){const t={x:oe(n,"x","isInf")};return we.runKernel(C0,t)}const MU=ge({isInf_:sY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rY(n){const t={x:oe(n,"x","isNaN")};return we.runKernel(B0,t)}const HU=ge({isNaN_:rY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aY(n,e=.2){const s={x:oe(n,"x","leakyRelu")},r={alpha:e};return we.runKernel(ob,s,r)}const Kb=ge({leakyRelu_:aY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iY(n,e){let t=oe(n,"a","less","string_or_numeric"),s=oe(e,"b","less","string_or_numeric");[t,s]=zs(t,s),sn(t.shape,s.shape);const r={a:t,b:s};return we.runKernel(lb,r)}const _g=ge({less_:iY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oY(n,e){let t=oe(n,"a","lessEqual","string_or_numeric"),s=oe(e,"b","lessEqual","string_or_numeric");[t,s]=zs(t,s),sn(t.shape,s.shape);const r={a:t,b:s};return we.runKernel(Ab,r)}const jf=ge({lessEqual_:oY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lY(n,e,t){if(t<=0)throw new Error("The number of values should be positive.");const s={start:n,stop:e,num:t};return we.runKernel(CN,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AY(n,e=5,t=1,s=1,r=.5){const a=oe(n,"x","localResponseNormalization");se(a.rank===4||a.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${a.rank}.`),se(xp(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let i=a,o=!1;a.rank===3&&(o=!0,i=Be(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const l={x:i},u={depthRadius:e,bias:t,alpha:s,beta:r},h=we.runKernel(fb,l,u);return o?Be(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const PU=ge({localResponseNormalization_:AY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uY(n){const t={x:oe(n,"x","log","float32")};return we.runKernel(S0,t)}const to=ge({log_:uY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cY(n){const t={x:oe(n,"x","log1p")};return we.runKernel(N0,t)}const Wb=ge({log1p_:cY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hY(n,e){se(FB(n),()=>"The f passed in variableGrads(f) must be a function"),se(e==null||Array.isArray(e)&&e.every(u=>u instanceof Z2),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const t=e!=null;if(!t){e=[];for(const u in we.registeredVariables)e.push(we.registeredVariables[u])}const s=t?e.filter(u=>!u.trainable):null,r=e.length;e=e.filter(u=>u.trainable),se(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${r} variables is trainable.`);const a=!0,{value:i,grads:o}=we.gradients(n,e,null,a);se(o.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),se(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const l={};return e.forEach((u,h)=>{o[h]!=null&&(l[u.name]=o[h])}),s!=null&&s.forEach(u=>l[u.name]=null),{value:i,grads:l}}function Lu(n){return we.customGrad(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fY(n){const t={x:oe(n,"x","neg")};return we.runKernel(bb,t)}const ms=ge({neg_:fY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dY(n){const t={x:oe(n,"x","softplus")};return we.runKernel(P0,t)}const zp=ge({softplus_:dY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pY(n){const e=oe(n,"x","logSigmoid");return Lu(s=>({value:ms(zp(ms(s))),gradFunc:i=>be(i,kA(ms(s)))}))(e)}const zU=ge({logSigmoid_:pY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mY(n,e){let t=oe(n,"a","sub"),s=oe(e,"b","sub");[t,s]=zs(t,s);const r={a:t,b:s};return we.runKernel(V0,r)}const vt=ge({sub_:mY});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gY(n,e=-1){const t=oe(n,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and axis was ${e}`);return Lu((r,a)=>{const o=Ro(r,e,!0),l=vt(r,o),u=vt(mt(l,"float32"),to(Nt(Ii(l),e,!0)));return a([u]),{value:u,gradFunc:(f,d)=>{const[m]=d,g=!0,w=Ii(m);return vt(f,be(Nt(f,e,g),w))}}})(t)}const m5=ge({logSoftmax_:gY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yY(n,e=null,t=!1){const s=oe(n,"x","logSumExp"),r=dn(e,s.shape),a=Ro(s,r,!0),i=vt(s,a),o=Ii(i),l=Nt(o,r),u=to(l),h=st(Be(a,u.shape),u);if(t){const f=Ys(h.shape,r);return Be(h,f)}return h}const qb=ge({logSumExp_:yY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wY(n,e){const t=oe(n,"a","logicalAnd","bool"),s=oe(e,"b","logicalAnd","bool");sn(t.shape,s.shape);const r={a:t,b:s};return we.runKernel(ub,r)}const LA=ge({logicalAnd_:wY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bY(n){const t={x:oe(n,"x","logicalNot","bool")};return we.runKernel(cb,t)}const Xb=ge({logicalNot_:bY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xY(n,e){const t=oe(n,"a","logicalOr","bool"),s=oe(e,"b","logicalOr","bool");sn(t.shape,s.shape);const r={a:t,b:s};return we.runKernel(hb,r)}const g5=ge({logicalOr_:xY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vY(n,e){const t=oe(n,"a","logicalXor","bool"),s=oe(e,"b","logicalXor","bool");return sn(t.shape,s.shape),LA(g5(n,e),Xb(LA(n,e)))}const jU=ge({logicalXor_:vY});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wy=2147483648;function CY(n,e,t="left"){const s=oe(n,"sortedSequence","searchSorted"),r=oe(e,"values","searchSorted"),a=s.shape[s.shape.length-1],i=r.shape[r.shape.length-1],o=Be(s,[-1,a]),l=Be(r,[-1,i]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(je(l.shape)>=Wy)throw new Error(`values tensor size must less than ${Wy}`);if(o.shape[1]>=Wy)throw new Error(`trailing dim_size must less than ${Wy} for int32 output type, was ${o.shape[1]}`);const u={sortedSequence:o,values:l},h={side:t};return we.runKernel(HN,u,h)}const y5=ge({searchSorted_:CY});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BY(n,e){return y5(n,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SY(n,e,t,s,r){const a=oe(n,"x","maxPool"),i=1;let o=a,l=!1;a.rank===3&&(l=!0,o=Be(a,[1,a.shape[0],a.shape[1],a.shape[2]])),se(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),se(na(t,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${i}'`),Pa("maxPool",s,r);const u={x:o},h={filterSize:e,strides:t,pad:s,dimRoundingMode:r},f=we.runKernel(pb,u,h);return l?Be(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Yb=ge({maxPool_:SY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NY(n,e=[1,1,1],t,s,r,a="NDHWC"){const i=oe(n,"x","maxPool3d");let o=i,l=!1;i.rank===4&&(l=!0,o=Be(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),se(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),se(a==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),Pa("maxPool3d",s,r);const u={x:o},h={filterSize:e,strides:t,pad:s,dimRoundingMode:r,dataFormat:a},f=we.runKernel(mb,u,h);return l?Be(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const VU=ge({maxPool3d_:NY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IY(n,e,t,s,r=!1){const i={x:oe(n,"x","maxPoolWithArgmax")},o={filterSize:e,strides:t,pad:s,includeBatchInIndex:r},l=we.runKernel(IN,i,o);return{result:l[0],indexes:l[1]}}const EY=ge({maxPoolWithArgmax_:IY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kY(n,e){let t=oe(n,"a","maximum"),s=oe(e,"b","maximum");[t,s]=zs(t,s),t.dtype==="bool"&&(t=mt(t,"int32"),s=mt(s,"int32")),sn(t.shape,s.shape);const r={a:t,b:s};return we.runKernel(I0,r)}const Qu=ge({maximum_:kY});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FY(n,e=null,t=!1){const r={x:oe(n,"x","mean")},a={axis:e,keepDims:t};return we.runKernel(gb,r,a)}const Ps=ge({mean_:FY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Br(n,e="float32"){if(so(n),e==="complex64"){const s=Br(n,"float32"),r=Br(n,"float32");return nh(s,r)}const t=ma(je(n),e);return we.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vi(n,e="float32"){if(so(n),e==="complex64"){const s=vi(n,"float32"),r=Br(n,"float32");return nh(s,r)}const t=XS(je(n),e);return we.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TY(n,e,{indexing:t="xy"}={}){if(t!=="xy"&&t!=="ij")throw new TypeError(`${t} is not a valid third argument to meshgrid`);if(n===void 0)return[];let s=oe(n,"x","meshgrid",n instanceof ps?n.dtype:"float32");if(e===void 0)return[s];let r=oe(e,"y","meshgrid",e instanceof ps?e.dtype:"float32");const a=je(s.shape),i=je(r.shape);return t==="xy"?(s=Be(s,[1,-1]),r=Be(r,[-1,1]),[yn(vi([i,1],s.dtype),s),yn(r,vi([1,a],r.dtype))]):(s=Be(s,[-1,1]),r=Be(r,[1,-1]),[yn(s,vi([1,i],s.dtype)),yn(vi([a,1],r.dtype),r)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DY(n,e){let t=oe(n,"a","minimum"),s=oe(e,"b","minimum");[t,s]=zs(t,s),t.dtype==="bool"&&(t=mt(t,"int32"),s=mt(s,"int32")),sn(t.shape,s.shape);const r={a:t,b:s};return we.runKernel(E0,r)}const Rf=ge({minimum_:DY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LY(n,e,t){se(t==="reflect"||t==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${t}.`);const s=oe(n,"x","mirrorPad");if(s.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");se(e.length===s.rank,()=>`Padding doesn't match input. Must be ${s.rank}. Got ${e.length}.`);const r=t==="reflect"?1:0;for(let o=0;o<s.rank;o++)se(e[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),se(e[o][0]>=0&&e[o][0]<=s.shape[o]-r&&e[o][1]>=0&&e[o][1]<=s.shape[o]-r,()=>`Padding in dimension ${o} cannot be greater than or equal to ${s.shape[o]-r} or less than 0 for input of shape ${s.shape}`);const a={paddings:e,mode:t},i={x:s};return we.runKernel(wb,i,a)}const GU=ge({mirrorPad_:LY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UY(n,e){let t=oe(n,"a","mod"),s=oe(e,"b","mod");[t,s]=zs(t,s);const r={a:t,b:s};return we.runKernel(k0,r)}const KU=ge({mod_:UY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RY(n,e=null,t=!1){n=oe(n,"x","moments");const s=dn(e,n.shape),r=Ps(n,s,t);let a=r.shape;t||(a=Ys(r.shape,s));const i=rs(vt(mt(n,"float32"),Be(r,a))),o=Ps(i,s,t);return{mean:r,variance:o}}const Jb=ge({moments_:RY});function $Y(n,e,t,s){const r=oe(e,"data","multiRNNCell"),a=ew(t,"c","multiRNNCell"),i=ew(s,"h","multiRNNCell");let o=r;const l=[];for(let f=0;f<n.length;f++){const d=n[f](o,a[f],i[f]);l.push(d[0]),l.push(d[1]),o=d[1]}const u=[],h=[];for(let f=0;f<l.length;f+=2)u.push(l[f]),h.push(l[f+1]);return[u,h]}const _Y=ge({multiRNNCell_:$Y});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OY(n,e,t,s=!1){const r=oe(n,"logits","multinomial"),a=r.size,i=r.rank;if(a<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${a}.`);if(i>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${i}`);t=t||Math.random();const l={logits:i===1?Be(r,[1,-1]):r},u={numSamples:e,seed:t,normalized:s},h=we.runKernel(EN,l,u);return i===1?Be(h,[h.size]):h}const QY=ge({multinomial_:OY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MY(n,e){let t=oe(n,"a","notEqual","string_or_numeric"),s=oe(e,"b","notEqual","string_or_numeric");[t,s]=zs(t,s),sn(t.shape,s.shape);const r={a:t,b:s};return we.runKernel(xb,r)}const Sp=ge({notEqual_:MY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HY(n,e,t=1,s=0,r="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:oe(n,"indices","oneHot","int32")},o={dtype:r,depth:e,onValue:t,offValue:s};return we.runKernel(Cb,i,o)}const w5=ge({oneHot_:HY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PY(n){const t={x:oe(n,"x","onesLike")};return we.runKernel(vb,t)}const no=ge({onesLike_:PY});function zY(n,e){const t=oe(n,"v1","outerProduct"),s=oe(e,"v2","outerProduct");se(t.rank===1&&s.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${t.rank} and ${s.rank}.`);const r=Be(t,[-1,1]),a=Be(s,[1,-1]);return yn(r,a)}const jY=ge({outerProduct_:zY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VY(n,e,t=0){const s=oe(n,"x","pad");if(s.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const r={paddings:e,constantValue:t},a={x:s};return we.runKernel(Sb,a,r)}const yh=ge({pad_:VY});function GY(n,e,t=0){return se(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),yh(n,[e],t)}const KY=ge({pad1d_:GY});function WY(n,e,t=0){return se(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),yh(n,e,t)}const qY=ge({pad2d_:WY});function XY(n,e,t=0){return se(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),yh(n,e,t)}const YY=ge({pad3d_:XY});function JY(n,e,t=0){return se(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),yh(n,e,t)}const ZY=ge({pad4d_:JY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eJ(n,e,t){const s=oe(n,"x","spaceToBatchND");se(s.rank>=1+e.length,()=>`input rank ${s.rank} should be > than [blockShape] ${e.length}`),se(t.length===e.length,()=>`paddings.shape[0] ${t.length} must be equal to [blockShape] ${e.length}`),se(s.shape.reduce((i,o,l)=>l>0&&l<=e.length?i&&(o+t[l-1][0]+t[l-1][1])%e[l-1]===0:i,!0),()=>`input spatial dimensions ${s.shape.slice(1)} with paddings ${t.toString()} must be divisible by blockShapes ${e.toString()}`);const r={x:s},a={blockShape:e,paddings:t};return we.runKernel(Rb,r,a)}const Zb=ge({spaceToBatchND_:eJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tJ(n,e,t,s,r,a,i){r==null&&(r=[1,1]),a==null&&(a=1),s===0&&(s="valid");const o=oe(n,"x","maxPool");let l=o,u=!1;o.rank===3&&(u=!0,l=Be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),se(na(a,r),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${r}'`);const h=Mo(l.shape,e,a,r,s),f=[h.dilationHeight,h.dilationWidth];let d;s==="same"?d=sJ([h.filterHeight,h.filterWidth],f):d=[[0,0],[0,0]];const m=f[0]===1&&f[1]===1,[g,w]=nJ([h.inHeight,h.inWidth],f,d),v=m?s:"valid",b=m?l:Zb(l,f,g),N=(t==="avg"?()=>zb(b,e,a,v,i):()=>Yb(b,e,a,v,i))(),I=m?N:jb(N,f,w);return u?Be(I,[I.shape[1],I.shape[2],I.shape[3]]):I}function nJ(n,e,t){const s=t.map(h=>h[0]),r=t.map(h=>h[1]),a=n.concat(s,r),i=e.map((h,f)=>(h-a[f]%h)%h),o=r.map((h,f)=>h+i[f]),l=e.map((h,f)=>[s[f],o[f]]),u=e.map((h,f)=>[0,i[f]]);return[l,u]}function sJ(n,e){const s=n.map((i,o)=>i+(i-1)*(e[o]-1)).map(i=>i-1),r=s.map(i=>Math.floor(i/2)),a=s.map((i,o)=>i-r[o]);return s.map((i,o)=>[r[o],a[o]])}const WU=ge({pool_:tJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rJ(n,e){const t=oe(n,"x","prelu"),s=oe(e,"alpha","prelu"),r={x:t,alpha:s};return we.runKernel(Nb,r)}const ex=ge({prelu_:rJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aJ(n,e=null,t=!1){let s=oe(n,"x","prod");s.dtype==="bool"&&(s=mt(s,"int32"));const r={x:s},a={axis:e,keepDims:t};return we.runKernel(Ib,r,a)}const qU=ge({prod_:aJ});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iJ(n,e,t,s){const r=n.map((h,f)=>oe(h,`tensors${f}`,"raggedGather","int32")),a=oe(e,"paramsDenseValues","raggedGather"),i=oe(t,"indices","raggedGather","int32"),o={paramsNestedSplits:r,paramsDenseValues:a,indices:i},l={outputRaggedRank:s},u=we.runKernel(DN,o,l);return{outputNestedSplits:u.slice(0,u.length-1),outputDenseValues:u[u.length-1]}}const oJ=ge({raggedGather_:iJ});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lJ(n,e,t){const s=oe(n,"starts","raggedRange"),r=oe(e,"limits","raggedRange",s.dtype),a=oe(t,"deltas","raggedRange",s.dtype),i={starts:s,limits:r,deltas:a},o=we.runKernel(LN,i);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}const AJ=ge({raggedRange_:lJ});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uJ(n,e,t,s,r){const a=oe(n,"shape","raggedTensorToTensor","int32"),i=oe(e,"values","raggedTensorToTensor"),o=oe(t,"defaultValue","raggedTensorToTensor",i.dtype),l=s.map((f,d)=>oe(f,`tensors${d}`,"raggedTensorToTensor","int32")),u={shape:a,values:i,defaultValue:o,rowPartitionTensors:l},h={rowPartitionTypes:r};return we.runKernel(UN,u,h)}const cJ=ge({raggedTensorToTensor_:uJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hJ(n,e,t){so(n);const s=je(n);let r=null;if(t==null||t==="float32")r=new Float32Array(s);else if(t==="int32")r=new Int32Array(s);else if(t==="bool")r=new Uint8Array(s);else throw new Error(`Unknown data type ${t}`);for(let a=0;a<s;a++)r[a]=e();return we.makeTensor(r,n,t)}const fJ=ge({rand_:hJ});var C2={exports:{}},dJ=C2.exports,YT;function pJ(){return YT||(YT=1,function(n){(function(e,t,s){function r(l){var u=this,h=o();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=h(" "),u.s1=h(" "),u.s2=h(" "),u.s0-=h(l),u.s0<0&&(u.s0+=1),u.s1-=h(l),u.s1<0&&(u.s1+=1),u.s2-=h(l),u.s2<0&&(u.s2+=1),h=null}function a(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function i(l,u){var h=new r(l),f=u&&u.state,d=h.next;return d.int32=function(){return h.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&a(f,h),d.state=function(){return a(h,{})}),d}function o(){var l=4022871197,u=function(h){h=String(h);for(var f=0;f<h.length;f++){l+=h.charCodeAt(f);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}t&&t.exports?t.exports=i:this.alea=i})(dJ,n)}(C2)),C2.exports}var B2={exports:{}},mJ=B2.exports,JT;function gJ(){return JT||(JT=1,function(n){(function(e,t,s){function r(o){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},o===(o|0)?l.x=o:u+=o;for(var h=0;h<u.length+64;h++)l.x^=u.charCodeAt(h)|0,l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function i(o,l){var u=new r(o),h=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,m=(u.next()>>>0)/4294967296,g=(d+m)/(1<<21);while(g===0);return g},f.int32=u.next,f.quick=f,h&&(typeof h=="object"&&a(h,u),f.state=function(){return a(u,{})}),f}t&&t.exports?t.exports=i:this.xor128=i})(mJ,n)}(B2)),B2.exports}var S2={exports:{}},yJ=S2.exports,ZT;function wJ(){return ZT||(ZT=1,function(n){(function(e,t,s){function r(o){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:u+=o;for(var h=0;h<u.length+64;h++)l.x^=u.charCodeAt(h)|0,h==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function i(o,l){var u=new r(o),h=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,m=(u.next()>>>0)/4294967296,g=(d+m)/(1<<21);while(g===0);return g},f.int32=u.next,f.quick=f,h&&(typeof h=="object"&&a(h,u),f.state=function(){return a(u,{})}),f}t&&t.exports?t.exports=i:this.xorwow=i})(yJ,n)}(S2)),S2.exports}var N2={exports:{}},bJ=N2.exports,e4;function xJ(){return e4||(e4=1,function(n){(function(e,t,s){function r(o){var l=this;l.next=function(){var h=l.x,f=l.i,d,m;return d=h[f],d^=d>>>7,m=d^d<<24,d=h[f+1&7],m^=d^d>>>10,d=h[f+3&7],m^=d^d>>>3,d=h[f+4&7],m^=d^d<<7,d=h[f+7&7],d=d^d<<13,m^=d^d<<9,h[f]=m,l.i=f+1&7,m};function u(h,f){var d,m=[];if(f===(f|0))m[0]=f;else for(f=""+f,d=0;d<f.length;++d)m[d&7]=m[d&7]<<15^f.charCodeAt(d)+m[d+1&7]<<13;for(;m.length<8;)m.push(0);for(d=0;d<8&&m[d]===0;++d);for(d==8?m[7]=-1:m[d],h.x=m,h.i=0,d=256;d>0;--d)h.next()}u(l,o)}function a(o,l){return l.x=o.x.slice(),l.i=o.i,l}function i(o,l){o==null&&(o=+new Date);var u=new r(o),h=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,m=(u.next()>>>0)/4294967296,g=(d+m)/(1<<21);while(g===0);return g},f.int32=u.next,f.quick=f,h&&(h.x&&a(h,u),f.state=function(){return a(u,{})}),f}t&&t.exports?t.exports=i:this.xorshift7=i})(bJ,n)}(N2)),N2.exports}var I2={exports:{}},vJ=I2.exports,t4;function CJ(){return t4||(t4=1,function(n){(function(e,t,s){function r(o){var l=this;l.next=function(){var h=l.w,f=l.X,d=l.i,m,g;return l.w=h=h+1640531527|0,g=f[d+34&127],m=f[d=d+1&127],g^=g<<13,m^=m<<17,g^=g>>>15,m^=m>>>12,g=f[d]=g^m,l.i=d,g+(h^h>>>16)|0};function u(h,f){var d,m,g,w,v,b=[],C=128;for(f===(f|0)?(m=f,f=null):(f=f+"\0",m=0,C=Math.max(C,f.length)),g=0,w=-32;w<C;++w)f&&(m^=f.charCodeAt((w+32)%f.length)),w===0&&(v=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,w>=0&&(v=v+1640531527|0,d=b[w&127]^=m+v,g=d==0?g+1:0);for(g>=128&&(b[(f&&f.length||0)&127]=-1),g=127,w=4*128;w>0;--w)m=b[g+34&127],d=b[g=g+1&127],m^=m<<13,d^=d<<17,m^=m>>>15,d^=d>>>12,b[g]=m^d;h.w=v,h.X=b,h.i=g}u(l,o)}function a(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function i(o,l){o==null&&(o=+new Date);var u=new r(o),h=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,m=(u.next()>>>0)/4294967296,g=(d+m)/(1<<21);while(g===0);return g},f.int32=u.next,f.quick=f,h&&(h.X&&a(h,u),f.state=function(){return a(u,{})}),f}t&&t.exports?t.exports=i:this.xor4096=i})(vJ,n)}(I2)),I2.exports}var E2={exports:{}},BJ=E2.exports,n4;function SJ(){return n4||(n4=1,function(n){(function(e,t,s){function r(o){var l=this,u="";l.next=function(){var f=l.b,d=l.c,m=l.d,g=l.a;return f=f<<25^f>>>7^d,d=d-m|0,m=m<<24^m>>>8^g,g=g-f|0,l.b=f=f<<20^f>>>12^d,l.c=d=d-m|0,l.d=m<<16^d>>>16^g,l.a=g-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):u+=o;for(var h=0;h<u.length+20;h++)l.b^=u.charCodeAt(h)|0,l.next()}function a(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function i(o,l){var u=new r(o),h=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,m=(u.next()>>>0)/4294967296,g=(d+m)/(1<<21);while(g===0);return g},f.int32=u.next,f.quick=f,h&&(typeof h=="object"&&a(h,u),f.state=function(){return a(u,{})}),f}t&&t.exports?t.exports=i:this.tychei=i})(BJ,n)}(E2)),E2.exports}var k2={exports:{}};const NJ={},IJ=Object.freeze(Object.defineProperty({__proto__:null,default:NJ},Symbol.toStringTag,{value:"Module"})),EJ=UM(IJ);var kJ=k2.exports,s4;function FJ(){return s4||(s4=1,function(n){(function(e,t,s){var r=256,a=6,i=52,o="random",l=s.pow(r,a),u=s.pow(2,i),h=u*2,f=r-1,d;function m(I,L,$){var H=[];L=L==!0?{entropy:!0}:L||{};var U=b(v(L.entropy?[I,N(t)]:I??C(),3),H),O=new g(H),z=function(){for(var T=O.g(a),R=l,W=0;T<u;)T=(T+W)*r,R*=r,W=O.g(1);for(;T>=h;)T/=2,R/=2,W>>>=1;return(T+W)/R};return z.int32=function(){return O.g(4)|0},z.quick=function(){return O.g(4)/4294967296},z.double=z,b(N(O.S),t),(L.pass||$||function(T,R,W,K){return K&&(K.S&&w(K,O),T.state=function(){return w(O,{})}),W?(s[o]=T,R):T})(z,U,"global"in L?L.global:this==s,L.state)}function g(I){var L,$=I.length,H=this,U=0,O=H.i=H.j=0,z=H.S=[];for($||(I=[$++]);U<r;)z[U]=U++;for(U=0;U<r;U++)z[U]=z[O=f&O+I[U%$]+(L=z[U])],z[O]=L;(H.g=function(T){for(var R,W=0,K=H.i,re=H.j,P=H.S;T--;)R=P[K=f&K+1],W=W*r+P[f&(P[K]=P[re=f&re+R])+(P[re]=R)];return H.i=K,H.j=re,W})(r)}function w(I,L){return L.i=I.i,L.j=I.j,L.S=I.S.slice(),L}function v(I,L){var $=[],H=typeof I,U;if(L&&H=="object")for(U in I)try{$.push(v(I[U],L-1))}catch{}return $.length?$:H=="string"?I:I+"\0"}function b(I,L){for(var $=I+"",H,U=0;U<$.length;)L[f&U]=f&(H^=L[f&U]*19)+$.charCodeAt(U++);return N(L)}function C(){try{var I;return d&&(I=d.randomBytes)?I=I(r):(I=new Uint8Array(r),(e.crypto||e.msCrypto).getRandomValues(I)),N(I)}catch{var L=e.navigator,$=L&&L.plugins;return[+new Date,e,$,e.screen,N(t)]}}function N(I){return String.fromCharCode.apply(0,I)}if(b(s.random(),t),n.exports){n.exports=m;try{d=EJ}catch{}}else s["seed"+o]=m})(typeof self<"u"?self:kJ,[],Math)}(k2)),k2.exports}var NC,r4;function TJ(){if(r4)return NC;r4=1;var n=pJ(),e=gJ(),t=wJ(),s=xJ(),r=CJ(),a=SJ(),i=FJ();return i.alea=n,i.xor128=e,i.xorwow=t,i.xorshift7=s,i.xor4096=r,i.tychei=a,NC=i,NC}var tx=TJ();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b5{constructor(e,t,s,r,a){this.mean=e,this.stdDev=t,this.dtype=s,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=a||Math.random();this.random=tx.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const r=this.nextVal;return this.nextVal=NaN,r}let e,t,s=!1;for(;!s;){let r,a,i;do r=2*this.random()-1,a=2*this.random()-1,i=r*r+a*a;while(i>=1||i===0);const o=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*r*o,t=this.mean+this.stdDev*a*o,(!this.truncated||this.isValidTruncated(e))&&(s=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class DJ{constructor(e,t,s,r){this.alpha=e,this.beta=1/t,this.dtype=s;const a=r||Math.random();this.randu=tx.alea(a.toString()),this.randn=new b5(0,1,s,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,s,r,a,i;for(;;){do r=this.randn.nextValue(),i=1+this.c*r;while(i<=0);if(i*=i*i,e=r*r,t=1-.331*e*e,s=.5*e+this.d*(1-i+Math.log(i)),a=this.randu(),a<t||Math.log(a)<s)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class LJ{constructor(e=0,t=1,s,r){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=t-e,this.dtype=s,r==null&&(r=Math.random()),typeof r=="number"&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=tx.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UJ(n,e,t=1,s="float32",r){if(so(n),t==null&&(t=1),s==null&&(s="float32"),s!=="float32"&&s!=="int32")throw new Error(`Unsupported data type ${s}`);const a=new DJ(e,t,s,r),i=un(n,s);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}const RJ=ge({randomGamma_:UJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $J(n,e=0,t=1,s,r){if(so(n),s!=null&&s==="bool")throw new Error(`Unsupported data type ${s}`);const a=new b5(e,t,s,!1,r),i=un(n,s);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}const x5=ge({randomNormal_:$J});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _J(n,e,t){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return x5(n,0,1,e,t)}const OJ=ge({randomStandardNormal_:_J});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QJ(n,e=0,t=1,s="float32",r){so(n);const a=un(n,s),i=new LJ(e,t,null,r);for(let o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}const Vf=ge({randomUniform_:QJ});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MJ(n,e,t,s){return Vf(n,e,t,"int32",s)}const HJ=ge({randomUniformInt_:MJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Np(n,e,t=1,s="float32"){if(t===0)throw new Error("Cannot have a step of zero");const r={start:n,stop:e,step:t,dtype:s};return we.runKernel(RN,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PJ(n){const t={input:oe(n,"input","real")};return we.runKernel($N,t)}const Og=ge({real_:PJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zJ(n){const t={x:oe(n,"x","reciprocal")};return we.runKernel(D0,t)}const XU=ge({reciprocal_:zJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jJ(n){const t={x:oe(n,"x","relu")};return we.runKernel(L0,t)}const MA=ge({relu_:jJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VJ(n){const t={x:oe(n,"x","relu6")};return we.runKernel(U0,t)}const v5=ge({relu6_:VJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GJ(n,e){const s={x:oe(n,"x","reverse")},r={dims:e};return we.runKernel(Tb,s,r)}const _o=ge({reverse_:GJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KJ(n){const e=oe(n,"x","reverse");return se(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),_o(e,0)}const WJ=ge({reverse1d_:KJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qJ(n,e){const t=oe(n,"x","reverse");return se(t.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${t.rank}.`),_o(t,e)}const XJ=ge({reverse2d_:qJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YJ(n,e){const t=oe(n,"x","reverse");return se(t.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${t.rank}.`),_o(t,e)}const JJ=ge({reverse3d_:YJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZJ(n,e){const t=oe(n,"x","reverse");return se(t.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${t.rank}.`),_o(t,e)}const eZ=ge({reverse4d_:ZJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tZ(n){const t={x:oe(n,"x","round")};return we.runKernel(R0,t)}const C5=ge({round_:tZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nZ(n){const t={x:oe(n,"x","rsqrt","float32")};return we.runKernel($0,t)}const B5=ge({rsqrt_:nZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sZ(n){const t={x:oe(n,"x","selu")};return we.runKernel(_0,t)}const S5=ge({selu_:sZ});function rZ(n,e,t,s,r,a=[1,1],i="NHWC"){const o=oe(n,"x","separableConv2d"),l=oe(e,"depthwiseFilter","separableConv2d"),u=oe(t,"pointwiseFilter","separableConv2d");let h=o,f=!1;if(o.rank===3&&(f=!0,h=Be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");se(h.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${h.rank}.`),se(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),se(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),se(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),se(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const d=l.shape[2],m=l.shape[3];se(u.shape[2]===d*m,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*m}, but got ${u.shape[2]}.`);const g=Z0(h,l,s,r,i,a),v=ah(g,u,1,"valid",i);return f?Be(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const N5=ge({separableConv2d_:rZ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function aZ(n,e){const t=oe(n,"x","setdiff1d"),s=oe(e,"y","setdiff1d");se(t.dtype===s.dtype,()=>`x and y should have the same dtype, but got x (${t.dtype}) and y (${s.dtype}).`),se(t.rank===1,()=>`x should be 1D tensor, but got x (${t.shape}).`),se(s.rank===1,()=>`y should be 1D tensor, but got y (${s.shape}).`);const r=await t.data(),a=await s.data(),i=new Set(a);let o=0;for(let h=0;h<r.length;h++)i.has(r[h])||o++;const l=new Ir([o],t.dtype),u=new Ir([o],"int32");for(let h=0,f=0;h<r.length;h++)i.has(r[h])||(l.values[f]=r[h],u.values[f]=h,f++);return[l.toTensor(),u.toTensor()]}const iZ=aZ;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oZ(n){const t={x:oe(n,"x","sign")};return we.runKernel(M0,t)}const YU=ge({sign_:oZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lZ(n){const t={x:oe(n,"x","sin","float32")};return we.runKernel(O0,t)}const I5=ge({sin_:lZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AZ(n){const t={x:oe(n,"x","sinh")};return we.runKernel(Q0,t)}const E5=ge({sinh_:AZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uZ(n,e,t){const s=oe(n,"x","slice1d");return se(s.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${s.rank} tensor`),Nn(s,[e],[t])}const nx=ge({slice1d_:uZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cZ(n,e,t){const s=oe(n,"x","slice2d");return se(s.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${s.rank} tensor`),Nn(s,e,t)}const k5=ge({slice2d_:cZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hZ(n,e,t){const s=oe(n,"x","slice3d");return se(s.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${s.rank} tensor`),Nn(s,e,t)}const sx=ge({slice3d_:hZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fZ(n,e,t){const s=oe(n,"x","slice4d");return se(s.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${s.rank} tensor`),Nn(s,e,t)}const Qg=ge({slice4d_:fZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dZ(n,e=-1){const t=oe(n,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and dim was ${e}`);const s={logits:t},r={dim:e};return we.runKernel(_b,s,r)}const rx=ge({softmax_:dZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pZ(n){se(n.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${n.dtype}.`);const e={input:n};return we.runKernel(gN,e)}const ax=ge({fft_:pZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mZ(n){se(n.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${n.dtype}.`);const e={input:n};return we.runKernel(xN,e)}const Mg=ge({ifft_:mZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gZ(n){const e=n.shape[n.shape.length-1],t=n.size/e;let s;if(e<=2){const r=Be(n,[t,e]);s=Mg(r)}else{const r=[t,2*(e-1)],a=Be(Og(n),[t,e]),i=Be(Gb(n),[t,e]),o=_o(Nn(a,[0,1],[t,e-2]),1),l=be(_o(Nn(i,[0,1],[t,e-2]),1),Ut(-1)),u=dr([a,o],1),h=dr([i,l],1),f=Be(nh(u,h),[r[0],r[1]]);s=Mg(f)}if(s=Og(s),n.rank===3&&n.shape[0]!==0){const r=s,a=n.shape[0];s=Be(s,[a,s.shape[0]/a,s.shape[1]]),r.dispose()}return s}const F5=ge({irfft_:gZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yZ(n,e,t=0){const r={x:oe(n,"x","split")},a={numOrSizeSplits:e,axis:t};return we.runKernel($b,r,a)}const Ci=ge({split_:yZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wZ(n,e){se(n.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${n.dtype}`);let t=n.shape[n.shape.length-1];const s=n.size/t;let r;if(e!=null&&e<t){const g=n.shape.map(v=>0),w=n.shape.map(v=>v);w[n.shape.length-1]=e,r=Nn(n,g,w),t=e}else if(e!=null&&e>t){const g=n.shape.map(w=>w);g[n.shape.length-1]=e-t,r=dr([n,Br(g)],n.shape.length-1),t=e}else r=n;const a=En(r),i=Be(nh(r,a),[s,t]),o=ax(i),l=Math.floor(t/2)+1,u=Og(o),h=Gb(o),f=Ci(u,[l,t-l],u.shape.length-1),d=Ci(h,[l,t-l],h.shape.length-1),m=r.shape.slice();return m[r.shape.length-1]=l,Be(nh(f[0],d[0]),m)}const ix=ge({rfft_:wZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bZ(n,e){let t=oe(n,"a","squaredDifference"),s=oe(e,"b","squaredDifference");[t,s]=zs(t,s),sn(t.shape,s.shape);const r={a:t,b:s},a={};return we.runKernel(j0,r,a)}const T5=ge({squaredDifference_:bZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xZ(n,e){const t=oe(n,"x","squeeze","string_or_numeric");return Be(t,ch(t.shape,e).newShape)}const Gf=ge({squeeze_:xZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vZ(n,e=0){const t=ew(n,"tensors","stack","string_or_numeric");se(t.length>=1,()=>"Pass at least one tensor to tf.stack"),t.length>0&&se(e<=t[0].rank,()=>"Axis must be <= rank of the tensor");const s=t,r={axis:e};return we.runKernel(Bb,s,r)}const Ei=ge({stack_:vZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CZ(n,e=0){const s={x:oe(n,"x","step")},r={alpha:e};return we.runKernel(q0,s,r)}const jp=ge({step_:CZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BZ(n,e,t,s,r=0,a=0,i=0,o=0,l=0){const h={x:oe(n,"x","stridedSlice","string_or_numeric")},f={begin:e,end:t,strides:s,beginMask:r,endMask:a,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:l};return we.runKernel(WN,h,f)}const JU=ge({stridedSlice_:BZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SZ(n){const t={x:oe(n,"x","tan","float32")};return we.runKernel(G0,t)}const ZU=ge({tan_:SZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ma(n,e){Op(n);const t=fh(n,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return dh(n,null,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ig(n,e,t){if(Op(n),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const s=fh(n,t);if(s.length!==2&&s.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(s.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return dh(n,e,s,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eR(n,e,t){if(Op(n),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const s=fh(n,t);if(s.length!==3&&s.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(s.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return dh(n,e,s,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NZ(n,e,t){if(Op(n),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const s=fh(n,t);if(s.length!==4&&s.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(s.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return dh(n,e,s,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IZ(n,e,t){if(Op(n),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const s=fh(n,t);if(s.length!==5&&s.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(s.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return dh(n,e,s,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EZ(n,e,t){if(Op(n),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const s=fh(n,t);if(s.length!==6&&s.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(s.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||s,dh(n,e,s,t)}function tR(n,e,t){const s=e.rank>1?e.shape[e.rank-1]:1,r=e.rank>1?e.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${t.shape}, indices.shape: ${e.shape}, shape: ${n}, sliceDim: ${s}, and batchDim: ${r}.`;if(t.rank<r)throw new Error(a+` update.rank < ${r}. `);if(n.length<s+(t.rank-r))throw new Error(a+` Output shape length < ${s+(t.rank-r)}`);if(t.rank!==r+n.length-s)throw new Error(a+` update.rank != ${r+n.length-s}`);for(let i=0;i<r;++i)if(t.shape[i]!==e.shape[i])throw new Error(a+` updates.shape[${i}] (${t.shape[i]}) != indices.shape[${i}] (${e.shape[i]}).`);for(let i=0;i<t.rank-r;++i)if(t.shape[i+r]!==n[i+s])throw new Error(a+` updates.shape[${i+r}] (${t.shape[i+r]}) != shape[${i+r}] (${n[i+r]})`)}function D5(n,e,t){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(n.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${n.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(t.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${t}`);if(t.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(n.size===0)throw new Error(`Updates specified for empty output. updates shape: ${n.shape}`)}tR(t,e,n)}function Kf(n,e,t){const s=e.shape.length,r=s>1?e.shape[s-1]:1,a=t.length;let i=1;for(let f=r;f<a;++f)i*=t[f];const o=r<1?1:r,l=je(e.shape)/o,u=[..._t(t.slice(0,r)),1],h=je(t);return{sliceRank:r,numUpdates:l,sliceSize:i,strides:u,outputSize:h}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kZ(n,e,t){const s=oe(n,"tensor","tensorScatterupdate"),r=oe(e,"indices","tensorScatterupdate","int32"),a=oe(t,"updates","tensorScatterupdate");if(D5(a,r,s.shape),s.dtype!==a.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${s.dtype} and ${a.dtype}.`);const i={tensor:s,indices:r,updates:a},o={};return we.runKernel(MN,i,o)}const FZ=ge({tensorScatterUpdate_:kZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TZ(n,e=1,t=!0){const s=oe(n,"x","topk");if(s.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const r=s.shape[s.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>r)throw new Error(`'k' passed to topk() must be <= the last dimension (${r}) but got ${e}`);const a={x:s},i={k:e,sorted:t},[o,l]=we.runKernel(JN,a,i);return{values:o,indices:l}}const nR=ge({topk_:TZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DZ(n,e=0,t=1,s,r){if(so(n),s!=null&&s==="bool")throw new Error("Unsupported data type $ { dtype }");const a=new b5(e,t,s,!0,r),i=un(n,s);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}const L5=ge({truncatedNormal_:DZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LZ(n,e=0){const t=oe(n,"x","unique","string_or_numeric");se(t.rank>0,()=>"The input tensor must be at least 1D");const s={x:t},r={axis:e},[a,i]=we.runKernel(e5,s,r);return{values:a,indices:i}}const sR=ge({unique_:LZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UZ(n,e,t){const s=oe(n,"x","unsortedSegmentSum"),r=oe(e,"segmentIds","unsortedSegmentSum","int32");se(xp(t),()=>"numSegments must be of dtype int");const a={x:s,segmentIds:r},i={numSegments:t};return we.runKernel(Mb,a,i)}const U5=ge({unsortedSegmentSum_:UZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RZ(n,e=0){const t=oe(n,"x","unstack","string_or_numeric");se(e>=-t.shape.length&&e<t.shape.length,()=>`Axis = ${e} is not in [-${t.shape.length}, ${t.shape.length})`);const s={value:t},r={axis:e};return we.runKernel(Qb,s,r)}const Oo=ge({unstack_:RZ});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Z(n,e){return y5(n,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rR(n,e=!0,t,s){return we.makeVariable(n,e,t,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R5(n,e){const t=[];for(let a=0;a<e.length;a++)e[a]&&t.push(a);const s=un(n,"int32"),r=un([t.length,n.length],"int32");for(let a=0;a<t.length;a++){const i=s.indexToLoc(t[a]),o=a*n.length;r.values.set(i,o)}return r.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function _Z(n){const e=oe(n,"condition","whereAsync","bool"),t=await e.data(),s=R5(e.shape,t);return n!==e&&e.dispose(),s}const aR=_Z;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function OZ(n,e,t){const s=oe(n,"tensor","boolMask"),r=oe(e,"mask","boolMask","bool"),a=t??0,i=r.rank,o=s.shape;se(i>0,()=>"mask cannot be scalar"),Di(o.slice(a,a+i),r.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let w=a;w<a+i;w++)l*=o[w];const u=o.slice(0,a).concat([l],o.slice(a+i)),h=Be(s,u),f=Be(r,[-1]),d=await aR(f),m=Gf(d,[1]),g=s1(h,m,a);return n!==s&&s.dispose(),e!==r&&r.dispose(),m.dispose(),h.dispose(),f.dispose(),d.dispose(),g}const QZ=OZ;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MZ(n,e,t){const s=oe(n,"x","transpose");if(e==null&&(e=s.shape.map((i,o)=>o).reverse()),se(s.rank===e.length,()=>`Error in transpose: rank of input ${s.rank} must match length of perm ${e}.`),e.forEach(i=>{se(i>=0&&i<s.rank,()=>`All entries in 'perm' must be between 0 and ${s.rank-1} but got ${e}`)}),s.rank<=1)return s.clone();const r={x:s},a={perm:e};return s.dtype==="complex64"?De(()=>{let i=Og(s),o=Gb(s);return i=we.runKernel(dp,{x:i},a),o=we.runKernel(dp,{x:o},a),t&&(o=ms(o)),nh(i,o)}):we.runKernel(dp,r,a)}const In=ge({transpose_:MZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HZ(n,e,t,s,r=!0){const a=oe(n,"v","movingAverage"),i=oe(e,"x","movingAverage"),o=oe(t,"decay","movingAverage");I9(a,i),se(Bn(a.shape,i.shape),()=>"Shape mismatch in v and x");const l=Ut(1),u=vt(l,o);let h=be(vt(i,a),u);if(r){se(s!=null,()=>"When using zeroDebias: true, step is required.");const f=oe(s,"step","movingAverage");h=Tt(h,vt(l,Du(o,f)))}return st(a,h)}const PZ=ge({movingAverage_:HZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zZ(n,e,t){so(t);const s=oe(n,"indices","scatterND","int32"),r=oe(e,"updates","scatterND");D5(r,s,t);const a={indices:s,updates:r},i={shape:t};return we.runKernel(QN,a,i)}const jZ=ge({scatterND_:zZ});function VZ(n,e,t,s){if(n.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${n.shape}.`);const r=n.rank>0?n.shape[0]:1,a=n.rank>1?n.shape[1]:1;if(t.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${t.length}, should be: ${a}.`);const i=e.size;if(!(e.rank===0||e.rank===1&&i===r))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${r}]`);if(e.dtype!==s.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GZ(n,e,t,s=0){so(t);const r=oe(n,"sparseIndices","sparseToDense","int32"),a=oe(e,"sparseValues","sparseToDense","string_or_numeric"),i=oe(s,"defaultValue","sparseToDense",a.dtype);VZ(r,a,t,i);const o={sparseIndices:r,sparseValues:a,defaultValue:i},l={outputShape:t};return we.runKernel(GN,o,l)}const KZ=ge({sparseToDense_:GZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WZ(n,e){const t=oe(e,"indices","gatherND","int32"),r={params:oe(n,"x","gatherND","string_or_numeric"),indices:t};return we.runKernel(bN,r)}const qZ=ge({gatherND_:WZ});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XZ(n,e){if(e==null)return n.shape.slice();if(Bn(n.shape,e))return e;if(n.shape.length===e.length){const t=[];for(let s=0;s<n.shape.length;s++)e[s]==null&&n.shape[s]!=null?t.push(n.shape[s]):t.push(e[s]);return t}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YZ(n,e,t,s){const r=oe(n,"x","dropout");if(se(r.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${r.dtype} tensor instead.`),se(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return n instanceof ps?r.clone():r;const a=XZ(r,t),i=1-e,o=Tt(n1(st(Vf(a,0,1,"float32",s),i)),i);return be(r,o)}const iR=ge({dropout_:YZ});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oR(n){return Math.floor(Math.pow(2,Math.ceil(Math.log(n)/Math.log(2))))}function $5(n,e,t){const s=1-n%2,r=new Float32Array(n);for(let a=0;a<n;++a){const i=2*Math.PI*a/(n+s-1);r[a]=e-t*Math.cos(i)}return Ma(r,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function JZ(n,e,t=1){const s=oe(n,"predictions","inTopK"),r=oe(e,"targets","inTopK");se(s.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${s.rank}`),se(s.rank-1===r.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${s.rank} and targets rank ${r.rank}`),Di(s.shape.slice(0,s.shape.length-1),r.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=s.shape[s.shape.length-1];se(t>0&&t<=a,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${t}`);const i=await s.data(),o=await r.data(),[l,u]=[i.length/a,a],h=ea("bool",l);for(let f=0;f<l;f++){const d=f*u,m=i.subarray(d,d+u),g=[];for(let w=0;w<m.length;w++)g.push({value:m[w],index:w});g.sort((w,v)=>v.value-w.value),h[f]=0;for(let w=0;w<t;w++)if(g[w].index===o[f]){h[f]=1;break}}return n!==s&&s.dispose(),e!==r&&r.dispose(),Nl(h,r.shape,"bool")}const ZZ=JZ;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eee(n,e,t,s,r,a="NHWC",i){let o=n;n.rank===3&&(o=Be(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let l=e;l.rank===3&&(l=Be(e,[1,e.shape[0],e.shape[1],e.shape[2]])),se(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),se(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),se(t.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${t}.`);const u=a==="NHWC"?o.shape[3]:o.shape[1],h=a==="NHWC"?l.shape[3]:l.shape[1];se(u===t[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${t[2]}.`),se(h===t[3],()=>`Error in conv2dDerFilter: depth of dy (${h}) must match output depth for filter (${t[3]}).`),Pa("conv2dDerFilter",r,i);const f={x:o,dy:l},d={strides:s,pad:r,dataFormat:a,dimRoundingMode:i,filterShape:t};return we.runKernel(aN,f,d)}const _5=ge({conv2DBackpropFilter_:eee});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ox(n,e,t){if(t==null||t==="linear")return n;if(t==="relu")return be(n,jp(e));throw new Error(`Cannot compute gradient for fused activation ${t}.`)}function lx(n,e){let t=e;const s=Fr(n.shape,e.shape);return s.length>0&&(t=Nt(t,s)),Be(t,n.shape)}function Ax(n,e,t,s){if(e==="linear")return n;if(e==="relu")return MA(n);if(e==="elu")return e1(n);if(e==="relu6")return v5(n);if(e==="prelu")return ex(n,t);if(e==="leakyrelu")return Kb(n,s);if(e==="sigmoid")return kA(n);throw new Error(`Unknown fused activation ${e}.`)}const ux=(n,e)=>!(n>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tee({x:n,filter:e,strides:t,pad:s,dataFormat:r="NHWC",dilations:a=[1,1],dimRoundingMode:i,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:h}){if(l=l||"linear",ux(we.state.gradientDepth,l)===!1){se(r==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${r} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let $=ah(n,e,t,s,r,a,i);return o!=null&&($=st($,o)),Ax($,l,u,h)}const f=oe(n,"x","conv2d","float32"),d=oe(e,"filter","conv2d","float32");let m=f,g=!1;f.rank===3&&(g=!0,m=Be(f,[1,f.shape[0],f.shape[1],f.shape[2]])),se(m.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${m.rank}.`),se(d.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),Pa("fused conv2d",s,i);const w=r==="NHWC"?m.shape[3]:m.shape[1];se(d.shape[2]===w,()=>`Error in conv2d: depth of input (${w}) must match input depth for filter ${d.shape[2]}.`),se(na(t,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`);const v=Mr(m.shape,d.shape,t,a,s,i);let b;o!=null&&(b=oe(o,"bias","fused conv2d"),[b]=zs(b,f),r==="NHWC"?sn(v.outShape,b.shape):(se(b.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`),se(b.shape.length===0||b.shape[0]===v.outChannels||b.shape[0]===1,()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${v.outChannels})`)));let C;if(u!=null){const $=u.shape;if(se($.length<=1||$.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${$.length}.`),$.length===1)se($[0]===1||$[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${$}) is not compatible with the number of output channels (${v.outChannels}).`);else if($.length===3)try{sn($,v.outShape)}catch{const U=`Error in fused conv2d: PReLU activation weights (${$}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(U)}C=oe(u,"prelu weights","fused conv2d")}const N=($,H)=>{se(r==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${r} but only NHWC is currently supported.`);const[U,O,z,T]=H,R=ox($,z,l);se(rh(a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);const W=A5(O.shape,R,U,t,s),K=_5(O,R,U.shape,t,s),re=[W,K];if(T!=null){const P=lx(T,R);re.push(P)}return re},I={x:m,filter:d,bias:b,preluActivationWeights:C},L={strides:t,pad:s,dataFormat:r,dilations:a,dimRoundingMode:i,activation:l,leakyreluAlpha:h};return o==null?Lu((H,U,O)=>{let z=we.runKernel(X2,I,L);return O([U,H,z]),g&&(z=Be(z,[z.shape[1],z.shape[2],z.shape[3]])),{value:z,gradFunc:N}})(m,d):Lu((H,U,O,z)=>{let T=we.runKernel(X2,I,L);return z([U,H,T,O]),g&&(T=Be(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:N}})(m,d,b)}const lR=ge({fusedConv2d_:tee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nee(n,e,t,s,r,a=[1,1],i){let o=n;n.rank===3&&(o=Be(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let l=e;l.rank===3&&(l=Be(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:o,dy:l},h={strides:s,pad:r,dimRoundingMode:i,dilations:a,filterShape:t};return we.runKernel(hN,u,h)}const AR=ge({depthwiseConv2dNativeBackpropFilter_:nee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function see(n,e,t,s,r,a=[1,1],i){let o=e,l=!1;e.rank===3&&(l=!0,o=Be(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:o,filter:t},h={strides:s,pad:r,dimRoundingMode:i,dilations:a,inputShape:n},f=we.runKernel(fN,u,h);return l?Be(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const uR=ge({depthwiseConv2dNativeBackpropInput_:see});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ree({x:n,filter:e,strides:t,pad:s,dataFormat:r="NHWC",dilations:a=[1,1],dimRoundingMode:i,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:h}){if(ux(we.state.gradientDepth,l)===!1){let L=Z0(n,e,t,s,r,a,i);return o!=null&&(L=st(L,o)),Ax(L,l,u,h)}const f=oe(n,"x","depthwiseConv2d","float32"),d=oe(e,"filter","depthwiseConv2d","float32");let m=f,g=!1;f.rank===3&&(g=!0,m=Be(f,[1,f.shape[0],f.shape[1],f.shape[2]])),se(m.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`),se(d.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),se(m.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${m.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),a==null&&(a=[1,1]),se(na(t,a),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),Pa("fused depthwiseConv2d",s,i);const w=Mr(m.shape,d.shape,t,a,s,i,!0);let v;o!=null&&(v=oe(o,"bias","fused conv2d"),[v]=zs(v,f),sn(w.outShape,v.shape));let b;u!=null&&(b=oe(u,"prelu weights","fused depthwiseConv2d"));const C=(L,$)=>{se(rh(a),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[H,U,O,z]=$,T=ox(L,O,l),R=uR(U.shape,T,H,t,s,a,i),W=AR(U,T,H.shape,t,s,a,i);if(z!=null){const K=lx(v,T);return[R,W,K]}return[R,W]},N={x:m,filter:d,bias:v,preluActivationWeights:b},I={strides:t,pad:s,dataFormat:r,dilations:a,dimRoundingMode:i,activation:l,leakyreluAlpha:h};return o==null?Lu(($,H,U)=>{let O=we.runKernel(Y2,N,I);return U([H,$,O]),g&&(O=Be(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:C}})(m,d):Lu(($,H,U,O)=>{let z=we.runKernel(Y2,N,I);return O([H,$,z,U]),g&&(z=Be(z,[z.shape[1],z.shape[2],z.shape[3]])),{value:z,gradFunc:C}})(m,d,v)}const aee=ge({fusedDepthwiseConv2d_:ree});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iee({a:n,b:e,transposeA:t=!1,transposeB:s=!1,bias:r,activation:a="linear",preluActivationWeights:i,leakyreluAlpha:o=.2}){if(ux(we.state.gradientDepth,a)===!1){let T=yn(n,e,t,s);return r!=null&&(T=st(T,r)),Ax(T,a,i,o)}let l=oe(n,"a","fused matMul"),u=oe(e,"b","fused matMul");[l,u]=zs(l,u);const h=t?l.shape[l.rank-2]:l.shape[l.rank-1],f=s?u.shape[u.rank-1]:u.shape[u.rank-2],d=t?l.shape[l.rank-1]:l.shape[l.rank-2],m=s?u.shape[u.rank-2]:u.shape[u.rank-1],g=l.shape.slice(0,-2),w=u.shape.slice(0,-2),v=je(g),b=je(w);se(h===f,()=>`Error in fused matMul: inner shapes (${h}) and (${f}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${t} and transposeB=${s} must match.`);const N=sn(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([d,m]),I=t?Be(l,[v,h,d]):Be(l,[v,d,h]),L=s?Be(u,[b,m,f]):Be(u,[b,f,m]);let $;r!=null&&($=oe(r,"bias","fused matMul"),[$]=zs($,l),sn(N,$.shape));let H;i!=null&&(H=oe(i,"prelu weights","fused matMul"));const U=(T,R)=>{const[W,K,re,P]=R,Y=ox(Be(T,re.shape),re,a);let J,te;if(!t&&!s?(J=yn(Y,K,!1,!0),te=yn(W,Y,!0,!1)):!t&&s?(J=yn(Y,K,!1,!1),te=yn(Y,W,!0,!1)):t&&!s?(J=yn(K,Y,!1,!0),te=yn(W,Y,!1,!1)):(J=yn(K,Y,!0,!0),te=yn(Y,W,!0,!0)),r!=null){const j=lx(P,Y);return[J,te,j]}else return[J,te]},O={a:I,b:L,bias:$,preluActivationWeights:H},z={transposeA:t,transposeB:s,activation:a,leakyreluAlpha:o};return r==null?Lu((R,W,K)=>{const re=we.runKernel(q2,O,z);return K([R,W,re]),{value:Be(re,N),gradFunc:U}})(I,L):Lu((R,W,K,re)=>{const P=we.runKernel(q2,O,z);return re([R,W,P,K]),{value:Be(P,N),gradFunc:U}})(I,L,$)}const qB=ge({fusedMatMul_:iee});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oee=Object.freeze(Object.defineProperty({__proto__:null,conv2d:lR,depthwiseConv2d:aee,matMul:qB},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lee(n){return $5(n,.54,.46)}const Aee=ge({hammingWindow_:lee});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uee(n){return $5(n,.5,.5)}const cR=ge({hannWindow_:uee});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cee(n,e,t,s=!1,r=0){let a=0;const i=[];for(;a+e<=n.size;)i.push(Nn(n,a,e)),a+=t;if(s)for(;a<n.size;){const o=a+e-n.size,l=dr([Nn(n,a,e-o),Pp([o],r)]);i.push(l),a+=t}return i.length===0?Ig([],[0,e]):Be(dr(i),[i.length,e])}const hR=ge({frame_:cee});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hee(n,e,t,s,r=cR){s==null&&(s=oR(e));const a=hR(n,e,t),i=be(a,r(e));return ix(i,s)}const fee=ge({stft_:hee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dee(n,e,t,s,r="bilinear",a=0){const i=oe(n,"image","cropAndResize"),o=oe(e,"boxes","cropAndResize","float32"),l=oe(t,"boxInd","cropAndResize","int32"),u=o.shape[0];se(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),se(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${o.shape}.`),se(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${o.shape}.`),se(s.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${s.length}.`),se(s[0]>=1&&s[1]>=1,()=>`cropSize must be atleast [1,1], but was ${s}`),se(r==="bilinear"||r==="nearest",()=>`method must be bilinear or nearest, but was ${r}`);const h={image:i,boxes:o,boxInd:l},f={method:r,extrapolationValue:a,cropSize:s};return we.runKernel(AN,h,f)}const pee=ge({cropAndResize_:dee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mee(n){const e=oe(n,"image","flipLeftRight","float32");se(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const t={image:e};return we.runKernel(wN,t,{})}const gee=ge({flipLeftRight_:mee});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yee(n){const e=oe(n,"image","grayscaleToRGB"),t=e.rank-1,s=e.shape[t];se(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),se(s===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${s}.`);const r=new Array(e.rank);return r.fill(1,0,t),r[t]=3,To(e,r)}const wee=ge({grayscaleToRGB_:yee});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bee(n){const e=oe(n,"image","RGBToGrayscale"),t=e.rank-1,s=e.shape[t];se(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),se(s===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${s}.`);const r=e.dtype,a=mt(e,"float32"),i=Ma([.2989,.587,.114]);let o;switch(e.rank){case 2:o=rp("ij,j->i",a,i);break;case 3:o=rp("ijk,k->ij",a,i);break;case 4:o=rp("ijkl,l->ijk",a,i);break;case 5:o=rp("ijklm,m->ijkl",a,i);break;case 6:o=rp("ijklmn,n->ijklm",a,i);break;default:throw new Error("Not a valid tensor rank.")}return o=_a(o,-1),mt(o,r)}const xee=ge({rgbToGrayscale_:bee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vee(n,e,t=0,s=.5){const r=oe(n,"image","rotateWithOffset","float32");se(r.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${r.rank}.`);const a={image:r},i={radians:e,fillValue:t,center:s};return we.runKernel(t5,a,i)}const Cee=ge({rotateWithOffset_:vee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vp(n,e,t,s,r,a){s==null&&(s=.5),r==null&&(r=Number.NEGATIVE_INFINITY),a==null&&(a=0);const i=n.shape[0];return t=Math.min(t,i),se(0<=s&&s<=1,()=>`iouThreshold must be in [0, 1], but was '${s}'`),se(n.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${n.rank}'`),se(n.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${n.shape[1]}`),se(e.rank===1,()=>"scores must be a 1D tensor"),se(e.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${e.shape[0]}`),se(0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:t,iouThreshold:s,scoreThreshold:r,softNmsSigma:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bee(n,e,t,s=.5,r=Number.NEGATIVE_INFINITY){const a=oe(n,"boxes","nonMaxSuppression","float32"),i=oe(e,"scores","nonMaxSuppression","float32"),o=Vp(a,i,t,s,r);t=o.maxOutputSize,s=o.iouThreshold,r=o.scoreThreshold;const l={maxOutputSize:t,iouThreshold:s,scoreThreshold:r};return we.runKernel(kN,{boxes:a,scores:i},l)}const See=ge({nonMaxSuppression_:Bee});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nee(n,e,t){const s=Iee(n,e,t),r=s<0?-(s+1):s;n.splice(r,0,e)}function Iee(n,e,t){return kee(n,e,t||Eee)}function Eee(n,e){return n>e?1:n<e?-1:0}function kee(n,e,t){let s=0,r=n.length,a=0,i=!1;for(;s<r;){a=s+(r-s>>>1);const o=t(e,n[a]);o>0?s=a+1:(r=a,i=!o)}return i?s:-s-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O5(n,e,t,s,r){return H5(n,e,t,s,r,0)}function Q5(n,e,t,s,r,a){return H5(n,e,t,s,r,0,!1,a,!0)}function M5(n,e,t,s,r,a){return H5(n,e,t,s,r,a,!0)}function H5(n,e,t,s,r,a,i=!1,o=!1,l=!1){const u=[];for(let v=0;v<e.length;v++)e[v]>r&&u.push({score:e[v],boxIndex:v,suppressBeginIndex:0});u.sort(a4);const h=a>0?-.5/a:0,f=[],d=[];for(;f.length<t&&u.length>0;){const v=u.pop(),{score:b,boxIndex:C,suppressBeginIndex:N}=v;if(b<r)break;let I=!1;for(let L=f.length-1;L>=N;--L){const $=Fee(n,C,f[L]);if($>=s){I=!0;break}if(v.score=v.score*Tee(s,h,$),v.score<=r)break}v.suppressBeginIndex=f.length,I||(v.score===b?(f.push(C),d.push(v.score)):v.score>r&&Nee(u,v,a4))}const m=f.length,g=t-m;o&&g>0&&(f.push(...new Array(g).fill(0)),d.push(...new Array(g).fill(0)));const w={selectedIndices:f};return i&&(w.selectedScores=d),l&&(w.validOutputs=m),w}function Fee(n,e,t){const s=n.subarray(e*4,e*4+4),r=n.subarray(t*4,t*4+4),a=Math.min(s[0],s[2]),i=Math.min(s[1],s[3]),o=Math.max(s[0],s[2]),l=Math.max(s[1],s[3]),u=Math.min(r[0],r[2]),h=Math.min(r[1],r[3]),f=Math.max(r[0],r[2]),d=Math.max(r[1],r[3]),m=(o-a)*(l-i),g=(f-u)*(d-h);if(m<=0||g<=0)return 0;const w=Math.max(a,u),v=Math.max(i,h),b=Math.min(o,f),C=Math.min(l,d),N=Math.max(b-w,0)*Math.max(C-v,0);return N/(m+g-N)}function Tee(n,e,t){const s=Math.exp(e*t*t);return t<=n?s:0}function a4(n,e){return n.score-e.score||n.score===e.score&&e.boxIndex-n.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Dee(n,e,t,s=.5,r=Number.NEGATIVE_INFINITY){const a=oe(n,"boxes","nonMaxSuppressionAsync"),i=oe(e,"scores","nonMaxSuppressionAsync"),o=Vp(a,i,t,s,r);t=o.maxOutputSize,s=o.iouThreshold,r=o.scoreThreshold;const l=await Promise.all([a.data(),i.data()]),u=l[0],h=l[1],{selectedIndices:f}=O5(u,h,t,s,r);return a!==n&&a.dispose(),i!==e&&i.dispose(),Ma(f,"int32")}const Lee=Dee;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uee(n,e,t,s=.5,r=Number.NEGATIVE_INFINITY,a=0){const i=oe(n,"boxes","nonMaxSuppression"),o=oe(e,"scores","nonMaxSuppression"),l=Vp(i,o,t,s,r,a);t=l.maxOutputSize,s=l.iouThreshold,r=l.scoreThreshold,a=l.softNmsSigma;const u={boxes:i,scores:o},h={maxOutputSize:t,iouThreshold:s,scoreThreshold:r,softNmsSigma:a},f=we.runKernel(TN,u,h);return{selectedIndices:f[0],selectedScores:f[1]}}const Ree=ge({nonMaxSuppressionWithScore_:Uee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function $ee(n,e,t,s=.5,r=Number.NEGATIVE_INFINITY,a=0){const i=oe(n,"boxes","nonMaxSuppressionAsync"),o=oe(e,"scores","nonMaxSuppressionAsync"),l=Vp(i,o,t,s,r,a);t=l.maxOutputSize,s=l.iouThreshold,r=l.scoreThreshold,a=l.softNmsSigma;const u=await Promise.all([i.data(),o.data()]),h=u[0],f=u[1],{selectedIndices:d,selectedScores:m}=M5(h,f,t,s,r,a);return i!==n&&i.dispose(),o!==e&&o.dispose(),{selectedIndices:Ma(d,"int32"),selectedScores:Ma(m)}}const _ee=$ee;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oee(n,e,t,s=.5,r=Number.NEGATIVE_INFINITY,a=!1){const i=oe(n,"boxes","nonMaxSuppression"),o=oe(e,"scores","nonMaxSuppression"),l=Vp(i,o,t,s,r,null),u=l.maxOutputSize,h=l.iouThreshold,f=l.scoreThreshold,d={boxes:i,scores:o},m={maxOutputSize:u,iouThreshold:h,scoreThreshold:f,padToMaxOutputSize:a},g=we.runKernel(FN,d,m);return{selectedIndices:g[0],validOutputs:g[1]}}const Qee=ge({nonMaxSuppressionPadded_:Oee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Mee(n,e,t,s=.5,r=Number.NEGATIVE_INFINITY,a=!1){const i=oe(n,"boxes","nonMaxSuppressionAsync"),o=oe(e,"scores","nonMaxSuppressionAsync"),l=Vp(i,o,t,s,r,null),u=l.maxOutputSize,h=l.iouThreshold,f=l.scoreThreshold,[d,m]=await Promise.all([i.data(),o.data()]),{selectedIndices:g,validOutputs:w}=Q5(d,m,u,h,f,a);return i!==n&&i.dispose(),o!==e&&o.dispose(),{selectedIndices:Ma(g,"int32"),validOutputs:Ut(w,"int32")}}const Hee=Mee;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pee(n,e,t=!1,s=!1){const r=oe(n,"images","resizeBilinear");se(r.rank===3||r.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${r.rank}.`),se(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),se(s===!1||t===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let a=r,i=!1;r.rank===3&&(i=!0,a=Be(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const o={images:a},l={alignCorners:t,halfPixelCenters:s,size:e},u=we.runKernel(Fb,o,l);return i?Be(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const fR=ge({resizeBilinear_:Pee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zee(n,e,t=!1,s=!1){const r=oe(n,"images","resizeNearestNeighbor");se(r.rank===3||r.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${r.rank}.`),se(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),se(r.dtype==="float32"||r.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),se(s===!1||t===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let a=r,i=!1;r.rank===3&&(i=!0,a=Be(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const o={images:a},l={alignCorners:t,halfPixelCenters:s,size:e},u=we.runKernel(kb,o,l);return i?Be(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const dR=ge({resizeNearestNeighbor_:zee});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jee(n,e="binary",t=!1,s=.5){const r=oe(n,"image","threshold"),a=.2989,i=.587,o=.114,l=r.shape[0]*r.shape[1];let u=be(Ma([s]),255),h,f,d,m;if(se(r.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${r.rank}.`),se(r.shape[2]===3||r.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${r.shape[2]}.`),se(r.dtype==="int32"||r.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${r.dtype}.`),se(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),r.shape[2]===3){[h,f,d]=Ci(r,[1,1,1],-1);const v=be(h,a),b=be(f,i),C=be(d,o);m=st(st(v,b),C)}else m=n;if(e==="otsu"){const v=vU(mt(C5(m),"int32"),Nl([]),256);u=Vee(v,l)}const g=t?jf(m,u):Li(m,u);return mt(be(g,255),"int32")}function Vee(n,e){let t=Ma([-1]),s=Ma([0]),r=Ma([0]),a,i,o,l,u,h;for(let f=0;f<n.size-1;f++){a=Nn(n,0,f+1),i=Nn(n,f+1),u=Tt(Nt(a),e),h=Tt(Nt(i),e);const d=Nt(be(a,Np(0,a.size)));o=Tt(d,Nt(a));const m=Pp(i.shape,a.size),g=st(Np(0,i.size),m),w=be(i,g);l=Tt(Nt(w),Nt(i));const v=vt(o,l),b=vt(o,l),C=be(u,h);r=be(be(C,v),b);const N=Li(r,s);s=pa(N,r,s),t=pa(N,Ma([f]),t)}return t}const Gee=ge({threshold_:jee});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kee(n,e,t="nearest",s="constant",r=0,a){const i=oe(n,"image","transform","float32"),o=oe(e,"transforms","transform","float32");se(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),se(o.rank===2&&(o.shape[0]===i.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),se(a==null||a.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`);const l={image:i,transforms:o},u={interpolation:t,fillMode:s,fillValue:r,outputShape:a};return we.runKernel(ZN,l,u)}const Wee=ge({transform_:Kee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qee(n,e,t){const s=oe(n,"a","bandPart");se(s.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${s.rank}.`);const r=s.shape,[a,i]=s.shape.slice(-2);let o,l;typeof e=="number"?(se(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),se(e<=a,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${a}).`),o=oe(e<0?a:e,"numLower","bandPart")):(se(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=pa(_g(e,0),a,Rf(e,a))),typeof t=="number"?(se(t%1===0,()=>`bandPart(): numUpper must be an integer, got ${t}.`),se(t<=i,()=>`bandPart(): numUpper (${t}) must not be greater than the number of columns (${i}).`),l=oe(t<0?i:t,"numUpper","bandPart")):(se(t.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=pa(_g(t,0),i,Rf(t,i)));const u=Be(Np(0,a,1,"int32"),[-1,1]),h=Np(0,i,1,"int32"),f=vt(u,h),d=LA(jf(f,o),gh(f,ms(l))),m=Br([a,i],s.dtype);return Be(Ei(Oo(Be(s,[-1,a,i])).map(g=>pa(d,g,m))),r)}const Xee=ge({bandPart_:qee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yee(n){let e;if(Array.isArray(n)){e=!1,se(n!=null&&n.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const r=n[0].shape[0];for(let a=1;a<n.length;++a)se(n[a].shape[0]===r,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${n[a].shape[0]} vs. ${r})`)}else e=!0,n=Ci(n,n.shape[0],0).map(r=>Gf(r,[0]));se(n.length<=n[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${n.length}) exceeds number of dimensions (${n[0].shape[0]}).`);const t=[],s=n;for(let r=0;r<n.length;++r)t.push(we.tidy(()=>{let a=s[r];if(r>0)for(let i=0;i<r;++i){const o=be(Nt(be(t[i],a)),t[i]);a=vt(a,o)}return Tt(a,t1(a,"euclidean"))}));return e?Ei(t,0):t}const Jee=ge({gramSchmidt_:Yee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zee(n,e=!1){if(se(n.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${n.rank}`),n.rank===2)return i4(n,e);{const t=n.shape.slice(0,n.shape.length-2).reduce((l,u)=>l*u),s=Oo(Be(n,[t,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),r=[],a=[];s.forEach(l=>{const[u,h]=i4(l,e);r.push(u),a.push(h)});const i=Be(Ei(r,0),n.shape),o=Be(Ei(a,0),n.shape);return[i,o]}}function i4(n,e=!1){return we.tidy(()=>{se(n.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${n.shape.length}D Tensor.`);const t=n.shape[0],s=n.shape[1];let r=p5(t),a=Eu(n);const i=Ig([[1]],[1,1]);let o=Eu(i);const l=t>=s?s:t;for(let u=0;u<l;++u){const h=a,f=o,d=r;[o,a,r]=we.tidy(()=>{const m=Nn(a,[u,u],[t-u,1]),g=t1(m),w=Nn(a,[u,u],[1,1]),v=pa(Li(w,0),Ig([[-1]]),Ig([[1]])),b=vt(w,be(v,g)),C=Tt(m,b);C.shape[0]===1?o=Eu(i):o=dr([i,Nn(C,[1,0],[C.shape[0]-1,C.shape[1]])],0);const N=ms(Tt(yn(v,b),g)),I=Nn(a,[u,0],[t-u,s]),L=be(N,o),$=In(o);if(u===0)a=vt(I,yn(L,yn($,I)));else{const O=vt(I,yn(L,yn($,I)));a=dr([Nn(a,[0,0],[u,s]),O],0)}const H=In(L),U=Nn(r,[0,u],[t,r.shape[1]-u]);if(u===0)r=vt(U,yn(yn(U,o),H));else{const O=vt(U,yn(yn(U,o),H));r=dr([Nn(r,[0,0],[t,u]),O],1)}return[o,a,r]}),on([h,f,d])}return!e&&t>s&&(r=Nn(r,[0,0],[t,s]),a=Nn(a,[0,0],[s,s])),[r,a]})}const ete=ge({qr_:Zee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ri;(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(ri||(ri={}));function tte(n,e,t=ri.SUM_BY_NONZERO_WEIGHTS){const s=oe(n,"losses","computeWeightedLoss");let r=null;e!=null&&(r=oe(e,"weights","computeWeightedLoss"));const a=r==null?s:be(s,r);if(t===ri.NONE)return a;if(t===ri.SUM)return Nt(a);if(t===ri.MEAN){if(r==null)return Ps(a);{const i=s.size/r.size,o=Tt(Nt(a),Nt(r));return i>1?Tt(o,Ut(i)):o}}if(t===ri.SUM_BY_NONZERO_WEIGHTS){if(r==null)return Tt(Nt(a),Ut(s.size));{const i=be(r,vi(s.shape)),o=mt(Nt(Sp(i,Ut(0))),"float32");return Tt(Nt(a),o)}}throw Error(`Unknown reduction: ${t}`)}const Mu=ge({computeWeightedLoss_:tte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nte(n,e,t,s=ri.SUM_BY_NONZERO_WEIGHTS){const r=oe(n,"labels","absoluteDifference"),a=oe(e,"predictions","absoluteDifference");let i=null;t!=null&&(i=oe(t,"weights","absoluteDifference")),Di(r.shape,a.shape,"Error in absoluteDifference: ");const o=vr(vt(r,a));return Mu(o,i,s)}const ste=ge({absoluteDifference_:nte});function rte(n,e,t,s,r=ri.SUM_BY_NONZERO_WEIGHTS){const a=oe(n,"labels","cosineDistance"),i=oe(e,"predictions","cosineDistance");let o=null;s!=null&&(o=oe(s,"weights","cosineDistance")),Di(a.shape,i.shape,"Error in cosineDistance: ");const l=Ut(1),u=vt(l,Nt(be(a,i),t,!0));return Mu(u,o,r)}const ate=ge({cosineDistance_:rte});function ite(n,e,t,s=ri.SUM_BY_NONZERO_WEIGHTS){let r=oe(n,"labels","hingeLoss");const a=oe(e,"predictions","hingeLoss");let i=null;t!=null&&(i=oe(t,"weights","hingeLoss")),Di(r.shape,a.shape,"Error in hingeLoss: ");const o=Ut(1);r=vt(be(Ut(2),r),o);const l=MA(vt(o,be(r,a)));return Mu(l,i,s)}const ote=ge({hingeLoss_:ite});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lte(n,e,t,s=1,r=ri.SUM_BY_NONZERO_WEIGHTS){const a=oe(n,"labels","huberLoss"),i=oe(e,"predictions","huberLoss");let o=null;t!=null&&(o=oe(t,"weights","huberLoss")),Di(a.shape,i.shape,"Error in huberLoss: ");const l=Ut(s),u=vr(vt(i,a)),h=Rf(u,l),f=vt(u,h),d=st(be(Ut(.5),rs(h)),be(l,f));return Mu(d,o,r)}const Ate=ge({huberLoss_:lte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ute(n,e,t,s=1e-7,r=ri.SUM_BY_NONZERO_WEIGHTS){const a=oe(n,"labels","logLoss"),i=oe(e,"predictions","logLoss");let o=null;t!=null&&(o=oe(t,"weights","logLoss")),Di(a.shape,i.shape,"Error in logLoss: ");const l=Ut(1),u=Ut(s),h=ms(be(a,to(st(i,u)))),f=be(vt(l,a),to(st(vt(l,i),u))),d=vt(h,f);return Mu(d,o,r)}const cte=ge({logLoss_:ute});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hte(n,e,t,s=ri.SUM_BY_NONZERO_WEIGHTS){const r=oe(n,"labels","meanSquaredError"),a=oe(e,"predictions","meanSquaredError");let i=null;t!=null&&(i=oe(t,"weights","meanSquaredError")),Di(r.shape,a.shape,"Error in meanSquaredError: ");const o=T5(r,a);return Mu(o,i,s)}const fte=ge({meanSquaredError_:hte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dte(n,e){const t=oe(n,"labels","sigmoidCrossEntropyWithLogits"),s=oe(e,"logits","sigmoidCrossEntropyWithLogits");Di(t.shape,s.shape,"Error in sigmoidCrossEntropyWithLogits: ");const r=MA(s),a=be(s,t),i=Wb(Ii(ms(vr(s))));return st(vt(r,a),i)}function pte(n,e,t,s=0,r=ri.SUM_BY_NONZERO_WEIGHTS){let a=oe(n,"multiClassLabels","sigmoidCrossEntropy");const i=oe(e,"logits","sigmoidCrossEntropy");let o=null;if(t!=null&&(o=oe(t,"weights","sigmoidCrossEntropy")),Di(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),s>0){const u=Ut(s),h=Ut(1),f=Ut(.5);a=st(be(a,vt(h,u)),be(f,u))}const l=dte(a,i);return Mu(l,o,r)}const mte=ge({sigmoidCrossEntropy_:pte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gte(n,e,t=-1){if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${t}`);return Lu((r,a,i)=>{const l=qb(a,[t],!0),u=vt(mt(a,"float32"),l);i([r,u]);const h=ms(be(u,r));return{value:Nt(h,[t]),gradFunc:(m,g)=>{const[w,v]=g,b=Ys(m.shape,[t]);return[be(Be(m,b),vt(mt(w,"float32"),Ii(v))),be(Be(m,b),vt(Ii(v),mt(w,"float32")))]}}})(n,e)}function yte(n,e,t,s=0,r=ri.SUM_BY_NONZERO_WEIGHTS){let a=oe(n,"onehotLabels","softmaxCrossEntropy");const i=oe(e,"logits","softmaxCrossEntropy");let o=null;if(t!=null&&(o=oe(t,"weights","softmaxCrossEntropy")),Di(a.shape,i.shape,"Error in softmaxCrossEntropy: "),s>0){const u=Ut(s),h=Ut(1),f=Ut(a.shape[1]);a=st(be(a,vt(h,u)),Tt(u,f))}const l=gte(a,i);return Mu(l,o,r)}const wte=ge({softmaxCrossEntropy_:yte});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bte(n,e,t,s){const r=oe(n,"indices","sparseFillEmptyRows","int32"),a=oe(e,"values","sparseFillEmptyRows"),i=oe(t,"denseShape","sparseFillEmptyRows","int32"),o=oe(s,"defaultValue","sparseFillEmptyRows",a.dtype);if(r.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${r.shape}`);if(a.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${a.shape}`);if(i.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(o.rank!==0)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);const l={indices:r,values:a,denseShape:i,defaultValue:o},u=we.runKernel(PN,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const xte=ge({sparseFillEmptyRows_:bte});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vte(n,e,t){const s=oe(n,"inputIndices","sparseReshape","int32"),r=oe(e,"inputShape","sparseReshape","int32"),a=oe(t,"newShape","sparseReshape","int32");if(s.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${s.shape}`);if(r.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${r.shape}`);if(a.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${a.shape}`);const i={inputIndices:s,inputShape:r,newShape:a},o=we.runKernel(zN,i);return{outputIndices:o[0],outputShape:o[1]}}const Cte=ge({sparseReshape_:vte});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bte(n,e,t){const s=oe(n,"data","sparseSegmentMean"),r=oe(e,"indices","sparseSegmentMean","int32"),a=oe(t,"segmentIds","sparseSegmentMean","int32");if(s.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${r.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${a.shape}`);const i={data:s,indices:r,segmentIds:a};return we.runKernel(jN,i)}const Ste=ge({sparseSegmentMean_:Bte});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nte(n,e,t){const s=oe(n,"data","sparseSegmentSum"),r=oe(e,"indices","sparseSegmentSum","int32"),a=oe(t,"segmentIds","sparseSegmentSum","int32");if(s.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${r.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${a.shape}`);const i={data:s,indices:r,segmentIds:a};return we.runKernel(VN,i)}const Ite=ge({sparseSegmentSum_:Nte});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ete(n,e,t,s,r,a,i,o){const l=oe(n,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=oe(e,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const h={separator:t,nGramWidths:s,leftPad:r,rightPad:a,padWidth:i,preserveShortSequences:o},f={data:l,dataSplits:u},d=we.runKernel(qN,f,h);return{nGrams:d[0],nGramsSplits:d[1]}}const kte=ge({stringNGrams_:Ete});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fte(n,e,t=!0){const s=oe(n,"input","stringSplit","string"),r=oe(e,"delimiter","stringSplit","string");if(s.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${s.shape}`);if(r.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${r.shape}`);const a={skipEmpty:t},i={input:s,delimiter:r},o=we.runKernel(XN,i,a);return{indices:o[0],values:o[1],shape:o[2]}}const Tte=ge({stringSplit_:Fte});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dte(n,e){const t=oe(n,"input","stringToHashBucketFast","string"),s={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const r={input:t};return we.runKernel(YN,r,s)}const Lte=ge({stringToHashBucketFast_:Dte});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ute(n,e,t,s=!0){const r=oe(n,"input","staticRegexReplace","string"),a={pattern:e,rewrite:t,replaceGlobal:s};return we.runKernel(Ob,{x:r},a)}const Rte=ge({staticRegexReplace_:Ute});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $te={fft:ax,ifft:Mg,rfft:ix,irfft:F5},_te={hammingWindow:Aee,hannWindow:cR,frame:hR,stft:fee},Bl={flipLeftRight:gee,grayscaleToRGB:wee,resizeNearestNeighbor:dR,resizeBilinear:fR,rgbToGrayscale:xee,rotateWithOffset:Cee,cropAndResize:pee,nonMaxSuppression:See,nonMaxSuppressionAsync:Lee,nonMaxSuppressionWithScore:Ree,nonMaxSuppressionWithScoreAsync:_ee,nonMaxSuppressionPadded:Qee,nonMaxSuppressionPaddedAsync:Hee,threshold:Gee,transform:Wee},pR={bandPart:Xee,gramSchmidt:Jee,qr:ete},Ote={absoluteDifference:ste,computeWeightedLoss:Mu,cosineDistance:ate,hingeLoss:ote,huberLoss:Ate,logLoss:cte,meanSquaredError:fte,sigmoidCrossEntropy:mte,softmaxCrossEntropy:wte},Qte={sparseFillEmptyRows:xte,sparseReshape:Cte,sparseSegmentMean:Ste,sparseSegmentSum:Ite},Mte={stringNGrams:kte,stringSplit:Tte,stringToHashBucketFast:Lte,staticRegexReplace:Rte};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hte=new Map,Pte=new Map;class Gp{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class Eo{constructor(){this.classNameMap={}}static getMap(){return Eo.instance==null&&(Eo.instance=new Eo),Eo.instance}static register(e){Eo.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function at(n,e,t){se(n.className!=null,()=>"Class being registered does not have the static className property defined."),se(typeof n.className=="string",()=>"className is required to be a string, but got type "+typeof n.className),se(n.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof t>"u"&&(t=n.className);const s=t,r=e+">"+s;return Eo.register(n),Hte.set(r,n),Pte.set(n,r),n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wh extends Gp{minimize(e,t=!1,s){const{value:r,grads:a}=this.computeGradients(e,s);if(s!=null){const i=s.map(o=>({name:o.name,tensor:a[o.name]}));this.applyGradients(i)}else this.applyGradients(a);return on(a),t?r:(r.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return hY(e,t)}dispose(){this.iterations_!=null&&on(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ut(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(wh,Symbol.hasInstance,{value:n=>n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mR extends wh{static get className(){return"Adadelta"}constructor(e,t,s=null){super(),this.learningRate=e,this.rho=t,this.epsilon=s,this.accumulatedGrads=[],this.accumulatedUpdates=[],s==null&&(this.epsilon=we.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,r)=>{const a=we.registeredVariables[s],i=!1;this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${s}/accum_grad`,variable:De(()=>En(a).variable(i))}),this.accumulatedUpdates[r]==null&&(this.accumulatedUpdates[r]={originalName:`${s}/accum_var`,variable:De(()=>En(a).variable(i))});const o=Array.isArray(e)?e[r].tensor:e[s];if(o==null)return;const l=this.accumulatedGrads[r].variable,u=this.accumulatedUpdates[r].variable;De(()=>{const h=st(be(l,this.rho),be(rs(o),1-this.rho)),f=be(Tt(ta(st(u,this.epsilon)),ta(st(l,this.epsilon))),o),d=st(be(u,this.rho),be(rs(f),1-this.rho));l.assign(h),u.assign(d);const m=st(be(f,-this.learningRate),a);a.assign(m)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(on(this.accumulatedGrads.map(e=>e.variable)),on(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=e.length/2,s=!1;this.accumulatedGrads=e.slice(0,t).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),this.accumulatedUpdates=e.slice(t,t*2).map(r=>({originalName:r.name,variable:r.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gR extends wh{static get className(){return"Adagrad"}constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,r)=>{const a=we.registeredVariables[s];this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${s}/accumulator`,variable:De(()=>Pp(a.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[r].tensor:e[s];if(i==null)return;const o=this.accumulatedGrads[r].variable;De(()=>{const l=st(o,rs(i));o.assign(l);const u=st(be(Tt(i,ta(st(l,we.backend.epsilon()))),-this.learningRate),a);a.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&on(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulatedGrads=e.map(s=>({originalName:s.name,variable:s.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yR extends wh{static get className(){return"Adam"}constructor(e,t,s,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=s,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],De(()=>{this.accBeta1=Ut(t).variable(),this.accBeta2=Ut(s).variable()}),r==null&&(this.epsilon=we.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);De(()=>{const s=vt(1,this.accBeta1),r=vt(1,this.accBeta2);t.forEach((a,i)=>{const o=we.registeredVariables[a],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${a}/m`,variable:De(()=>En(o).variable(l))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${a}/v`,variable:De(()=>En(o).variable(l))});const u=Array.isArray(e)?e[i].tensor:e[a];if(u==null)return;const h=this.accumulatedFirstMoment[i].variable,f=this.accumulatedSecondMoment[i].variable,d=st(be(h,this.beta1),be(u,1-this.beta1)),m=st(be(f,this.beta2),be(rs(u),1-this.beta2)),g=Tt(d,s),w=Tt(m,r);h.assign(d),f.assign(m);const v=st(be(Tt(g,st(ta(w),this.epsilon)),-this.learningRate),o);o.assign(v)}),this.accBeta1.assign(be(this.accBeta1,this.beta1)),this.accBeta2.assign(be(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&on(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&on(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e),De(()=>{this.accBeta1.assign(Du(this.beta1,this.iterations_+1)),this.accBeta2.assign(Du(this.beta2,this.iterations_+1))});const t=e.length/2,s=!1;this.accumulatedFirstMoment=e.slice(0,t).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),this.accumulatedSecondMoment=e.slice(t,t*2).map(r=>({originalName:r.name,variable:r.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wR extends wh{static get className(){return"Adamax"}constructor(e,t,s,r=null,a=0){super(),this.learningRate=e,this.beta1=t,this.beta2=s,this.epsilon=r,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],De(()=>{this.iteration=Ut(0).variable(),this.accBeta1=Ut(t).variable()}),r==null&&(this.epsilon=we.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);De(()=>{const s=vt(1,this.accBeta1),r=Tt(-this.learningRate,st(be(this.iteration,this.decay),1));t.forEach((a,i)=>{const o=we.registeredVariables[a],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${a}/m`,variable:En(o).variable(l)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${a}/v`,variable:En(o).variable(l)});const u=Array.isArray(e)?e[i].tensor:e[a];if(u==null)return;const h=this.accumulatedFirstMoment[i].variable,f=this.accumulatedWeightedInfNorm[i].variable,d=st(be(h,this.beta1),be(u,1-this.beta1)),m=be(f,this.beta2),g=vr(u),w=Qu(m,g);h.assign(d),f.assign(w);const v=st(be(Tt(r,s),Tt(d,st(w,this.epsilon))),o);o.assign(v)}),this.iteration.assign(st(this.iteration,1)),this.accBeta1.assign(be(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&on(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&on(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P5 extends wh{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,r)=>{const a=Array.isArray(e)?e[r].tensor:e[s];if(a==null)return;const i=we.registeredVariables[s];De(()=>{const o=st(be(this.c,a),i);i.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=_r(Ut(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bR extends P5{static get className(){return"Momentum"}constructor(e,t,s=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=s,this.accumulations=[],this.m=Ut(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,r)=>{const a=we.registeredVariables[s];this.accumulations[r]==null&&(this.accumulations[r]={originalName:`${s}/momentum`,variable:De(()=>En(a).variable(!1))});const i=this.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[s];o!=null&&De(()=>{let l;const u=st(be(this.m,i),o);this.useNesterov?l=st(be(this.c,st(o,be(u,this.m))),a):l=st(be(this.c,u),a),i.assign(u),a.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&on(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulations=e.map(s=>({originalName:s.name,variable:s.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xR extends wh{static get className(){return"RMSProp"}constructor(e,t=.9,s=0,r=null,a=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=s,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,r==null&&(this.epsilon=we.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,r)=>{const a=we.registeredVariables[s],i=!1;this.accumulatedMeanSquares[r]==null&&(this.accumulatedMeanSquares[r]={originalName:`${s}/rms`,variable:De(()=>En(a).variable(i))}),this.accumulatedMoments[r]==null&&(this.accumulatedMoments[r]={originalName:`${s}/momentum`,variable:De(()=>En(a).variable(i))}),this.accumulatedMeanGrads[r]==null&&this.centered&&(this.accumulatedMeanGrads[r]={originalName:`${s}/mg`,variable:De(()=>En(a).variable(i))});const o=Array.isArray(e)?e[r].tensor:e[s];if(o==null)return;const l=this.accumulatedMeanSquares[r].variable,u=this.accumulatedMoments[r].variable;De(()=>{const h=st(be(l,this.decay),be(rs(o),1-this.decay));if(this.centered){const f=this.accumulatedMeanGrads[r].variable,d=st(be(f,this.decay),be(o,1-this.decay)),m=Tt(be(o,this.learningRate),ta(vt(h,st(rs(d),this.epsilon)))),g=st(be(u,this.momentum),m);l.assign(h),f.assign(d),u.assign(g);const w=vt(a,g);a.assign(w)}else{const f=st(be(l,this.decay),be(rs(o),1-this.decay)),d=st(be(u,this.momentum),Tt(be(o,this.learningRate),ta(st(f,this.epsilon))));l.assign(f),u.assign(d);const m=vt(a,d);a.assign(m)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&on(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&on(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&on(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,s=!1;this.accumulatedMeanSquares=e.slice(0,t).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),this.accumulatedMoments=e.slice(t,t*2).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),this.centered&&(this.accumulatedMeanGrads=e.slice(t*2,t*3).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zte=[mR,gR,yR,wR,bR,xR,P5];function jte(){for(const n of zte)at(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vte="model",Gte=".json",Kte=".weights.bin";function o4(n){return new Promise(e=>setTimeout(e)).then(n)}class $f{constructor(e){if(!Qe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith($f.URL_SCHEME)&&(e=e.slice($f.URL_SCHEME.length)),(e==null||e.length===0)&&(e=Vte),this.modelJsonFileName=e+Gte,this.weightDataFileName=e+Kte}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=_l.join(e.weightData),s=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=ZL(e,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=i,await o4(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=s,await o4(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:X0(e)}}}}$f.URL_SCHEME="downloads://";class Wte{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{const s=new FileReader;s.onload=r=>{const a=JSON.parse(r.target.result),i=a.modelTopology;if(i==null){t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(a.weightsManifest==null){t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:i});return}const l=r5(a,u=>this.loadWeights(u));e(l)},s.onerror=r=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),s.readAsText(this.jsonFile)})}loadWeights(e){const t=[],s=[];for(const i of e)t.push(...i.weights),s.push(...i.paths);const r=this.checkManifestAndWeightFiles(e),a=s.map(i=>this.loadWeightsFile(i,r[i]));return Promise.all(a).then(i=>[t,i])}loadWeightsFile(e,t){return new Promise((s,r)=>{const a=new FileReader;a.onload=i=>{const o=i.target.result;s(o)},a.onerror=i=>r(`Failed to weights data from file of path '${e}'.`),a.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){const t=[],s=this.weightsFiles.map(a=>XT(a.name)),r={};for(const a of e)a.paths.forEach(i=>{const o=XT(i);if(t.indexOf(o)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(t.push(o),s.indexOf(o)===-1)throw new Error(`Weight file with basename '${o}' is not provided.`);r[i]=this.weightsFiles[s.indexOf(o)]});if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}const qte=n=>Qe().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith($f.URL_SCHEME)?Xte(n.slice($f.URL_SCHEME.length)):null;Ts.registerSaveRouter(qte);function Xte(n="model"){return new $f(n)}function Yte(n){return new Wte(n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l4(n,e,t,s){i(n),t=t??0,s=s??1,o(t,s);let r=0;const a=l=>(l.then(u=>{const h=t+ ++r/n.length*(s-t);return e(h),u}),l);function i(l){se(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function o(l,u){se(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),se(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),se(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(n.map(a))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function vR(n,e){e==null&&(e={});const t=e.fetchFunc==null?Qe().platform.fetch:e.fetchFunc,s=n.map(f=>t(f,e.requestInit,{isBinary:!0})),o=(e.onProgress==null?await Promise.all(s):await l4(s,e.onProgress,0,.5)).map(f=>f.arrayBuffer());return e.onProgress==null?await Promise.all(o):await l4(o,e.onProgress,.5,1)}function Jte(n,e){var t;const s=e.fetchFunc==null?Qe().platform.fetch:e.fetchFunc;let r=0,a;return(t=e.onProgress)===null||t===void 0||t.call(e,0),new ReadableStream({pull:async i=>{for(var o;r<n.length;){a||(a=(await s(n[r],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:u}=await a.read();if(l){r++,a=void 0,(o=e.onProgress)===null||o===void 0||o.call(e,r/n.length);continue}i.enqueue(u);return}i.close()}})}async function Zte(n,e="",t,s){return CR(i=>vR(i,{requestInit:s}))(n,e,t)}function CR(n){return async(e,t="",s)=>{const r=e.map(()=>!1),a={},i=s!=null?s.map(()=>!1):[],o=[];if(e.forEach((m,g)=>{let w=0;m.weights.forEach(v=>{const b="quantization"in v?v.quantization.dtype:v.dtype,C=Ff[b]*je(v.shape),N=()=>{r[g]=!0,a[g]==null&&(a[g]=[]),a[g].push({manifestEntry:v,groupOffset:w,sizeBytes:C})};s!=null?s.forEach((I,L)=>{I===v.name&&(N(),i[L]=!0)}):N(),o.push(v.name),w+=C})}),!i.every(m=>m)){const m=s.filter((g,w)=>!i[w]);throw new Error(`Could not find weights in manifest with names: ${m.join(", ")}. 
Manifest JSON has weights with names: ${o.join(", ")}.`)}const l=r.reduce((m,g,w)=>(g&&m.push(w),m),[]),u=[];l.forEach(m=>{e[m].paths.forEach(g=>{const w=t+(t.endsWith("/")?"":"/")+g;u.push(w)})});const h=await n(u),f={};let d=0;return l.forEach(m=>{const g=e[m].paths.length,w=new _l(h.slice(d,d+g));a[m].forEach(b=>{const C=w.slice(b.groupOffset,b.groupOffset+b.sizeBytes),N=qL(C,[b.manifestEntry]);for(const I in N)f[I]=N[I]}),d+=g}),f}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ene="application/octet-stream",tne="application/json";class z5{constructor(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,t.fetchFunc!=null?(se(typeof t.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=Qe().platform.fetch,se(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&se(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const s=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r=ZL(e,s);if(t.body.append("model.json",new Blob([JSON.stringify(r)],{type:tne}),"model.json"),e.weightData!=null){const i=_l.join(e.weightData);t.body.append("model.weights.bin",new Blob([i],{type:ene}),"model.weights.bin")}const a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:X0(e),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const s=t.modelTopology,r=t.weightsManifest;if(s==null&&r==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return r5(e,t=>this.loadWeights(t))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),s=zB(e.weightsManifest),r=()=>Jte(t,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:s,getWeightStream:r})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[s,r]=nne(t),a=this.weightPathPrefix||s,i=[],o=[];for(const l of e)for(const u of l.paths)this.weightUrlConverter!=null?o.push(this.weightUrlConverter(u)):i.push(a+u+r);return this.weightUrlConverter&&i.push(...await Promise.all(o)),i}async loadWeights(e){const t=await this.getWeightUrls(e),s=zB(e),r=await vR(t,this.loadOptions);return[s,r]}}z5.URL_SCHEME_REGEX=/^https?:\/\//;function nne(n){const e=n.lastIndexOf("/"),t=n.lastIndexOf("?"),s=n.substring(0,e),r=t>e?n.substring(t):"";return[s+"/",r]}function XB(n){return n.match(z5.URL_SCHEME_REGEX)!=null}const BR=(n,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let t=!0;if(Array.isArray(n)?t=n.every(s=>XB(s)):t=XB(n),t)return j5(n,e)}return null};Ts.registerSaveRouter(BR);Ts.registerLoadRouter(BR);function j5(n,e){return new z5(n,e)}function sne(n,e){return j5(n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IC{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class SR{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class rne{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function ane(n,e,t,s){const r=arguments;return new rne(NR(...r))}function NR(n,e,t,s){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new IC(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new IC({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new IC({modelTopology:n,weightSpecs:e,weightData:t,trainingConfig:s}))}function ine(n){return new SR(n)}function one(n){return new SR(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IR=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:_l,browserFiles:Yte,browserHTTPRequest:sne,concatenateArrayBuffers:JL,copyModel:oq,decodeWeights:qL,decodeWeightsStream:YL,encodeWeights:PB,fromMemory:ane,fromMemorySync:NR,getLoadHandlers:K9,getModelArtifactsForJSON:r5,getModelArtifactsForJSONSync:eU,getModelArtifactsInfoForJSON:X0,getSaveHandlers:tU,getWeightSpecs:zB,http:j5,isHTTPScheme:XB,listModels:aq,loadWeights:Zte,moveModel:lq,registerLoadRouter:G9,registerSaveRouter:V9,removeModel:iq,weightsLoaderFactory:CR,withSaveHandler:ine,withSaveHandlerSync:one},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let lf;function lne(n,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let t=!1,s=!1,r=!1,a=!1,i=!1,o=!1;if(n.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)s=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)r=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)a=!0;else if(n.getContext!=null)i=!0;else if(typeof ImageBitmap<"u"&&n instanceof ImageBitmap)o=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${n.constructor.name}`);if($B(UB,we.backendName)!=null){const g={pixels:n},w={numChannels:e};return we.runKernel(UB,g,w)}const[u,h]=r?[n.videoWidth,n.videoHeight]:[n.width,n.height];let f;if(i)f=n.getContext("2d").getImageData(0,0,u,h).data;else if(s||t)f=n.data;else if(a||r||o){if(lf==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")lf=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else lf=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});lf.canvas.width=u,lf.canvas.height=h,lf.drawImage(n,0,0,u,h),f=lf.getImageData(0,0,u,h).data}let d;if(e===4)d=new Int32Array(f);else{const g=u*h;d=new Int32Array(g*e);for(let w=0;w<g;w++)for(let v=0;v<e;++v)d[w*e+v]=f[w*4+v]}return eR(d,[h,u,e],"int32")}const Ane=ge({fromPixels_:lne});function V5(n,e){const t=n.shape.length,s=e.shape.length;if(t<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${t}.`);if(s<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${s}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[s-1]>t)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[s-1]} vs. ${t}`);if(je(n.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${n.shape}.`);const r=e.shape,a=r[r.length-1];let i=1;for(let f=0;f<r.length-1;++f)i*=r[f];const o=n.shape,l=r.slice();l.pop();let u=1;for(let f=a;f<t;++f)u*=o[f],l.push(o[f]);const h=[..._t(n.shape).map(f=>f/u),1].slice(0,a);return[l,i,u,h]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YB=-2,une=-1;function G5(n,e,t){const s=n.shape.length;se(s===e.length,()=>`Error in slice${s}D: Length of begin ${e} must match the rank of the array (${s}).`),se(s===t.length,()=>`Error in slice${s}D: Length of size ${t} must match the rank of the array (${s}).`);for(let r=0;r<s;++r)se(e[r]+t[r]<=n.shape[r],()=>`Error in slice${s}D: begin[${r}] + size[${r}] (${e[r]+t[r]}) would overflow input.shape[${r}] (${n.shape[r]})`)}function cne(n){const e=[];let t=0;for(;n>0;)n&1&&e.push(t),n/=2,t++;return e}function K5(n,e,t){const s=[];for(let r=0;r<n.length;r++)s[r]=Math.ceil((e[r]-n[r])/t[r]);return s}function ER(n,e,t,s){const r=[...n];for(let a=r.length;a<s.length;a++)r.push(1);for(let a=0;a<t;a++)a===0?r[e]=1:(r.splice(e,0,1),r.pop());return r}function kR(n,e,t){return t<=n?t:t-(e-1)}function FR(n,e){const t=[];for(let s=0;s<n;s++)t.push(e+s);return t}function hne(n,e,t,s,r,a,i,o,l){const u=n.length;let h=new Array(u),f=new Array(u),d=new Array(u);if(e.length&&t>0){const m=e[0],g=t+1;h=TR(i,m,g,s,n),f=DR(o,m,g,r,n),d=ER(a,m,g,n)}else for(let m=0;m<u;m++)h[m]=UR(i,s,a,n,m,l),f[m]=RR(o,r,a,n,m,l),d[m]=LR(a,m,l);return{begin:h,end:f,strides:d}}function TR(n,e,t,s,r){const a=[...r],i=FR(t,e);for(let o=0;o<a.length;o++)if(i.indexOf(o)>-1)a[o]=0;else{const l=kR(e,t,o);let u=s[l];n&1<<l&&(u=0),a[o]=u}return a}function DR(n,e,t,s,r){const a=[...r],i=FR(t,e);for(let o=0;o<a.length;o++)if(i.indexOf(o)>-1)a[o]=Number.MAX_SAFE_INTEGER;else{const l=kR(e,t,o);let u=s[l];n&1<<l&&(u=Number.MAX_SAFE_INTEGER),a[o]=u}for(let o=0;o<a.length;o++){const l=r[o];a[o]<0&&(a[o]+=l),a[o]=If(0,a[o],r[o])}return a}function LR(n,e,t){let s=n[e];return(t&1<<e||s==null)&&(s=1),s}function UR(n,e,t,s,r,a){let i=e[r];const o=t[r]||1;(n&1<<r||a&1<<r||i==null)&&(o>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const l=s[r];return i<0&&(i+=l),i=If(0,i,l-1),i}function RR(n,e,t,s,r,a){let i=e[r];const o=t[r]||1;(n&1<<r||a&1<<r||i==null)&&(o>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const l=s[r];return i<0&&(i+=l),o>0?i=If(0,i,l):i=If(-1,i,l-1),i}function W5(n,e,t){let s=t.length;for(let r=0;r<t.length;r++)if(t[r]>1){s=r;break}for(let r=s+1;r<t.length;r++)if(e[r]>0||t[r]!==n[r])return!1;return!0}function q5(n,e){let t=n.length>0?n[n.length-1]:1;for(let s=0;s<n.length-1;s++)t+=n[s]*e[s];return t}function cx(n,e,t){let s;const r=n.shape.length;typeof e=="number"?s=[e,...new Array(r-1).fill(0)]:e.length<r?s=e.concat(new Array(r-e.length).fill(0)):s=e.slice(),s.forEach(i=>{se(i!==-1,()=>"slice() does not support negative begin indexing.")});let a;return t==null?a=new Array(r).fill(-1):typeof t=="number"?a=[t,...new Array(r-1).fill(-1)]:t.length<r?a=t.concat(new Array(r-t.length).fill(-1)):a=t,a=a.map((i,o)=>i>=0?i:(se(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${o}.`),n.shape[o]-s[o])),[s,a]}function X5(n,e,t,s,r,a,i,o,l){let u;if(s==null?(u=new Array(e.length),u.fill(1)):u=s,i!=null&&(i&i-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let h=!1;const f={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:t.slice(),strides:u.slice(),beginMask:r,endMask:a,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:l};for(let N=0;N<f.dims;N++)h&&(1<<N&o)!==0&&f.numAddAxisAfterEllipsis++,1<<N&i&&(h=!0);h||(f.ellipsisMask|=1<<f.dims,f.dims++);const d={dims:n.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};fne(f,d);let m=!0,g=!0,w=!0;const v=[],b=[];for(let N=0;N<n.length;++N){if(d.strides[N]===0)throw Error(`strides[${N}] must be non-zero`);const I=!!(d.shrinkAxisMask&1<<N),L=n[N];if(L===-1){v.push(I?1:-1);continue}const $=[d.beginMask&1<<N,d.endMask&1<<N],H=[d.strides[N]>0?0:-1,d.strides[N]>0?L:L-1];if(I&&d.strides[N]<=0)throw Error("only stride 1 allowed on non-range indexing.");w=w&&d.strides[N]===1;const U=!!(d.beginMask&1<<N&&d.endMask&1<<N);if(d.beginValid&&d.endValid){if(I){const R=d.begin[N]<0?L+d.begin[N]:d.begin[N];if(d.begin[N]=R,d.end[N]=d.begin[N]+1,R<0||R>=L)throw Error(`slice index ${d.begin[N]} of dimension ${N} out of bounds.`)}else d.begin[N]=A4(d.begin[N],0,d.strides[N],L,$,H),d.end[N]=A4(d.end[N],1,d.strides[N],L,$,H);const T=d.strides[N]===1&&d.begin[N]===0&&d.end[N]===L;m=m&&T,g=g&&(N===0&&d.strides[N]===1||T)}else m=m&&d.strides[N]===1&&U,g=g&&(N===0&&d.strides[N]===1||U);let O,z=!1;if(d.beginValid&&d.endValid?(O=d.end[N]-d.begin[N],z=!0):I?(O=1,z=!0):U&&L>=0&&(d.strides[N]<0?O=-L:O=L,z=!0),z){let T;O===0||O<0!=d.strides[N]<0?T=0:T=Math.trunc(O/d.strides[N])+(O%d.strides[N]!==0?1:0),v.push(T)}else v.push(-1)}for(let N=0;N<d.finalShapeGatherIndices.length;++N){const I=d.finalShapeGatherIndices[N];I>=0?b.push(v[I]):I===YB&&b.push(1)}return{finalShapeSparse:b.filter((N,I)=>d.finalShapeGatherIndices[I]!==YB),finalShape:b,isIdentity:m,sliceDim0:g,isSimpleSlice:w,begin:d.begin,end:d.end,strides:d.strides}}function fne(n,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let t=0;e.beginValid=n.begin!=null,e.endValid=n.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let s=0;s<n.dims;s++)if(1<<s&n.ellipsisMask){const r=Math.min(e.dims-(n.dims-s)+1+n.numAddAxisAfterEllipsis,e.dims);for(;t<r;t++)e.begin[t]=0,e.end[t]=0,e.strides[t]=1,e.beginMask|=1<<t,e.endMask|=1<<t,e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[t]=s}else if(1<<s&n.newAxisMask)e.finalShapeGatherIndices.push(YB),e.finalShapeGatherIndicesSparse.push(-1);else{if(t===e.begin.length)throw Error(`Index out of range using input dim ${t}; input has only ${e.dims} dims, ${e.begin.length}.`);n.begin!=null&&(e.begin[t]=n.begin[s]),n.end!=null&&(e.end[t]=n.end[s]),e.strides[t]=n.strides[s],n.beginMask&1<<s&&(e.beginMask|=1<<t),n.endMask&1<<s&&(e.endMask|=1<<t),n.shrinkAxisMask&1<<s?(e.finalShapeGatherIndices.push(une),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<t):(e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(s)),e.inputShapeGatherIndicesSparse[t]=s,t++}}function A4(n,e,t,s,r,a){if(r[e])return t>0?a[e]:a[e+1&1];{const i=n<0?s+n:n;return i<a[0]?a[0]:i>a[1]?a[1]:i}}const dne=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:G5,computeFlatOffset:q5,computeOutShape:K5,getNormalizedAxes:hne,isSliceContinous:W5,maskToAxes:cne,parseSliceParams:cx,sliceInfo:X5,startForAxis:UR,startIndicesWithElidedDims:TR,stopForAxis:RR,stopIndicesWithElidedDims:DR,stridesForAxis:LR,stridesWithElidedDims:ER},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pne{static sgd(e){return new P5(e)}static momentum(e,t,s=!1){return new bR(e,t,s)}static rmsprop(e,t=.9,s=0,r=null,a=!1){return new xR(e,t,s,r,a)}static adam(e=.001,t=.9,s=.999,r=null){return new yR(e,t,s,r)}static adadelta(e=.001,t=.95,s=null){return new mR(e,t,s)}static adamax(e=.002,t=.9,s=.999,r=null,a=0){return new wR(e,t,s,r,a)}static adagrad(e,t=.1){return new gR(e,t)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wd=pne;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mne=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:n=>n();function $R(){return new Promise(n=>mne(()=>n()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y5(n,e){const t=n[0].length;n.forEach((r,a)=>{se(r.length===t,()=>`Error in concat${t}D: rank of tensors[${a}] must be the same as the rank of the rest (${t})`)}),se(e>=0&&e<t,()=>`Error in concat${t}D: axis must be between 0 and ${t-1}.`);const s=n[0];n.forEach((r,a)=>{for(let i=0;i<t;i++)se(i===e||r[i]===s[i],()=>`Error in concat${t}D: Shape of tensors[${a}] (${r}) does not match the shape of the rest (${s}) along the non-concatenated axis ${a}.`)})}function FA(n,e){const t=n[0].slice();for(let s=1;s<n.length;s++)t[e]+=n[s][e];return t}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Cl;(function(n){n[n.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",n[n.VALUE_ROWIDS=1]="VALUE_ROWIDS",n[n.ROW_LENGTHS=2]="ROW_LENGTHS",n[n.ROW_SPLITS=3]="ROW_SPLITS",n[n.ROW_LIMITS=4]="ROW_LIMITS",n[n.ROW_STARTS=5]="ROW_STARTS"})(Cl||(Cl={}));function _R(n,e,t){let s=new Array;if(t==null&&e==null)return s;if(e==null)for(;s.length<n+t.length;)s.push(-1);else s=e.slice();if(t==null)return s;if(n+t.length!==s.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${n+t.length}, but shape.rank = ${s.length}`);for(let r=1;r<t.length;++r){const a=t[r],i=s[s.length-t.length+r],o=s[i];if(a>=0)if(o>=0){if(o!==a)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${r+n}] = ${a} but shape[${r+n}] = ${o}`)}else s[i]=a}return s}function OR(n){const e={FIRST_DIM_SIZE:Cl.FIRST_DIM_SIZE,VALUE_ROWIDS:Cl.VALUE_ROWIDS,ROW_LENGTHS:Cl.ROW_LENGTHS,ROW_SPLITS:Cl.ROW_SPLITS,ROW_LIMITS:Cl.ROW_LIMITS,ROW_STARTS:Cl.ROW_STARTS},t=[];for(const s of n)if(s in e)t.push(e[s]);else break;return t}function QR(n){return n.length===0?0:n[0]===Cl.FIRST_DIM_SIZE?n.length-1:n.length}function MR(n,e){if(n==null||e==null)return;const t=n.length,s=e.length;if(t>=s)throw new Error(`defaultValue.shape=${n} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${t} must be less than ragged tensor input flatValues.rank = ${s})`);for(let r=0;r<Math.min(t,s-1);++r){const a=n[r],i=e[r+1];if(a>=0&&i>=0&&a!==1&&a!==i)throw new Error(`defaultValue.shape=${n}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${r-n.length}] = ${a} but ragged tensor input.flatValues.shape[${r-n.length}] = ${i}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J5=30;function hx(n){return n<=J5?n:TB(n,Math.floor(Math.sqrt(n)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z5(n,e,t){const s=t*(typeof n=="number"?n:n[0]),r=e*(typeof n=="number"?n:n[1]);return[s,r]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r1(n,e,t,s=!0){let r=[];if(s)r=r.concat(e.slice(0)),r.push(n[0]/t),r=r.concat(n.slice(1));else{r=r.concat(n[0]);const a=e.length;for(let i=0;i<a;++i)r=r.concat([n[i+1]/e[i],e[i]]);r=r.concat(n.slice(a+1))}return r}function a1(n,e,t=!0){const s=[];if(t){s.push(e);for(let r=e+1;r<n;++r)r<=2*e?(s.push(r),s.push(r-(e+1))):s.push(r)}else{const r=[],a=[];for(let i=1;i<n;++i)i>=e*2+1||i%2===1?a.push(i):r.push(i);s.push(...r),s.push(0),s.push(...a)}return s}function i1(n,e,t,s=!0){const r=[];s?r.push(n[0]/t):r.push(n[0]*t);for(let a=1;a<n.length;++a)a<=e.length?s?r.push(e[a-1]*n[a]):r.push(n[a]/e[a-1]):r.push(n[a]);return r}function eI(n,e){const t=[0];for(let s=0;s<e;++s)t.push(n[s][0]);return t}function tI(n,e,t){const s=n.slice(0,1);for(let r=0;r<t;++r)s.push(n[r+1]-e[r][0]-e[r][1]);return s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fx=1.7580993408473768,dx=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nI=.3275911,sI=.254829592,rI=-.284496736,aI=1.421413741,iI=-1.453152027,oI=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uu(n,e){if(n.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${n.length}, imag: ${e.length}.`);const t=new Float32Array(n.length*2);for(let s=0;s<t.length;s+=2)t[s]=n[s/2],t[s+1]=e[s/2];return t}function HR(n){const e=new Float32Array(n.length/2),t=new Float32Array(n.length/2);for(let s=0;s<n.length;s+=2)e[s/2]=n[s],t[s/2]=n[s+1];return{real:e,imag:t}}function PR(n){const e=Math.ceil(n.length/4),t=new Float32Array(e),s=new Float32Array(e);for(let r=0;r<n.length;r+=4)t[Math.floor(r/4)]=n[r],s[Math.floor(r/4)]=n[r+1];return{real:t,imag:s}}function zR(n){const e=Math.floor(n.length/4),t=new Float32Array(e),s=new Float32Array(e);for(let r=2;r<n.length;r+=4)t[Math.floor(r/4)]=n[r],s[Math.floor(r/4)]=n[r+1];return{real:t,imag:s}}function lI(n,e){const t=n[e*2],s=n[e*2+1];return{real:t,imag:s}}function jR(n,e,t,s){n[s*2]=e,n[s*2+1]=t}function VR(n,e){const t=new Float32Array(n/2),s=new Float32Array(n/2);for(let r=0;r<Math.ceil(n/2);r++){const a=(e?2:-2)*Math.PI*(r/n);t[r]=Math.cos(a),s[r]=Math.sin(a)}return{real:t,imag:s}}function GR(n,e,t){const s=(t?2:-2)*Math.PI*(n/e),r=Math.cos(s),a=Math.sin(s);return{real:r,imag:a}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EC="->",gne=/->/g,u4=",",c4="...";function AI(n,e){n=n.replace(/\s/g,"");const t=(n.length-n.replace(gne,"").length)/EC.length;if(t<1)throw new Error("Equations without an arrow are not supported.");if(t>1)throw new Error(`Equation must contain exactly one arrow ("${EC}").`);const[s,r]=n.split(EC);se(s.indexOf(c4)===-1,()=>`The ellipsis notation ("${c4}") is not supported yet.`);const a=s.split(u4),i=a.length;if(e!==i)throw new Error(`Expected ${i} input tensors, received ${e}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let d=0;d<r.length;++d){const m=r[d];if(!a.some(g=>g.indexOf(m)!==-1))throw new Error(`Output subscripts contain the label ${m} not present in the input subscripts.`);o.indexOf(m)===-1&&o.push(m)}for(let d=0;d<s.length;++d){const m=s[d];o.indexOf(m)===-1&&m!==u4&&o.push(m)}const l=new Array(a.length);for(let d=0;d<i;++d){if(new Set(a[d].split("")).size!==a[d].length)throw new Error(`Found duplicate axes in input component ${a[d]}. Support for duplicate axes in input is not implemented yet.`);l[d]=[];for(let m=0;m<a[d].length;++m)l[d].push(o.indexOf(a[d][m]))}const u=o.length,h=r.length,f=[];for(let d=h;d<u;++d)f.push(d);return{allDims:o,summedDims:f,idDims:l}}function uI(n,e){let t=new Array(n);t.fill(-1);for(let r=0;r<e.length;++r)t[e[r]]=r;const s=[];for(let r=0;r<n;++r)t[r]===-1&&s.push(r);return t=t.filter(r=>r!==-1),{permutationIndices:t,expandDims:s}}function cI(n,e,t){const s=new Array(n);for(let r=0;r<t.length;++r){const a=t[r].shape;for(let i=0;i<e[r].length;++i)s[e[r][i]]===void 0?s[e[r][i]]=a[i]:se(s[e[r][i]]===a[i],()=>`Expected dimension ${s[e[r][i]]} at axis ${i} of input shaped ${JSON.stringify(a)}, but got dimension ${a[i]}`)}}function hI(n,e){const t=n,s=[];let r=0;n.length===0&&t.push(-1),r=n.length+1;for(let i=0;i<r;++i)s.push([]);const a=[];for(let i=0;i<t.length;++i){const o=t[i],l=yne(e,o);for(const u of l)a.indexOf(u)===-1&&(s[i].push(u),a.push(u))}return{path:t,steps:s}}function fI(n){return n.every((e,t)=>e===t)}function yne(n,e){const t=[];for(let s=0;s<n.length;++s)(n[s].length===0||n[s].indexOf(e)!==-1||e===-1)&&t.push(s);return t}function dI(n,e,t=0){let s=[];if(typeof e=="number")se(n.shape[t]%e===0,()=>"Number of splits must evenly divide the axis."),s=new Array(e).fill(n.shape[t]/e);else{const r=e.reduce((i,o)=>(o===-1&&(i+=1),i),0);se(r<=1,()=>"There should be only one negative value in split array.");const a=e.indexOf(-1);if(a!==-1){const i=e.reduce((o,l)=>l>0?o+l:o);e[a]=n.shape[t]-i}se(n.shape[t]===e.reduce((i,o)=>i+o),()=>"The sum of sizes must match the size of the axis dimension."),s=e}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KR(n){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${n}`}function WR(n,e){return`indices(${n}, 0) is invalid: ${e} < 0`}function qR(n,e,t){return`indices(${n}, 0) is invalid: ${e} >= ${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XR(n,e){return`only one output dimension may be -1, not both ${n} and ${e}`}function YR(n,e){return`size ${n} must be non-negative, not ${e}`}function JR(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function ZR(n,e){const t=je(n),s=je(e);return`Input to reshape is a SparseTensor with ${t}
  dense values, but the requested shape requires a multiple of ${s}. inputShape=${n} outputShape= ${e}`}function e$(n,e){const t=je(n),s=je(e);return`Input to reshape is a tensor with ${t} dense values, but the requested shape has ${s}. inputShape=${n} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JB(){return"segment ids must be >= 0"}function t$(){return"segment ids are not increasing"}function n$(n,e){return`Segment id ${n} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function s$(n,e,t){return`Bad: indices[${n}] == ${e} out of range [0, ${t})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r$(n,e){let t=!1,s;for(n<=J5?(s=n,t=!0):s=TB(n,Math.floor(Math.sqrt(n)));!t;)s>e||s===n?t=!0:s=TB(n,s+1);return s}function a$(n,e,t){const s=[],r=n.length;for(let a=0;a<r;a++)a!==e?s.push(n[a]):s.push(t);return s}function pI(n,e,t,s){const r=e.shape.length,a=n.shape.length;if(s!==0&&(s<-r||s>r))throw new Error(`Expect batchDims in the range of [-${r}, ${r}], but got ${s}`);if(s<0&&(s+=r),s>a)throw new Error(`batchDims (${s}) must be less than rank(x) (
    ${a}).`);if(t<s)throw new Error(`batchDims (${s}) must be less than or equal to axis (${t}).`);for(let f=0;f<s;++f)if(n.shape[f]!==e.shape[f])throw new Error(`x.shape[${f}]: ${n.shape[f]} should be equal to indices.shape[${f}]: ${e.shape[f]}.`);const i=n.shape[t],o=[];let l=1,u=1,h=1;for(let f=0;f<s;++f)o.push(n.shape[f]),l*=n.shape[f];for(let f=s;f<t;f++)o.push(n.shape[f]),u*=n.shape[f];for(let f=s;f<r;f++)o.push(e.shape[f]);for(let f=t+1;f<a;f++)o.push(n.shape[f]),h*=n.shape[f];return{batchSize:l,sliceSize:h,outerSize:u,dimSize:i,outputShape:o}}const wne=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:pI,computeOutShape:a$,segOpComputeOptimalWindowSize:r$},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ru(n){try{return n.map(e=>th(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function i$(n){return n.map(e=>qc(e))}const bne=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:sI,ERF_A2:rI,ERF_A3:aI,ERF_A4:iI,ERF_A5:oI,ERF_P:nI,PARALLELIZE_THRESHOLD:J5,get RowPartitionType(){return Cl},SELU_SCALE:dx,SELU_SCALEALPHA:fx,applyActivation:Ax,assertAndGetBroadcastShape:sn,assertAxesAreInnerMostDims:sa,assertParamsConsistent:Y5,assignToTypedArray:jR,axesAreInnerMostDims:d5,calculateShapes:Kf,checkEinsumDimSizes:cI,checkPadOnDimRoundingMode:Pa,combineLocations:RU,combineRaggedTensorToTensorShapes:_R,complexWithEvenIndex:PR,complexWithOddIndex:zR,computeConv2DInfo:Mr,computeConv3DInfo:ph,computeDefaultPad:o5,computeDilation2DInfo:Y0,computeOptimalWindowSize:hx,computeOutAndReduceShapes:Hr,computeOutShape:FA,computePool2DInfo:Mo,computePool3DInfo:_u,convertConv2DDataFormat:Ou,decodeEinsumEquation:AI,eitherStridesOrDilationsAreOne:na,expandShapeToKeepDim:Ys,exponent:GR,exponents:VR,fromStringArrayToUint8:i$,fromUint8ToStringArray:Ru,getAxesPermutation:Us,getBroadcastDims:Bp,getComplexWithIndex:lI,getEinsumComputePath:hI,getEinsumPermutation:uI,getFusedBiasGradient:lx,getFusedDyActivation:ox,getImageCenter:Z5,getInnerMostAxes:Js,getPermuted:a1,getRaggedRank:QR,getReductionAxes:Fr,getReshaped:r1,getReshapedPermuted:i1,getRowPartitionTypesHelper:OR,getSliceBeginCoords:eI,getSliceSize:tI,getSparseFillEmptyRowsIndicesDenseShapeMismatch:KR,getSparseFillEmptyRowsNegativeIndexErrorMessage:WR,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:qR,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:JR,getSparseReshapeInputOutputMismatchErrorMessage:e$,getSparseReshapeInputOutputMultipleErrorMessage:ZR,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:XR,getSparseReshapeNegativeOutputDimErrorMessage:YR,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:s$,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:JB,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:t$,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:n$,getUndoAxesPermutation:mh,isIdentityPermutation:fI,log:o9,mergeRealAndImagArrays:Uu,prepareAndValidate:V5,prepareSplitSize:dI,segment_util:wne,shouldFuse:ux,slice_util:dne,splitRealAndImagArrays:HR,stridesOrDilationsArePositive:Lf,tupleValuesAreOne:rh,upcastType:Si,validateDefaultValueShape:MR,validateInput:D5,validateUpdateShape:tR,warn:Ji},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */jte();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o$={kernelName:Qw,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>be(n,jp(mt(t,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xne={kernelName:t0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const s=rs(mt(t,"float32")),r=ta(vt(Ut(1),s));return ms(Tt(n,r))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vne={kernelName:n0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const s=ta(vt(rs(mt(t,"float32")),1));return Tt(n,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cne={kernelName:Hp,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,s]=e,r=sn(t.shape,s.shape);return{a:()=>{let o=n;const l=Fr(t.shape,r);return l.length>0&&(o=Nt(o,l)),Be(o,t.shape)},b:()=>{let o=n;const l=Fr(s.shape,r);return l.length>0&&(o=Nt(o,l)),Be(o,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bne={kernelName:Mw,saveAllInputs:!0,gradFunc:(n,e)=>{const t={};return e.forEach((s,r)=>{t[r]=()=>n.clone()}),t}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sne={kernelName:Hw,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>En(t)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nne={kernelName:Pw,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>En(t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ine={kernelName:s0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>Tt(n,ta(vt(Ut(1),rs(mt(t,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ene={kernelName:r0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const s=ta(st(Ut(1),rs(mt(t,"float32"))));return Tt(n,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kne={kernelName:o0,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,s]=e,r=sn(t.shape,s.shape);return{a:()=>{const o=st(rs(t),rs(s));let l=be(n,Tt(s,o));const u=Fr(t.shape,r);return u.length>0&&(l=Nt(l,u)),Be(l,t.shape)},b:()=>{const o=st(rs(t),rs(s));let l=ms(be(n,Tt(t,o)));const u=Fr(s.shape,r);return u.length>0&&(l=Nt(l,u)),Be(l,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fne={kernelName:a0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>Tt(n,st(rs(mt(t,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tne={kernelName:i0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>Tt(n,vt(Ut(1),rs(mt(t,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dne(n,e,t,s,r,a){const i=oe(n,"dy","avgPool3dGrad"),o=oe(e,"input","avgPool3dGrad");let l=i,u=o,h=!1;o.rank===4&&(h=!0,l=Be(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),u=Be(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),se(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),se(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),Pa("avgPool3dGrad",r,a);const f={dy:l,input:u},d={filterSize:t,strides:s,pad:r,dimRoundingMode:a},m=we.runKernel(tN,f,d);return h?Be(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const Lne=ge({avgPool3dGrad_:Dne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Une={kernelName:jw,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[s]=e,{filterSize:r,strides:a,pad:i,dimRoundingMode:o}=t;return{x:()=>Lne(n,s,r,a,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rne(n,e,t,s,r){const a=oe(n,"dy","avgPoolGrad"),i=oe(e,"input","avgPoolGrad");se(i.rank===a.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${a.rank})`);let o=i,l=a,u=!1;i.rank===3&&(u=!0,o=Be(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=Be(a,[1,a.shape[0],a.shape[1],a.shape[2]])),se(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),se(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const h={dy:l,input:o},f={filterSize:t,strides:s,pad:r},d=we.runKernel(eN,h,f);return u?Be(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const $ne=ge({avgPoolGrad_:Rne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ne={kernelName:zw,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[s]=e,{filterSize:r,strides:a,pad:i}=t;return{x:()=>$ne(n,s,r,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const One={kernelName:Vw,inputsToSave:["a","b"],gradFunc:(n,e,t)=>{const[s,r]=e,{transposeA:a,transposeB:i}=t;return!a&&!i?{a:()=>yn(n,r,!1,!0),b:()=>yn(s,n,!0,!1)}:!a&&i?{a:()=>yn(n,r,!1,!1),b:()=>yn(n,s,!0,!1)}:a&&!i?{a:()=>yn(r,n,!1,!0),b:()=>yn(s,n,!1,!1)}:{a:()=>yn(r,n,!0,!0),b:()=>yn(n,s,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qne={kernelName:Gw,gradFunc:(n,e,t)=>{const{blockShape:s,crops:r}=t;return{x:()=>Zb(n,s,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mne={kernelName:r9,gradFunc:(n,e,t)=>{const s=t,r=s.inputShape,a=s.shape,i=Array.from(a);for(let l=r.length-1;l>=0;l--)if(r[l]===a[l])i[l]=1;else if(r[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${a}].`);const o=[];for(let l=0;l<i.length;l++)i[l]>1&&o.push(l);return{x:()=>Nt(n,o,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hne={kernelName:l0,gradFunc:n=>({x:()=>n.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pne={kernelName:A0,gradFunc:n=>({x:()=>En(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zne={kernelName:u0,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[s]=e,{clipValueMin:r,clipValueMax:a}=t;return{x:()=>pa(LA(gh(s,r),jf(s,a)),n,En(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jne={kernelName:Ww,inputsToSave:["x"],gradFunc:o$.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vne={kernelName:qw,saveAllInputs:!0,gradFunc:(n,e,t)=>{const s=e.map(l=>l.shape),{axis:r}=t,a=dn(r,e[0].shape)[0],i=s.map(l=>l[a]);return Ci(n,i,a).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gne={kernelName:Xw,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const[s,r]=e,{dilations:a,strides:i,pad:o,dataFormat:l}=t;return se(rh(a),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`),{x:()=>A5(s.shape,n,r,i,o,l),filter:()=>_5(s,n,r.shape,i,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kne={kernelName:Yw,inputsToSave:["dy","filter"],gradFunc:(n,e,t)=>{const[s,r]=e,{strides:a,pad:i,dataFormat:o,dimRoundingMode:l}=t;return{dy:()=>ah(n,r,a,i,o,1,l),filter:()=>_5(n,s,r.shape,a,i,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wne(n,e,t,s,r){let a=n;n.rank===4&&(a=Be(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]));let i=e;i.rank===4&&(i=Be(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),se(a.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${a.shape}.`),se(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),se(t.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${t}.`),se(a.shape[4]===t[3],()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${t[3]}.`),se(i.shape[4]===t[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${t[4]}).`);const o={x:a,dy:i},l={strides:s,pad:r,filterShape:t};return we.runKernel(iN,o,l)}const qne=ge({conv3DBackpropFilter_:Wne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xne={kernelName:Jw,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const{dilations:s,strides:r,pad:a}=t;se(rh(s),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const[i,o]=e;return{x:()=>kU(i.shape,n,o,r,a),filter:()=>qne(i,n,o.shape,r,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yne={kernelName:c0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>be(ms(I5(mt(t,"float32"))),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jne={kernelName:h0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>be(E5(mt(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zne={kernelName:Zw,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[s]=e,{axis:r,exclusive:a,reverse:i}=t;return{x:()=>{const o=Us([r],s.rank);let l=h5(n,r,a,!i);return o!=null&&(l=In(l,o)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ese={kernelName:eb,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const{dilations:s,strides:r,pad:a,dimRoundingMode:i}=t,o=s??[1,1];se(rh(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[l,u]=e;return se(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),se(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),se(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),se(na(r,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${r} and dilations '${o}'.`),Pa("depthwiseConv2d",a,i),{x:()=>uR(l.shape,n,u,r,a,o,i),filter:()=>AR(l,n,u.shape,r,a,o,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tse={kernelName:tb,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const[s,r]=e,a={x:s,filter:r,dy:n},i={x:s,filter:r,dy:n};return{x:()=>we.runKernel(DB,a,t),filter:()=>we.runKernel(LB,i,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nse={kernelName:d0,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e,s={dy:n,y:t};return{x:()=>we.runKernel(mN,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sse={kernelName:p0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e,s=be(Ii(ms(rs(t))),2/Math.sqrt(Math.PI));return{x:()=>be(n,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rse={kernelName:m0,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>be(n,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ase={kernelName:sb,inputsToSave:["input"],gradFunc:(n,e)=>{const[t]=e;return{input:()=>Be(n,t.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ise={kernelName:g0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>be(n,Ii(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ose={kernelName:y0,gradFunc:n=>({x:()=>En(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lse={kernelName:w0,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,s]=e,r=sn(t.shape,s.shape);return{a:()=>{const o=Tt(n,mt(s,"float32")),l=Fr(t.shape,r);return l.length>0?Be(Nt(o,l),t.shape):o},b:()=>{let o=be(n,mt(t,"float32"));const l=Fr(s.shape,r);l.length>0&&(o=Be(Nt(o,l),s.shape));const u=rs(s);return ms(Tt(o,mt(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ase={kernelName:rb,inputsToSave:["x","mean","variance","scale"],gradFunc:(n,e,t)=>{const{varianceEpsilon:s}=t,[r,a,i,o]=e,l=o??Ut(1),u=Fr(a.shape,r.shape),h=[];if(a.rank===1){for(let I=0;I<r.shape.length-1;++I)h.push(r.shape[I]);h.push(1)}const f=vt(r,a),d=be(n,l),m=B5(st(i,Ut(s))),g=be(be(be(m,m),m),Ut(-.5));return{x:()=>a.rank===1?Be(be(be(n,To(Be(m,[1,1,1,a.shape[0]]),h)),l),r.shape):Be(be(be(n,m),l),r.shape),mean:()=>{let I=be(be(m,Ut(-1)),d);return a.rank===1&&(I=Nt(I,u)),Be(I,a.shape)},variance:()=>{let I=be(be(g,f),d);return a.rank===1&&(I=Nt(I,u)),Be(I,a.shape)},scale:()=>{const I=be(f,m);let L=be(n,I);return a.rank===1&&(L=Nt(L,u)),Be(L,a.shape)},offset:()=>{let I=n;return a.rank===1&&(I=Nt(I,u)),Be(I,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const use={kernelName:ab,inputsToSave:["x","indices"],gradFunc:(n,e,t)=>{const[s,r]=e,{axis:a,batchDims:i}=t,o=dn(a,s.shape)[0],l=(u,h,f)=>()=>{const d=u.shape,m=h.size,g=d.slice(0,o),w=g.length,v=d.slice(a,d.length).slice(1),b=v.length,C=h4(0,w),N=h4(w+1,w+1+b),I=f4([g,[m],v]),L=Be(f,I),$=Be(h,[m]),H=f4([[w],C,N]),U=In(L,H);let O=U5(U,$,u.shape[o]);const z=mh(H);return O=In(O,z),O};if(i===1){const u=s.shape[0],h=s.split(u,0);return{x:()=>Ei(h.map((m,g)=>l(m,r.slice(g,1),n.slice(g,1))())).reshape(s.shape),indices:()=>r}}else return{x:l(s,r,n),indices:()=>r}}};function h4(n,e){const t=[];for(let s=n;s<e;++s)t.push(s);return t}function f4(n){const e=[];for(let t=0;t<n.length;++t)for(let s=0;s<n[t].length;++s)e.push(n[t][s]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cse={kernelName:b0,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,s]=e;return{a:()=>En(t),b:()=>En(s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hse={kernelName:x0,gradFunc:n=>({x:()=>mt(n,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fse={kernelName:v0,gradFunc:n=>({x:()=>En(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dse={kernelName:C0,gradFunc:n=>({x:()=>En(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pse={kernelName:B0,gradFunc:n=>({x:()=>En(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mse={kernelName:ob,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[s]=e,{alpha:r}=t,a=Li(s,0);return{x:()=>pa(a,n,be(n,r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gse={kernelName:N0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>Tt(n,st(t,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yse={kernelName:S0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>Tt(n,mt(t,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wse={kernelName:i9,inputsToSave:[],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[s]=e,{axis:r}=t;return{logits:()=>{const i=Ii(s);return vt(n,be(Nt(n,r,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bse(n,e,t,s=5,r=1,a=1,i=.5){const o={x:n,y:e,dy:t},l={depthRadius:s,bias:r,alpha:a,beta:i};return we.runKernel(BN,o,l)}const xse=ge({localResponseNormalizationBackprop_:bse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vse={kernelName:fb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[s,r]=e,{depthRadius:a,bias:i,alpha:o,beta:l}=t;return{x:()=>xse(s,r,n,a,i,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l$(n,e,t,s){return e.rank<t.rank&&(e=Be(e,Ys(e.shape,s))),n.rank<t.rank&&(n=Be(n,Ys(n.shape,s))),{x:()=>be(n,mt(kl(t,e),n.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d4={kernelName:db,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const s=t,{reductionIndices:r}=s,a=e[0],i=e[1],o=dn(r,a.shape),l=l$(n,i,a,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cse={kernelName:I0,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,s]=e;return{a:()=>be(n,mt(gh(t,s),"float32")),b:()=>be(n,mt(_g(t,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bse(n,e,t,s,r,a,i){const o=oe(n,"dy","maxPool3dGrad"),l=oe(e,"input","maxPool3dGrad"),u=oe(t,"output","maxPool3dGrad");let h=o,f=l,d=u,m=!1;l.rank===4&&(m=!0,h=Be(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),f=Be(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=Be(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),se(h.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${h.rank}.`),se(f.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${f.rank}.`),se(d.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),Pa("maxPool3dGrad",a,i);const g={dy:h,input:f,output:d},w={filterSize:s,strides:r,pad:a,dimRoundingMode:i},v=we.runKernel(NN,g,w);return m?Be(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}const Sse=ge({maxPool3dGrad_:Bse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nse={kernelName:mb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[s,r]=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=t;return{x:()=>Sse(n,s,r,a,i,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ise(n,e,t,s,r,a,i){const o=oe(n,"dy","maxPoolGrad"),l=oe(e,"input","maxPoolGrad"),u=oe(t,"output","maxPoolGrad");se(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),se(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),se(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Pa("maxPoolGrad",a,i);const h={dy:o,input:l,output:u},f={filterSize:s,strides:r,pad:a,dimRoundingMode:i};return we.runKernel(SN,h,f)}const Ese=ge({maxPoolGrad_:Ise});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kse={kernelName:pb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[s,r]=e,{filterSize:a,strides:i,pad:o}=t;return{x:()=>Ese(n,s,r,a,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fse={kernelName:gb,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[s]=e,{axis:r}=t,a=dn(r,s.shape),o=Hr(s.shape,a)[1],l=je(o);return{x:()=>{const h=s.shape.slice();a.forEach(m=>{h[m]=1});const f=Be(n,h);return Tt(be(f,vi(s.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tse={kernelName:yb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const s=t,{axis:r}=s,[a,i]=e,o=dn(r,a.shape),l=l$(n,i,a,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dse={kernelName:E0,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,s]=e;return{a:()=>be(n,mt(jf(t,s),"float32")),b:()=>be(n,mt(Li(t,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lse={kernelName:wb,inputsToSave:["x"],gradFunc:(n,e,t)=>{const s=e[0],{paddings:r}=t,a=r.map(i=>i[0]);return{x:()=>Nn(n,a,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Use={kernelName:k0,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,s]=e,r=sn(t.shape,s.shape);return{a:()=>{const o=Fr(t.shape,r);return o.length>0?Be(Nt(n,o),t.shape):n},b:()=>{const o=be(n,ms(n1(Tt(t,s)))),l=Fr(s.shape,r);return l.length>0?Be(Nt(o,l),s.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rse={kernelName:F0,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,s]=e,r=sn(t.shape,s.shape);return{a:()=>{const o=be(n,mt(s,"float32")),l=Fr(t.shape,r);return l.length>0?Be(Nt(o,l),t.shape):o},b:()=>{const o=be(n,mt(t,"float32")),l=Fr(s.shape,r);return l.length>0?Be(Nt(o,l),s.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $se={kernelName:bb,gradFunc:n=>({x:()=>ms(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _se={kernelName:Cb,inputsToSave:["indices"],gradFunc:(n,e)=>{const t=e[0];return{indices:()=>Br(t.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ose={kernelName:vb,gradFunc:n=>({x:()=>En(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qse={kernelName:Bb,saveAllInputs:!0,gradFunc:(n,e,t)=>{const{axis:s}=t;return Oo(n,s).map(a=>()=>a)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p4={kernelName:Sb,inputsToSave:["x"],gradFunc:(n,e,t)=>{const s=e[0],{paddings:r}=t,a=r.map(i=>i[0]);return{x:()=>Nn(n,a,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mse={kernelName:T0,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(n,e)=>{const[t,s,r]=e,a=t,i=s,o=sn(a.shape,i.shape);return{a:()=>{const h=mt(i,"float32");let f=be(n,be(h,Du(a,vt(h,Ut(1)))));const d=Fr(a.shape,o);return d.length>0&&(f=Nt(f,d)),Be(f,a.shape)},b:()=>{const h=Li(a,0),f=pa(h,to(a),En(a));let d=be(n,be(r,f));const m=Fr(i.shape,o);return m.length>0&&(d=Nt(d,m)),Be(d,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hse={kernelName:Nb,inputsToSave:["x","alpha"],gradFunc:(n,e)=>{const[t,s]=e,r=Li(t,0);return{x:()=>pa(r,n,be(n,s)),alpha:()=>{let a=pa(r,En(n),be(n,t));const i=Fr(s.shape,n.shape);return i.length>0&&(a=Nt(a,i)),Be(a,s.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pse(n,e,t){const s=n.shape.slice();s[t]=1;const r=Be(e,s),a=nw(n,t,!0,!1),i=nw(n,t,!0,!0),o=be(a,i);return be(r,o)}function zse(n,e,t){const s=n.shape.length,r=s-t.length,a=Us(t,s);let i=n;a!=null&&(i=In(n,a));const o=i.shape.slice(),u=o.splice(s-t.length,t.length).reduce((d,m)=>d*m,1);o.push(u);const h=i.reshape(o);let f=Pse(h,e,r);if(f=f.reshape(i.shape),a!=null){const d=mh(a);f=In(f,d)}return f}const jse={kernelName:Ib,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[s]=e,{axis:r}=t;let a=[];return r==null?a=s.shape.map((i,o)=>o):typeof r=="number"?a=[r]:a=r,{x:()=>zse(s,n,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vse={kernelName:f0,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,s]=e,r=sn(t.shape,s.shape);return{a:()=>{const o=Tt(n,mt(s,"float32")),l=Fr(t.shape,r);return l.length>0?Be(Nt(o,l),t.shape):o},b:()=>{let o=be(n,mt(t,"float32"));const l=Fr(s.shape,r);l.length>0&&(o=Be(Nt(o,l),s.shape));const u=rs(s);return ms(Tt(o,mt(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gse={kernelName:D0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>Tt(n,ms(rs(t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kse={kernelName:U0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e,s=be(jf(t,6),jp(t));return{x:()=>be(n,mt(s,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wse={kernelName:L0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>be(n,mt(jp(t),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qse={kernelName:Eb,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>Be(n,t.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xse={kernelName:Fb,inputsToSave:["images"],gradFunc:(n,e,t)=>{const[s]=e,r={dy:n,images:s};return{images:()=>we.runKernel(ON,r,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yse={kernelName:kb,inputsToSave:["images"],gradFunc:(n,e,t)=>{const[s]=e,r={dy:n,images:s};return{images:()=>we.runKernel(_N,r,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jse={kernelName:Tb,gradFunc:(n,e,t)=>{const{dims:s}=t,r=dn(s,n.shape);return{x:()=>_o(n,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zse={kernelName:R0,gradFunc:n=>({x:()=>En(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ere={kernelName:$0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ms(Tt(n,be(Du(t,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tre={kernelName:Db,inputsToSave:["condition"],gradFunc:(n,e)=>{const[t]=e;return{condition:()=>mt(En(t),"float32"),t:()=>be(n,mt(t,n.dtype)),e:()=>be(n,mt(Xb(t),n.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nre={kernelName:_0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const s=Li(t,Ut(0)),r=Ut(fx),a=Ut(dx),i=be(n,a),o=be(be(n,r),Ii(mt(t,"float32")));return pa(s,i,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sre={kernelName:H0,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>be(n,be(t,vt(Ut(1),t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rre={kernelName:M0,gradFunc:n=>({x:()=>En(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const are={kernelName:O0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>be(Vb(mt(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ire={kernelName:Q0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>be(c5(mt(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ore={kernelName:Lb,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[s]=e,{begin:r,size:a}=t,i=s.shape,[o,l]=cx(s,r,a),u=[];for(let h=0;h<n.rank;h++)u.push([o[h],i[h]-o[h]-l[h]]);return{x:()=>yh(n,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lre={kernelName:_b,outputsToSave:[!0],gradFunc:(n,e,t)=>{const[s]=e,{dim:r}=t,a=!0,i=be(n,s);return{logits:()=>vt(i,be(Nt(i,[r],a),s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Are={kernelName:P0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>be(n,kA(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m4={kernelName:Rb,gradFunc:(n,e,t)=>{const{blockShape:s,paddings:r}=t;return{x:()=>jb(n,s,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g4={kernelName:$b,gradFunc:(n,e,t)=>{const{axis:s}=t;return{x:()=>dr(n,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ure={kernelName:z0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>Tt(n,be(ta(mt(t,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cre={kernelName:KN,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>be(n,be(mt(t,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hre={kernelName:j0,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,s]=e,r=Ut(2);return{a:()=>be(n,be(r,vt(t,s))),b:()=>be(n,be(r,vt(s,t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fre={kernelName:q0,gradFunc:n=>({x:()=>En(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dre={kernelName:V0,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,s]=e,r=sn(t.shape,s.shape);return{a:()=>{let o=n;const l=Fr(t.shape,r);return l.length>0&&(o=Nt(o,l)),Be(o,t.shape)},b:()=>{let o=n;const l=Fr(s.shape,r);return l.length>0&&(o=Nt(o,l)),Be(ms(o),s.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pre={kernelName:Ub,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[s]=e,r=s.shape.slice(),{axis:a}=t;dn(a,s.shape).forEach(u=>{r[u]=1});const o=Be(n,r),l=be(o,vi(s.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mre={kernelName:G0,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>Tt(n,rs(Vb(t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gre={kernelName:K0,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>be(vt(Ut(1),rs(t)),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yre={kernelName:W0,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[s]=e,{reps:r}=t;return{x:()=>{let i=En(s);if(s.rank===1)for(let o=0;o<r[0];++o)i=st(i,Nn(n,[o*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(let o=0;o<r[0];++o)for(let l=0;l<r[1];++l)i=st(i,Nn(n,[o*s.shape[0],l*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(let o=0;o<r[0];++o)for(let l=0;l<r[1];++l)for(let u=0;u<r[2];++u)i=st(i,Nn(n,[o*s.shape[0],l*s.shape[1],u*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else if(s.rank===4)for(let o=0;o<r[0];++o)for(let l=0;l<r[1];++l)for(let u=0;u<r[2];++u)for(let h=0;h<r[3];++h)i=st(i,Nn(n,[o*s.shape[0],l*s.shape[1],u*s.shape[2],h*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${s.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wre={kernelName:dp,gradFunc:(n,e,t)=>{const s=t,{perm:r}=s,a=mh(r);return{x:()=>In(n,a)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bre={kernelName:Qb,gradFunc:(n,e,t)=>{const s=t,{axis:r}=s;return{value:()=>Ei(n,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xre={kernelName:Mb,inputsToSave:["segmentIds"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>vre(n,t)}}};function vre(n,e){const t=Qu(e,En(e)),s=s1(n,t);let r=gh(e,Ut(0,"int32"));const a=s.rank-r.rank;for(let o=0;o<a;++o)r=_a(r,o+1);r=LA(r,vi(s.shape,"bool"));const i=En(s);return pa(r,s,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cre={kernelName:Hb,gradFunc:n=>({x:()=>En(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bre=[o$,xne,vne,Cne,Bne,Sne,Nne,Ine,Ene,kne,Fne,Tne,Une,_ne,One,Qne,Mne,Hne,Pne,zne,jne,Vne,Kne,Gne,Xne,Yne,Jne,Zne,ese,tse,Vse,nse,sse,rse,ase,ise,lse,ose,Ase,use,cse,hse,fse,dse,pse,mse,gse,yse,wse,vse,d4,d4,Cse,Nse,kse,Fse,Tse,Dse,Lse,Use,Rse,$se,_se,Ose,Qse,p4,p4,Mse,Hse,jse,Gse,Kse,Wse,qse,Xse,Yse,Jse,Zse,ere,tre,nre,sre,rre,are,ire,ore,lre,Are,m4,m4,g4,g4,ure,hre,cre,fre,dre,pre,mre,gre,yre,wre,bre,xre,Cre];for(const n of Bre)l9(n);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.abs=function(){return this.throwIfDisposed(),vr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.acos=function(){return this.throwIfDisposed(),uU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.acosh=function(){return this.throwIfDisposed(),cU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.add=function(n){return this.throwIfDisposed(),st(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.all=function(n,e){return this.throwIfDisposed(),i5(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.any=function(n,e){return this.throwIfDisposed(),tw(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.argMax=function(n){return this.throwIfDisposed(),Cp(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.argMin=function(n){return this.throwIfDisposed(),hU(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.asScalar=function(){return this.throwIfDisposed(),se(this.size===1,()=>"The array must have only 1 element."),Be(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.asType=function(n){return this.throwIfDisposed(),mt(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.as1D=function(){return this.throwIfDisposed(),Be(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.as2D=function(n,e){return this.throwIfDisposed(),Be(this,[n,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.as3D=function(n,e,t){return this.throwIfDisposed(),Be(this,[n,e,t])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.as4D=function(n,e,t,s){return this.throwIfDisposed(),Be(this,[n,e,t,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.as5D=function(n,e,t,s,r){return this.throwIfDisposed(),Be(this,[n,e,t,s,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.asin=function(){return this.throwIfDisposed(),fU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.asinh=function(){return this.throwIfDisposed(),dU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.atan=function(){return this.throwIfDisposed(),pU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.atan2=function(n){return this.throwIfDisposed(),mU(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.atanh=function(){return this.throwIfDisposed(),gU(this)};Ge().prototype.avgPool=function(n,e,t,s){return this.throwIfDisposed(),zb(this,n,e,t,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.batchToSpaceND=function(n,e){return this.throwIfDisposed(),jb(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.batchNorm=function(n,e,t,s,r){return this.throwIfDisposed(),J0(this,n,e,t,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.broadcastTo=function(n){return this.throwIfDisposed(),gp(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.cast=function(n){return this.throwIfDisposed(),mt(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.ceil=function(){return this.throwIfDisposed(),CU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.clipByValue=function(n,e){return this.throwIfDisposed(),Ni(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.concat=function(n,e){return this.throwIfDisposed(),n instanceof ps&&(n=[n]),dr([this,...n],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.conv1d=function(n,e,t,s,r,a){return this.throwIfDisposed(),l5(this,n,e,t,s,r,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.conv2dTranspose=function(n,e,t,s,r){return this.throwIfDisposed(),u5(this,n,e,t,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.conv2d=function(n,e,t,s,r,a){return this.throwIfDisposed(),ah(this,n,e,t,s,r,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.cos=function(){return this.throwIfDisposed(),Vb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.cosh=function(){return this.throwIfDisposed(),c5(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.cumprod=function(n,e,t){return this.throwIfDisposed(),nw(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.cumsum=function(n,e,t){return this.throwIfDisposed(),h5(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.depthToSpace=function(n,e){return this.throwIfDisposed(),TU(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.depthwiseConv2d=function(n,e,t,s,r,a){return this.throwIfDisposed(),Z0(this,n,e,t,s,r,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.dilation2d=function(n,e,t,s,r){return this.throwIfDisposed(),DU(this,n,e,t,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.divNoNan=function(n){return this.throwIfDisposed(),LU(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.div=function(n){return this.throwIfDisposed(),Tt(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.dot=function(n){return this.throwIfDisposed(),UU(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.elu=function(){return this.throwIfDisposed(),e1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.equal=function(n){return this.throwIfDisposed(),kl(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.erf=function(){return this.throwIfDisposed(),f5(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.euclideanNorm=function(n,e){return this.throwIfDisposed(),_U(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.exp=function(){return this.throwIfDisposed(),Ii(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.expandDims=function(n){return this.throwIfDisposed(),_a(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.expm1=function(){return this.throwIfDisposed(),OU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.fft=function(){return this.throwIfDisposed(),ax(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.flatten=function(){return this.throwIfDisposed(),Be(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.floor=function(){return this.throwIfDisposed(),n1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.floorDiv=function(n){return this.throwIfDisposed(),a5(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.gather=function(n,e,t){return this.throwIfDisposed(),s1(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.greaterEqual=function(n){return this.throwIfDisposed(),gh(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.greater=function(n){return this.throwIfDisposed(),Li(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.ifft=function(){return this.throwIfDisposed(),Mg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.irfft=function(){return this.throwIfDisposed(),F5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.isFinite=function(){return this.throwIfDisposed(),QU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.isInf=function(){return this.throwIfDisposed(),MU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.isNaN=function(){return this.throwIfDisposed(),HU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.leakyRelu=function(n){return this.throwIfDisposed(),Kb(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.lessEqual=function(n){return this.throwIfDisposed(),jf(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.less=function(n){return this.throwIfDisposed(),_g(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.localResponseNormalization=function(n,e,t,s){return this.throwIfDisposed(),PU(this,n,e,t,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.logSigmoid=function(){return this.throwIfDisposed(),zU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.logSoftmax=function(n){return this.throwIfDisposed(),m5(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.logSumExp=function(n,e){return this.throwIfDisposed(),qb(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.log=function(){return this.throwIfDisposed(),to(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.log1p=function(){return this.throwIfDisposed(),Wb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.logicalAnd=function(n){return this.throwIfDisposed(),LA(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.logicalNot=function(){return this.throwIfDisposed(),Xb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.logicalOr=function(n){return this.throwIfDisposed(),g5(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.logicalXor=function(n){return this.throwIfDisposed(),jU(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.matMul=function(n,e,t){return this.throwIfDisposed(),yn(this,n,e,t)};Ge().prototype.maxPool=function(n,e,t,s){return this.throwIfDisposed(),Yb(this,n,e,t,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.max=function(n,e){return this.throwIfDisposed(),Ro(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.maximum=function(n){return this.throwIfDisposed(),Qu(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.mean=function(n,e){return this.throwIfDisposed(),Ps(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.min=function(n,e){return this.throwIfDisposed(),$g(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.minimum=function(n){return this.throwIfDisposed(),Rf(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.mirrorPad=function(n,e){return this.throwIfDisposed(),GU(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.mod=function(n){return this.throwIfDisposed(),KU(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.mul=function(n){return this.throwIfDisposed(),be(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.neg=function(){return this.throwIfDisposed(),ms(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.norm=function(n,e,t){return this.throwIfDisposed(),t1(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.notEqual=function(n){return this.throwIfDisposed(),Sp(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.oneHot=function(n,e=1,t=0){return this.throwIfDisposed(),w5(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.onesLike=function(){return this.throwIfDisposed(),no(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.pad=function(n,e){return this.throwIfDisposed(),yh(this,n,e)};Ge().prototype.pool=function(n,e,t,s,r,a){return this.throwIfDisposed(),WU(this,n,e,t,s,r,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.pow=function(n){return this.throwIfDisposed(),Du(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.prelu=function(n){return this.throwIfDisposed(),ex(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.prod=function(n,e){return this.throwIfDisposed(),qU(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.reciprocal=function(){return this.throwIfDisposed(),XU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.relu=function(){return this.throwIfDisposed(),MA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.relu6=function(){return this.throwIfDisposed(),v5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.reshapeAs=function(n){return this.throwIfDisposed(),Be(this,n.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.reshape=function(n){return this.throwIfDisposed(),Be(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.resizeBilinear=function(n,e,t){return this.throwIfDisposed(),fR(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.resizeNearestNeighbor=function(n,e,t){return this.throwIfDisposed(),dR(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.reverse=function(n){return this.throwIfDisposed(),_o(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.rfft=function(){return this.throwIfDisposed(),ix(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.round=function(){return this.throwIfDisposed(),C5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.rsqrt=function(){return this.throwIfDisposed(),B5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.selu=function(){return this.throwIfDisposed(),S5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.separableConv2d=function(n,e,t,s,r,a){return this.throwIfDisposed(),N5(this,n,e,t,s,r,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.sigmoid=function(){return this.throwIfDisposed(),kA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.sign=function(){return this.throwIfDisposed(),YU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.sin=function(){return this.throwIfDisposed(),I5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.sinh=function(){return this.throwIfDisposed(),E5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.slice=function(n,e){return this.throwIfDisposed(),Nn(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.softmax=function(n){return this.throwIfDisposed(),rx(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.softplus=function(){return this.throwIfDisposed(),zp(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.spaceToBatchND=function(n,e){return this.throwIfDisposed(),Zb(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.split=function(n,e){return this.throwIfDisposed(),Ci(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.sqrt=function(){return this.throwIfDisposed(),ta(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.square=function(){return this.throwIfDisposed(),rs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.squaredDifference=function(n){return this.throwIfDisposed(),T5(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.squeeze=function(n){return this.throwIfDisposed(),Gf(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.stack=function(n,e){this.throwIfDisposed();const t=n instanceof ps?[this,n]:[this,...n];return Ei(t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.step=function(n){return this.throwIfDisposed(),jp(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.stridedSlice=function(n,e,t,s,r,a,i,o){return this.throwIfDisposed(),JU(this,n,e,t,s,r,a,i,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.sub=function(n){return this.throwIfDisposed(),vt(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.sum=function(n,e){return this.throwIfDisposed(),Nt(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.tan=function(){return this.throwIfDisposed(),ZU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.tanh=function(){return this.throwIfDisposed(),Uf(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.tile=function(n){return this.throwIfDisposed(),To(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.toBool=function(){return this.throwIfDisposed(),mt(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.toFloat=function(){return this.throwIfDisposed(),mt(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.toInt=function(){return this.throwIfDisposed(),mt(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.topk=function(n,e){return this.throwIfDisposed(),nR(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.transpose=function(n){return this.throwIfDisposed(),In(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.unique=function(n){return this.throwIfDisposed(),sR(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.unsortedSegmentSum=function(n,e){return this.throwIfDisposed(),U5(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.unstack=function(n){return this.throwIfDisposed(),Oo(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.where=function(n,e){return this.throwIfDisposed(),pa(n,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ge().prototype.zerosLike=function(){return this.throwIfDisposed(),En(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class vA extends Error{constructor(e){super(e),Object.setPrototypeOf(this,vA.prototype)}}class Do extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Do.prototype)}}class Ne extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ne.prototype)}}class An extends Error{constructor(e){super(e),Object.setPrototypeOf(this,An.prototype)}}class mI extends Error{constructor(e){super(e),Object.setPrototypeOf(this,mI.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class A${constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const s=this.cache.keys().next().value;this.cache.delete(s)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const s=this.cache.keys().next().value;this.cache.delete(s)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _f(n,e){if(Array.isArray(n)){let t=[];for(let s=0;s<e;s++)t=t.concat(n);return t}else{const t=new Array(e);return t.fill(n),t}}function CA(n,e){if(!n)throw new mI(e)}function y4(n,e){let t=0;for(const s of n)s===e&&t++;return t}function si(n){return n.length===1?n[0]:n}function jn(n){return Array.isArray(n)?n:[n]}function vu(n){const t=n.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return t[0]!=="_"?t:"private"+t}function mf(n){return n.length<=1||n.indexOf("_")===-1?n:n.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}let vo={};function gI(n){if(n==null)return null;const e={};return e.className=n.getClassName(),e.config=n.getConfig(),e}function ZB(n){if(!(n==null||typeof n!="object"))if(Array.isArray(n))n.forEach(e=>ZB(e));else{const e=Object.keys(n);for(const t of e){const s=n[t];s!=null&&typeof s=="object"&&(!Array.isArray(s)&&s.type==="ndarray"&&typeof s.value=="number"?n[t]=s.value:ZB(s))}}}function o1(n,e={},t={},s="object",r=!1){if(typeof n=="string"){const a=n;let i;if(a in t)i=t[a];else if(a in vo)i=vo[a];else if(i=e[a],i==null)throw new Ne(`Unknown ${s}: ${n}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const a=n;if(a.className==null||a.config==null)throw new Ne(`${s}: Improper config format: ${JSON.stringify(a)}.
'className' and 'config' must set.`);const i=a.className;let o,l;if(i in t?[o,l]=t[i]:i in vo?[o,l]=vo.className:i in e&&([o,l]=e[i]),o==null)throw new Ne(`Unknown ${s}: ${i}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const m of Object.keys(vo))u[m]=vo[m];for(const m of Object.keys(t))u[m]=t[m];const h=a.config;h.customObjects=u;const f=Object.assign({},vo);for(const m of Object.keys(t))vo[m]=t[m];ZB(a.config);const d=l(o,a.config,t,r);return vo=Object.assign({},f),d}else{const u=Object.assign({},vo);for(const f of Object.keys(t))vo[f]=t[f];const h=new o(a.config);return vo=Object.assign({},u),h}}}function Sre(n,e){return n<e?-1:n>e?1:0}function qy(n,e){return-1*Sre(n,e)}function Xc(n){if(n==null)return n;const e=[];for(const t of n)e.indexOf(t)===-1&&e.push(t);return e}function Nre(n){if(n==null)throw new Ne(`Invalid value in obj: ${JSON.stringify(n)}`);for(const e in n)if(n.hasOwnProperty(e))return!1;return!0}function Wf(n,e,t){if(t!=null&&n.indexOf(t)<0)throw new Ne(`${t} is not a valid ${e}.  Valid values are ${n} or null/undefined.`)}function yI(n,e,t=0,s=1/0){return CA(t>=0),CA(s>=t),Array.isArray(n)&&n.length>=t&&n.length<=s&&n.every(r=>typeof r===e)}function Or(n,e){Array.isArray(n)?(se(n.length>0,()=>`${e} is unexpectedly an empty array.`),n.forEach((t,s)=>Or(t,`element ${s+1} of ${e}`))):se(Number.isInteger(n)&&n>0,()=>`Expected ${e} to be a positive integer, but got ${u$(n)}.`)}function u$(n){return n===null?"null":Array.isArray(n)?"["+n.map(e=>u$(e)).join(",")+"]":typeof n=="string"?`"${n}"`:`${n}`}function Ire(n,e,t){let s=t!=null?t():ni(),r;return(...i)=>{const o=t!=null?t():ni();return o-s<e||(s=o,r=n(...i)),r}}function c$(n){return n==="relu"?"relu":n==="linear"?"linear":n==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Ere=0;function h$(){return Ere++}const Xy={};function px(n=""){return n in Xy||(Xy[n]=0),Xy[n]+=1,n+Xy[n].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const kre=["channelsFirst","channelsLast"],Fre=["nearest","bilinear"],Tre=["valid","same","causal"],Dre=["max","avg"],Lre=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const qd=new Map;function Zs(n){Wf(kre,"DataFormat",n)}function Ure(n){Wf(Fre,"InterpolationFormat",n)}function ro(n){Wf(Tre,"PaddingMode",n)}function f$(n){Wf(Dre,"PoolMode",n)}const Eg=[],w4="/";function Sf(n,e){Eg.push(n);try{const t=e();return Eg.pop(),t}catch(t){throw Eg.pop(),t}}function Rre(){return Eg.length===0?"":Eg.join(w4)+w4}function d$(n){if(!m$(n))throw new Error("Not a valid tensor name: '"+n+"'");return Rre()+n}function p$(n){if(!m$(n))throw new Error("Not a valid tensor name: '"+n+"'");qd.has(n)||qd.set(n,0);const e=qd.get(n);if(qd.set(n,qd.get(n)+1),e>0){const t=`${n}_${e}`;return qd.set(t,1),t}else return n}const $re=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function m$(n){return!!n.match($re)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _re(n){return n===parseInt(n.toString(),10)}function Yc(n,e,t){e==null&&(e=0),t==null&&(t=n.length);let s=1;for(let r=e;r<t;++r)s*=n[r];return s}function Ip(n){if(n.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let t=0;t<n.length;t++){const s=n[t];s<e&&(e=s)}return e}function ih(n){if(n.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let t=0;t<n.length;t++){const s=n[t];s>e&&(e=s)}return e}function Fl(n,e){if(e<n)throw new Ne(`end (${e}) < begin (${n}) is forbidden.`);const t=[];for(let s=n;s<e;++s)t.push(s);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let kC;function Sr(){return kC==null&&(kC=WL().epsilon()),kC}function Tl(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function TA(n,e){return mt(n,e)}function l1(n,e=-1){const t=n.shape.slice();return e<0&&(e=t.length+e+1),t.splice(e,0,1),Be(n,t)}function Ore(n,e){return De(()=>{if(n.shape.length!==2)throw new Ne(`repeat() expects a rank-2 tensor, but received a rank-${n.shape.length} tensor.`);const t=l1(n,1);return eS(t,[1,e,1])})}function Qre(n){const e=[Yc(n.shape)];return Be(n,e)}function Mre(n){if(n.rank<=1)throw new Ne(`batchFlatten requires a minimum rank of 2. Got rank: ${n.rank}.`);const e=[n.shape[0],Yc(n.shape,1)];return Be(n,e)}function Nf(n,e,t){return De(()=>{switch(n.rank){case 1:return nx(n,e,t);case 2:return k5(n,[e,0],[t,n.shape[1]]);case 3:return sx(n,[e,0,0],[t,n.shape[1],n.shape[2]]);case 4:return Qg(n,[e,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3]]);case 5:return Nn(n,[e,0,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3],n.shape[4]]);case 6:return Nn(n,[e,0,0,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3],n.shape[4],n.shape[5]]);default:throw new Ne(`sliceAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}})}function FC(n,e,t){return De(()=>{switch(n.rank){case 1:return nx(n,e,t);case 2:return k5(n,[0,e],[n.shape[0],t]);case 3:return sx(n,[0,0,e],[n.shape[0],n.shape[1],t]);case 4:return Qg(n,[0,0,0,e],[n.shape[0],n.shape[1],n.shape[2],t]);default:throw new Ne(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function Yy(n,e,t,s){return De(()=>{switch(n.rank){case 1:return nx(n,e,t);case 2:switch(s){case 1:return Nf(n,e,t);case 2:return FC(n,e,t);default:throw new Ne(`The axis is not within the rank of the tensor ${s}`)}case 3:switch(s){case 1:return Nf(n,e,t);case 2:return sx(n,[0,e,0],[n.shape[0],t,n.shape[2]]);case 3:return FC(n,e,t);default:throw new Ne(`The axis is not within the rank of the tensor ${s}`)}case 4:switch(s){case 1:return Nf(n,e,t);case 2:return Qg(n,[0,e,0,0],[n.shape[0],t,n.shape[2],n.shape[3]]);case 3:return Qg(n,[0,0,e,0],[n.shape[0],n.shape[1],t,n.shape[3]]);case 4:return FC(n,e,t);default:throw new Ne(`The axis is not within the rank of the tensor ${s}`)}default:throw new Ne(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function wI(n,e=-1){let t;return e<0&&(t=n[0].rank,t!==0?e=t:e=0),e===n[0].rank&&(e=-1),dr(n,e)}function b4(n,e){switch(n.rank){case 1:return BU([n,e]);case 2:return SU([n,e],0);case 3:return NU([n,e],0);case 4:return IU([n,e],0);default:throw new Ne(`concatAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}}function eS(n,e){if(Array.isArray(e)||(e=[e]),n.rank!==e.length)throw new Ne(`The length of input n (${e.length}) does not match the number of dimensions in input x (${n.rank})`);return To(n,e)}function mx(n,e=0,t=1,s,r){return x5(n,e,t,s,r)}function DA(n,e,t,s){if(n.rank<2||e.rank<2)throw new An(`dot requires both inputs to be rank >= 2 but got x shape = ${n.shape} and y shape = ${e.shape}`);if(e.rank>=3){const r=n.shape.slice(-1)[0],a=e.shape.slice(-2)[0];if(r!==a)throw new An(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${n.shape} and  y shape = ${e.shape}`)}if(n.rank===2&&e.rank===2)return qB({a:n,b:e,transposeA:!1,transposeB:!1,bias:s?tS(n.rank,s,Tl()):null,activation:t});{const r=n.shape.slice(),a=r.pop();n=Be(n,[-1,a]);const i=e.shape.slice(),o=i.pop(),l=i.pop(),u=[...i,o],h=Array.from({length:e.rank},(g,w)=>w===0?e.rank-2:w<=e.rank-2?w-1:w);e=Be(In(e,h),[l,-1]);const f=[...r,...u];return Be(qB({a:n,b:e,transposeA:!1,transposeB:!1,bias:s?tS(n.rank,s,Tl()):null,activation:t}),f)}}function g$(n,e,t){return De(()=>(Array.isArray(e)?e=Ma(e,"int32"):e=mt(e,"int32"),s1(n,e,t)))}function A1(n){return be(n,n)}function tS(n,e,t){const s=e.shape;if(e.rank!==1&&e.rank!==n)throw new Ne(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${n}`);if(n===5){if(t==="channelsFirst")return s.length===1?Be(e,[1,s[0],1,1,1]):Be(e,[1,s[3],s[0],s[1],s[2]]);if(t==="channelsLast")return s.length===1?Be(e,[1,1,1,1,s[0]]):Be(e,[1].concat(s))}else if(n===4){if(t==="channelsFirst")return s.length===1?Be(e,[1,s[0],1,1]):Be(e,[1,s[2],s[0],s[1]]);if(t==="channelsLast")return s.length===1?Be(e,[1,1,1,s[0]]):Be(e,[1].concat(s))}else if(n===3){if(t==="channelsFirst")return s.length===1?Be(e,[1,s[0],1]):Be(e,[1,s[1],s[0]]);if(t==="channelsLast")return s.length===1?Be(e,[1,1,s[0]]):Be(e,[1].concat(s))}else if(n<3)return e;throw new Ne(`Unsupported input rank by biasAdd: ${e.rank}`)}function Ol(n,e,t){return De(()=>(t==null&&(t=Tl()),Zs(t),st(n,tS(n.rank,e,t))))}function Hre(n,e=1){if(e!==1)throw new An(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return e1(n)}function Pre(n){return De(()=>Tt(n,st(vr(n),1)))}function y$(n,e,t,s){return De(()=>iR(n,e,t,s))}function zre(n){return De(()=>{const e=st(.5,be(.2,n));return Ni(e,0,1)})}function u1(n,e,t=!1){return t?n():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const jre=["fanIn","fanOut","fanAvg"],Vre=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Gre(n){Wf(jre,"FanMode",n)}function Kre(n){Wf(Vre,"Distribution",n)}class Ho extends Gp{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class w$ extends Ho{apply(e,t){return Br(e,t)}}w$.className="Zeros";at(w$);class bI extends Ho{apply(e,t){return vi(e,t)}}bI.className="Ones";at(bI);class b$ extends Ho{constructor(e){if(super(),typeof e!="object")throw new Ne(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new Ne(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return De(()=>be(Ut(this.value),vi(e,t)))}getConfig(){return{value:this.value}}}b$.className="Constant";at(b$);class x$ extends Ho{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return Vf(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}x$.className="RandomUniform";at(x$);class v$ extends Ho{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new An(`randomNormal does not support dType ${t}.`);return mx(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}v$.className="RandomNormal";at(v$);class C$ extends Ho{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new An(`truncatedNormal does not support dType ${t}.`);return L5(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}C$.className="TruncatedNormal";at(C$);class B$ extends Ho{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,t){return De(()=>{if(e.length!==2||e[0]!==e[1])throw new Ne("Identity matrix initializer can only be used for 2D square matrices.");return be(this.gain,p5(e[0]))})}getConfig(){return{gain:this.gain}}}B$.className="Identity";at(B$);function Wre(n,e="channelsLast"){let t,s;if(Zs(e),n.length===2)t=n[0],s=n[1];else if([3,4,5].indexOf(n.length)!==-1){if(e==="channelsFirst"){const r=Yc(n,2);t=n[1]*r,s=n[0]*r}else if(e==="channelsLast"){const r=Yc(n,0,n.length-2);t=n[n.length-2]*r,s=n[n.length-1]*r}}else{const r=Yc(n);t=Math.sqrt(r),s=Math.sqrt(r)}return[t,s]}class ki extends Ho{constructor(e){if(super(),e.scale<0)throw new Ne(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,Gre(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,Kre(this.distribution),this.seed=e.seed}apply(e,t){const s=Wre(e),r=s[0],a=s[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,r):this.mode==="fanOut"?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),this.distribution==="normal"){const o=Math.sqrt(i);if(t=t||"float32",t!=="float32"&&t!=="int32")throw new An(`${this.getClassName()} does not support dType ${t}.`);return L5(e,0,o,t,this.seed)}else{const o=Math.sqrt(3*i);return Vf(e,-o,o,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}ki.className="VarianceScaling";at(ki);class xI extends ki{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ki.className}}xI.className="GlorotUniform";at(xI);class vI extends ki{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ki.className}}vI.className="GlorotNormal";at(vI);class CI extends ki{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ki.className}}CI.className="HeNormal";at(CI);class BI extends ki{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ki.className}}BI.className="HeUniform";at(BI);class SI extends ki{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ki.className}}SI.className="LeCunNormal";at(SI);class NI extends ki{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ki.className}}NI.className="LeCunUniform";at(NI);class S$ extends Ho{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return De(()=>{if(e.length<2)throw new An("Shape must be at least 2D.");if(t!=="int32"&&t!=="float32"&&t!==void 0)throw new TypeError(`Unsupported data type ${t}.`);t=t;const s=je(e.slice(0,-1)),r=e[e.length-1],a=s*r;a>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${a}) elements: Slowness may result.`);const i=[Math.max(r,s),Math.min(r,s)],o=mx(i,0,1,t,this.seed),l=pR.qr(o,!1);let u=l[0];const f=l[1].flatten().stridedSlice([0],[Math.min(r,s)*Math.min(r,s)],[Math.min(r,s)+1]);return u=be(u,f.sign()),s<r&&(u=u.transpose()),be(Ut(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}S$.className="Orthogonal";at(S$);const x4={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function v4(n,e={}){return o1(n,Eo.getMap().classNameMap,e,"initializer")}function Ds(n){return gI(n)}function vs(n){if(typeof n=="string"){const e=n in x4?x4[n]:n;if(e==="GlorotNormal")return new vI;if(e==="GlorotUniform")return new xI;if(e==="HeNormal")return new CI;if(e==="HeUniform")return new BI;if(e==="LeCunNormal")return new SI;if(e==="LeCunUniform")return new NI;{const t={};return t.className=e,t.config={},v4(t)}}else return n instanceof Ho?n:v4(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function nS(n){return Array.isArray(n)&&Array.isArray(n[0])}function sw(n){return n.length===0?[]:Array.isArray(n[0])?n:[n]}function Kt(n){let e;if(Array.isArray(n)){if(n.length!==1)throw new Ne(`Expected Tensor length to be 1; got ${n.length}`);e=n[0]}else e=n;return e}function Un(n){if(Array.isArray(n)&&Array.isArray(n[0])){if(n.length===1)return n=n,n[0];throw new Ne(`Expected exactly 1 Shape; got ${n.length}`)}else return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function rw(n){let e=0;for(const t of n)t.shape.length===0?e+=1:e+=t.shape.reduce((s,r)=>s*r);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const C4="Variable";class qre{constructor(e,t="float32",s=C4,r=!0,a=null){this.dtype=t??"float32",this.shape=e.shape,this.id=h$(),s=s??C4,this.originalName=d$(s),this.name=p$(this.originalName),this.trainable_=r,this.constraint=a,this.val=rR(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),Xre(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function Xre(n,e){if(n.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(n.shape)+" vs. "+JSON.stringify(e.shape))}function sS(n){return n.map(e=>e.read())}function II(n){n.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Nr{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class UA{constructor(e,t,s,r,a,i,o){this.dtype=e,this.shape=t,this.sourceLayer=s,this.inputs=r,this.callArgs=a,this.outputTensorIndex=o,this.id=h$(),i!=null&&(this.originalName=d$(i),this.name=p$(this.originalName)),this.rank=t.length}}let Yre=0,gx=class{constructor(e,t){this.callArgs=t,this.id=Yre++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const s of e.inboundLayers)s!=null&&s.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)t!=null?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},Jre=0;class pn extends Gp{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Jre++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const s=this.getClassName();t=vu(s)+"_"+px(s)}if(this.name=t,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let s;if(e.batchInputShape!=null)s=e.batchInputShape;else if(e.inputShape!=null){let a=null;e.batchSize!=null&&(a=e.batchSize),s=[a].concat(e.inputShape)}this.batchInputShape=s;let r=e.dtype;r==null&&(r=e.inputDType),r==null&&(r="float32"),this.dtype=r}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(this.inboundNodes.length===0)throw new Do(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new Ne(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return si(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return si(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new vA(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new vA(`Layer ${this.name} is not connected, no input to return.`);return si(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new vA(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new vA(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return si(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=jn(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const s=jn(this.inputSpec);if(t.length!==s.length)throw new Ne(`Layer ${this.name} expects ${s.length} inputs, but it received ${t.length} input tensors. Input received: ${e}`);for(let r=0;r<t.length;r++){const a=t[r],i=s[r];if(i==null)continue;const o=a.rank;if(i.ndim!=null&&o!==i.ndim)throw new Ne(`Input ${r} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${o}`);if(i.maxNDim!=null&&o>i.maxNDim)throw new Ne(`Input ${r} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${o}`);if(i.minNDim!=null&&o<i.minNDim)throw new Ne(`Input ${r} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${o}.`);if(i.dtype!=null&&a.dtype!==i.dtype)throw new Ne(`Input ${r} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${a.dtype}.`);if(i.axes){const l=a.shape;for(const u in i.axes){const h=Number(u),f=i.axes[u],d=h>=0?l[h]:l[l.length+h];if(f!=null&&[f,null].indexOf(d)===-1)throw new Ne(`Input ${r} is incompatible with layer ${this.name}: expected axis ${h} of input shape to have value ${f} but got shape ${l}.`)}}if(i.shape!=null)for(let l=0;l<i.shape.length;++l){const u=i.shape[l],h=a.shape[l];if(u!=null&&h!=null&&u!==h)throw new Ne(`Input ${r} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${a.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){this._callHook!=null&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const s=jn(e),r=tae(e),a=nae(e);if(r===a)throw new Ne("Arguments to apply() must be all SymbolicTensors or all Tensors");return Sf(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const i=[];for(const o of jn(e))i.push(o.shape);this.build(si(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let i=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,i);const o=jn(i),l=[];for(let u of o)s.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(i=si(l),this.activityRegularizer!=null)throw new An("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=Zre(e),o=this.computeOutputShape(i);let l;const u=eae(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),o!=null&&o.length>0&&Array.isArray(o[0])?l=o.map((h,f)=>new UA(u,h,this,jn(e),t,this.name,f)):l=new UA(u,o,this,jn(e),t,this.name),this.addInboundNode(e,l,null,null,i,o,t),this._refCount++,this.activityRegularizer!=null)throw new An("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach((s,r)=>{s!=null&&e[r]!=null&&e[r]!==s&&(t=!0)}),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new vA(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const t of this.inboundNodes){const s=JSON.stringify(t.outputShapes);e.indexOf(s)===-1&&e.push(s)}if(e.length===1){const t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&t.length===1?t[0]:t}else throw new vA(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Do(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return rw(this.weights)}build(e){this.built=!0}getWeights(e=!1){return sS(e?this.trainableWeights:this.weights)}setWeights(e){De(()=>{const t=this.weights;if(t.length!==e.length)throw new Ne(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(t.length===0)return;const s=[],r=sS(t);for(let a=0;a<r.length;++a){const i=r[a],o=t[a],l=e[a];if(!Bn(i.shape,l.shape))throw new Ne(`Layer weight shape ${i.shape} not compatible with provided weight shape ${l.shape}`);s.push([o,l])}II(s)})}addWeight(e,t,s,r,a,i,o,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new Ne(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),s==null&&(s="float32"),this.fastWeightInitDuringBuild&&(r=l!=null?l():vs("zeros"));const u=r.apply(t,s),h=new qre(u,s,e,i,o);return u.dispose(),a!=null&&this.addLoss(()=>a.apply(h.read())),i==null&&(i=!0),i?this._trainableWeights.push(h):this._nonTrainableWeights.push(h),h}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=jn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(t!=null)if(Array.isArray(t))t.forEach(s=>{if(s!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return t}setMaskMetadata(e,t,s){if(!this.supportsMasking)return;const r=this.computeMask(e,s),a=jn(t),i=jn(r);if(a.length!==i.length)throw new Error(`${this.name} outputs ${a.length} tensors but ${a.length} masks for those tensors`);for(let o=0;o<a.length;o++)a[o].kerasMask=i[o]}addInboundNode(e,t,s,r,a,i,o=null){const l=jn(e);t=jn(t),s=jn(s),r=jn(r),a=sw(a),i=sw(i);const u=[],h=[],f=[];for(const d of l)u.push(d.sourceLayer),h.push(d.nodeIndex),f.push(d.tensorIndex);new gx({outboundLayer:this,inboundLayers:u,nodeIndices:h,tensorIndices:f,inputTensors:l,outputTensors:t,inputMasks:s,outputMasks:r,inputShapes:a,outputShapes:i},o);for(let d=0;d<t.length;d++)t[d].sourceLayer=this,t[d].nodeIndex=this.inboundNodes.length-1,t[d].tensorIndex=d}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function Zre(n){n=jn(n);const e=[];for(const t of n)e.push(t.shape);return si(e)}function eae(n){return"float32"}function N$(n,e,t){if((e==null||t!=null&&t>0)&&(e=n.sourceLayer,t=n.nodeIndex),e.inboundNodes.length===0)return[n];{const s=e.inboundNodes[t];if(s.inboundLayers.length===0)return s.inputTensors;{const r=[];for(let a=0;a<s.inboundLayers.length;a++){const i=s.inputTensors[a],o=s.inboundLayers[a],l=s.nodeIndices[a],u=N$(i,o,l);for(const h of u)r.indexOf(h)===-1&&r.push(h)}return r}}}function tae(n){let e=!0;for(const t of jn(n))if(!(t instanceof UA)){e=!1;break}return e}function nae(n){let e=!0;for(const t of jn(n))if(t instanceof UA){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class c1 extends pn{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:px("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new Ne("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(t==null){if(e.inputShape==null)throw new Ne("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new Ne("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const s=e.dtype||"float32";this.batchInputShape=t,this.dtype=s,this.inputSpec=[{shape:t}];const r=new UA(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new gx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new Ne(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}c1.className="InputLayer";at(c1);function sae(n){if(n.batchShape==null&&n.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(n.batchShape!=null&&n.shape!=null)throw new Ne("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=n.batchShape;n.shape!=null&&e==null&&(e=[null].concat(n.shape));let t=n.dtype;return t==null&&(t="float32"),new c1({batchInputShape:e,name:n.name,dtype:t,sparse:n.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function rae(n,e){if(n.dtype==null||n.dtype===e.dtype)return e;try{return mt(e,n.dtype)}catch{throw new Ne(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${n.name}' (${n.dtype}).`)}}class zc{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof zc)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(e==null)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,s){if(this.id2Value[e.id]==null)this.id2Value[e.id]=rae(e,t),this.name2Id[e.name]=e.id,s!=null&&(this.id2Mask[e.id]=s);else throw new Ne(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof UA){if(this.id2Value[e.id]==null)throw new Ne(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const t=this.name2Id[e];if(t==null)throw new Ne(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof UA){if(this.id2Value[e.id]==null)throw new Ne(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const t=this.name2Id[e];if(t==null)throw new Ne(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){this.id2Mask!=null&&on(this.id2Mask)}}const aw=new A$,iw=new A$;function aae(n){aw!=null&&aw.setMaxEntries(n),iw!=null&&iw.setMaxEntries(n)}function mg(n,e,t,s){const r=t==null?!1:t.training,a=Array.isArray(n),i=a?n:[n],o=i.map(g=>g.name),l=[],u=e.names();for(const g of o)u.indexOf(g)!==-1?l.push(e.getValue(g)):l.push(null);const h=o.join(",")+"|"+e.names().sort().join(",");let f=aw.get(h),d;if(f==null){const g=iae(i,e);f=g.sorted,d=g.recipientCounts,aw.put(h,f),iw.put(h,d)}d={},r||Object.assign(d,iw.get(h));const m=new zc(e);for(let g=0;g<f.length;++g){const w=f[g],v=w.sourceLayer;if(v instanceof c1)continue;const b=[],C=[],N=[];let I=!1;for(const O of w.inputs){const z=m.getValue(O),T=m.getMask(O);b.push(z),C.push(T),T!=null&&(I=!0),r||(d[O.name]--,d[O.name]===0&&!e.hasKey(O)&&o.indexOf(O.name)===-1&&!z.isDisposed&&O.sourceLayer.stateful!==!0&&N.push(z))}I&&(t=t||{},t.mask=C[0]);const L=jn(v.apply(b,t));let $=null;v.supportsMasking&&($=v.computeMask(b,C));const H=lae(w),U=Array.isArray(H)?H:[H];for(let O=0;O<U.length;++O){m.hasKey(U[O])||m.add(U[O],L[O],Array.isArray($)?$[0]:$);const z=o.indexOf(U[O].name);z!==-1&&(l[z]=L[O])}r||on(N)}return m.disposeMasks(),a?l:l[0]}function iae(n,e){se(n!=null&&n.length>0,()=>"Expected at least one fetch, got none");let t=[],s={};if(n.length===1){const r=B4(n[0],e);t=r.sorted,s=r.recipientMap}else{const r=new Set;for(const a of n){const{sorted:i,recipientMap:o}=B4(a,e);for(const l of i)r.has(l.name)||(t.push(l),r.add(l.name));for(const l in o)s[l]==null&&(s[l]=new Set),o[l].forEach(u=>s[l].add(u))}}return{sorted:t,recipientCounts:oae(s)}}function oae(n){const e={};for(const t in n)e[t]=n[t].size;return e}function B4(n,e){const t=new Set,s=[],r={};for(const o of e.names())t.add(o);const a=[],i=[];for(a.push(n);a.length>0;){const o=a[a.length-1];if(t.has(o.name)){a.pop();continue}const l=i[i.length-1]===a.length-1;if(o.inputs.length===0||l)a.pop(),s.push(o),t.add(o.name),l&&i.pop();else{i.push(a.length-1);for(const u of o.inputs)r[u.name]==null&&(r[u.name]=new Set),r[u.name].add(o.name),!t.has(u.name)&&a.push(u)}}return{sorted:s,recipientMap:r}}function lae(n){let e;if(n.sourceLayer.inboundNodes.length===1)e=n.sourceLayer.output;else{let t=null;for(let s=0;s<n.sourceLayer.inboundNodes.length;++s)for(const r of n.sourceLayer.inboundNodes[s].outputTensors)if(r.id===n.id){t=s;break}e=n.sourceLayer.getOutputAt(t)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aae=Qe();Aae.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,aae);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function EI(n,e){return De(()=>ta(Nt(be(n,n),e,!0)))}class h1 extends Gp{getConfig(){return{}}}class I$ extends h1{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return De(()=>{const t=EI(e,this.axis),s=Ni(t,0,this.maxValue);return be(e,Tt(s,st(Sr(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}I$.className="MaxNorm";at(I$);class E$ extends h1{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return De(()=>Tt(e,st(Sr(),EI(e,this.axis))))}getConfig(){return{axis:this.axis}}}E$.className="UnitNorm";at(E$);class k$ extends h1{apply(e){return MA(e)}}k$.className="NonNeg";at(k$);class F$ extends h1{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return De(()=>{const t=EI(e,this.axis),s=st(be(this.rate,Ni(t,this.minValue,this.maxValue)),be(1-this.rate,t));return be(e,Tt(s,st(Sr(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}F$.className="MinMaxNorm";at(F$);const S4={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Er(n){return gI(n)}function N4(n,e={}){return o1(n,Eo.getMap().classNameMap,e,"constraint")}function kr(n){if(n==null)return null;if(typeof n=="string"){const t={className:n in S4?S4[n]:n,config:{}};return N4(t)}else return n instanceof h1?n:N4(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Af(n){if(n==null)return;const e=[],t=[],s=[];for(const r in n){const a=n[r];if(typeof a!="number"){const i=a;e.push(i.data()),t.push(r),s.push(i)}}if(e.length>0){const r=await Promise.all(e);for(let a=0;a<r.length;++a)n[t[a]]=r[a][0];on(s)}}function T$(n){if(n!=null)for(const e in n){const t=n[e];typeof t!="number"&&t.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var I4;(function(n){n[n.SILENT=0]="SILENT",n[n.VERBOSE=1]="VERBOSE"})(I4||(I4={}));const uae=125;class Hg{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class cae{constructor(e,t=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){t==null&&(t={});for(const s of this.callbacks)await s.onEpochBegin(e,t)}async onEpochEnd(e,t){t==null&&(t={});for(const s of this.callbacks)await s.onEpochEnd(e,t)}async onBatchBegin(e,t){t==null&&(t={});for(const s of this.callbacks)await s.onBatchBegin(e,t)}async onBatchEnd(e,t){t==null&&(t={});for(const s of this.callbacks)await s.onBatchEnd(e,t)}async onTrainBegin(e){e==null&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class hae extends Hg{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){t==null&&(t={});const s=t.size==null?0:t.size;this.seen+=s;for(const r in t){const a=t[r];if(typeof a=="number")this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+a*s;else{let i;r in this.totals?i=this.totals[r]:this.totals[r]=0;const o=De(()=>st(this.totals[r],be(a,s)));this.totals[r]=o,i!=null&&i.dispose()}}}async onEpochEnd(e,t){if(t!=null)for(const s of this.params.metrics)this.totals[s]!=null&&(typeof this.totals[s]=="number"?t[s]=this.totals[s]/this.seen:De(()=>{const r=be(Tt(1,this.seen),this.totals[s]);t[s]=r,this.totals[s].dispose(),_r(t[s])}))}}class fae extends Hg{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){t==null&&(t={}),this.epoch.push(e);for(const s in t)this.history[s]==null&&(this.history[s]=[]),this.history[s].push(t[s])}async syncData(){const e=[],t=[],s=[];for(const a in this.history){const i=this.history[a];for(let o=0;o<i.length;++o)if(typeof i[o]!="number"){const l=i[o];e.push(l.data()),t.push(a),s.push(o)}}const r=await Promise.all(e);for(let a=0;a<r.length;++a)this.history[t[a]][s[a]].dispose(),this.history[t[a]][s[a]]=r[a][0]}}class dae extends Hg{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||$R,this.yieldEvery=t||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=uae),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");kB(this.yieldEvery)&&(this.maybeWait=Ire(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,s){const r=[];this.yield!=null&&(await Af(s),r.push(this.yield(e,t,s))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,this.epochBegin!=null&&(await Af(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const s=[];this.epochEnd!=null&&(await Af(t),s.push(this.epochEnd(e,t))),this.yieldEvery==="epoch"&&s.push(this.nextFrameFunc()),await Promise.all(s)}async onBatchBegin(e,t){this.batchBegin!=null&&(await Af(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const s=[];this.batchEnd!=null&&(await Af(t),s.push(this.batchEnd(e,t))),this.yieldEvery==="batch"?s.push(this.nextFrameFunc()):kB(this.yieldEvery)&&s.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(s)}async onTrainBegin(e){this.trainBegin!=null&&(await Af(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Af(e),await this.trainEnd(e))}}function D$(n,e){return n==null&&(n={}),n instanceof Hg?[n]:Array.isArray(n)&&n[0]instanceof Hg?n:jn(n).map(s=>new dae(s,e))}class So{constructor(){}static registerCallbackConstructor(e,t){se(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),So.checkForDuplicate(t),So.constructors[e]==null&&(So.constructors[e]=[]),So.constructors[e].push(t)}static checkForDuplicate(e){for(const t in So.constructors)So.constructors[+t].forEach(r=>{if(r===e)throw new Ne("Duplicate callback constructor.")})}static clear(){So.constructors={}}static createCallbacks(e){const t=[];for(const s in So.constructors){const r=+s;e>=r&&t.push(...So.constructors[r])}return t.map(s=>new s)}}So.constructors={};function L$(n,e,t,s,r,a,i,o,l){const u=new fae,h=[new hae,...So.createCallbacks(e)];n!=null&&h.push(...n),h.push(u);const f=new cae(h);return f.setParams({epochs:t,initialEpoch:s,samples:r,steps:a,batchSize:i,verbose:e,doValidation:o,metrics:l}),{callbackList:f,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ku(n,e={},t=!1){return o1(n,Eo.getMap().classNameMap,e,"layer",t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ow(n,e){return De(()=>{n.dtype!=="float32"&&(n=mt(n,"float32"));const t=Nt(A1(n),e,!0),s=Pp(t.shape,Sr()),r=ta(Qu(t,s));return Tt(n,r)})}function yx(n,e){return De(()=>Ps(A1(vt(e,n)),-1))}function kI(n,e){return De(()=>Ps(vr(vt(e,n)),-1))}function FI(n,e){return De(()=>{const t=vt(n,e),s=Ni(vr(n),Sr(),Number.MAX_VALUE),r=vr(Tt(t,s));return be(100,Ps(r,-1))})}function pae(n,e){return De(()=>{const t=Ni(e,Sr(),Number.MAX_VALUE),s=to(st(1,t)),r=Ni(n,Sr(),Number.MAX_VALUE),a=to(st(1,r));return Ps(A1(vt(s,a)),-1)})}function mae(n,e){return De(()=>{const t=Qu(0,vt(1,be(n,e)));return Ps(A1(t),-1)})}function gae(n,e){return De(()=>{const t=Qu(0,vt(1,be(n,e)));return Ps(t,-1)})}function yae(n,e){return De(()=>{const t=Nt(be(n,e),-1),s=Ro(be(vt(1,n),e),-1);return Qu(0,st(1,vt(s,t)))})}function wae(n,e){return De(()=>{const t=Math.log(2),s=vt(e,n),r=vt(st(s,zp(be(-2,s))),t);return Ps(r,-1)})}function Pg(n,e,t=!1){return De(()=>{if(t)e=rx(e);else{const s=Nt(e,e.shape.length-1,!0);e=Tt(e,s)}return e=Ni(e,Sr(),1-Sr()),ms(Nt(be(mt(n,"float32"),to(e)),e.shape.length-1))})}function lw(n,e,t=!1){return De(()=>{const s=mt(n1(Qre(n)),"int32");e=Ni(e,Sr(),1-Sr());const r=e.shape,a=Be(w5(s,r[r.length-1]),r);return Pg(a,e,t)})}function bae(n,e){if(!Bn(n.shape,e.shape))throw new Ne(`logits and labels must have the same shape, but got shapes ${JSON.stringify(n.shape)} and ${JSON.stringify(e.shape)}`);return De(()=>{const t=MA(e),s=ms(vr(e));return st(vt(t,be(e,n)),Wb(Ii(s)))})}function wx(n,e){return De(()=>{let t;return t=Ni(e,Sr(),1-Sr()),t=to(Tt(t,vt(1,t))),Ps(bae(n,t),-1)})}function xae(n,e){return De(()=>{const t=Ni(n,Sr(),1),s=Ni(e,Sr(),1);return Nt(be(n,to(Tt(t,s))),-1)})}function vae(n,e){return De(()=>{const t=to(st(Sr(),e));return Ps(vt(e,be(n,t)),-1)})}function U$(n,e){return De(()=>{const t=ow(n,-1),s=ow(e,-1),r=be(t,s);return ms(Nt(r,-1))})}const Aw={meanSquaredError:yx,meanAbsoluteError:kI,meanAbsolutePercentageError:FI,meanSquaredLogarithmicError:pae,squaredHinge:mae,hinge:gae,categoricalHinge:yae,logcosh:wae,categoricalCrossentropy:Pg,sparseCategoricalCrossentropy:lw,binaryCrossentropy:wx,kullbackLeiblerDivergence:xae,poisson:vae,cosineProximity:U$};function TC(n){if(typeof n=="string"){if(n in Aw)return Aw[n];let e=`Unknown loss ${n}`;throw n.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${n}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Ne(e)}else return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function R$(n,e){return De(()=>{const t=be(.5,no(e)),s=TA(Li(e,t),n.dtype);return Ps(kl(n,s),-1)})}function $$(n,e){return De(()=>TA(kl(Cp(n,-1),Cp(e,-1)),"float32"))}function Cae(n,e){return De(()=>mt(Nt(LA(kl(n,1),kl(e,1))),"float32"))}function Bae(n,e){return De(()=>mt(Nt(LA(kl(n,0),kl(e,1))),"float32"))}function Sae(n,e){return De(()=>{const t=Cae(n,e),s=Bae(n,e),r=st(t,s);return mt(pa(Li(r,0),Tt(t,r),0),"float32")})}function Nae(n,e){return wx(n,e)}function Iae(n,e){return n.rank===e.rank&&(n=Gf(n,[n.rank-1])),e=Cp(e,-1),e.dtype!==n.dtype&&(e=mt(e,n.dtype)),mt(kl(n,e),"float32")}const Eae=yx,kae=yx,Fae=kI,Tae=kI,Dae=FI,Lae=FI,_$=Pg,Uae=U$,O$=lw,uw={binaryAccuracy:R$,categoricalAccuracy:$$,precision:Sae,categoricalCrossentropy:_$,sparseCategoricalCrossentropy:O$,mse:Eae,MSE:kae,mae:Fae,MAE:Tae,mape:Dae,MAPE:Lae,cosine:Uae};function Rae(n){if(typeof n=="string"&&n in uw)return uw[n];if(typeof n!="string"&&n!=null)return n;throw new Ne(`Unknown metric ${n}`)}function Jy(n){if(CA(n!==null,`Unknown LossOrMetricFn ${n}`),typeof n=="string")return n;{let e;for(const t of Object.keys(Aw))if(Aw[t]===n){e=t;break}if(e!==void 0)return e;for(const t of Object.keys(uw))if(uw[t]===n){e=t;break}return e!==void 0?e:n.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $ae(n){const e={Adagrad:()=>Wd.adagrad(.01),Adadelta:()=>Wd.adadelta(1,.95,Sr()),Adam:()=>Wd.adam(.001,.9,.999,Sr()),Adamax:()=>Wd.adamax(.002,.9,.999,Sr(),0),RMSProp:()=>Wd.rmsprop(.001,.9,0,Sr()),SGD:()=>Wd.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,n in e)return e[n]();throw new Ne(`Unknown Optimizer ${n}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const E4=1*1024*1024;function k4(n,e,t=!1){if(n==null||typeof n!="object"||Object.getPrototypeOf(n)!==Object.prototype||!rS(n))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(t){const s=JSON.stringify(n);s.length>E4&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${s.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${E4}.`)}}function rS(n){if(n===null)return!0;if(typeof n=="object")if(Object.getPrototypeOf(n)===Object.prototype){const e=Object.keys(n);for(const t of e)if(typeof t!="string"||!rS(n[t]))return!1;return!0}else if(Array.isArray(n)){for(const e of n)if(!rS(e))return!1;return!0}else return!1;else{const e=typeof n;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _ae(n,e,t,s=console.log){const r=Qae(n),a=["Layer (type)","Input Shape","Output shape","Param #"];r?(e=e||90,t=t||[.32,.61,.89,1]):(e=e||115,t=t||[.24,.48,.7,.8,1]),t[t.length-1]<=1&&(t=t.map(h=>Math.floor(e*h)));let i;if(!r){a.push("Receives inputs"),i=[];for(const h in n.nodesByDepth)i.push(...n.nodesByDepth[h])}s("_".repeat(e)),cw(a,t,s),s("=".repeat(e));const o=n.layers;for(let h=0;h<o.length;++h)r?Mae(o[h],t,s):Hae(o[h],t,i,s),s((h===o.length-1?"=":"_").repeat(e));n.checkTrainableWeightsConsistency();const l=Oae(n),u=rw(n.nonTrainableWeights);s(`Total params: ${l+u}`),s(`Trainable params: ${l}`),s(`Non-trainable params: ${u}`),s("_".repeat(e))}function Oae(n){let e;return n.collectedTrainableWeights!=null?e=rw(n.collectedTrainableWeights):e=rw(n.trainableWeights),e}function Qae(n){let e=!0;const t=[],s=[];for(const r in n.nodesByDepth)t.push(n.nodesByDepth[r]);for(const r of t){if(r.length>1||r.length===1&&r[0].inboundLayers.length>1){e=!1;break}s.push(...r)}if(e)for(const r of n.layers){let a=!1;for(const i of r.inboundNodes)if(s.indexOf(i)!==-1)if(a){e=!1;break}else a=!0;if(!e)break}return e}function cw(n,e,t=console.log){let s="";for(let r=0;r<n.length;++r)r>0&&(s=s.slice(0,s.length-1)+" "),s+=n[r],s=s.slice(0,e[r]),s+=" ".repeat(e[r]-s.length);t(s)}function Mae(n,e,t){let s,r;try{r=n.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{r="multiple"}try{s=JSON.stringify(n.outputShape)}catch{s="multiple"}const a=n.name,i=n.getClassName(),o=[`${a} (${i})`,r,s,n.countParams().toString()];cw(o,e,t)}function Hae(n,e,t,s){let r,a;try{a=n.inboundNodes.map(f=>JSON.stringify(f.inputShapes)).join(",")}catch{a="multiple"}try{r=JSON.stringify(n.outputShape)}catch{r="multiple"}const i=[];for(const f of n.inboundNodes)if(!(t!=null&&t.length>0&&t.indexOf(f)===-1))for(let d=0;d<f.inboundLayers.length;++d){const m=f.inboundLayers[d].name,g=f.nodeIndices[d],w=f.tensorIndices[d];i.push(`${m}[${g}][${w}]`)}const o=n.name,l=n.getClassName(),u=i.length===0?"":i[0],h=[`${o} (${l})`,a,r,n.countParams().toString(),u];cw(h,e,s);for(let f=1;f<i.length;++f)cw(["","","","",i[f]],e,s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Q$(n,e,t){return(n==="inboundNodes"||n==="outputLayers"||n==="inputLayers")&&e===0&&typeof t=="string"}function aS(n,e){if(n===null)return null;if(typeof n=="string")return mf(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){const t=[],s=n.length;for(let r=0;r<s;++r){const a=n[r];Q$(e,r,a)?t.push(a):t.push(aS(a,e))}return t}else{const t={};for(const s of Object.keys(n)){const r=n[s];if(s==="name"&&typeof r=="string")t[s]=r;else{const a=mf(s);t[a]=aS(r,a)}}return t}}function iS(n,e){if(n==null)return null;if(typeof n=="string")return vu(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){const t=[],s=n.length;for(let r=0;r<s;++r){const a=n[r];Q$(e,r,a)?t.push(a):t.push(iS(a,e))}return t}else{const t={};for(const s of Object.keys(n)){const r=n[s],a=vu(s);(s==="name"||s==="className")&&typeof r=="string"?t[a]=r:t[a]=iS(r,s)}return t}}/** @license See the LICENSE file. */const M$="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Pae=n=>{const e=Object.keys(n);if(e.length===0)return!1;const t=e[0].split("/");return!isNaN(parseInt(t[t.length-1],10))};class bl extends pn{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const C=this.getClassName().toLowerCase();this.name=px(C)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Xc(this.inputs).length!==this.inputs.length)throw new Ne(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(C=>C.name)}`);Xc(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(C=>C.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const C of this.outputs){const N=C.sourceLayer,I=C.nodeIndex,L=C.tensorIndex;this.outputLayers.push(N),this.outputLayersNodeIndices.push(I),this.outputLayersTensorIndices.push(L)}for(const C of this.inputs){const N=C.sourceLayer,I=C.nodeIndex,L=C.tensorIndex;CA(I===0,"input layer has >1 nodes"),CA(L===0,"input layer has >1 tensors"),this.inputLayers.push(N),this.inputLayersNodeIndices.push(I),this.inputLayersTensorIndices.push(L)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let C=0;C<this.inputLayers.length;C++){const N=this.inputLayers[C];if(!(N instanceof c1))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${C} (0-based) originates from layer type ${N.getClassName()}.`);this.inputNames.push(N.name),this.feedInputShapes.push(N.batchInputShape),this.feedInputNames.push(N.name)}for(const C of this.outputLayers)this.outputNames.push(C.name);this.internalInputShapes=this.inputs.map(C=>C.shape),this.internalOutputShapes=this.outputs.map(C=>C.shape);const t={},s={},r={},a={},i={},o=[],l=(C,N,I,L,$,H)=>{(L==null||$==null||H==null)&&(L=C.sourceLayer,$=C.nodeIndex,H=C.tensorIndex);const U=L.inboundNodes[$];if(I.indexOf(U)!==-1)throw new Do(`The tensor ${C.name} at layer "${L.name}" is part of a cycle.`);if(N.indexOf(U)!==-1)return;this.containerNodes.add(bl.nodeKey(L,$)),L.id in i||(i[L.id]=Object.keys(i).length),I.indexOf(U)===-1&&I.push(U);const O=U.inboundLayers.length;for(let z=0;z<O;z++){const T=U.inputTensors[z],R=U.inboundLayers[z],W=U.nodeIndices[z],K=U.tensorIndices[z];l(T,N,I,R,W,K)}for(N.push(U);I.indexOf(U)>=0;)I.splice(I.indexOf(U),1);o.push(U)},u=[],h=[];for(const C of this.outputs)l(C,u,h);const f=o.slice().reverse();for(const C of f){s[C.id]=C,C.id in t||(t[C.id]=0);let N=t[C.id];const I=r[C.outboundLayer.id]==null?0:r[C.outboundLayer.id];N=Math.max(N,I),r[C.outboundLayer.id]=N,a[C.outboundLayer.id]=C.outboundLayer,t[C.id]=N;for(let L=0;L<C.inboundLayers.length;L++){const $=C.inboundLayers[L],H=C.nodeIndices[L],U=$.inboundNodes[H],O=t[U.id]==null?0:t[U.id];t[U.id]=Math.max(N+1,O),s[U.id]=U}}const d={};for(const C in t){const N=t[C];N in d||(d[N]=[]),d[N].push(s[C])}const m={};for(const C in r){const N=r[C];N in m||(m[N]=[]),m[N].push(a[C])}let g=Object.keys(m).map(C=>parseInt(C,10)).sort(qy);this.layers=[];for(const C of g){const N=m[C];N.sort((I,L)=>{const $=i[I.id],H=i[L.id];return $<H?-1:$>H?1:0});for(const I of N)I instanceof bl&&this.internalContainerRefs.push(I),this.layers.push(I)}this.layersByDepth=m,g=Object.keys(d).map(C=>parseInt(C,10)).sort(qy);const w=this.inputs.slice(),v=[];for(const C of g)for(const N of d[C]){const I=N.outboundLayer;if(I!=null){for(const L of N.inputTensors)if(w.indexOf(L)===-1)throw new Do(`Graph disconnected: cannot obtain value for tensor ${L} at layer "${I.name}". The following previous layers were accessed without issue: ${v}`);for(const L of N.outputTensors)w.push(L);v.push(I.name)}}this.nodesByDepth=d;const b=this.layers.map(C=>C.name);for(const C of b){const N=b.filter(I=>I===C).length;if(N!==1)throw new Do(`The name "${C}" is used ${N} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(b))}this.outboundNodes=[],this.inboundNodes=[],new gx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(C=>null),outputMasks:this.outputs.map(C=>null),inputShapes:this.inputs.map(C=>C.shape),outputShapes:this.outputs.map(C=>C.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(s=>s.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new Ne("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const s of this.layers)t.push(...s.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){const s={};let r=0;const a=Pae(e);a&&this.parseWeights(e);for(const o of this.layers)for(const[l,u]of o.weights.entries()){const h=a?`${u.name.split("/").slice(0,-1).join("/")+"/"}${l}`:u.originalName;if(s[h]!=null)throw new Ne(`Duplicate weight name: ${h}`);s[h]=u,r++}const i=[];for(const o in e){let l=o;if(s[o]==null){const u=o.split("/");l=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(s[l]!=null)i.push([s[l],e[o]]);else if(t)throw new Ne(`Provided weight data has no target variable: ${o}`);delete s[l]}if(t){const o=[];for(const l in s)o.push(l);if(o.length>0)throw new Ne(`${o.length} of ${r} weights are not set: ${o}`)}II(i)}parseWeights(e){for(const t in Object.keys(e)){const s=t.split("/"),r=["vars","layer_checkpoint_dependencies"],a=s.map(i=>i.startsWith("_")?i.slice(1):i).filter(i=>!r.includes(i)).join("/");a!==t&&(e[a]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion=`tfjs-layers ${M$}`,t.backend="TensorFlow.js",t}toJSON(e,t=!0){const s=iS(this.updatedConfig());return t?JSON.stringify(s):s}call(e,t){return De(()=>{e=jn(e);const s=new zc;for(let r=0;r<this.inputs.length;++r)s.add(this.inputs[r],e[r]);return mg(this.outputs,s,t)})}computeMask(e,t){return De(()=>{e=jn(e);let s;return t==null?s=_f(null,e.length):s=jn(t),this.runInternalGraph(e,s)[1]})}computeOutputShape(e){const t=sw(e);if(t.length!==this.inputLayers.length)throw new Ne(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const s={};for(let o=0;o<t.length;o++){const l=this.inputLayers[o],u=t[o],h=l.name+"_0_0";s[h]=u}const r=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(qy);if(r.length>1)for(const o of r){const l=this.nodesByDepth[o];for(const u of l){const h=u.outboundLayer;if(this.inputLayers.map(w=>w.id).indexOf(h.id)!==-1)continue;const f=[];for(let w=0;w<u.inboundLayers.length;w++){const v=u.inboundLayers[w],b=u.nodeIndices[w],C=u.tensorIndices[w],N=`${v.name}_${b}_${C}`,I=s[N];f.push(I)}const d=h.computeOutputShape(si(f)),m=sw(d),g=h.inboundNodes.indexOf(u);for(let w=0;w<m.length;w++){const v=`${h.name}_${g}_${w}`;s[v]=m[w]}}}const a=[],i=[];for(let o=0;o<this.outputLayers.length;o++){const l=this.outputLayers[o],u=this.outputLayersNodeIndices[o],h=this.outputLayersTensorIndices[o],f=`${l.name}_${u}_${h}`;i.push(f)}for(let o=0;o<i.length;o++){const l=i[o];CA(l in s),a.push(s[l])}return si(a)}runInternalGraph(e,t){t==null&&(t=_f(null,e.length));const s={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],h=e[l],f=t[l];s[u.id]=[h,f]}const r=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(qy);for(const l of r){const u=this.nodesByDepth[l];for(const h of u){const f=h.outboundLayer,d=h.inputTensors,m=h.outputTensors,g=new Array;for(const w of d)w.id in s&&g.push(s[w.id]);if(g.length===d.length){let w={},v,b,C,N;if(h.callArgs!=null&&(w=h.callArgs),g.length===1){const[I,L]=g[0];w.mask==null&&(w.mask=L),C=jn(f.call(I,w)),N=jn(f.computeMask(I,L)),v=[I],b=[L]}else v=g.map(I=>I[0]),b=g.map(I=>I[1]),w.mask==null&&(w.mask=b),C=jn(f.call(v,w)),N=jn(f.computeMask(v,b));if(f.activityRegularizer)throw new An("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let I=0;I<m.length;++I){const L=m[I],$=C[I],H=N[I];s[L.id]=[$,H]}}}}const a=[],i=[],o=[];for(const l of this.outputs){CA(l.id in s,`Could not compute output ${l.name} : ${l.id}`);const[u,h]=s[l.id];o.push(u.shape),a.push(u),i.push(h)}return[a,i,o]}buildNodeConversionMap(e){const t={};let s;for(const r of this.layers){s=r instanceof bl?1:0;for(let a=0;a<r.inboundNodes.length;a++){const i=bl.nodeKey(r,a);this.containerNodes.has(i)&&(t[i]=s,s+=1)}}return t}getLayer(e,t){if(t!=null)return this.findLayer(t);if(e==null)throw new Ne("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const s of this.layers)if(s.name===e)return s;throw new Ne(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new Ne(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return De(()=>{const e=[];for(const t of this.layers)for(let s=0;s<t.inboundNodes.length;++s){const r=bl.nodeKey(t,s);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e})}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),s=[];for(const i of this.layers){const o=i.getClassName(),l=i.getConfig(),u=[];for(let f=0;f<i.inboundNodes.length;f++){const d=i.inboundNodes[f],m=bl.nodeKey(i,f);let g={};if(this.containerNodes.has(m)){if(d.callArgs)try{JSON.stringify(d.callArgs),g=d.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${d.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),g={}}if(d.inboundLayers.length>0){const w=[];for(let v=0;v<d.inboundLayers.length;v++){const b=d.inboundLayers[v],C=d.nodeIndices[v],N=d.tensorIndices[v],I=bl.nodeKey(b,C);let L=t[I];L==null&&(L=0),w.push([b.name,L,N,g])}u.push(w)}}}const h={};h.name=i.name,h.className=o,h.config=l,h.inboundNodes=u,s.push(h)}e.layers=s;const r=[];for(let i=0;i<this.inputLayers.length;i++){const o=this.inputLayers[i],l=this.inputLayersNodeIndices[i],u=bl.nodeKey(o,l);if(!this.containerNodes.has(u))continue;let h=t[u];h==null&&(h=0);const f=this.inputLayersTensorIndices[i];r.push([o.name,h,f])}e.inputLayers=r;const a=[];for(let i=0;i<this.outputLayers.length;i++){const o=this.outputLayers[i],l=this.outputLayersNodeIndices[i],u=bl.nodeKey(o,l);if(!this.containerNodes.has(u))continue;let h=t[u];h==null&&(h=0);const f=this.outputLayersTensorIndices[i];a.push([o.name,h,f])}return e.outputLayers=a,e}static fromConfig(e,t,s={},r=!1){const a={},i={};function o(v,b){v.name in i?i[v.name].push(b):i[v.name]=[b]}function l(v,b){const C=[];let N;for(const I of b){const L=I[0],$=I[1],H=I[2];if(N=I[3]==null?{}:I[3],!(L in a)){o(v,b);return}const U=a[L];if(U.inboundNodes.length<=$){o(v,b);return}const O=U.inboundNodes[$];C.push(O.outputTensors[H])}C.length>0&&v.apply(si(C),N)}function u(v){const b=v.name,C=ku(v,t.customObjects!=null?t.customObjects:{});C.setFastWeightInitDuringBuild(r),a[b]=C,v.inboundNodes.forEach(I=>{if(!(I instanceof Array))throw new Ne(`Corrupted configuration, expected array for nodeData: ${I}`);o(C,I)})}const h=t.name,f=t.layers;for(const v of f)u(v);for(;!Nre(i);)for(const v of f){const b=a[v.name];if(b.name in i){const C=i[b.name];delete i[b.name];for(const N of C)l(b,N)}}const d=[],m=[],g=t.inputLayers;for(const v of g){const b=v[0],C=v[1],N=v[2];CA(b in a);const L=a[b].inboundNodes[C].outputTensors;d.push(L[N])}const w=t.outputLayers;for(const v of w){const b=v[0],C=v[1],N=v[2];CA(b in a);const L=a[b].inboundNodes[C].outputTensors;m.push(L[N])}return new e({inputs:d,outputs:m,name:h})}get stateful(){if(this._stateful)throw new Ne("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){De(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zae(n,e,t){const s=e.length;if(n==null||Array.isArray(n)&&n.length===0)return e.map(r=>null);if(s===1)return Array.isArray(n)&&n.length===1?n:typeof n=="object"&&e[0]in n?[n[e[0]]]:[n];if(Array.isArray(n)){if(n.length!==s)throw new Error(`Provided ${t} is an array of ${n.length} element(s), but the model has ${s} outputs. Make sure a set of weights is provided for each model output.`);return n}else if(typeof n=="object"&&Object.keys(n).length>0&&typeof n[Object.keys(n)[0]]=="object"){const r=[];return e.forEach(a=>{a in n?r.push(n[a]):r.push(null)}),r}else throw new Error(`The model has multiple (${s}) outputs, so ${t} must be either an array with ${s} elements or an object with ${e} keys. Provided ${t} not understood: ${JSON.stringify(n)}`)}function H$(n,e){return zae(n,e,"classWeight")}async function P$(n,e,t,s){if(t!=null){const r=De(()=>{if(n.shape.length===1)return Eu(n);if(n.shape.length===2){if(n.shape[1]>1)return Cp(n,1);if(n.shape[1]===1)return Be(n,[n.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${n.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${n.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),a=Array.from(await r.data());on(r);const i=[];return a.forEach(o=>{if(t[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);i.push(t[o])}),Ma(i,"float32")}else return null}function jae(n,e){return be(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Vae=32;function z$(n,e){let t,s;const r=e;t=r.xs,s=r.ys,se(t!=null&&s!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const a=F4("input",n.inputNames,t),i=F4("output",n.outputNames,s),o=a[0].shape[0];se(a.length===n.inputs.length,()=>`LayersModel has ${n.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(n.inputNames)})`),se(i.length===n.outputs.length,()=>`LayersModel has ${n.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(n.outputNames)})`);for(let l=0;l<a.length;l++)se(a[l].shape[0]===o,()=>`Batch size mismatch: input ${n.inputNames[l]} has ${a[l].shape[0]}; expected  ${o} based on input ${n.inputNames[0]}.`);for(let l=0;l<i.length;l++)se(i[l].shape[0]===o,()=>`Batch size mismatch: output ${n.outputNames[l]} has ${i[l].shape[0]}; expected  ${o} based on input ${n.inputNames[0]}.`);return{xs:a,ys:i}}function F4(n,e,t){if(t instanceof ps)return[t];if(Array.isArray(t))return se(t.length===e.length,()=>`Received an array of ${t.length} Tensors, but expected ${e.length} to match the ${n} keys ${e}.`),t;{const s=[];for(const r of e){if(t[r]==null)throw new Ne(`The feature data generated by the dataset lacks the required ${n} key '${r}'.`);s.push(t[r])}return s}}function Gae(n){if(n.length===3)throw new An("Validation with sample weights is not implemented yet.");return{xs:n[0],ys:n[1]}}async function Kae(n,e,t){const s=t.batchesPerEpoch!=null;if(se(n.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),se(t!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),se(t.epochs!=null&&t.epochs>0&&Number.isInteger(t.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${t.epochs}`),se(!s||t.batchesPerEpoch>0&&Number.isInteger(t.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${t.batchesPerEpoch}`),se(t.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),n.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");n.isTraining=!0;try{const r=t.validationData!=null;let a,i;if(r)if(T4(t.validationData))se(t.validationBatches==null||t.validationBatches>0&&Number.isInteger(t.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${t.validationBatches}`);else{const v=Gae(t.validationData);a=v.xs,i=v.ys}const o=n.makeTrainFunction(),l=n.getDedupedMetricsNames();let u;r?u=l.slice().concat(l.map(v=>"val_"+v)):u=l.slice();const h=D$(t.callbacks,t.yieldEvery),f=t.verbose==null?1:t.verbose,{callbackList:d,history:m}=L$(h,f,t.epochs,null,null,Wae(e,t),null,r,u);d.setModel(n),n.history=m,await d.onTrainBegin(),n.stopTraining_=!1;let g=t.initialEpoch==null?0:t.initialEpoch,w=await e.iterator();for(;g<t.epochs;){const v={};await d.onEpochBegin(g);let b=0,C=0;for(s||(w=await e.iterator());!s||b<t.batchesPerEpoch;){const N=await w.next();if(s&&N.done){console.warn(`You provided \`batchesPerEpoch\` as ${t.batchesPerEpoch}, but your dataset iterator ran out of data after ${b} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${t.batchesPerEpoch*t.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(N.value!=null){const{xs:I,ys:L}=z$(n,N.value),$={};$.batch=C,$.size=I[0].shape[0],await d.onBatchBegin(C,$);const H=[];if(t.classWeight!=null){const z=H$(t.classWeight,n.outputNames);for(let T=0;T<z.length;++T)H.push(await P$(L[T],null,z[T]))}const U=I.concat(L).concat(H),O=o(U);on(U);for(let z=0;z<l.length;++z){const T=l[z],R=O[z];$[T]=R,_r(R)}await d.onBatchEnd(C,$),T$($),C++,b++}if(s?b>=t.batchesPerEpoch:N.done){if(r){let I;T4(t.validationData)?I=jn(await n.evaluateDataset(t.validationData,{batches:t.validationBatches})):I=jn(n.evaluate(a,i,{batchSize:t.validationBatchSize==null?Vae:t.validationBatchSize,verbose:0}));for(let L=0;L<n.metricsNames.length;++L)v[`val_${n.metricsNames[L]}`]=I[L]}break}if(n.stopTraining_)break}if(await d.onEpochEnd(g,v),g++,n.stopTraining_)break}return await d.onTrainEnd(),await n.history.syncData(),n.history}finally{n.isTraining=!1}}function Wae(n,e){let t=null;return e.batchesPerEpoch!=null?t=e.batchesPerEpoch:Number.isFinite(n.size)&&(t=n.size),t}function T4(n){return typeof n.iterator=="function"}function qae(n){return typeof n.next=="function"}async function Xae(n,e,t){t=t||{};const s=t.batches!=null,r=n.testFunction;let a=[];if(t.verbose>0)throw new An("Verbose mode is not implemented yet.");se(!s||t.batches>0&&Number.isInteger(t.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(t.batches)}`);const i=qae(e)?e:await e.iterator();let o=0,l=0;for(;!s||l<t.batches;){const u=await i.next();if(a=De(()=>{if(u.value){const{xs:h,ys:f}=z$(n,u.value),d=h.concat(f),m=De(()=>r(d));if(on(d),l===0)for(let w=0;w<m.length;++w)a.push(Ut(0));const g=d[0].shape[0];for(let w=0;w<m.length;++w){const v=m[w],b=a[w];a[w]=De(()=>st(a[w],be(g,v))),l>0&&on(b)}on(m),o+=g,++l}return a}),u.done){s&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${t.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<a.length;++u){const h=a[u];a[u]=Tt(a[u],o),on(h)}return si(a)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function DC(n){se(n>0&&Number.isInteger(n),()=>`batchSize is required to be a positive integer, but got ${n}`)}function sg(n,e,t){return n==null?[null]:Array.isArray(n)?n.map(s=>Nf(s,e,t-e)):Nf(n,e,t-e)}function oS(n,e){return De(()=>n==null?null:Array.isArray(n)?n.map(t=>oS(t,e)):g$(n,e.dtype==="int32"?e:mt(e,"int32")))}function LC(n,e){const t=[];let s=0,r=null;for(;s<n;)r=s+e,r>=n&&(r=n),t.push([s,r]),s=r;return t}function j$(n){const e=[];n instanceof ps&&(n=[n]);for(let t=0;t<n.length;++t){const s=n[t];if(s.rank===1)e.push(l1(s,1));else{if(s.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(s)}}return e}function yl(n,e){if(n==null)return;const t=[];if(e instanceof ps)t.push(e.id);else if(Array.isArray(e))e.forEach(r=>t.push(r.id));else if(e!=null)for(const r in e){const a=e[r];t.push(a.id)}const s=[];if(n instanceof ps)t.indexOf(n.id)===-1&&s.push(n);else if(Array.isArray(n))n.forEach(r=>{t.indexOf(r.id)===-1&&s.push(r)});else if(n!=null)for(const r in n){const a=n[r];t.indexOf(a.id)===-1&&s.push(a)}s.forEach(r=>{r.isDisposed||r.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Yae(n){return n instanceof ps}function lS(n){return Array.isArray(n)}function D4(n){return!Yae(n)&&!lS(n)}function L4(n,e,t,s=!0,r=""){if(e==null||e.length===0){if(n!=null){let i=!1;if(lS(n)&&n.length>0)i=!0;else if(D4(n)){for(const o in n)if(n.hasOwnProperty(o)){i=!0;break}}else i=!0;if(i)throw new Ne(`Error when checking model ${r} expected no data, but got ${n}`)}return[]}if(n==null)return e.map(i=>null);let a;if(D4(n)){n=n,a=[];for(const i of e){if(n[i]==null)throw new Ne(`No data provided for "${i}". Need data for each key in: ${e}`);a.push(n[i])}}else if(lS(n)){if(n=n,n.length!==e.length)throw new Ne(`Error when checking model ${r}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${n}`);a=n}else{if(n=n,e.length>1)throw new Ne(`The model ${r} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${n.shape}`);a=[n]}if(a=j$(a),t!=null)for(let i=0;i<e.length;++i){if(t[i]==null)continue;const o=a[i];if(o.shape.length!==t[i].length)throw new Ne(`Error when checking ${r}: expected ${e[i]} to have ${t[i].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<t[i].length;++l){if(l===0&&!s)continue;const u=o.shape[l],h=t[i][l];if(h!=null&&h>=0&&u!==h)throw new Ne(`${r} expected a batch of elements where each example has shape [${t[i].slice(1,t[i].length)}] (i.e.,tensor shape [*,${t[i].slice(1,t[i].length)}]) but the ${r} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return a}function Jae(n,e,t){const s=Xc(n.map(a=>a.shape[0]));s.sort();const r=Xc(e.map(a=>a.shape[0]));if(r.sort(),s.length>1)throw new Ne(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(n.map(a=>a.shape))}`);if(r.length>1)throw new Ne(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(a=>a.shape))}`);if(s.length>0&&r.length>0&&!Bn(s,r))throw new Ne(`Input Tensors should have the same number of samples as target Tensors. Found ${s[0]} input sample(s) and ${r[0]} target sample(s).`)}function Zae(n,e,t){const s=[yx,wx,Pg];for(let r=0;r<n.length;++r){const a=n[r],i=e[r],o=t[r];if(i!=null){if(i===Pg&&a.shape[a.shape.length-1]===1)throw new Ne(`You are passing a target array of shape ${a.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(s.indexOf(i)!==-1){const l=a.shape.slice(1),u=o.slice(1);for(let h=0;h<l.length;++h){const f=l[h],d=u[h];if(d!=null&&f!==d)throw new Ne(`A target Tensor with shape ${a.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function U4(n,e,t,s=!0,r=""){let a;if(Array.isArray(n)){if(n.length!==e.length)throw new Ne(`Error when checking model ${r}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${n.length} Tensors(s).`);a=n}else{if(e.length>1)throw new Ne(`The model expects ${e.length} ${r} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(n.shape)}.`);a=[n]}if(t!=null)for(let i=0;i<e.length;++i){if(t[i]==null)continue;const o=a[i];if(o.shape.length!==t[i].length)throw new Ne(`Error when checking ${r}: expected ${e[i]} to have ${t[i].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<t[i].length;++l){if(l===0&&!s)continue;const u=o.shape[l],h=t[i][l];if(h!=null&&h!==u)throw new Ne(`Error when checking ${r}: expected ${e[i]} to have shape ${JSON.stringify(t[i])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function eie(n,e){if(n==null||Array.isArray(n)&&n.length===0)return e.map(s=>[]);let t;if(typeof n=="string"||typeof n=="function")t=[n];else if(Array.isArray(n)||typeof n=="object")t=n;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${n}`);if(Array.isArray(t))return e.map(s=>t);{const s=[];for(const r of e){let a=t.hasOwnProperty(r)?t[r]:[];Array.isArray(a)||(a=[a]),s.push(a)}return s}}const tie="layers-model";class yp extends bl{constructor(e){super(e),this.isTraining=!1}summary(e,t,s=console.log){if(!this.built)throw new Ne("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");_ae(this,e,t,s)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=$ae(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof wh))throw new Ne("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new Ne(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)e.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),t.push(TC(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Ne(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);t=e.loss.map(o=>TC(o))}else{const i=TC(e.loss);this.outputs.forEach(o=>{t.push(i)})}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const o=this.internalOutputShapes[i],l=this.outputNames[i];this.feedOutputNames.push(l),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[i])}const s=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Sf("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(s.indexOf(i)!==-1)continue;const o=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([o,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const r=eie(e.metrics,this.outputNames),a=(i,o,l)=>{this.outputNames.length>1&&(o=this.outputNames[i]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([l,i])};Sf("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(s.indexOf(i)!==-1)continue;const o=r[i];(u=>{const h="";let f,d,m;for(const g of u){if(typeof g=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(g)!==-1){const v=this.internalOutputShapes[i];v[v.length-1]===1||this.lossFunctions[i]===wx?["accuracy","acc"].indexOf(g)!==-1?d=R$:["crossentropy","ce"].indexOf(g)!==-1&&(d=Nae):this.lossFunctions[i]===lw?["accuracy","acc"].indexOf(g)!==-1?d=Iae:["crossentropy","ce"].indexOf(g)!==-1&&(d=O$):["accuracy","acc"].indexOf(g)!==-1?d=$$:["crossentropy","ce"].indexOf(g)!==-1&&(d=_$);let b;["accuracy","acc"].indexOf(g)!==-1?b="acc":["crossentropy","ce"].indexOf(g)!==-1&&(b="ce"),m=d,f=h+b}else m=Rae(g),f=h+Jy(g);let w;Sf(f,()=>{w=m}),a(i,f,w)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,s={}){const r=s.batchSize==null?32:s.batchSize;DC(r);const i=this.standardizeUserDataXY(e,t,!0,r);try{const o=i[0].concat(i[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,o,r,s.verbose,s.steps);return si(u)}finally{yl(i[0],e),yl(i[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),Xae(this,e,t)}checkNumSamples(e,t,s,r="steps"){let a;if(s!=null){if(a=null,t!=null)throw new Ne(`If ${r} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else if(e!=null)Array.isArray(e)?a=e[0].shape[0]:a=e.shape[0];else throw new Ne(`Either the input data should have a defined shape, or ${r} shoud be specified.`);return a}execute(e,t){if(Array.isArray(t)&&t.length===0)throw new Ne("`outputs` is an empty Array, which is not allowed.");const s=Array.isArray(t),r=s?t:[t],a=this.retrieveSymbolicTensors(r),i=new zc;if(e instanceof ps&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Ne(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)i.add(this.inputs[l],e[l])}else for(const l of this.inputs){const u=e[l.name];if(u==null)throw new Ne(`No value is provided for the model's input ${l.name}`);i.add(l,u)}const o=mg(a,i);return s?o:o[0]}retrieveSymbolicTensors(e){const t=_f(null,e.length);let s=e.length;for(const r of this.layers){const a=Array.isArray(r.output)?r.output:[r.output],i=a.map(o=>o.name);for(let o=0;o<e.length;++o){const l=i.indexOf(e[o]);if(l!==-1&&(t[o]=a[l],s--),s===0)break}if(s===0)break}if(s>0){const r=[];throw t.forEach((a,i)=>{a==null&&r.push(e[i])}),new Ne(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(r)}`)}return t}predictLoop(e,t=32,s=!1){return De(()=>{const r=this.checkNumSamples(e);if(s)throw new An("Verbose predictLoop() is not implemented yet.");const a=LC(r,t),i=this.outputs.map(o=>[]);for(let o=0;o<a.length;++o)De(()=>{const u=a[o][0],h=a[o][1],f=sg(e,u,h),d=[];if(Array.isArray(f))for(let g=0;g<f.length;++g)d.push({key:this.inputs[g],value:f[g]});else d.push({key:this.inputs[0],value:f});const m=new zc(d);return mg(this.outputs,m)}).forEach((u,h)=>i[h].push(u));return si(i.map(o=>dr(o,0)))})}predict(e,t={}){const s=j$(e);U4(s,this.inputNames,this.feedInputShapes,!1);try{const r=t.batchSize==null?32:t.batchSize;return DC(r),this.predictLoop(s,r)}finally{yl(s,e)}}predictOnBatch(e){U4(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,s=!0,r){if(this.optimizer_==null)throw new Do("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const a=[];for(let i=0;i<this.feedOutputShapes.length;++i){const o=this.feedOutputShapes[i];this.feedLossFns[i]===lw?a.push(o.slice(0,o.length-1).concat([1])):a.push(o)}if(e=L4(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=L4(t,this.feedOutputNames,a,!1,"target"),Jae(e,t),Zae(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&r!=null&&r>0&&e[0].shape[0]%r!==0)throw new Ne(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${r}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,s,r,a=!0,i){const[o,l]=this.standardizeUserDataXY(e,t,a,i);if(s!=null)throw new Error("sample weight is not supported yet.");let u=null;if(r!=null){const h=H$(r,this.outputNames);u=[];for(let f=0;f<h.length;++f)u.push(await P$(l[f],null,h[f]))}return[o,l,u]}testLoop(e,t,s,r=0,a){return De(()=>{const i=this.checkNumSamples(t,s,a,"steps"),o=[];if(r>0)throw new An("Verbose mode is not implemented yet.");if(a!=null)throw new An("steps mode in testLoop() is not implemented yet");{const l=LC(i,s),u=Ma(Fl(0,i));for(let h=0;h<l.length;++h){const f=l[h][0],d=l[h][1],m=Nf(u,f,d-f),g=oS(t,m),w=e(g);if(h===0)for(let v=0;v<w.length;++v)o.push(Ut(0));for(let v=0;v<w.length;++v){const b=w[v];o[v]=st(o[v],be(d-f,b))}}for(let h=0;h<o.length;++h)o[h]=Tt(o[h],i)}return o})}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let s=0;s<e.length;++s){const r=e[s];let a=r;if(y4(e,r)>1){const i=y4(e.slice(0,s),r);a+=`_${i}`}t.push(a)}return t}makeTrainFunction(){return e=>{const t=[],s=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],o=()=>{const f=[];for(let w=0;w<this.inputs.length;++w)f.push({key:this.inputs[w],value:s[w]});const d=new zc(f),m=mg(this.outputs,d,{training:!0});let g;for(let w=0;w<this.lossFunctions.length;++w){const v=this.lossFunctions[w];let b=v(r[w],m[w]);a[w]!=null&&(b=jae(b,a[w]));const C=Ps(b);t.push(C),w===0?g=b:g=st(g,b)}for(let w=0;w<this.metricsTensors.length;++w){let v;if(this.outputs.length>1&&w<this.outputs.length)v=t[w];else{const b=this.metricsTensors[w][0],C=this.metricsTensors[w][1];v=Ps(b(r[C],m[C]))}_r(v),i.push(v)}return g=Ps(g),this.calculateLosses().forEach(w=>{g=st(g,w)}),g},l=this.collectedTrainableWeights.map(f=>f.read());return[this.optimizer_.minimize(o,!0,l)].concat(i)}}makeTestFunction(){this.testFunction=e=>De(()=>{const t=[];let s;const r=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let u=0;u<this.inputs.length;++u)i.push({key:this.inputs[u],value:r[u]});const o=new zc(i),l=mg(this.outputs,o);for(let u=0;u<this.lossFunctions.length;++u){const h=this.lossFunctions[u],f=Ps(h(a[u],l[u]));u===0?s=f:s=st(s,f),t.push(s)}for(let u=0;u<this.metricsTensors.length;++u){const h=this.metricsTensors[u][0],f=this.metricsTensors[u][1],d=Ps(h(a[f],l[f]));t.push(d)}return t})}async fit(e,t,s={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let r,a,i,o,l,u,h,f,d;try{const m=s.batchSize==null?32:s.batchSize;DC(m);const w=await this.standardizeUserData(e,t,s.sampleWeight,s.classWeight,!1,m);r=w[0],a=w[1],d=w[2];let v=!1,b;if(s.validationData!=null&&s.validationData.length>0){if(v=!0,s.validationData.length===2)l=s.validationData[0],u=s.validationData[1];else throw s.validationData.length===3?new An("validationData including sample weights is not supported yet."):new Ne(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${s.validationData} is invalid.`);const z=await this.standardizeUserData(l,u,null,null,!0,m);h=z[0],f=z[1],b=h.concat(f)}else if(s.validationSplit!=null&&s.validationSplit>0&&s.validationSplit<1){v=!0;const O=Math.floor(r[0].shape[0]*(1-s.validationSplit)),z=r[0].shape[0];h=sg(r,O,z),i=r,r=sg(r,0,O),f=sg(a,O,z),o=a,a=sg(a,0,O),b=h.concat(f)}else s.validationSteps!=null&&(v=!0);const C=r.concat(a).concat(d);this.checkTrainableWeightsConsistency();const N=this.makeTrainFunction(),I=this.getDedupedMetricsNames();let L,$;v?(this.makeTestFunction(),L=this.testFunction,$=I.slice().concat(I.map(O=>"val_"+O))):(L=null,b=[],$=I.slice());const H=D$(s.callbacks,s.yieldEvery);return await this.fitLoop(N,C,I,m,s.epochs,s.verbose,H,L,b,s.shuffle,$,s.initialEpoch,null,null)}finally{this.isTraining=!1,yl(r,e),yl(a,t),yl(i,e),yl(o,t),yl(h,l),yl(f,u),d!=null&&on(d)}}async fitLoop(e,t,s,r,a,i,o,l,u,h,f,d,m,g){r==null&&(r=32),a==null&&(a=1),h==null&&(h=!0),d==null&&(d=0);let w=!1;if(l!=null&&u!=null&&(w=!0),g!=null&&(w=!0,m==null))throw new Ne("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const v=this.checkNumSamples(t,r,m,"steps_per_epoch");let b;v!=null&&(b=Fl(0,v)),i==null&&(i=1);const{callbackList:C,history:N}=L$(o,i,a,d,v,m,r,w,f);C.setModel(this),this.history=N,await C.onTrainBegin(),this.stopTraining_=!1;for(let I=d;I<a;++I){await C.onEpochBegin(I);const L={};if(m!=null)throw new An("stepsPerEpoch mode is not implemented yet.");{if(h==="batch")throw new An("batch shuffling is not implemneted yet");h&&jW(b);const $=Ma(b),H=LC(v,r);for(let U=0;U<H.length;++U){const O={};if(await C.onBatchBegin(U,O),De(()=>{const z=H[U][0],T=H[U][1],R=Nf($,z,T-z);O.batch=U,O.size=T-z;const W=oS(t,R),K=e(W);for(let re=0;re<s.length;++re){const P=s[re],Y=K[re];O[P]=Y,_r(Y)}if(U===H.length-1&&w){const re=this.testLoop(l,u,r);for(let P=0;P<s.length;++P){const Y=s[P],J=re[P];_r(J),L["val_"+Y]=J}}}),await C.onBatchEnd(U,O),T$(O),this.stopTraining_)break}$.dispose()}if(await C.onEpochEnd(I,L),this.stopTraining_)break}return await C.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return Kae(this,e,t)}async trainOnBatch(e,t){const s=await this.standardizeUserData(e,t),r=s[0],a=s[1],o=this.makeTrainFunction()(r.concat(a)),l=[];for(const u of o){const h=await u.data();l.push(h[0])}return on(o),yl(s[0],e),yl(s[1],t),si(l)}getNamedWeights(e){const t=[],s=e!=null&&e.trainableOnly,r=s?this.trainableWeights:this.weights,a=this.getWeights(s);for(let i=0;i<r.length;++i)s&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const t=KT().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-KT().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=vu(this.loss);else if(Array.isArray(this.loss)){for(const t of this.loss)if(typeof t!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(t=>vu(t))}else{const t=Object.keys(this.loss);e={};const s=this.loss;for(const r of t)if(typeof s[r]=="string")e[r]=vu(s[r]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[vu(Jy(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>vu(Jy(e)));{const e={};for(const t in this.metrics)e[t]=vu(Jy(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const t=aS(e.optimizer_config),s=ku(t);let r;if(typeof e.loss=="string")r=mf(e.loss);else if(Array.isArray(e.loss))r=e.loss.map(i=>mf(i));else if(e.loss!=null){r={};for(const i in e.loss)r[i]=mf(e.loss[i])}let a;if(Array.isArray(e.metrics))a=e.metrics.map(i=>mf(i));else if(e.metrics!=null){a={};for(const i in e.metrics)a[i]=mf(e.metrics[i])}this.compile({loss:r,metrics:a,optimizer:s})}async save(e,t){if(typeof e=="string"){const u=tU(e);if(u.length===0)throw new Ne(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new Ne(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new Ne("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const s=await PB(this.getNamedWeights(t)),o={modelTopology:this.toJSON(null,!1),format:tie,generatedBy:`TensorFlow.js tfjs-layers v${M$}`,convertedBy:null};if((t==null?!1:t.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:h,specs:f}=await PB(await this.optimizer.getWeights(),u);s.specs.push(...f),s.data=JL([s.data,h])}return this.userDefinedMetadata!=null&&(k4(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=s.data,o.weightSpecs=s.specs,e.save(o)}setUserDefinedMetadata(e){k4(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}yp.className="Model";at(yp);class V$ extends yp{}V$.className="Functional";at(V$);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zg extends yp{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:px("sequential_"),e.layers!=null)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(s=>s<0))throw new Ne(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof zg||e instanceof yp;let s;if(t){if(s=e,s.outputs.length!==1)throw new Ne("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(s.inputs.length!==1)throw new Ne("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new Ne("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const r=sae({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(r)}if(t)this.outputs=s.outputs,this.inputs=s.inputs;else{if(e.inboundNodes.length!==1)throw new Ne(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new Ne("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=N$(this.outputs[0])}this.inboundNodes=[],new gx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:_f(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(r=>r.shape),outputShapes:this.outputs[0].shape})}else{const r=e.apply(this.outputs[0]);if(Array.isArray(r))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[r],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return this.model==null&&this.build(),this.model.call(e,t)}build(e){if(Un(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new yp({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,s=console.log){this.built||this.build(),super.summary(e,t,s)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,t,s={}){if(!this.built)throw new Do("The model needs to be compiled before being used.");return this.model.evaluate(e,t,s)}async evaluateDataset(e,t){if(!this.built)throw new Do("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return this.model==null&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,s={}){if(!this.built)throw new Do("The model needs to be compiled before being used.");return this.model.fit(e,t,s)}async fitDataset(e,t){if(!this.built)throw new Do("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,s={},r=!1){let a,i={};if(t instanceof Array){if(t[0].className==null||t[0].className==="Merge")throw new Ne("Legacy serialization format not supported yet.");a=t}else se(t.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=t.layers,delete t.layers,i=t;const o=new e(i);if(!(o instanceof zg))throw new An(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const l of a){const h=ku(l,void 0,r);r&&h.setFastWeightInitDuringBuild(!0),o.add(h)}return o}set stopTraining(e){if(this.model==null)throw new Ne("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new Ne("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const s={};s.className=t.getClassName(),s.config=t.getConfig(),e.push(s)}return{name:this.name,layers:e}}}zg.className="Sequential";at(zg);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let ga=class extends Gp{getConfig(){return{}}};class G$ extends ga{apply(e,t=1){return Hre(e,t)}}G$.className="elu";at(G$);class K$ extends ga{apply(e){return S5(e)}}K$.className="selu";at(K$);class W$ extends ga{apply(e){return MA(e)}}W$.className="relu";at(W$);class q$ extends ga{apply(e){return De(()=>Rf(6,MA(e)))}}q$.className="relu6";at(q$);class X$ extends ga{apply(e){return e}}X$.className="linear";at(X$);class Y$ extends ga{apply(e){return kA(e)}}Y$.className="sigmoid";at(Y$);class J$ extends ga{apply(e){return zre(e)}}J$.className="hardSigmoid";at(J$);class Z$ extends ga{apply(e){return zp(e)}}Z$.className="softplus";at(Z$);class e_ extends ga{apply(e){return Pre(e)}}e_.className="softsign";at(e_);class t_ extends ga{apply(e){return Uf(e)}}t_.className="tanh";at(t_);let TI=class extends ga{apply(e,t=-1){return rx(e,t)}};TI.className="softmax";at(TI);class n_ extends ga{apply(e,t=-1){return m5(e,t)}}n_.className="logSoftmax";at(n_);class s_ extends ga{apply(e){return De(()=>De(()=>{const t=Math.sqrt(2),s=be(.5,st(1,f5(Tt(e,t))));return be(e,s)}))}}s_.className="gelu";at(s_);class r_ extends ga{apply(e){return De(()=>be(.5,be(e,st(1,Uf(be(ta(Tt(2,Math.PI)),st(e,be(.044715,Du(e,3)))))))))}}r_.className="gelu_new";at(r_);class a_ extends ga{apply(e){return De(()=>be(e,Uf(zp(e))))}}a_.className="mish";at(a_);class i_ extends ga{apply(e,t=1){return De(()=>be(kA(be(e,t)),e))}}i_.className="swish";at(i_);function oh(n){return n.getClassName()}function UC(n,e={}){return o1(n,Eo.getMap().classNameMap,e,"activation")}function lh(n){if(n==null){const e={};return e.className="linear",e.config={},UC(e)}if(typeof n=="string"){const e={};return e.className=n,e.config={},UC(e)}else return n instanceof ga?n:UC(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function nie(n){if(n!=null&&typeof n!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${n}`)}class o_ extends Gp{}class l_ extends o_{constructor(e){super(),nie(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return De(()=>{let t=Br([1]);return this.hasL1&&(t=st(t,Nt(be(this.l1,vr(e))))),this.hasL2&&(t=st(t,Nt(be(this.l2,A1(e))))),Be(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}l_.className="L1L2";at(l_);const R4={l1l2:"L1L2"};function as(n){return gI(n)}function $4(n,e={}){return o1(n,Eo.getMap().classNameMap,e,"regularizer")}function Cs(n){if(n==null)return null;if(typeof n=="string"){const t={className:n in R4?R4[n]:n,config:{}};return $4(t)}else return n instanceof o_?n:$4(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class A_ extends pn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,t){e=Kt(e);let s=MA(e);return this.maxValue!=null&&(s=Ni(s,0,this.maxValue)),s}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}A_.className="ReLU";at(A_);class u_ extends pn{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){const s=Kt(e);return Kb(s,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}u_.className="LeakyReLU";at(u_);class c_ extends pn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=vs(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Cs(e.alphaRegularizer),this.alphaConstraint=kr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new Ne(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Un(e);const t=e.slice(1);if(this.sharedAxes!=null)for(const r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const s={};if(this.sharedAxes!=null)for(let r=1;r<e.length;++r)s[r]=e[r];this.inputSpec=[new Nr({ndim:e.length,axes:s})],this.built=!0}call(e,t){return e=Kt(e),ex(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Ds(this.alphaInitializer),alphaRegularizer:as(this.alphaRegularizer),alphaConstraint:Er(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}c_.className="PReLU";at(c_);let h_=class extends pn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new An(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){const s=Kt(e);return e1(s)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};h_.className="ELU";at(h_);class f_ extends pn{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,t){const s=Kt(e);return be(s,mt(Li(s,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}f_.className="ThresholdedReLU";at(f_);class d_ extends pn{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new TI().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,t){return De(()=>{let s=Kt(e);const r=t.mask;if(r!=null){const a=be(vt(vi(s.shape),mt(r,s.dtype)),Ut(-1e9));s=st(s,a)}return this.axis instanceof Array?this.axis.length>1?Ii(vt(s,qb(s,this.axis,!0))):this.softmax(s,this.axis[0]):this.softmax(s,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}d_.className="Softmax";at(d_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wp(n,e,t){if(typeof n=="number")return _f(n,e);if(n.length!==e)throw new Ne(`The ${t} argument must be an integer or tuple of ${e} integers. Received: ${n.length} elements.`);for(let s=0;s<e;++s){const r=n[s];if(!_re(r))throw new Ne(`The ${t} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(n)} including a non-integer number ${r}`)}return n}function Il(n,e,t,s,r=1){if(n==null)return n;const a=e+(e-1)*(r-1);let i;return t==="same"?i=n:i=n-a+1,Math.floor((i+s-1)/s)}function BA(n,e,t,s){if(n==null)return null;if(s==="valid")n=n*e+ih([t-e,0]);else if(s==="same")n=n*e;else throw new Ne(`Unsupport padding mode: ${s}.`);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function DI(n,e){return De(()=>(Zs(e),e==="channelsFirst"?In(n,[0,2,3,1]):n))}function p_(n,e){return De(()=>(Zs(e),e==="channelsFirst"?In(n,[0,2,3,4,1]):n))}function sie(n,e,t,s=1,r="valid",a,i=1){return De(()=>{if(a==null&&(a=Tl()),Zs(a),n.shape.length!==3)throw new Ne(`The input of a conv1dWithBias operation should be 3, but is ${n.shape.length} instead.`);if(e.shape.length!==3)throw new Ne(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(t!=null&&t.shape.length!==1)throw new Ne(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if(a==="channelsFirst"&&(n=In(n,[0,2,1])),r==="causal")throw new An("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=l5(n,e,s,r==="same"?"same":"valid","NWC",i);return t!=null&&(o=Ol(o,t)),o})}function _4(n,e,t,s=[1,1],r="valid",a,i,o=null){return De(()=>{if(a==null&&(a=Tl()),Zs(a),n.rank!==3&&n.rank!==4)throw new Ne(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${n.rank}.`);if(e.rank!==3&&e.rank!==4)throw new Ne(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${n.rank}.`);let l=DI(n,a);if(r==="causal")throw new An("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=lR({x:l,filter:e,strides:s,pad:r==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:t,activation:o}),a==="channelsFirst"&&(l=In(l,[0,3,1,2])),l})}function rie(n,e,t,s=[1,1,1],r="valid",a,i){return De(()=>{if(a==null&&(a=Tl()),Zs(a),n.rank!==4&&n.rank!==5)throw new Ne(`conv3dWithBias expects input to be of rank 4 or 5, but received ${n.rank}.`);if(e.rank!==4&&e.rank!==5)throw new Ne(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${n.rank}.`);let o=p_(n,a);if(r==="causal")throw new An("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=EU(o,e,s,r==="same"?"same":"valid","NDHWC",i),t!=null&&(o=Ol(o,t)),a==="channelsFirst"&&(o=In(o,[0,4,1,2,3])),o})}class bx extends pn{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",bx.verifyArgs(t),this.rank=e,Or(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new An(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=wp(t.kernelSize,e,"kernelSize"),this.strides=wp(t.strides==null?1:t.strides,e,"strides"),this.padding=t.padding==null?"valid":t.padding,ro(this.padding),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Zs(this.dataFormat),this.activation=lh(t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.biasInitializer=vs(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=kr(t.biasConstraint),this.biasRegularizer=Cs(t.biasRegularizer),this.activityRegularizer=Cs(t.activityRegularizer),this.dilationRate=wp(t.dilationRate==null?1:t.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Ne(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Ne(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Ne(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(CA("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!yI(e.kernelSize,"number",1,3))throw new Ne(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:oh(this.activation),useBias:this.useBias,biasInitializer:Ds(this.biasInitializer),biasRegularizer:as(this.biasRegularizer),activityRegularizer:as(this.activityRegularizer),biasConstraint:Er(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class Kp extends bx{constructor(e,t){super(e,t),this.kernel=null,Kp.verifyArgs(t),this.filters=t.filters,Or(this.filters,"filters"),this.kernelInitializer=vs(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=kr(t.kernelConstraint),this.kernelRegularizer=Cs(t.kernelRegularizer)}build(e){e=Un(e);const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new Ne(`The channel dimension of the input should be defined. Found ${e[t]}`);const s=e[t],r=this.kernelSize.concat([s,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:s}}],this.built=!0}call(e,t){return De(()=>{e=Kt(e);let s;const r=this.bias==null?null:this.bias.read(),a=c$(this.activation.getClassName());if(a!=null&&this.rank===2)s=_4(e,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate,a);else{if(this.rank===1)s=sie(e,this.kernel.read(),r,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)s=_4(e,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)s=rie(e,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new An("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(s=this.activation.apply(s))}return s})}computeOutputShape(e){e=Un(e);const t=[],s=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let a=0;a<s.length;++a){const i=Il(s[a],this.kernelSize[a],this.padding,this.strides[a],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[a]);t.push(i)}let r=[e[0]];return this.dataFormat==="channelsLast"?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:Ds(this.kernelInitializer),kernelRegularizer:as(this.kernelRegularizer),kernelConstraint:Er(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new Ne(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class f1 extends Kp{constructor(e){super(2,e),f1.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!yI(e.kernelSize,"number",1,2))throw new Ne(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}f1.className="Conv2D";at(f1);class d1 extends Kp{constructor(e){super(3,e),d1.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new Ne(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}d1.className="Conv3D";at(d1);class m_ extends f1{constructor(e){if(super(e),this.inputSpec=[new Nr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Ne(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Un(e),e.length!==4)throw new Ne("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new Ne("The channel dimension of the inputs should be defined. Found `None`.");const s=e[t],r=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Nr({ndim:4,axes:{[t]:s}})],this.built=!0}call(e,t){return De(()=>{let s=Kt(e);if(s.shape.length!==4)throw new Ne(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const r=s.shape,a=r[0];let i,o;this.dataFormat==="channelsFirst"?(i=2,o=3):(i=1,o=2);const l=r[i],u=r[o],h=this.kernelSize[0],f=this.kernelSize[1],d=this.strides[0],m=this.strides[1],g=BA(l,d,h,this.padding),w=BA(u,m,f,this.padding),v=[a,g,w,this.filters];this.dataFormat!=="channelsLast"&&(s=In(s,[0,2,3,1]));let b=u5(s,this.kernel.read(),v,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(b=In(b,[0,3,1,2])),this.bias!=null&&(b=Ol(b,this.bias.read(),this.dataFormat)),this.activation!=null&&(b=this.activation.apply(b)),b})}computeOutputShape(e){e=Un(e);const t=e.slice();let s,r,a;this.dataFormat==="channelsFirst"?(s=1,r=2,a=3):(s=3,r=1,a=2);const i=this.kernelSize[0],o=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return t[s]=this.filters,t[r]=BA(t[r],l,i,this.padding),t[a]=BA(t[a],u,o,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}m_.className="Conv2DTranspose";at(m_);class g_ extends d1{constructor(e){if(super(e),this.inputSpec=[new Nr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Ne(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Un(e),e.length!==5)throw new Ne("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new Ne("The channel dimension of the inputs should be defined. Found `None`.");const s=e[t],r=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Nr({ndim:5,axes:{[t]:s}})],this.built=!0}call(e,t){return De(()=>{let s=Kt(e);if(s.shape.length!==5)throw new Ne(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const r=s.shape,a=r[0];let i,o,l;this.dataFormat==="channelsFirst"?(l=2,i=3,o=4):(l=1,i=2,o=3);const u=r[l],h=r[i],f=r[o],d=this.kernelSize[0],m=this.kernelSize[1],g=this.kernelSize[2],w=this.strides[0],v=this.strides[1],b=this.strides[2],C=BA(u,w,d,this.padding),N=BA(h,v,m,this.padding),I=BA(f,b,g,this.padding),L=[a,C,N,I,this.filters];this.dataFormat!=="channelsLast"&&(s=In(s,[0,2,3,4,1]));let $=FU(s,this.kernel.read(),L,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&($=In($,[0,4,1,2,3])),this.bias!==null&&($=Ol($,this.bias.read(),this.dataFormat)),this.activation!==null&&($=this.activation.apply($)),$})}computeOutputShape(e){e=Un(e);const t=e.slice();let s,r,a,i;this.dataFormat==="channelsFirst"?(s=1,r=2,a=3,i=4):(s=4,r=1,a=2,i=3);const o=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],h=this.strides[0],f=this.strides[1],d=this.strides[2];return t[s]=this.filters,t[r]=BA(t[r],h,o,this.padding),t[a]=BA(t[a],f,l,this.padding),t[i]=BA(t[i],d,u,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}g_.className="Conv3DTranspose";at(g_);class y_ extends Kp{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,t.filters==null)throw new Ne("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(t.kernelInitializer!=null||t.kernelRegularizer!=null||t.kernelConstraint!=null)throw new Ne("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(t.padding!=null&&t.padding!=="same"&&t.padding!=="valid")throw new Ne(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=vs(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Cs(t.depthwiseRegularizer),this.depthwiseConstraint=kr(t.depthwiseConstraint),this.pointwiseInitializer=vs(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Cs(t.pointwiseRegularizer),this.pointwiseConstraint=kr(t.pointwiseConstraint)}build(e){if(e=Un(e),e.length<this.rank+2)throw new Ne(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null||e[t]<0)throw new Ne(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);const s=e[t],r=this.kernelSize.concat([s,this.depthMultiplier]),a=[];for(let o=0;o<this.rank;++o)a.push(1);a.push(s*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new Nr({ndim:this.rank+2,axes:{[t]:s}})],this.built=!0}call(e,t){return De(()=>{e=Kt(e);let s;if(this.rank===1)throw new An("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=In(e,[0,2,3,1])),s=N5(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(s=Ol(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),this.dataFormat==="channelsFirst"&&(s=In(s,[0,3,1,2])),s})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Ds(this.depthwiseInitializer),e.pointwiseInitializer=Ds(this.pointwiseInitializer),e.depthwiseRegularizer=as(this.depthwiseRegularizer),e.pointwiseRegularizer=as(this.pointwiseRegularizer),e.depthwiseConstraint=Er(this.depthwiseConstraint),e.pointwiseConstraint=Er(this.pointwiseConstraint),e}}y_.className="SeparableConv";class w_ extends y_{constructor(e){super(2,e)}}w_.className="SeparableConv2D";at(w_);class xx extends Kp{constructor(e){super(1,e),xx.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!yI(e.kernelSize,"number",1,1))throw new Ne(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}xx.className="Conv1D";at(xx);class b_ extends pn{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return De(()=>{if(e=Kt(e),this.dataFormat==="channelsLast"){const s=Yy(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Yy(s,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const s=Yy(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Yy(s,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}b_.className="Cropping2D";at(b_);class x_ extends pn{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Zs(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,Ure(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const t=e[2]==null?null:this.size[0]*e[2],s=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],t,s]}else{const t=e[1]==null?null:this.size[0]*e[1],s=e[2]==null?null:this.size[1]*e[2];return[e[0],t,s,e[3]]}}call(e,t){return De(()=>{let s=Kt(e);const r=s.shape;if(this.dataFormat==="channelsFirst"){s=In(s,[0,2,3,1]);const a=this.size[0]*r[2],i=this.size[1]*r[3],o=this.interpolation==="nearest"?Bl.resizeNearestNeighbor(s,[a,i]):Bl.resizeBilinear(s,[a,i]);return In(o,[0,3,1,2])}else{const a=this.size[0]*r[1],i=this.size[1]*r[2];return this.interpolation==="nearest"?Bl.resizeNearestNeighbor(s,[a,i]):Bl.resizeBilinear(s,[a,i])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}x_.className="UpSampling2D";at(x_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function aie(n,e,t=[1,1],s="valid",r,a){return De(()=>{r==null&&(r=Tl()),Zs(r);let i=DI(n,r);if(n.rank!==4)throw new Ne(`Input for depthwiseConv2d is required to be 4-D, but is instead ${n.rank}-D`);if(e.rank!==4)throw new Ne(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return i=Z0(i,e,t,s==="same"?"same":"valid","NHWC",a),r==="channelsFirst"&&(i=In(i,[0,3,1,2])),i})}class v_ extends bx{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=vs(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=kr(e.depthwiseConstraint),this.depthwiseRegularizer=Cs(e.depthwiseRegularizer)}build(e){if(e=Un(e),e.length<4)throw new Ne(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const t=this.dataFormat==="channelsFirst"?1:3;if(e[t]==null||e[t]<0)throw new Ne(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);const s=e[t],r=[this.kernelSize[0],this.kernelSize[1],s,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[s*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return De(()=>{e=Kt(e);let s=aie(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(s=Ol(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),s})}computeOutputShape(e){e=Un(e);const t=this.dataFormat==="channelsFirst"?e[2]:e[1],s=this.dataFormat==="channelsFirst"?e[3]:e[2],r=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=Il(t,this.kernelSize[0],this.padding,this.strides[0]),i=Il(s,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],r,a,i]:[e[0],a,i,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Ds(this.depthwiseInitializer),e.depthwiseRegularizer=as(this.depthwiseRegularizer),e.depthwiseConstraint=Er(this.depthwiseRegularizer),e}}v_.className="DepthwiseConv2D";at(v_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function C_(n,e,t,s){if(Array.isArray(n)){if(e!=null||t!=null)throw new Ne("When inputs is an array, neither initialState or constants should be provided");s!=null&&(t=n.slice(n.length-s,n.length),n=n.slice(0,n.length-s)),n.length>1&&(e=n.slice(1,n.length)),n=n[0]}function r(a){return a==null||Array.isArray(a)?a:[a]}return e=r(e),t=r(t),{inputs:n,initialState:e,constants:t}}function B_(n,e,t,s=!1,r,a,i=!1,o=!1){return De(()=>{const l=e.shape.length;if(l<3)throw new Ne(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(Fl(2,l));e=In(e,u),i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),r!=null&&(r=mt(mt(r,"bool"),"float32"),r.rank===l-1&&(r=_a(r,-1)),r=In(r,u)),s&&(e=_o(e,0),r!=null&&(r=_o(r,0)));const h=[];let f,d=t;const m=e.shape[0],g=Oo(e);let w;r!=null&&(w=Oo(r));for(let b=0;b<m;++b){const C=g[b],N=De(()=>n(C,d));if(r==null)f=N[0],d=N[1];else{const I=De(()=>{const L=w[b],$=vt(no(L),L),H=st(be(N[0],L),be(d[0],$)),U=d.map((O,z)=>st(be(N[1][z],L),be(O,$)));return{output:H,newStates:U}});f=I.output,d=I.newStates}o&&h.push(f)}let v;return o&&(v=Ei(h,1)),[f,v,d]})}class bh extends pn{constructor(e){super(e);let t;if(e.cell==null)throw new Ne("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?t=new RI({cells:e.cell}):t=e.cell,t.stateSize==null)throw new Ne("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Nr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Fl(0,e).map(t=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){nS(e)&&(e=e[0]),e=e;let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const s=t[0];let r;if(this.returnSequences?r=[e[0],e[1],s]:r=[e[0],s],this.returnState){const a=[];for(const i of t)a.push([e[0],i]);return[r].concat(a)}else return r}computeMask(e,t){return De(()=>{Array.isArray(t)&&(t=t[0]);const s=this.returnSequences?t:null;if(this.returnState){const r=this.states.map(a=>null);return[s].concat(r)}else return s})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let s=0;s<e;++s)t.push(null);return t}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new An("Constants support is not implemented in RNN yet.");nS(e)&&(e=e[0]),e=e;const t=this.stateful?e[0]:null,s=e.slice(2);this.inputSpec[0]=new Nr({shape:[t,null,...s]});const r=[e[0]].concat(e.slice(2));this.cell.build(r);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!Bn(this.stateSpec.map(i=>i.shape[i.shape.length-1]),a))throw new Ne(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(i=>new Nr({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,t=!1){De(()=>{if(!this.stateful)throw new vA("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape[0];if(s==null)throw new Ne("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(r=>Br([s,r])):this.states_=[Br([s,this.cell.stateSize])];else if(e==null)on(this.states_),this.keptStates!=null&&(on(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(r=>Br([s,r])):this.states_[0]=Br([s,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Ne(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t===!0?this.keptStates.push(this.states_.slice()):on(this.states_);for(let r=0;r<this.states_.length;++r){const a=e[r],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[r]:this.cell.stateSize,o=[s,i];if(!Bn(a.shape,o))throw new Ne(`State ${r} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${a.shape}`);this.states_[r]=a}}this.states_=this.states_.map(r=>_r(r.clone()))})}apply(e,t){let s=t==null?null:t.initialState,r=t==null?null:t.constants;t==null&&(t={});const a=C_(e,s,r,this.numConstants);e=a.inputs,s=a.initialState,r=a.constants;let i=[],o=[];if(s!=null){t.initialState=s,i=i.concat(s),this.stateSpec=[];for(const u of s)this.stateSpec.push(new Nr({shape:u.shape}));o=o.concat(this.stateSpec)}if(r!=null&&(t.constants=r,i=i.concat(r),this.numConstants=r.length),i[0]instanceof UA){const u=[e].concat(i),h=this.inputSpec.concat(o),f=this.inputSpec;this.inputSpec=h;const d=super.apply(u,t);return this.inputSpec=f,d}else return super.apply(e,t)}call(e,t){return De(()=>{const s=t==null?null:t.mask,r=t==null?null:t.training;let a=t==null?null:t.initialState;e=Kt(e),a==null&&(this.stateful?a=this.states_:a=this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==i)throw new Ne(`RNN Layer has ${i} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:r},u=B_((g,w)=>{const v=this.cell.call([g].concat(w),o);return[v[0],v.slice(1)]},e,a,this.goBackwards,s,null,this.unroll,this.returnSequences),h=u[0],f=u[1],d=u[2];this.stateful&&this.resetStates(d,r);const m=this.returnSequences?f:h;return this.returnState?[m].concat(d):m})}getInitialState(e){return De(()=>{let t=Br(e.shape);return t=Nt(t,[1,2]),t=l1(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(s=>s>1?eS(t,[1,s]):t):this.cell.stateSize>1?[eS(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(t.numConstants=this.numConstants);const s=this.cell.getConfig();return this.getClassName()===bh.className&&(t.cell={className:this.cell.getClassName(),config:s}),Object.assign(Object.assign(Object.assign({},s),e),t)}static fromConfig(e,t,s={}){const r=t.cell,a=ku(r,s);return new e(Object.assign(t,{cell:a}))}}bh.className="RNN";at(bh);class vx extends pn{}class LI extends vx{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Or(this.units,"units"),this.activation=lh(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=vs(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=vs(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=vs(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Cs(e.kernelRegularizer),this.recurrentRegularizer=Cs(e.recurrentRegularizer),this.biasRegularizer=Cs(e.biasRegularizer),this.kernelConstraint=kr(e.kernelConstraint),this.recurrentConstraint=kr(e.recurrentConstraint),this.biasConstraint=kr(e.biasConstraint),this.dropout=Ip([1,ih([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Ip([1,ih([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Un(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return De(()=>{if(e=e,e.length!==2)throw new Ne(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let s=e[1];e=e[0];const r=t.training==null?!1:t.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ah({ones:()=>no(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ah({ones:()=>no(s),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));let a;const i=this.dropoutMask,o=this.recurrentDropoutMask;i!=null?a=DA(be(e,i),this.kernel.read()):a=DA(e,this.kernel.read()),this.bias!=null&&(a=Ol(a,this.bias.read())),o!=null&&(s=be(s,o));let l=st(a,DA(s,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:oh(this.activation),useBias:this.useBias,kernelInitializer:Ds(this.kernelInitializer),recurrentInitializer:Ds(this.recurrentInitializer),biasInitializer:Ds(this.biasInitializer),kernelRegularizer:as(this.kernelRegularizer),recurrentRegularizer:as(this.recurrentRegularizer),biasRegularizer:as(this.biasRegularizer),activityRegularizer:as(this.activityRegularizer),kernelConstraint:Er(this.kernelConstraint),recurrentConstraint:Er(this.recurrentConstraint),biasConstraint:Er(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}LI.className="SimpleRNNCell";at(LI);class S_ extends bh{constructor(e){e.cell=new LI(e),super(e)}call(e,t){return De(()=>{this.cell.dropoutMask!=null&&(on(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(on(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=t==null?null:t.mask,r=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:s,training:r,initialState:a})})}static fromConfig(e,t){return new e(t)}}S_.className="SimpleRNN";at(S_);class UI extends vx{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Ne("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Or(this.units,"units"),this.activation=lh(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=lh(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=vs(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=vs(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=vs(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Cs(e.kernelRegularizer),this.recurrentRegularizer=Cs(e.recurrentRegularizer),this.biasRegularizer=Cs(e.biasRegularizer),this.kernelConstraint=kr(e.kernelConstraint),this.recurrentConstraint=kr(e.recurrentConstraint),this.biasConstraint=kr(e.biasConstraint),this.dropout=Ip([1,ih([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Ip([1,ih([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Un(e);const t=e[e.length-1];this.kernel=this.addWeight("kernel",[t,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return De(()=>{if(e=e,e.length!==2)throw new Ne(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const s=t.training==null?!1:t.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ah({ones:()=>no(e),rate:this.dropout,training:s,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ah({ones:()=>no(r),rate:this.recurrentDropout,training:s,count:3,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,i=this.recurrentDropoutMask;let o,l,u;0<this.dropout&&this.dropout<1&&(e=be(e,a[0]));let h=DA(e,this.kernel.read());this.useBias&&(h=Ol(h,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=be(r,i[0]));const f=this.recurrentKernel.read(),[d,m]=Ci(f,[2*this.units,this.units],f.rank-1),g=DA(r,d),[w,v,b]=Ci(h,3,h.rank-1),[C,N]=Ci(g,2,g.rank-1);o=this.recurrentActivation.apply(st(w,C)),l=this.recurrentActivation.apply(st(v,N));const I=DA(be(l,r),m);u=this.activation.apply(st(b,I));const L=st(be(o,r),be(st(1,ms(o)),u));return[L,L]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:oh(this.activation),recurrentActivation:oh(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Ds(this.kernelInitializer),recurrentInitializer:Ds(this.recurrentInitializer),biasInitializer:Ds(this.biasInitializer),kernelRegularizer:as(this.kernelRegularizer),recurrentRegularizer:as(this.recurrentRegularizer),biasRegularizer:as(this.biasRegularizer),activityRegularizer:as(this.activityRegularizer),kernelConstraint:Er(this.kernelConstraint),recurrentConstraint:Er(this.recurrentConstraint),biasConstraint:Er(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}UI.className="GRUCell";at(UI);class N_ extends bh{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new UI(e),super(e)}call(e,t){return De(()=>{this.cell.dropoutMask!=null&&(on(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(on(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=t==null?null:t.mask,r=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:s,training:r,initialState:a})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}}N_.className="GRU";at(N_);class Cx extends vx{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Or(this.units,"units"),this.activation=lh(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=lh(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=vs(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=vs(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=vs(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Cs(e.kernelRegularizer),this.recurrentRegularizer=Cs(e.recurrentRegularizer),this.biasRegularizer=Cs(e.biasRegularizer),this.kernelConstraint=kr(e.kernelConstraint),this.recurrentConstraint=kr(e.recurrentConstraint),this.biasConstraint=kr(e.biasConstraint),this.dropout=Ip([1,ih([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Ip([1,ih([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;e=Un(e);const s=e[e.length-1];this.kernel=this.addWeight("kernel",[s,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let r;if(this.useBias){if(this.unitForgetBias){const a=this.biasInitializer,i=this.units;r=new(t=class extends Ho{apply(l,u){const h=a.apply([i]),f=new bI().apply([i]),d=a.apply([i*2]);return b4(b4(h,f),d)}},t.className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return De(()=>{const s=t.training==null?!1:t.training;if(e=e,e.length!==3)throw new Ne(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1];const a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ah({ones:()=>no(e),rate:this.dropout,training:s,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ah({ones:()=>no(r),rate:this.recurrentDropout,training:s,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;let l,u,h,f;0<this.dropout&&this.dropout<1&&(e=be(e,i[0]));let d=DA(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=be(r,o[0])),d=st(d,DA(r,this.recurrentKernel.read())),this.useBias&&(d=Ol(d,this.bias.read()));const[m,g,w,v]=Ci(d,4,d.rank-1);l=this.recurrentActivation.apply(m),u=this.recurrentActivation.apply(g),h=st(be(u,a),be(l,this.activation.apply(w))),f=this.recurrentActivation.apply(v);const b=be(f,this.activation.apply(h));return[b,b,h]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:oh(this.activation),recurrentActivation:oh(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Ds(this.kernelInitializer),recurrentInitializer:Ds(this.recurrentInitializer),biasInitializer:Ds(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:as(this.kernelRegularizer),recurrentRegularizer:as(this.recurrentRegularizer),biasRegularizer:as(this.biasRegularizer),activityRegularizer:as(this.activityRegularizer),kernelConstraint:Er(this.kernelConstraint),recurrentConstraint:Er(this.recurrentConstraint),biasConstraint:Er(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}Cx.className="LSTMCell";at(Cx);class I_ extends bh{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Cx(e),super(e)}call(e,t){return De(()=>{this.cell.dropoutMask!=null&&(on(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(on(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=t==null?null:t.mask,r=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:s,training:r,initialState:a})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}}I_.className="LSTM";at(I_);class RI extends vx{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return De(()=>{e=e;let s=e.slice(1);const r=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?r.push(s.splice(0,o.stateSize.length)):r.push(s.splice(0,1));r.reverse();const a=[];let i;for(let o=0;o<this.cells.length;++o){const l=this.cells[o];s=r[o],o===0?i=[e[0]].concat(s):i=[i[0]].concat(s),i=l.call(i,t),a.push(i.slice(1))}s=[];for(const o of a.slice().reverse())s.push(...o);return[i[0]].concat(s)})}build(e){nS(e)&&(e=e[0]),e=e;let t;this.cells.forEach((s,r)=>{Sf(`RNNCell_${r}`,()=>{s.build(e),Array.isArray(s.stateSize)?t=s.stateSize[0]:t=s.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){const e=super.getConfig(),t=a=>({className:a.getClassName(),config:a.getConfig()}),r={cells:this.cells.map(t)};return Object.assign(Object.assign({},e),r)}static fromConfig(e,t,s={}){const r=[];for(const a of t.cells)r.push(ku(a,s));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const s of this.cells)t.push(...s.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return sS(e)}setWeights(e){const t=[];for(const s of this.cells){const r=s.weights.length,a=e.splice(r);for(let i=0;i<s.weights.length;++i)t.push([s.weights[i],a[i]])}II(t)}}RI.className="StackedRNNCells";at(RI);function Ah(n){const{ones:e,rate:t,training:s=!1,count:r=1,dropoutFunc:a}=n,i=()=>a!=null?a(e(),t):y$(e(),t),o=()=>u1(i,e,s);return!r||r<=1?_r(o().clone()):Array(r).fill(void 0).map(o).map(u=>_r(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var iie=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};class E_ extends bh{constructor(e){if(e.unroll)throw new An("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new An("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Nr({ndim:5})]}call(e,t){return De(()=>{if(this.cell.dropoutMask!=null&&(on(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(on(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new Ne("ConvRNN2D cell does not support constants");const s=t==null?null:t.mask,r=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:s,training:r,initialState:a})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return De(()=>{const{stateSize:t}=this.cell,s=e.shape,r=this.computeSingleOutputShape(s),a=[r[0],...r.slice(2)],i=Br(a);return Array.isArray(t)?Array(t.length).fill(i):[i]})}resetStates(e,t=!1){De(()=>{if(!this.stateful)throw new vA("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape,r=this.computeSingleOutputShape(s),a=[r[0],...r.slice(2)];if(s[0]==null)throw new Ne("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Br(a)):this.states_=[Br(a)];else if(e==null)on(this.states_),this.keptStates!=null&&(on(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Br(a)):this.states_[0]=Br(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Ne(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):on(this.states_);for(let o=0;o<this.states_.length;++o){const l=e[o],u=a;if(!Bn(l.shape,u))throw new Ne(`State ${o} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[o]=l}}this.states_=this.states_.map(o=>_r(o.clone()))})}computeSingleOutputShape(e){const{dataFormat:t,filters:s,kernelSize:r,padding:a,strides:i,dilationRate:o}=this.cell,l=t==="channelsFirst",u=e[l?3:2],h=e[l?4:3],f=Il(u,r[0],a,i[0],o[0]),d=Il(h,r[1],a,i[1],o[1]);return[...e.slice(0,2),...l?[s,f,d]:[f,d,s]]}}E_.className="ConvRNN2D";class $I extends Cx{constructor(e){const{filters:t,kernelSize:s,strides:r,padding:a,dataFormat:i,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,Or(this.filters,"filters"),this.kernelSize=wp(s,2,"kernelSize"),this.kernelSize.forEach(l=>Or(l,"kernelSize")),this.strides=wp(r||1,2,"strides"),this.strides.forEach(l=>Or(l,"strides")),this.padding=a||"valid",ro(this.padding),this.dataFormat=i||"channelsLast",Zs(this.dataFormat),this.dilationRate=wp(o||1,2,"dilationRate"),this.dilationRate.forEach(l=>Or(l,"dilationRate"))}build(e){var t;e=Un(e);const s=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[s]==null)throw new Ne(`The channel dimension of the input should be defined. Found ${e[s]}`);const r=e[s],a=4,i=this.kernelSize.concat([r,this.filters*a]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*a]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,h=this.filters;l=new(t=class extends Ho{apply(d,m){const g=u.apply([h]),w=vi([h]),v=u.apply([h*2]);return wI([g,w,v])}},t.className="CustomInit",t)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*a],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return De(()=>{if(e.length!==3)throw new Ne(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const s=t.training||!1,r=e[0],a=e[1],i=e[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ah({ones:()=>no(r),rate:this.dropout,training:s,count:o,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(j,ue,Q)=>!ue||!ue[Q]?j:be(ue[Q],j);let h=u(r,l,0),f=u(r,l,1),d=u(r,l,2),m=u(r,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ah({ones:()=>no(a),rate:this.recurrentDropout,training:s,count:o,dropoutFunc:this.dropoutFunc}));const g=this.recurrentDropoutMask;let w=u(a,g,0),v=u(a,g,1),b=u(a,g,2),C=u(a,g,3);const N=3,[I,L,$,H]=Ci(this.kernel.read(),o,N),[U,O,z,T]=this.useBias?Ci(this.bias.read(),o):[null,null,null,null];h=this.inputConv(h,I,U,this.padding),f=this.inputConv(f,L,O,this.padding),d=this.inputConv(d,$,z,this.padding),m=this.inputConv(m,H,T,this.padding);const[R,W,K,re]=Ci(this.recurrentKernel.read(),o,N);w=this.recurrentConv(w,R),v=this.recurrentConv(v,W),b=this.recurrentConv(b,K),C=this.recurrentConv(C,re);const P=this.recurrentActivation.apply(st(h,w)),Y=this.recurrentActivation.apply(st(f,v)),J=st(be(Y,i),be(P,this.activation.apply(st(d,b)))),te=be(this.recurrentActivation.apply(st(m,C)),this.activation.apply(J));return[te,te,J]})}getConfig(){const e=super.getConfig(),{units:t}=e,s=iie(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},s),r)}inputConv(e,t,s,r){const a=ah(e,t,this.strides,r||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return s?Ol(a,s,this.dataFormat):a}recurrentConv(e,t){return ah(e,t,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}$I.className="ConvLSTM2DCell";at($I);class k_ extends E_{constructor(e){const t=new $I(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}k_.className="ConvLSTM2D";at(k_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class _I extends pn{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const t=e.shape,s=[];for(let r=0;r<this.noiseShape.length;++r)s.push(this.noiseShape[r]==null?t[r]:this.noiseShape[r]);return s}call(e,t){return De(()=>{this.invokeCallHook(e,t);const s=Kt(e);if(0<this.rate&&this.rate<1){const r=t.training==null?!1:t.training,a=this.getNoiseShape(s);return u1(()=>y$(s,this.rate,a,this.seed),()=>s,r)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}_I.className="Dropout";at(_I);class F_ extends _I{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}F_.className="SpatialDropout1D";at(F_);class T_ extends pn{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let t=null;e.batchSize!=null&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,Or(this.units,"units"),this.activation=lh(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=vs(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=vs(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=kr(e.kernelConstraint),this.biasConstraint=kr(e.biasConstraint),this.kernelRegularizer=Cs(e.kernelRegularizer),this.biasRegularizer=Cs(e.biasRegularizer),this.activityRegularizer=Cs(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Un(e);const t=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){e=Un(e);const t=e.slice();return t[t.length-1]=this.units,t}call(e,t){return De(()=>{this.invokeCallHook(e,t);const s=Kt(e),r=c$(this.activation.getClassName());let a;return r!=null?a=DA(s,this.kernel.read(),r,this.bias?this.bias.read():null):(a=DA(s,this.kernel.read()),this.bias!=null&&(a=Ol(a,this.bias.read())),this.activation!=null&&(a=this.activation.apply(a))),a})}getConfig(){const e={units:this.units,activation:oh(this.activation),useBias:this.useBias,kernelInitializer:Ds(this.kernelInitializer),biasInitializer:Ds(this.biasInitializer),kernelRegularizer:as(this.kernelRegularizer),biasRegularizer:as(this.biasRegularizer),activityRegularizer:as(this.activityRegularizer),kernelConstraint:Er(this.kernelConstraint),biasConstraint:Er(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}T_.className="Dense";at(T_);class D_ extends pn{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Un(e);for(const t of e.slice(1))if(t==null)throw new Ne(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Yc(e,1)]}call(e,t){return De(()=>{this.invokeCallHook(e,t);let s=Kt(e);if(this.dataFormat==="channelsFirst"&&s.rank>1){const r=[0];for(let a=2;a<s.rank;++a)r.push(a);r.push(1),s=In(s,r)}return Mre(s)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}D_.className="Flatten";at(D_);class L_ extends pn{constructor(e){super(e),this.supportsMasking=!0,this.activation=lh(e.activation)}call(e,t){return De(()=>{this.invokeCallHook(e,t);const s=Kt(e);return this.activation.apply(s)})}getConfig(){const e={activation:oh(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}L_.className="Activation";at(L_);class U_ extends pn{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return De(()=>(e=Kt(e),Ore(e,this.n)))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}U_.className="RepeatVector";at(U_);class R_ extends pn{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,t){const s="Total size of new array must be unchanged.",r=t.slice();let a=1,i=null;for(let l=0;l<r.length;++l){const u=r[l];if(this.isUnknown(u))if(i===null)i=l;else throw new Ne("Can only specifiy one unknown dimension.");else a*=u}const o=Yc(e);if(i!==null){if(a===0||o%a!==0)throw new Ne(s);r[i]=o/a}else if(o!==a)throw new Ne(s);return r}computeOutputShape(e){let t=!1;for(let s=0;s<e.length;++s)if(this.isUnknown(e[s])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return De(()=>{this.invokeCallHook(e,t);const s=Kt(e),r=s.shape,a=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return Be(s,a)})}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}R_.className="Reshape";at(R_);class $_ extends pn{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const t=Fl(1,e.dims.length+1);if(!Bn(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Nr({ndim:this.dims.length+1})]}computeOutputShape(e){e=Un(e);const t=e.slice();return this.dims.forEach((s,r)=>{t[r+1]=e[s]}),t}call(e,t){return In(Kt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}$_.className="Permute";at($_);class __ extends pn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const s=Kt(e);return tw(Sp(s,this.maskValue),-1)}call(e,t){return De(()=>{this.invokeCallHook(e,t);const s=Kt(e),i=tw(Sp(s,this.maskValue),-1,!0);return be(s,mt(i,s.dtype))})}}__.className="Masking";at(__);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class O_ extends pn{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let t=null;e.batchSize!=null&&(t=e.batchSize),e.inputLength==null?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(jn(e.inputLength))}this.inputDim=e.inputDim,Or(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Or(this.outputDim,"outputDim"),this.embeddingsInitializer=vs(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Cs(e.embeddingsRegularizer),this.activityRegularizer=Cs(e.activityRegularizer),this.embeddingsConstraint=kr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return De(()=>this.maskZero?(e=Kt(e),Sp(e,En(e))):null)}computeOutputShape(e){if(e=Un(e),this.inputLength==null)return[...e,this.outputDim];const t=jn(this.inputLength);if(t.length!==e.length-1)throw new Ne(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let s=0;for(let r=0;r<t.length;++r){const a=t[r],i=e[r+1];if(a!=null&&i!=null&&a!==i)throw new Ne(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);a==null&&(t[s]=i),s++}}return[e[0],...t,this.outputDim]}call(e,t){return De(()=>{this.invokeCallHook(e,t);let s=Kt(e);s.dtype!=="int32"&&(s=TA(s,"int32"));const r=g$(this.embeddings.read(),Be(s,[s.size]));return Be(r,Un(this.computeOutputShape(s.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Ds(this.embeddingsInitializer),embeddingsRegularizer:as(this.embeddingsRegularizer),activityRegularizer:as(this.activityRegularizer),embeddingsConstraint:Er(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}O_.className="Embedding";at(O_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class qf extends pn{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new An}computeElementwiseOpOutputShape(e,t){if(e==null||t==null)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(t.length===0)return e;const s=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const a=e[e.length-t.length+r],i=t[r];if(a==null||i==null||a<0||i<0)s.push(null);else if(a===1)s.push(i);else if(i===1)s.push(a);else{if(a!==i)throw new Ne("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));s.push(a)}}return s}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Un(e)]),e=e,e.length<2)throw new Ne(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(const a of e)a!=null&&a[0]!==null&&t.push(a[0]);if(t=Xc(t),t.length>1)throw new Ne(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let s=e[0]==null?null:e[0].slice(1);for(let a=1;a<e.length;++a){const i=e[a]==null?null:e[a].slice(1);s=this.computeElementwiseOpOutputShape(s,i)}const r=e.map(a=>a.length);e.indexOf(null)===-1&&Xc(r).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return De(()=>{if(e=e,this.reshapeRequired){const s=[],r=e.map(a=>a.rank);if(r.indexOf(null)===-1){const a=ih(r);for(let i of e){const o=i.rank;for(let l=0;l<a-o;++l)i=l1(i,1);s.push(i)}return this.mergeFunction(s)}else{let a=!1;for(const l of e){const u=l.rank;if(u==null){const h=l.shape,f=h[0],d=h.slice(1).concat([f]);let m=Be(l,[f].concat(Yc(h.slice(1))));m=In(m,[1,0]),m=Be(m,d),s.push(m),a=!0}else if(u>1){const h=Fl(1,u).concat([0]);s.push(In(l,h)),a=!0}else s.push(l)}let i=this.mergeFunction(s);const o=i.rank;if(a){if(o==null){const l=i.shape,u=l.length,h=l[u-1],f=[h].concat(l.slice(0,l.length-1));i=Be(In(Be(i,[-1,h]),[1,0]),f)}else if(o>1){const l=[o-1].concat(Fl(0,o-1));i=In(i,l)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let t;e[0]==null?t=null:t=e[0].slice(1);for(let r=1;r<e.length;++r){const a=e[r]==null?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,a)}let s=[];for(const r of e)r!=null&&r[0]!==null&&s.push(r[0]);return s=Xc(s),s.length===1?t=s.concat(t):t=[null].concat(t),t}computeMask(e,t){return De(()=>{if(t==null)return null;if(!Array.isArray(t))throw new Ne("`mask` should be an Array");if(!Array.isArray(e))throw new Ne("`inputs` should be an Array");if(t.length!==e.length)throw new Ne(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every(r=>r==null))return null;t=t.map(r=>r==null?r:_a(r,0));let s=t[0];for(let r=1;r<t.length-1;++r)s=LA(s,t[r]);return s})}}class Q_ extends qf{constructor(e){super(e)}mergeFunction(e){return De(()=>{let t=e[0].clone();for(let s=1;s<e.length;++s)t=st(t,e[s]);return t})}}Q_.className="Add";at(Q_);class M_ extends qf{constructor(e){super(e)}mergeFunction(e){return De(()=>{let t=e[0].clone();for(let s=1;s<e.length;++s)t=be(t,e[s]);return t})}}M_.className="Multiply";at(M_);class H_ extends qf{constructor(e){super(e)}mergeFunction(e){return De(()=>{let t=e[0].clone();for(let s=1;s<e.length;++s)t=st(t,e[s]);return be(1/e.length,t)})}}H_.className="Average";at(H_);class P_ extends qf{constructor(e){super(e)}mergeFunction(e){return De(()=>{let t=e[0];for(let s=1;s<e.length;++s)t=Qu(t,e[s]);return t})}}P_.className="Maximum";at(P_);class z_ extends qf{constructor(e){super(e)}mergeFunction(e){return De(()=>{let t=e[0];for(let s=1;s<e.length;++s)t=Rf(t,e[s]);return t})}}z_.className="Minimum";at(z_);class j_ extends qf{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new Ne("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(const r of e)if(r!=null){t=!1;break}if(t)return;const s=[];for(let r=0;r<e.length;++r){const a=e[r].slice();a.splice(this.axis,1);let i=!1;for(const o of s)if(Bn(o,a)){i=!0;break}i||s.push(a)}if(s.length>1)throw new Ne("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return De(()=>wI(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new Ne("A `Concatenate` layer should be called on a list of inputs.");const t=e,s=t[0].slice(),r=this.axis<0?s.length+this.axis:this.axis;for(const a of t.slice(1)){if(s[r]==null||a[r]==null){s[r]=null;break}s[r]+=a[r]}return s}computeMask(e,t){if(t==null)return null;if(!Array.isArray(t))throw new Ne("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Ne("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new Ne(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return De(()=>{let s=!0;if(t.forEach(i=>{if(i!=null){s=!1;return}}),s)return null;const r=[];for(let i=0;i<e.length;++i)t[i]==null?r.push(mt(no(e[i]),"bool")):t[i].rank<e[i].rank?r.push(_a(t[i],-1)):r.push(t[i]);const a=dr(r,this.axis);return i5(a,-1,!1)})}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}j_.className="Concatenate";at(j_);function rg(n,e){for(;n<0;)n+=e;return n}function oie(n,e,t){if(n.shape.length>3||e.shape.length>3)throw new An("batchDot is not implemented for tensors of 4D or higher rank yet");if(se(n.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${n.shape.length}`),se(n.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof t=="number"&&(t=[t,t]),n.dtype==="complex64"||e.dtype==="complex64")throw new An("batchDot is not implemented for complex64-type Tensors yet.");const s=n.shape.length,r=e.shape.length;t==null&&(t=[s-1,r-2]);const a=t;return De(()=>{let i;if(s>r){i=s-r;const l=[];for(let u=0;u<i;++u)l.push(1);e=Be(e,e.shape.concat(l))}else if(r>s){i=r-s;const l=[];for(let u=0;u<i;++u)l.push(1);n=Be(n,n.shape.concat(l))}else i=0;let o;if(n.shape.length===2&&e.shape.length===2)a[0]===a[1]?o=Nt(be(n,e),a[0]):o=Nt(be(In(n,[1,0]),e),a[1]);else{const l=a[0]!==n.shape.length-1,u=a[1]===e.shape.length-1;o=yn(n,e,l,u)}if(i>0){let l;s>r?l=s+r-3:l=s-1;const u=[];for(let h=l;h<l+i;++h)u.push(h);o=Gf(o,u)}return o.shape.length===1&&(o=_a(o,1)),o})}class V_ extends qf{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){se(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0],s=e[1];if(t.length>3||s.length>3)throw new An("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,s);if(t[r[0]]!==s[r[1]])throw new Ne(`Dimension incompatibility: ${t[r[0]]} !== ${s[r[1]]}`)}mergeFunction(e){if(e.length!==2)throw new Ne(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t=e[0],s=e[1],r;return Array.isArray(this.axes)?r=this.axes.map((a,i)=>rg(a,e[i].shape.length)):r=[rg(this.axes,t.shape.length),rg(this.axes,s.shape.length)],this.normalize&&(t=ow(t,r[0]),s=ow(s,r[1])),oie(t,s,r)}interpretAxes(e,t){let s;return Array.isArray(this.axes)?s=this.axes:s=[rg(this.axes,e.length),rg(this.axes,t.length)],s}computeOutputShape(e){se(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0].slice(),s=e[1].slice();if(t.length>3||s.length>3)throw new An("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,s);t.splice(r[0],1),s.splice(r[1],1),s.splice(0,1);const a=t.concat(s);return a.length===1&&a.push(1),a}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}V_.className="Dot";at(V_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class G_ extends pn{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return De(()=>{this.invokeCallHook(e,t);const s=Kt(e);return u1(()=>st(mx(s.shape,0,this.stddev),s),()=>s,t.training||!1)})}}G_.className="GaussianNoise";at(G_);class K_ extends pn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return De(()=>{this.invokeCallHook(e,t);const s=Kt(e);return this.rate>0&&this.rate<1?u1(()=>{const a=Math.sqrt(this.rate/(1-this.rate));return be(s,mx(s.shape,1,a))},()=>s,t.training||!1):s})}}K_.className="GaussianDropout";at(K_);class W_ extends pn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Kt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return De(()=>{if(this.rate<1&&this.rate>0){const s=this._getNoiseShape(e);return u1(()=>{const a=Kt(e),o=-1.6732632423543772*1.0507009873554805;let l=gh(Vf(s),this.rate);l=TA(l,"float32");const u=((1-this.rate)*(1+this.rate*o**2))**-.5,h=-u*o*this.rate,f=st(be(a,l),be(st(l,-1),o));return st(be(f,u),h)},()=>Kt(e),t.training||!1)}return e})}}W_.className="AlphaDropout";at(W_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jg(n,e,t,s,r,a=.001){let i;if(n.rank===2)i=wU(n,e,t,s,r,a);else if(n.rank===3)i=bU(n,e,t,s,r,a);else if(n.rank===4)i=xU(n,e,t,s,r,a);else throw new An(`batchNormalization is not implemented for array of rank ${n.rank} yet`);return i}function lie(n,e,t,s,r=.001){return De(()=>{const a=Jb(n,s),i=a.mean,o=a.variance;return[jg(n,i,o,t,e,r),i,o]})}function Aie(n,e,t,s,r=.001){return De(()=>{const a=Jb(n,s),i=a.mean,o=a.variance,l=[];for(const g of Fl(0,n.rank))s.indexOf(g)!==-1?l.push(1):l.push(n.shape[g]);const u=Be(i,l),h=Be(o,l),f=e==null?null:Be(e,l),d=t==null?null:Be(t,l);return[jg(n,u,h,d,f,r),i,o]})}function uie(n,e,t,s,r=.001){return Bn(s.slice().sort(),Fl(0,n.rank-1))?lie(n,e,t,s,r):Aie(n,e,t,s,r)}class q_ extends pn{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=vs(e.betaInitializer||"zeros"),this.gammaInitializer=vs(e.gammaInitializer||"ones"),this.movingMeanInitializer=vs(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=vs(e.movingVarianceInitializer||"ones"),this.betaConstraint=kr(e.betaConstraint),this.gammaConstraint=kr(e.gammaConstraint),this.betaRegularizer=Cs(e.betaRegularizer),this.gammaRegularizer=Cs(e.gammaRegularizer)}build(e){e=Un(e);const t=this.axis>=0?this.axis:this.axis+e.length,s=e[t];if(s==null)throw new Ne(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Nr({ndim:e.length,axes:{[t]:s}})];const r=[s];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return De(()=>{const s=t.training==null?!1:t.training,r=Kt(e),a=r.shape,i=a.length,o=Fl(0,i),l=this.axis>=0?this.axis:this.axis+i;o.splice(l,1);const u=_f(1,i);u[l]=a[l];const h=o.slice();h.sort();const f=!Bn(h,Fl(0,i).slice(0,i-1)),d=()=>{if(f){const C=Be(this.movingMean.read(),u),N=Be(this.movingVariance.read(),u),I=this.center?Be(this.beta.read(),u):null,L=this.scale?Be(this.gamma.read(),u):null;return jg(r,C,N,I,L,this.epsilon)}else return jg(r,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!s)return d();const[m,g,w]=uie(r,this.gamma.read(),this.beta.read(),o,this.epsilon),v=(C,N,I)=>{De(()=>{const L=1-I,$=C.read(),H=be(vt($,N),L);C.write(vt($,H))})};return(()=>{v(this.movingMean,g,this.momentum),v(this.movingVariance,w,this.momentum)})(),m})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Ds(this.betaInitializer),gammaInitializer:Ds(this.gammaInitializer),movingMeanInitializer:Ds(this.movingMeanInitializer),movingVarianceInitializer:Ds(this.movingVarianceInitializer),betaRegularizer:as(this.betaRegularizer),gammaRegularizer:as(this.gammaRegularizer),betaConstraint:Er(this.betaConstraint),gammaConstraint:Er(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}q_.className="BatchNormalization";at(q_);class X_ extends pn{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const t of this.axis)if(!Number.isInteger(t))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=vs(e.betaInitializer||"zeros"),this.gammaInitializer=vs(e.gammaInitializer||"ones"),this.betaRegularizer=Cs(e.betaRegularizer),this.gammaRegularizer=Cs(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Un(e);const t=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=t);for(const a of this.axis)if(a<0||a>=t)throw new Error(`Invalid axis: ${a}`);if(this.axis.length!==Xc(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const s=this.axis.map(a=>e[a]),r=!0;this.scale?this.gamma=this.addWeight("gamma",s,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",s,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,t){const s=Kt(e),r=s.shape,a=r.length;return De(()=>{let{mean:o,variance:l}=Jb(s,this.axis,!0);const u=_f(1,a);for(const w of this.axis)u[w]=r[w];const h=w=>w!=null&&w.shape.length!==a?Be(w,u):w;let f=this.scale?h(this.gamma.read()):null,d=this.center?h(this.beta.read()):null;const m=[],g=[];for(let w=0;w<a;++w)this.axis.indexOf(w)!==-1?(m.push(r[w]),g.push(1)):(m.push(1),g.push(r[w]));return o=To(o,m),l=To(l,m),f!=null&&(f=To(f,g)),d!=null&&(d=To(d,g)),jg(s,o,l,d,f,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Ds(this.betaInitializer),gammaInitializer:Ds(this.gammaInitializer),betaRegularizer:as(this.betaRegularizer),gammaRegularizer:as(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}X_.className="LayerNormalization";at(X_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cie(n,e,t){return De(()=>{if(n.rank!==4)throw new Ne(`temporalPadding expects input tensor to be 4-D, but received a ${n.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new Ne("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(t==null&&(t=Tl()),t!=="channelsLast"&&t!=="channelsFirst")throw new Ne(`Unknown data format: ${t}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let s;return t==="channelsFirst"?s=[[0,0],[0,0],e[0],e[1]]:s=[[0,0],e[0],e[1],[0,0]],yh(n,s)})}class Y_ extends pn{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Tl():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new Ne(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,s;if(typeof e.padding[0]=="number")t=[e.padding[0],e.padding[0]],s=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new Ne(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],e.padding[1].length!==2)throw new Ne(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);s=e.padding[1]}this.padding=[t,s]}this.inputSpec=[new Nr({ndim:4})]}computeOutputShape(e){e=Un(e);let t,s;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?t=e[2]+this.padding[0][0]+this.padding[0][1]:t=null,e[3]!=null&&e[3]>=0?s=e[3]+this.padding[1][0]+this.padding[1][1]:s=null,[e[0],e[1],t,s]):(e[1]!=null&&e[1]>=0?t=e[1]+this.padding[0][0]+this.padding[0][1]:t=null,e[2]!=null&&e[2]>=0?s=e[2]+this.padding[1][0]+this.padding[1][1]:s=null,[e[0],t,s,e[3]])}call(e,t){return De(()=>cie(Kt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}Y_.className="ZeroPadding2D";at(Y_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Bx(n,e,t,s,r,a){return De(()=>{Zs(r),f$(a),ro(s),t==null&&(t=[1,1]),s==null&&(s="valid"),r==null&&(r=Tl()),a==null&&(a="max"),n=DI(n,r);let i;const o=s==="same"?"same":"valid";return a==="max"?i=Yb(n,e,t,o):i=zb(n,e,t,o),r==="channelsFirst"&&(i=In(i,[0,3,1,2])),i})}function J_(n,e,t,s,r,a){return De(()=>{Zs(r),f$(a),ro(s),t==null&&(t=[1,1,1]),s==null&&(s="valid"),r==null&&(r=Tl()),a==null&&(a="max"),n=p_(n,r);let i;const o=s==="same"?"same":"valid";return a==="max"?i=VU(n,e,t,o):i=yU(n,e,t,o),r==="channelsFirst"&&(i=In(i,[0,4,1,2,3])),i})}class Z_ extends pn{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new Ne(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Or(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new Ne(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Or(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,ro(this.padding),this.inputSpec=[new Nr({ndim:3})]}computeOutputShape(e){e=Un(e);const t=Il(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return De(()=>{this.invokeCallHook(e,t),e=l1(Kt(e),2);const s=this.poolingFunction(Kt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Gf(s,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class eO extends Z_{constructor(e){super(e)}poolingFunction(e,t,s,r,a){return Zs(a),ro(r),Bx(e,t,s,r,a,"max")}}eO.className="MaxPooling1D";at(eO);class tO extends Z_{constructor(e){super(e)}poolingFunction(e,t,s,r,a){return Zs(a),ro(r),Bx(e,t,s,r,a,"avg")}}tO.className="AveragePooling1D";at(tO);class nO extends pn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new Ne(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Or(this.poolSize,"poolSize"),Or(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Zs(this.dataFormat),ro(this.padding),this.inputSpec=[new Nr({ndim:4})]}computeOutputShape(e){e=Un(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],s=this.dataFormat==="channelsFirst"?e[3]:e[2];return t=Il(t,this.poolSize[0],this.padding,this.strides[0]),s=Il(s,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,s]:[e[0],t,s,e[3]]}call(e,t){return De(()=>(this.invokeCallHook(e,t),this.poolingFunction(Kt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class sO extends nO{constructor(e){super(e)}poolingFunction(e,t,s,r,a){return Zs(a),ro(r),Bx(e,t,s,r,a,"max")}}sO.className="MaxPooling2D";at(sO);class rO extends nO{constructor(e){super(e)}poolingFunction(e,t,s,r,a){return Zs(a),ro(r),Bx(e,t,s,r,a,"avg")}}rO.className="AveragePooling2D";at(rO);class aO extends pn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new Ne(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Or(this.poolSize,"poolSize"),Or(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Zs(this.dataFormat),ro(this.padding),this.inputSpec=[new Nr({ndim:5})]}computeOutputShape(e){e=Un(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],s=this.dataFormat==="channelsFirst"?e[3]:e[2],r=this.dataFormat==="channelsFirst"?e[4]:e[3];return t=Il(t,this.poolSize[0],this.padding,this.strides[0]),s=Il(s,this.poolSize[1],this.padding,this.strides[1]),r=Il(r,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,s,r]:[e[0],t,s,r,e[4]]}call(e,t){return De(()=>(this.invokeCallHook(e,t),this.poolingFunction(Kt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class iO extends aO{constructor(e){super(e)}poolingFunction(e,t,s,r,a){return Zs(a),ro(r),J_(e,t,s,r,a,"max")}}iO.className="MaxPooling3D";at(iO);class oO extends aO{constructor(e){super(e)}poolingFunction(e,t,s,r,a){return Zs(a),ro(r),J_(e,t,s,r,a,"avg")}}oO.className="AveragePooling3D";at(oO);class lO extends pn{constructor(e){super(e),this.inputSpec=[new Nr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new An}}class AO extends lO{constructor(e){super(e||{})}call(e,t){return De(()=>{const s=Kt(e);return Ps(s,1)})}}AO.className="GlobalAveragePooling1D";at(AO);class uO extends lO{constructor(e){super(e||{})}call(e,t){return De(()=>{const s=Kt(e);return Ro(s,1)})}}uO.className="GlobalMaxPooling1D";at(uO);class cO extends pn{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Zs(this.dataFormat),this.inputSpec=[new Nr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new An}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class hO extends cO{call(e,t){return De(()=>{const s=Kt(e);return this.dataFormat==="channelsLast"?Ps(s,[1,2]):Ps(s,[2,3])})}}hO.className="GlobalAveragePooling2D";at(hO);class fO extends cO{call(e,t){return De(()=>{const s=Kt(e);return this.dataFormat==="channelsLast"?Ro(s,[1,2]):Ro(s,[2,3])})}}fO.className="GlobalMaxPooling2D";at(fO);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class dO extends pn{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,s={}){const r=t.layer,a=ku(r,s);delete t.layer;const i={layer:a};return Object.assign(i,t),new e(i)}}class pO extends dO{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Un(e),e.length<3)throw new Ne(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Un(e);const t=[e[0]].concat(e.slice(2)),s=this.layer.computeOutputShape(t),r=e[1];return[s[0],r].concat(s.slice(1))}call(e,t){return De(()=>(e=Kt(e),B_((i,o)=>[Kt(this.layer.call(i,t)),[]],e,[],!1,null,null,!1,!0)[1]))}}pO.className="TimeDistributed";at(pO);function hie(n){Wf(Lre,"BidirectionalMergeMode",n)}const fie="concat";class mO extends dO{constructor(e){super(e);const t=e.layer.getConfig(),s={};s.className=e.layer.getClassName(),s.config=t,this.forwardLayer=ku(s),t.goBackwards=t.goBackwards!==!0;const r={};if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=ku(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?fie:e.mergeMode,hie(this.mergeMode),e.weights)throw new An("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,s=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,s)),this.backwardLayer.setWeights(e.slice(s))}computeOutputShape(e){let t=this.forwardLayer.computeOutputShape(e);Array.isArray(t)&&Array.isArray(t[0])||(t=[t]),t=t;let s,r,a;return this.returnState&&(a=t.slice(1)),s=t[0],s=s,this.mergeMode==="concat"?(s[s.length-1]*=2,r=[s]):this.mergeMode==null?r=[s,s.slice()]:r=[s],this.returnState?this.mergeMode==null?r.concat(a).concat(a.slice()):[s].concat(a).concat(a.slice()):si(r)}apply(e,t){let s=t==null?null:t.initialState,r=t==null?null:t.constants;t==null&&(t={});const a=C_(e,s,r,this.numConstants);if(e=a.inputs,s=a.initialState,r=a.constants,Array.isArray(e)&&(s=e.slice(1),e=e[0]),(s==null||s.length===0)&&r==null)return super.apply(e,t);const i=[],o=[];if(s!=null){const u=s.length;if(u%2>0)throw new Ne("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=s,i.push(...s);const h=s.map(f=>new Nr({shape:f.shape}));this.forwardLayer.stateSpec=h.slice(0,u/2),this.backwardLayer.stateSpec=h.slice(u/2),o.push(...h)}if(r!=null)throw new An("Support for constants in Bidirectional layers is not implemented yet.");const l=i[0]instanceof UA;for(const u of i)if(u instanceof UA!==l)throw new Ne("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[e].concat(i),h=this.inputSpec.concat(o),f=this.inputSpec;this.inputSpec=h;const d=super.apply(u,t);return this.inputSpec=f,d}else return super.apply(e,t)}call(e,t){return De(()=>{const s=t.initialState;let r,a;if(s==null)r=this.forwardLayer.call(e,t),a=this.backwardLayer.call(e,t);else{const l=s.slice(0,s.length/2),u=s.slice(s.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:l})),a=this.backwardLayer.call(e,Object.assign(t,{initialState:u}))}let i;this.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),this.returnSequences&&(a=_o(a,1));let o;return this.mergeMode==="concat"?o=wI([r,a]):this.mergeMode==="sum"?o=st(r,a):this.mergeMode==="ave"?o=be(.5,st(r,a)):this.mergeMode==="mul"?o=be(r,a):this.mergeMode==null&&(o=[r,a]),this.returnState?this.mergeMode==null?o.concat(i):[o].concat(i):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Sf(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Sf(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){Array.isArray(t)&&(t=t[0]);let s;if(this.returnSequences?this.mergeMode==null?s=[t,t]:s=t:this.mergeMode==null?s=[null,null]:s=null,this.returnState){const a=this.forwardLayer.states.map(i=>null);return Array.isArray(s)?s.concat(a).concat(a):[s].concat(a).concat(a)}else return s}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const s=ku(t.layer);if(delete t.layer,t.numConstants!=null)throw new An("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r.layer=s,new e(r)}}mO.className="Bidirectional";at(mO);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class gO extends pn{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return De(()=>(e=Kt(e),e.dtype!=="float32"&&(e=TA(e,"float32")),st(be(e,this.scale),this.offset)))}}gO.className="Rescaling";at(gO);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:die,cropAndResize:pie}=Bl;class yO extends pn{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,s,r,a,i,o,l){return De(()=>{let u,h=!1;const f=t/i,d=s/o,m=(r+t)/i,g=(a+s)/o,w=[f,d,m,g],v=[];e.rank===3?(h=!0,u=Ei([e])):u=e;for(let L=0;L<u.shape[0];L++)v.push(w);const b=Nl(v,[v.length,4]),C=Np(0,v.length,1,"int32"),I=pie(u,b,C,[r,a],"nearest");return TA(h?Kt(Oo(I)):I,l)})}upsize(e,t,s,r){return De(()=>{const a=die(e,[t,s]);return TA(a,r)})}call(e,t){return De(()=>{const s=Kt(e),r=s.dtype,a=s.shape,i=a[a.length-3],o=a[a.length-2];let l=0;i!==this.height&&(l=Math.floor((i-this.height)/2));let u=0;return o!==this.width&&(u=Math.floor((o-this.width)/2),u===0&&(u=1)),l>=0&&u>=0?this.centerCrop(s,l,u,this.height,this.width,i,o,r):this.upsize(e,this.height,this.width,r)})}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=Un(e);const t=e.length-3,s=e.length-2;return e[t]=this.height,e[s]=this.width,e}}yO.className="CenterCrop";at(yO);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mie(n,e,t,s){let r=Kt(n);if(r.dtype!=="int32"&&(r=TA(r,"int32")),e==="int")return r;const a=r.shape;if(r.rank===0&&(r=_a(r,-1)),e==="oneHot"&&r.shape[r.shape.length-1]!==1&&(r=_a(r,-1)),r.rank>2)throw new Ne(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${a} which would result in output rank ${r.rank}.`);const i=["multiHot","oneHot"].includes(e),o=r;let l;if(typeof s<"u"&&e==="count"?l=WB(o,s,t,i):l=WB(o,[],t,i),e!=="tfIdf")return l;if(s)return be(l,s);throw new Ne("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class wO extends pn{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return e=Un(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return De(()=>{e=Kt(e),e.dtype!=="int32"&&(e=TA(e,"int32"));let s;if(typeof t.countWeights<"u"){if(this.outputMode!=="count")throw new Ne(`countWeights is not used when outputMode !== count.
              Received countWeights=${t.countWeights}`);s=Kt(t.countWeights)}const r=Ro(e),a=$g(e),i=Li(this.numTokens,r).bufferSync().get(0),o=gh(a,0).bufferSync().get(0);if(!(i&&o))throw new Ne(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return mie(e,this.outputMode,this.numTokens,s)})}}wO.className="CategoryEncoding";at(wO);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const gie=["bilinear","nearest"],O4=new Set(gie);class bO extends pn{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(O4.has(e.interpolation))this.interpolation=e.interpolation;else throw new Ne(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Un(e);const t=e[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return De(()=>{const s=[this.height,this.width];if(this.interpolation==="bilinear")return Bl.resizeBilinear(e,s,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Bl.resizeNearestNeighbor(e,s,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...O4]} are supported`)})}}bO.className="Resizing";at(bO);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class xO{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}xO.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class vO extends pn{constructor(e){super(e),this.randomGenerator=new xO(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}vO.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const yie=["bilinear","nearest"],Q4=new Set(yie);class CO extends vO{constructor(e){super(e);const{factor:t,interpolation:s="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Ne(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new Ne(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Ne(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(s)if(Q4.has(s))this.interpolation=s;else throw new Ne(`Invalid interpolation parameter: ${s} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=Un(e);const t=e[2];return[this.imgHeight,-1,t]}call(e,t){return De(()=>{const s=Kt(e);this.imgHeight=s.shape[s.shape.length-3];const r=s.shape[s.shape.length-2];this.widthFactor=Vf([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*r;a=Math.round(a);const i=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return Bl.resizeBilinear(e,i);case"nearest":return Bl.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...Q4]} are supported`)}})}}CO.className="RandomWidth";at(CO);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wie=Qe();wie.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,n=>{n&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var yi;(function(n){n[n.DT_INVALID=0]="DT_INVALID",n[n.DT_FLOAT=1]="DT_FLOAT",n[n.DT_DOUBLE=2]="DT_DOUBLE",n[n.DT_INT32=3]="DT_INT32",n[n.DT_UINT8=4]="DT_UINT8",n[n.DT_INT16=5]="DT_INT16",n[n.DT_INT8=6]="DT_INT8",n[n.DT_STRING=7]="DT_STRING",n[n.DT_COMPLEX64=8]="DT_COMPLEX64",n[n.DT_INT64=9]="DT_INT64",n[n.DT_BOOL=10]="DT_BOOL",n[n.DT_QINT8=11]="DT_QINT8",n[n.DT_QUINT8=12]="DT_QUINT8",n[n.DT_QINT32=13]="DT_QINT32",n[n.DT_BFLOAT16=14]="DT_BFLOAT16",n[n.DT_QINT16=15]="DT_QINT16",n[n.DT_QUINT16=16]="DT_QUINT16",n[n.DT_UINT16=17]="DT_UINT16",n[n.DT_COMPLEX128=18]="DT_COMPLEX128",n[n.DT_HALF=19]="DT_HALF",n[n.DT_RESOURCE=20]="DT_RESOURCE",n[n.DT_VARIANT=21]="DT_VARIANT",n[n.DT_UINT32=22]="DT_UINT32",n[n.DT_UINT64=23]="DT_UINT64",n[n.DT_FLOAT_REF=101]="DT_FLOAT_REF",n[n.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",n[n.DT_INT32_REF=103]="DT_INT32_REF",n[n.DT_UINT8_REF=104]="DT_UINT8_REF",n[n.DT_INT16_REF=105]="DT_INT16_REF",n[n.DT_INT8_REF=106]="DT_INT8_REF",n[n.DT_STRING_REF=107]="DT_STRING_REF",n[n.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",n[n.DT_INT64_REF=109]="DT_INT64_REF",n[n.DT_BOOL_REF=110]="DT_BOOL_REF",n[n.DT_QINT8_REF=111]="DT_QINT8_REF",n[n.DT_QUINT8_REF=112]="DT_QUINT8_REF",n[n.DT_QINT32_REF=113]="DT_QINT32_REF",n[n.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",n[n.DT_QINT16_REF=115]="DT_QINT16_REF",n[n.DT_QUINT16_REF=116]="DT_QUINT16_REF",n[n.DT_UINT16_REF=117]="DT_UINT16_REF",n[n.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",n[n.DT_HALF_REF=119]="DT_HALF_REF",n[n.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",n[n.DT_VARIANT_REF=121]="DT_VARIANT_REF",n[n.DT_UINT32_REF=122]="DT_UINT32_REF",n[n.DT_UINT64_REF=123]="DT_UINT64_REF"})(yi||(yi={}));var M4;(function(n){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(n.CheckpointFormatVersion||(n.CheckpointFormatVersion={}))})(M4||(M4={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bie={};function BO(n){return bie[n]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M(n,e,t,s,r){const a=e.inputParams[n];if(a&&a.inputIndexStart!==void 0){const o=a.inputIndexStart,l=a.inputIndexEnd===0?void 0:a.inputIndexEnd===void 0?o+1:a.inputIndexEnd,u=o<0?e.inputNames.length+o:o;if(a.type==="tensor")return Jr(e.inputNames[u],t,s,r);if(a.type==="tensors"){const d=e.inputs.slice(o,l);return e.inputNames.slice(o,l).filter((g,w)=>{var v;return((v=d[w])===null||v===void 0?void 0:v.op)!=="NoOp"}).map(g=>Jr(g,t,s,r))}const h=Jr(e.inputNames[u],t,s,r),f=h.dataSync();return a.type==="number"?f[0]:Uo(h.shape,f)}const i=e.attrParams[n];return i&&i.value}function Jr(n,e,t,s){const[r,a]=wi(n,t);if(s!=null){const o=s.getHashTableHandleByName(r);if(o!=null)return o}const i=t.currentContextIds.find(o=>!!e[hw(r,o)]);return i!==void 0?e[hw(r,i)][a]:void 0}function H4(n,e,t){return e[hw(n,t.currentContextId)]}function Cu(n,e){const[t,s,r]=wi(n,e);return[hw(t,e&&e.currentContextId),s,r]}function hw(n,e){return e?`${n}-${e}`:n}function wi(n,e){if(n==="")return["",0,void 0];const t=e!=null&&e.parseNodeNameCache!=null;if(t){const a=e.parseNodeNameCache.get(n);if(a!=null)return a}const s=n.split(":");let r;if(s.length===1)r=[n,0,void 0];else{const a=s[0],i=s.length===3?s[1]:void 0,o=Number(s[s.length-1]);r=[a,o,i]}return t&&e.parseNodeNameCache.set(n,r),r}function F2(n,e,t){let s=M("pad",n,e,t);if(s==="explicit"){s=M("explicitPaddings",n,e,t);const r=[[0,0],[0,0],[0,0],[0,0]];for(let a=0;a<4;a++)r[a][0]=s[a*2],r[a][1]=s[a*2+1];return r}return s}function Bu(n){return n.kept?n:Eu(n)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xie=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],vie=Object.freeze(Object.defineProperty({__proto__:null,json:xie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cie=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Bie=Object.freeze(Object.defineProperty({__proto__:null,json:Cie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sie=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],Nie=Object.freeze(Object.defineProperty({__proto__:null,json:Sie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iie=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],Eie=Object.freeze(Object.defineProperty({__proto__:null,json:Iie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kie=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Fie=Object.freeze(Object.defineProperty({__proto__:null,json:kie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tie=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Die=Object.freeze(Object.defineProperty({__proto__:null,json:Tie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lie=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Uie=Object.freeze(Object.defineProperty({__proto__:null,json:Lie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rie=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],$ie=Object.freeze(Object.defineProperty({__proto__:null,json:Rie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ie=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Oie=Object.freeze(Object.defineProperty({__proto__:null,json:_ie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qie=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Mie=Object.freeze(Object.defineProperty({__proto__:null,json:Qie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hie=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],Pie=Object.freeze(Object.defineProperty({__proto__:null,json:Hie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zie=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],jie=Object.freeze(Object.defineProperty({__proto__:null,json:zie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vie=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],Gie=Object.freeze(Object.defineProperty({__proto__:null,json:Vie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kie=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Wie=Object.freeze(Object.defineProperty({__proto__:null,json:Kie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qie=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Xie=Object.freeze(Object.defineProperty({__proto__:null,json:qie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yie=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Jie=Object.freeze(Object.defineProperty({__proto__:null,json:Yie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zie=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],eoe=Object.freeze(Object.defineProperty({__proto__:null,json:Zie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const toe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],noe=Object.freeze(Object.defineProperty({__proto__:null,json:toe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const soe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],roe=Object.freeze(Object.defineProperty({__proto__:null,json:soe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P4{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[vie,Bie,Nie,Eie,Fie,Die,Uie,$ie,Oie,Mie,Pie,jie,Gie,Wie,Xie,Jie,eoe,noe,roe],t=[].concat(...e.map(s=>s.json));this.opMappers=t.reduce((s,r)=>(s[r.tfOpName]=r,s),{})}transformGraph(e,t={}){const s=e.node,r=[],a=[],i=[],o=s.reduce((w,v)=>(w[v.name]=this.mapNode(v),v.op.startsWith("Placeholder")?r.push(w[v.name]):v.op==="Const"?a.push(w[v.name]):(v.input==null||v.input.length===0)&&i.push(w[v.name]),w),{});let l=[];const u=[];let h={},f={};t!=null&&(h=this.mapSignatureEntries(t.inputs),f=this.mapSignatureEntries(t.outputs));const d=Object.keys(o);d.forEach(w=>{const v=o[w];v.inputNames.forEach((b,C)=>{const[N,,I]=Cu(b),L=o[N];if(L.outputs!=null){const $=L.outputs.indexOf(I);if($!==-1){const H=`${N}:${$}`;v.inputNames[C]=H}}v.inputs.push(L),L.children.push(v)})}),Object.keys(f).length===0?d.forEach(w=>{const v=o[w];v.children.length===0&&u.push(v)}):Object.keys(f).forEach(w=>{const[v]=Cu(w),b=o[v];b!=null&&(b.signatureKey=f[w],u.push(b))}),Object.keys(h).length>0?Object.keys(h).forEach(w=>{const[v]=Cu(w),b=o[v];b&&(b.signatureKey=h[w],l.push(b))}):l=r;let m={};e.library!=null&&e.library.function!=null&&(m=e.library.function.reduce((w,v)=>(w[v.signature.name]=this.mapFunction(v),w),{}));const g={nodes:o,inputs:l,outputs:u,weights:a,placeholders:r,signature:t,functions:m};return i.length>0&&(g.initNodes=i),g}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,s)=>(t[e[s].name]=s,t),{})}mapNode(e){const t=BO(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const s={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(r=>r.startsWith("^")?r.slice(1):r),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return t.inputs!=null&&(s.inputParams=t.inputs.reduce((r,a)=>(r[a.name]={type:a.type,inputIndexStart:a.start,inputIndexEnd:a.end},r),{})),t.attrs!=null&&(s.attrParams=t.attrs.reduce((r,a)=>{const i=a.type;let o;switch(a.type){case"string":o=AS(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=AS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":o=mS(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=mS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":o=cS(e.attr,a.tfName,a.defaultValue||0),o===void 0&&a.tfDeprecatedName&&(o=cS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":o=pS(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=pS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":o=uS(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=uS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":o=yS(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=yS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":o=dS(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=dS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":o=gS(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=gS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":o=hS(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=hS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":o=fS(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=fS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"func":o=z4(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=z4(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${a.type} for op: ${e.op}`)}return r[a.name]={value:o,type:i},r},{})),s}mapFunction(e){const t=e.nodeDef,s=[],r=[];let a={};t!=null&&(a=t.reduce((f,d)=>(f[d.name]=this.mapNode(d),d.op==="Const"&&r.push(f[d.name]),f),{}));const i=[],o=[];e.signature.inputArg.forEach(f=>{const[d]=Cu(f.name),m={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:OI(f.type),type:"dtype"}},children:[]};m.signatureKey=f.name,i.push(m),a[d]=m}),Object.keys(a).forEach(f=>{const d=a[f];d.inputNames.forEach((m,g)=>{const[w,,v]=Cu(m),b=a[w];if(b.outputs!=null){const C=b.outputs.indexOf(v);if(C!==-1){const N=`${w}:${C}`;d.inputNames[g]=N}}d.inputs.push(b),b.children.push(d)})});const u=e.ret;e.signature.outputArg.forEach(f=>{const[d,m]=Cu(u[f.name]),g=a[d];g!=null&&(g.defaultOutput=m,o.push(g))});const h=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:s,signature:h}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((t,s)=>(t[s.name]=this.mapArgToTensorInfo(s),t),{}),outputs:e.signature.outputArg.reduce((t,s)=>(t[s.name]=this.mapArgToTensorInfo(s,e.ret),t),{})}}mapArgToTensorInfo(e,t){let s=e.name;return t!=null&&(s=t[s]),{name:s,dtype:e.type}}}function aoe(n){const e=Qe().global;if(typeof e.atob<"u")return e.atob(n);if(typeof Buffer<"u")return new Buffer(n,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function SO(n,e){const t=Array.isArray(n)?String.fromCharCode.apply(null,n):aoe(n);return e?t:t.toLowerCase()}function AS(n,e,t,s=!1){const r=n[e];return r!=null?SO(r.s,s):t}function uS(n,e,t){const s=n[e];return s?s.b:t}function cS(n,e,t){const s=n[e]||{},r=s.i!=null?s.i:s.f!=null?s.f:t;return typeof r=="number"?r:parseInt(r,10)}function OI(n){switch(typeof n=="string"&&(n=yi[n]),n){case yi.DT_FLOAT:case yi.DT_HALF:return"float32";case yi.DT_INT32:case yi.DT_INT64:case yi.DT_INT8:case yi.DT_UINT8:return"int32";case yi.DT_BOOL:return"bool";case yi.DT_DOUBLE:return"float32";case yi.DT_STRING:return"string";case yi.DT_COMPLEX64:case yi.DT_COMPLEX128:return"complex64";default:return null}}function z4(n,e,t){const s=n[e];return s&&s.func?s.func.name:t}function hS(n,e,t){const s=n[e];return s&&s.type?OI(s.type):t}function fS(n,e,t){const s=n[e];return s&&s.list&&s.list.type?s.list.type.map(r=>OI(r)):t}function NO(n){if(!n.unknownRank)return n.dim!=null?n.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function dS(n,e,t){const s=n[e];return s&&s.shape?NO(s.shape):t}function pS(n,e,t){const s=n[e];return s?((s.list.f&&s.list.f.length?s.list.f:s.list.i)||[]).map(r=>typeof r=="number"?r:parseInt(r,10)):t}function mS(n,e,t,s=!1){const r=n[e];return r&&r.list&&r.list.s?r.list.s.map(a=>SO(a,s)):t}function gS(n,e,t){const s=n[e];return s&&s.list&&s.list.shape?s.list.shape.map(r=>NO(r)):t}function yS(n,e,t){const s=n[e];return s&&s.list&&s.list.b?s.list.b:t}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ioe{constructor(e,t,s){this.node=e,this.tensorMap=t,this.context=s,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(r=>this.getInput(r)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((r,a)=>(r[a]=this.getAttr(a),r),{}))}getInput(e){return Jr(e,this.tensorMap,this.context)}getAttr(e,t){const s=this.node.rawAttrs[e];if(s.tensor!=null)return Jr(e,this.tensorMap,this.context);if(s.i!=null||s.f!=null)return cS(this.node.rawAttrs,e,t);if(s.s!=null)return AS(this.node.rawAttrs,e,t);if(s.b!=null)return uS(this.node.rawAttrs,e,t);if(s.shape!=null)return dS(this.node.rawAttrs,e,t);if(s.type!=null)return hS(this.node.rawAttrs,e,t);if(s.list!=null){if(s.list.i!=null||s.list.f!=null)return pS(this.node.rawAttrs,e,t);if(s.list.s!=null)return mS(this.node.rawAttrs,e,t);if(s.list.shape!=null)return gS(this.node.rawAttrs,e,t);if(s.list.b!=null)return yS(this.node.rawAttrs,e,t);if(s.list.type!=null)return fS(this.node.rawAttrs,e,t)}return t}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ra=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:GL,abs:vr,acos:uU,acosh:cU,add:st,addN:Cq,all:i5,any:tw,argMax:Cp,argMin:hU,asin:fU,asinh:dU,atan:pU,atan2:mU,atanh:gU,avgPool:zb,avgPool3d:yU,basicLSTMCell:Gq,batchNorm:J0,batchNorm2d:wU,batchNorm3d:bU,batchNorm4d:xU,batchToSpaceND:jb,bincount:vU,bitwiseAnd:tX,booleanMaskAsync:QZ,broadcastArgs:sX,broadcastTo:gp,buffer:un,cast:mt,ceil:CU,clipByValue:Ni,clone:Eu,complex:nh,concat:dr,concat1d:BU,concat2d:SU,concat3d:NU,concat4d:IU,conv1d:l5,conv2d:ah,conv2dTranspose:u5,conv3d:EU,conv3dTranspose:FU,cos:Vb,cosh:c5,cosineWindow:$5,cumprod:nw,cumsum:h5,denseBincount:WB,depthToSpace:TU,depthwiseConv2d:Z0,diag:NX,dilation2d:DU,div:Tt,divNoNan:LU,dot:UU,dropout:iR,einsum:rp,elu:e1,enclosingPowerOfTwo:oR,ensureShape:$X,equal:kl,erf:f5,euclideanNorm:_U,exp:Ii,expandDims:_a,expm1:OU,eye:p5,fft:ax,fill:Pp,floor:n1,floorDiv:a5,fused:oee,gather:s1,gatherND:qZ,greater:Li,greaterEqual:gh,ifft:Mg,imag:Gb,image:Bl,inTopKAsync:ZZ,irfft:F5,isFinite:QU,isInf:MU,isNaN:HU,leakyRelu:Kb,less:_g,lessEqual:jf,linalg:pR,linspace:lY,localResponseNormalization:PU,log:to,log1p:Wb,logSigmoid:zU,logSoftmax:m5,logSumExp:qb,logicalAnd:LA,logicalNot:Xb,logicalOr:g5,logicalXor:jU,losses:Ote,lowerBound:BY,matMul:yn,max:Ro,maxPool:Yb,maxPool3d:VU,maxPoolWithArgmax:EY,maximum:Qu,mean:Ps,meshgrid:TY,min:$g,minimum:Rf,mirrorPad:GU,mod:KU,moments:Jb,movingAverage:PZ,mul:be,multiRNNCell:_Y,multinomial:QY,neg:ms,norm:t1,notEqual:Sp,oneHot:w5,ones:vi,onesLike:no,op:ge,outerProduct:jY,pad:yh,pad1d:KY,pad2d:qY,pad3d:YY,pad4d:ZY,pool:WU,pow:Du,prelu:ex,print:AU,prod:qU,raggedGather:oJ,raggedRange:AJ,raggedTensorToTensor:cJ,rand:fJ,randomGamma:RJ,randomNormal:x5,randomStandardNormal:OJ,randomUniform:Vf,randomUniformInt:HJ,range:Np,real:Og,reciprocal:XU,relu:MA,relu6:v5,reshape:Be,reverse:_o,reverse1d:WJ,reverse2d:XJ,reverse3d:JJ,reverse4d:eZ,rfft:ix,round:C5,rsqrt:B5,scalar:Ut,scatterND:jZ,searchSorted:y5,selu:S5,separableConv2d:N5,setdiff1dAsync:iZ,sigmoid:kA,sign:YU,signal:_te,sin:I5,sinh:E5,slice:Nn,slice1d:nx,slice2d:k5,slice3d:sx,slice4d:Qg,softmax:rx,softplus:zp,spaceToBatchND:Zb,sparse:Qte,sparseToDense:KZ,spectral:$te,split:Ci,sqrt:ta,square:rs,squaredDifference:T5,squeeze:Gf,stack:Ei,step:jp,stridedSlice:JU,string:Mte,sub:vt,sum:Nt,tan:ZU,tanh:Uf,tensor:Nl,tensor1d:Ma,tensor2d:Ig,tensor3d:eR,tensor4d:NZ,tensor5d:IZ,tensor6d:EZ,tensorScatterUpdate:FZ,tile:To,topk:nR,transpose:In,truncatedNormal:L5,unique:sR,unsortedSegmentSum:U5,unstack:Oo,upperBound:$Z,variable:rR,where:pa,whereAsync:aR,zeros:Br,zerosLike:En},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ooe=(n,e,t,s=ra)=>{switch(n.op){case"BiasAdd":case"AddV2":case"Add":return[s.add(M("a",n,e,t),M("b",n,e,t))];case"AddN":return[s.addN(M("tensors",n,e,t))];case"FloorMod":case"Mod":return[s.mod(M("a",n,e,t),M("b",n,e,t))];case"Mul":return[s.mul(M("a",n,e,t),M("b",n,e,t))];case"RealDiv":case"Div":return[s.div(M("a",n,e,t),M("b",n,e,t))];case"DivNoNan":return[s.divNoNan(M("a",n,e,t),M("b",n,e,t))];case"FloorDiv":return[s.floorDiv(M("a",n,e,t),M("b",n,e,t))];case"Sub":return[s.sub(M("a",n,e,t),M("b",n,e,t))];case"Minimum":return[s.minimum(M("a",n,e,t),M("b",n,e,t))];case"Maximum":return[s.maximum(M("a",n,e,t),M("b",n,e,t))];case"Pow":return[s.pow(M("a",n,e,t),M("b",n,e,t))];case"SquaredDifference":return[s.squaredDifference(M("a",n,e,t),M("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const loe=(n,e,t,s=ra)=>{switch(n.op){case"Abs":case"ComplexAbs":return[s.abs(M("x",n,e,t))];case"Acos":return[s.acos(M("x",n,e,t))];case"Acosh":return[s.acosh(M("x",n,e,t))];case"Asin":return[s.asin(M("x",n,e,t))];case"Asinh":return[s.asinh(M("x",n,e,t))];case"Atan":return[s.atan(M("x",n,e,t))];case"Atan2":return[s.atan2(M("x",n,e,t),M("y",n,e,t))];case"Atanh":return[s.atanh(M("x",n,e,t))];case"Ceil":return[s.ceil(M("x",n,e,t))];case"Complex":return[s.complex(M("real",n,e,t),M("imag",n,e,t))];case"Cos":return[s.cos(M("x",n,e,t))];case"Cosh":return[s.cosh(M("x",n,e,t))];case"Elu":return[s.elu(M("x",n,e,t))];case"Erf":return[s.erf(M("x",n,e,t))];case"Exp":return[s.exp(M("x",n,e,t))];case"Expm1":return[s.expm1(M("x",n,e,t))];case"Floor":return[s.floor(M("x",n,e,t))];case"Log":return[s.log(M("x",n,e,t))];case"Log1p":return[s.log1p(M("x",n,e,t))];case"Imag":return[s.imag(M("x",n,e,t))];case"Neg":return[s.neg(M("x",n,e,t))];case"Reciprocal":return[s.reciprocal(M("x",n,e,t))];case"Real":return[s.real(M("x",n,e,t))];case"Relu":return[s.relu(M("x",n,e,t))];case"Round":return[s.round(M("x",n,e,t))];case"Selu":return[s.selu(M("x",n,e,t))];case"Sigmoid":return[s.sigmoid(M("x",n,e,t))];case"Sin":return[s.sin(M("x",n,e,t))];case"Sign":return[s.sign(M("x",n,e,t))];case"Sinh":return[s.sinh(M("x",n,e,t))];case"Softplus":return[s.softplus(M("x",n,e,t))];case"Sqrt":return[s.sqrt(M("x",n,e,t))];case"Square":return[s.square(M("x",n,e,t))];case"Tanh":return[s.tanh(M("x",n,e,t))];case"Tan":return[s.tan(M("x",n,e,t))];case"ClipByValue":return[s.clipByValue(M("x",n,e,t),M("clipValueMin",n,e,t),M("clipValueMax",n,e,t))];case"Relu6":return[s.relu6(M("x",n,e,t))];case"Rsqrt":return[s.rsqrt(Jr(n.inputNames[0],e,t))];case"LeakyRelu":return[s.leakyRelu(M("x",n,e,t),M("alpha",n,e,t))];case"Prelu":return[s.prelu(M("x",n,e,t),M("alpha",n,e,t))];case"IsNan":return[s.isNaN(Jr(n.inputNames[0],e,t))];case"IsInf":return[s.isInf(Jr(n.inputNames[0],e,t))];case"IsFinite":return[s.isFinite(Jr(n.inputNames[0],e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function No(n,e,t=""){if(!(typeof n=="number"||typeof e=="number")){se(n.length===e.length,()=>t+` Shapes ${n} and ${e} must match`);for(let s=0;s<n.length;s++){const r=n[s],a=e[s];se(r<0||a<0||r===a,()=>t+` Shapes ${n} and ${e} must match`)}}}function j4(n){return!(typeof n=="number"||n.some(e=>e<0))}function ag(n,e,t){let s=wS(n,t);const r=!j4(s);if(r&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${s}`);if(r&&e.forEach(a=>{s=wS(a.shape,s)}),!j4(s))throw new Error(`Non-fully-defined elementShape: ${s}`);return s}function wS(n,e){if(typeof n=="number")return e;if(typeof e=="number")return n;if(n.length!==e.length)throw new Error(`Incompatible ranks during merge: ${n} vs. ${e}`);const t=[];for(let s=0;s<n.length;++s){const r=n[s],a=e[s];if(r>=0&&a>=0&&r!==a)throw new Error(`Incompatible shape during merge: ${n} vs. ${e}`);t[s]=r>=0?r:a}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Aoe{constructor(e,t,s,r,a,i,o){this.name=e,this.dtype=t,this.maxSize=s,this.elementShape=r,this.identicalElementShapes=a,this.dynamicSize=i,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=Ut(0),_r(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.tensor.id))&&t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(t=>this.read(t))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const s=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=t.shape),No(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),s.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(s.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);s.tensor=t,_r(t),s.written=!0,this.tensors[e]=s}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((s,r)=>this.write(s,t[r]))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let r=0;r<this.size();r++)e.push(r)}if(e.length===0)return Nl([],[0].concat(this.elementShape));const s=this.readMany(e);return No(this.elementShape,s[0].shape,"TensorArray shape mismatch: "),Ei(s,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Nl([],[0].concat(this.elementShape));const t=[];for(let r=0;r<this.size();r++)t.push(r);const s=this.readMany(t);return No(this.elementShape,s[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${s[0].shape})`),dr(s,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const s=Math.max(...e);if(!this.dynamicSize&&s>=this.maxSize)throw new Error(`Max index must be < array size (${s}  vs. ${this.maxSize})`);this.writeMany(e,Oo(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let s=0;const r=e.map(l=>(s+=l,s));if(s!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${s}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const a=s===0?0:t.size/s,i=[];De(()=>{t=Be(t,[1,s,a]);for(let l=0;l<e.length;++l){const h=[0,l===0?0:r[l-1],0],f=[1,e[l],a];i[l]=Be(Nn(t,h,f),this.elementShape)}return i});const o=[];for(let l=0;l<e.length;l++)o[l]=l;this.writeMany(o,i)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Of{get id(){return this.idTensor.id}constructor(e,t,s,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=s,e!=null&&e.forEach(a=>{if(s!==a.dtype)throw new Error(`Invalid data types; op elements ${s}, but list elements ${a.dtype}`);No(t,a.shape,"TensorList shape mismatch: "),_r(a)}),this.idTensor=Ut(0),this.maxNumElements=r,_r(this.idTensor)}copy(){return new Of([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.id))&&t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,s=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(s!==-1&&this.tensors.length!==s)throw new Error(`Operation expected a list with ${s} elements but got a list with ${this.tensors.length} elements.`);No(e,this.elementShape,"TensorList shape mismatch: ");const r=ag(this.elementShape,this.tensors,e);return De(()=>{const a=this.tensors.map(i=>Be(i,r));return Ei(a,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const s=ag(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,No(r.shape,e,"TensorList shape mismatch: "),Be(r,s)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(No(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");_r(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const t=new Of([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let s=0;s<Math.min(this.tensors.length,e);++s)t.tensors[s]=this.tensors[s];return t}getItem(e,t,s){if(s!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);No(this.tensors[e].shape,t,"TensorList shape mismatch: ");const r=ag(this.elementShape,this.tensors,t);return Be(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);No(this.elementShape,t.shape,"TensorList shape mismatch: "),_r(t),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,s){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);No(this.elementShape,s,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=ag(this.elementShape,this.tensors,s);return e.length===0?Nl([],[0].concat(r)):De(()=>{const a=e.map(i=>Be(this.tensors[i],r));return Ei(a,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);No(this.elementShape,t,"TensorList shape mismatch: ");const s=ag(this.elementShape,this.tensors,t);return this.size()===0?Nl([],[0].concat(s)):De(()=>{const r=this.tensors.map(a=>Be(a,s));return dr(r,0)})}}function uoe(n,e,t){const s=n.dtype;if(n.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${n.shape}`);if(n.dtype!==t)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${t}`);const r=n.shape.slice(1);No(r,e,"TensorList shape mismatch: ");const a=Oo(n);return new Of(a,e,s)}function coe(n,e,t,s){return new Of([],n,e,s)}function hoe(n,e,t,s){if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(s!=null&&s!==-1&&r>=s)throw new Error(`Max index must be < array size (${r}  vs. ${s})`);const a=new Of([],t,n.dtype,s),i=Oo(n,0);return e.forEach((o,l)=>{a.setItem(o,i[l])}),a}function foe(n,e,t){let s=0;const r=e.map(h=>(s+=h,s));if(s!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${s}, and tensor's shape is: ${n.shape}`);const a=n.shape.slice(1),i=wS(a,t),o=s===0?0:n.size/s,l=De(()=>{const h=[];n=Be(n,[1,s,o]);for(let f=0;f<e.length;++f){const m=[0,f===0?0:r[f-1],0],g=[1,e[f],o];h[f]=Be(Nn(n,m,g),i)}return n.dispose(),h}),u=new Of([],t,n.dtype,e.length);for(let h=0;h<l.length;h++)u.setItem(h,l[h]);return u}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const doe=async(n,e,t)=>{switch(n.op){case"If":case"StatelessIf":{const s=M("thenBranch",n,e,t),r=M("elseBranch",n,e,t),a=M("cond",n,e,t),i=M("args",n,e,t);return(await a.data())[0]?t.functionMap[s].executeFunctionAsync(i,t.tensorArrayMap,t.tensorListMap):t.functionMap[r].executeFunctionAsync(i,t.tensorArrayMap,t.tensorListMap)}case"While":case"StatelessWhile":{const s=M("body",n,e,t),r=M("cond",n,e,t),a=M("args",n,e,t),i=await t.functionMap[r].executeFunctionAsync(a,t.tensorArrayMap,t.tensorListMap),o=a.map(h=>h.id);let l=await i[0].data();i.forEach(h=>{!h.kept&&o.indexOf(h.id)===-1&&h.dispose()});let u=a;for(;l[0];){const h=u;u=await t.functionMap[s].executeFunctionAsync(u,t.tensorArrayMap,t.tensorListMap);const f=u.map(m=>m.id);h.forEach(m=>{!m.kept&&o.indexOf(m.id)===-1&&f.indexOf(m.id)===-1&&m.dispose()});const d=await t.functionMap[r].executeFunctionAsync(u,t.tensorArrayMap,t.tensorListMap);l=await d[0].data(),d.forEach(m=>{!m.kept&&o.indexOf(m.id)===-1&&f.indexOf(m.id)===-1&&m.dispose()})}return u}case"LoopCond":{const s=M("pred",n,e,t);return[Bu(s)]}case"Switch":{const s=M("pred",n,e,t);let r=M("data",n,e,t);return r.kept||(r=Bu(r)),(await s.data())[0]?[void 0,r]:[r,void 0]}case"Merge":{const s=n.inputNames.find(r=>Jr(r,e,t)!==void 0);if(s){const r=Jr(s,e,t);return[Bu(r)]}return}case"Enter":{const s=M("frameName",n,e,t),r=M("tensor",n,e,t);return t.enterFrame(s),[Bu(r)]}case"Exit":{const s=M("tensor",n,e,t);return t.exitFrame(),[Bu(s)]}case"NextIteration":{const s=M("tensor",n,e,t);return t.nextIteration(),[Bu(s)]}case"TensorArrayV3":{const s=M("size",n,e,t),r=M("dtype",n,e,t),a=M("elementShape",n,e,t),i=M("dynamicSize",n,e,t),o=M("clearAfterRead",n,e,t),l=M("identicalElementShapes",n,e,t),u=M("name",n,e,t),h=new Aoe(u,r,s,a,l,i,o);return t.addTensorArray(h),[h.idTensor,Ut(1)]}case"TensorArrayWriteV3":{const s=M("tensorArrayId",n,e,t),r=M("index",n,e,t),a=M("tensor",n,e,t),i=t.getTensorArray(s.id);return i.write(r,a),[i.idTensor]}case"TensorArrayReadV3":{const s=M("tensorArrayId",n,e,t),r=M("index",n,e,t);return[t.getTensorArray(s.id).read(r)]}case"TensorArrayGatherV3":{const s=M("tensorArrayId",n,e,t),r=M("indices",n,e,t),a=M("dtype",n,e,t);return[t.getTensorArray(s.id).gather(r,a)]}case"TensorArrayScatterV3":{const s=M("tensorArrayId",n,e,t),r=M("indices",n,e,t),a=M("tensor",n,e,t),i=t.getTensorArray(s.id);return i.scatter(r,a),[i.idTensor]}case"TensorArrayConcatV3":{const s=M("tensorArrayId",n,e,t),r=t.getTensorArray(s.id),a=M("dtype",n,e,t);return[r.concat(a)]}case"TensorArraySplitV3":{const s=M("tensorArrayId",n,e,t),r=M("tensor",n,e,t),a=M("lengths",n,e,t),i=t.getTensorArray(s.id);return i.split(a,r),[i.idTensor]}case"TensorArraySizeV3":{const s=M("tensorArrayId",n,e,t),r=t.getTensorArray(s.id);return[Ut(r.size(),"int32")]}case"TensorArrayCloseV3":{const s=M("tensorArrayId",n,e,t),r=t.getTensorArray(s.id);return r.clearAndClose(),[r.idTensor]}case"TensorListSetItem":{const s=M("tensorListId",n,e,t),r=M("index",n,e,t),a=M("tensor",n,e,t),i=t.getTensorList(s.id);return i.setItem(r,a),[i.idTensor]}case"TensorListGetItem":{const s=M("tensorListId",n,e,t),r=M("index",n,e,t),a=M("elementShape",n,e,t),i=M("elementDType",n,e,t);return[t.getTensorList(s.id).getItem(r,a,i)]}case"TensorListScatterV2":case"TensorListScatter":{const s=M("indices",n,e,t),r=M("tensor",n,e,t),a=M("elementShape",n,e,t),i=M("numElements",n,e,t),o=hoe(r,s,a,i);return t.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const s=M("elementShape",n,e,t),r=M("elementDType",n,e,t);let a;n.op==="TensorListReserve"?a="numElements":a="maxNumElements";const i=M(a,n,e,t),o=n.op==="TensorListReserve"?-1:i,l=coe(s,r,i,o);return t.addTensorList(l),[l.idTensor]}case"TensorListGather":{const s=M("tensorListId",n,e,t),r=M("indices",n,e,t),a=M("elementShape",n,e,t),i=M("elementDType",n,e,t);return[t.getTensorList(s.id).gather(r,i,a)]}case"TensorListStack":{const s=M("tensorListId",n,e,t),r=M("elementShape",n,e,t),a=M("elementDType",n,e,t),i=M("numElements",n,e,t);return[t.getTensorList(s.id).stack(r,a,i)]}case"TensorListFromTensor":{const s=M("tensor",n,e,t),r=M("elementShape",n,e,t),a=M("elementDType",n,e,t),i=uoe(s,r,a);return t.addTensorList(i),[i.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const s=M("tensorListId",n,e,t),r=t.getTensorList(s.id),a=M("dtype",n,e,t),i=M("elementShape",n,e,t);return[r.concat(a,i)]}case"TensorListPushBack":{const s=M("tensorListId",n,e,t),r=M("tensor",n,e,t),a=t.getTensorList(s.id);return a.pushBack(r),[a.idTensor]}case"TensorListPopBack":{const s=M("tensorListId",n,e,t),r=M("elementShape",n,e,t),a=M("elementDType",n,e,t);return[t.getTensorList(s.id).popBack(r,a)]}case"TensorListSplit":{const s=M("tensor",n,e,t),r=M("elementShape",n,e,t),a=M("lengths",n,e,t),i=foe(s,a,r);return t.addTensorList(i),[i.idTensor]}case"TensorListLength":{const s=M("tensorListId",n,e,t),r=t.getTensorList(s.id);return[Ut(r.size(),"int32")]}case"TensorListResize":{const s=M("tensorListId",n,e,t),r=M("size",n,e,t),i=t.getTensorList(s.id).resize(r);return t.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V4(n,e,t){const[s,r]=M("fusedOps",n,e,t),a=s==="biasadd",i=!a,o=r==="prelu",l=s==="fusedbatchnorm",u=M("numArgs",n,e,t);if(a){if(o&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&a&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const h=M("strides",n,e,t),f=F2(n,e,t),d=M("dataFormat",n,e,t).toUpperCase(),m=M("dilations",n,e,t);let[g,w]=M("args",n,e,t);i&&(w=g,g=void 0);const v=M("leakyreluAlpha",n,e,t);return{stride:h,pad:f,dataFormat:d,dilations:m,biasArg:g,preluArg:w,activationFunc:r,leakyreluAlpha:v}}const poe=(n,e,t,s=ra)=>{switch(n.op){case"Conv1D":{const r=M("stride",n,e,t),a=M("pad",n,e,t),i=M("dataFormat",n,e,t).toUpperCase(),o=M("dilation",n,e,t);return[s.conv1d(M("x",n,e,t),M("filter",n,e,t),r,a,i,o)]}case"Conv2D":{const r=M("strides",n,e,t),a=F2(n,e,t),i=M("dataFormat",n,e,t).toUpperCase(),o=M("dilations",n,e,t);return[s.conv2d(M("x",n,e,t),M("filter",n,e,t),[r[1],r[2]],a,i,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:r,pad:a,dataFormat:i,dilations:o,biasArg:l,preluArg:u,activationFunc:h,leakyreluAlpha:f}=V4(n,e,t);return[s.fused.conv2d({x:M("x",n,e,t),filter:M("filter",n,e,t),strides:[r[1],r[2]],pad:a,dataFormat:i,dilations:[o[1],o[2]],bias:l,activation:h,preluActivationWeights:u,leakyreluAlpha:f})]}case"FusedDepthwiseConv2dNative":{const{stride:r,pad:a,dataFormat:i,dilations:o,biasArg:l,preluArg:u,activationFunc:h,leakyreluAlpha:f}=V4(n,e,t);return[s.fused.depthwiseConv2d({x:M("x",n,e,t),filter:M("filter",n,e,t),strides:[r[1],r[2]],pad:a,dataFormat:i,dilations:[o[1],o[2]],bias:l,activation:h,preluActivationWeights:u,leakyreluAlpha:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=M("outputShape",n,e,t),a=M("strides",n,e,t),i=F2(n,e,t);return[s.conv2dTranspose(M("x",n,e,t),M("filter",n,e,t),r,[a[1],a[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=M("strides",n,e,t),a=F2(n,e,t),i=M("dilations",n,e,t),o=M("dataFormat",n,e,t).toUpperCase();return[s.depthwiseConv2d(M("input",n,e,t),M("filter",n,e,t),[r[1],r[2]],a,o,[i[1],i[2]])]}case"Conv3D":{const r=M("strides",n,e,t),a=M("pad",n,e,t),i=M("dataFormat",n,e,t).toUpperCase(),o=M("dilations",n,e,t);return[s.conv3d(M("x",n,e,t),M("filter",n,e,t),[r[1],r[2],r[3]],a,i,[o[1],o[2],o[3]])]}case"AvgPool":{const r=M("strides",n,e,t),a=M("pad",n,e,t),i=M("kernelSize",n,e,t);return[s.avgPool(M("x",n,e,t),[i[1],i[2]],[r[1],r[2]],a)]}case"MaxPool":{const r=M("strides",n,e,t),a=M("pad",n,e,t),i=M("kernelSize",n,e,t);return[s.maxPool(M("x",n,e,t),[i[1],i[2]],[r[1],r[2]],a)]}case"MaxPoolWithArgmax":{const r=M("strides",n,e,t),a=M("pad",n,e,t),i=M("kernelSize",n,e,t),o=M("includeBatchInIndex",n,e,t),{result:l,indexes:u}=s.maxPoolWithArgmax(M("x",n,e,t),[i[1],i[2]],[r[1],r[2]],a,o);return[l,u]}case"AvgPool3D":{const r=M("strides",n,e,t),a=M("pad",n,e,t),i=M("kernelSize",n,e,t);return[s.avgPool3d(M("x",n,e,t),[i[1],i[2],i[3]],[r[1],r[2],r[3]],a)]}case"MaxPool3D":{const r=M("strides",n,e,t),a=M("pad",n,e,t),i=M("kernelSize",n,e,t);return[s.maxPool3d(M("x",n,e,t),[i[1],i[2],i[3]],[r[1],r[2],r[3]],a)]}case"Dilation2D":{const r=M("strides",n,e,t),a=M("pad",n,e,t),i=M("dilations",n,e,t),o=r[1],l=r[2],u=i[1],h=i[2];return[s.dilation2d(M("x",n,e,t),M("filter",n,e,t),[o,l],a,[u,h],"NHWC")]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const moe=(n,e,t,s=ra)=>{switch(n.op){case"Fill":{const r=M("shape",n,e,t),a=M("dtype",n,e,t),i=M("value",n,e,t);return[s.fill(r,i,a)]}case"LinSpace":{const r=M("start",n,e,t),a=M("stop",n,e,t),i=M("num",n,e,t);return[s.linspace(r,a,i)]}case"Multinomial":{const r=M("logits",n,e,t),a=M("numSamples",n,e,t),i=M("seed",n,e,t);return[s.multinomial(r,a,i)]}case"OneHot":{const r=M("indices",n,e,t),a=M("depth",n,e,t),i=M("onValue",n,e,t),o=M("offValue",n,e,t),l=M("dtype",n,e,t);return[s.oneHot(r,a,i,o,l)]}case"Ones":return[s.ones(M("shape",n,e,t),M("dtype",n,e,t))];case"OnesLike":return[s.onesLike(M("x",n,e,t))];case"RandomStandardNormal":return[s.randomStandardNormal(M("shape",n,e,t),M("dtype",n,e,t),M("seed",n,e,t))];case"RandomUniform":return[s.randomUniform(M("shape",n,e,t),M("minval",n,e,t),M("maxval",n,e,t),M("dtype",n,e,t))];case"RandomUniformInt":return[s.randomUniformInt(M("shape",n,e,t),M("minval",n,e,t),M("maxval",n,e,t),M("seed",n,e,t))];case"Range":{const r=M("start",n,e,t),a=M("stop",n,e,t),i=M("step",n,e,t);return[s.range(r,a,i,M("dtype",n,e,t))]}case"TruncatedNormal":{const r=M("shape",n,e,t),a=M("mean",n,e,t),i=M("stdDev",n,e,t),o=M("seed",n,e,t);return[s.truncatedNormal(r,a,i,M("dtype",n,e,t),o)]}case"Zeros":return[s.zeros(M("shape",n,e,t),M("dtype",n,e,t))];case"ZerosLike":return[s.zerosLike(M("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RC(n,e,t){const s=M("boxes",n,e,t),r=M("scores",n,e,t),a=M("maxOutputSize",n,e,t),i=M("iouThreshold",n,e,t),o=M("scoreThreshold",n,e,t),l=M("softNmsSigma",n,e,t);return{boxes:s,scores:r,maxOutputSize:a,iouThreshold:i,scoreThreshold:o,softNmsSigma:l}}const goe=async(n,e,t,s,r=ra)=>{switch(n.op){case"NonMaxSuppressionV5":{const{boxes:a,scores:i,maxOutputSize:o,iouThreshold:l,scoreThreshold:u,softNmsSigma:h}=RC(n,e,t),f=await r.image.nonMaxSuppressionWithScoreAsync(a,i,o,l,u,h);return[f.selectedIndices,f.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:a,scores:i,maxOutputSize:o,iouThreshold:l,scoreThreshold:u}=RC(n,e,t),h=M("padToMaxOutputSize",n,e,t),f=await r.image.nonMaxSuppressionPaddedAsync(a,i,o,l,u,h);return[f.selectedIndices,f.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:a,scores:i,maxOutputSize:o,iouThreshold:l,scoreThreshold:u}=RC(n,e,t);return[await r.image.nonMaxSuppressionAsync(a,i,o,l,u)]}case"Where":{const a=r.cast(M("condition",n,e,t),"bool"),i=[await r.whereAsync(a)];return a.dispose(),i}case"ListDiff":return r.setdiff1dAsync(M("x",n,e,t),M("y",n,e,t));default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yoe=(n,e,t,s=ra)=>{switch(n.op){case"LowerBound":{const r=M("sortedSequence",n,e,t),a=M("values",n,e,t);return[s.lowerBound(r,a)]}case"TopKV2":{const r=M("x",n,e,t),a=M("k",n,e,t),i=M("sorted",n,e,t),o=s.topk(r,a,i);return[o.values,o.indices]}case"UpperBound":{const r=M("sortedSequence",n,e,t),a=M("values",n,e,t);return[s.upperBound(r,a)]}case"Unique":{const r=M("x",n,e,t),a=s.unique(r);return[a.values,a.indices]}case"UniqueV2":{const r=M("x",n,e,t),a=M("axis",n,e,t),i=s.unique(r,a);return[i.values,i.indices]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const woe=(n,e,t,s=ra)=>{switch(n.op){case"Const":return e[n.name];case"PlaceholderWithDefault":const r=M("default",n,e,t);return[Jr(n.name,e,t)||r];case"Placeholder":return[Jr(n.name,e,t)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const h=M("x",n,e,t);return[Bu(h)]}case"IdentityN":return M("x",n,e,t).map(h=>Bu(h));case"Snapshot":const a=M("x",n,e,t);return[Bu(a)];case"Shape":return[s.tensor1d(M("x",n,e,t).shape,"int32")];case"ShapeN":return M("x",n,e,t).map(h=>s.tensor1d(h.shape));case"Size":return[s.scalar(M("x",n,e,t).size,"int32")];case"Rank":return[s.scalar(M("x",n,e,t).rank,"int32")];case"NoOp":return[s.scalar(1)];case"Print":const i=M("x",n,e,t),o=M("data",n,e,t),l=M("message",n,e,t),u=M("summarize",n,e,t);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let h=0;h<o.length;h++)console.log(Array.prototype.slice.call(o[h].dataSync()).slice(0,u));return[i];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class boe{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=Ut(0),this.tensorMap=new Map,_r(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ut(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const s=await e.data();return this.tensorMap.forEach(r=>r.dispose()),this.tensorMap.clear(),De(()=>{const r=Oo(t),a=s.length,i=r.length;se(a===i,()=>`The number of elements doesn't match, keys has ${a} elements, the values has ${i} elements.`);for(let o=0;o<a;o++){const l=s[o],u=r[o];_r(u),this.tensorMap.set(l,u)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);const s=await e.data();return De(()=>{const r=[];for(let a=0;a<s.length;a++){const i=s[a],o=this.findWithDefault(i,t);r.push(o)}return Ei(r)})}findWithDefault(e,t){const s=this.tensorMap.get(e);return s??t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xoe=async(n,e,t,s)=>{switch(n.op){case"HashTable":case"HashTableV2":{const r=s.getHashTableHandleByName(n.name);if(r!=null)return[r];{const a=M("keyDType",n,e,t),i=M("valueDType",n,e,t),o=new boe(a,i);return s.addHashTable(n.name,o),[o.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const r=M("tableHandle",n,e,t,s),a=M("keys",n,e,t),i=M("values",n,e,t);return[await s.getHashTableById(r.id).import(a,i)]}case"LookupTableFind":case"LookupTableFindV2":{const r=M("tableHandle",n,e,t,s),a=M("keys",n,e,t),i=M("defaultValue",n,e,t);return[await s.getHashTableById(r.id).find(a,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const r=M("tableHandle",n,e,t,s);return[s.getHashTableById(r.id).tensorSize()]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const voe=(n,e,t,s=ra)=>{switch(n.op){case"ResizeBilinear":{const r=M("images",n,e,t),a=M("size",n,e,t),i=M("alignCorners",n,e,t),o=M("halfPixelCenters",n,e,t);return[s.image.resizeBilinear(r,[a[0],a[1]],i,o)]}case"ResizeNearestNeighbor":{const r=M("images",n,e,t),a=M("size",n,e,t),i=M("alignCorners",n,e,t),o=M("halfPixelCenters",n,e,t);return[s.image.resizeNearestNeighbor(r,[a[0],a[1]],i,o)]}case"CropAndResize":{const r=M("image",n,e,t),a=M("boxes",n,e,t),i=M("boxInd",n,e,t),o=M("cropSize",n,e,t),l=M("method",n,e,t),u=M("extrapolationValue",n,e,t);return[s.image.cropAndResize(r,a,i,o,l,u)]}case"ImageProjectiveTransformV3":{const r=M("images",n,e,t),a=M("transforms",n,e,t),i=M("outputShape",n,e,t),o=M("fillValue",n,e,t),l=M("interpolation",n,e,t),u=M("fillMode",n,e,t);return[s.image.transform(r,a,l.toLowerCase(),u.toLowerCase(),o,i)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Coe=(n,e,t,s=ra)=>{switch(n.op){case"Equal":return[s.equal(M("a",n,e,t),M("b",n,e,t))];case"NotEqual":return[s.notEqual(M("a",n,e,t),M("b",n,e,t))];case"Greater":return[s.greater(M("a",n,e,t),M("b",n,e,t))];case"GreaterEqual":return[s.greaterEqual(M("a",n,e,t),M("b",n,e,t))];case"Less":return[s.less(M("a",n,e,t),M("b",n,e,t))];case"LessEqual":return[s.lessEqual(M("a",n,e,t),M("b",n,e,t))];case"LogicalAnd":return[s.logicalAnd(M("a",n,e,t),M("b",n,e,t))];case"LogicalNot":return[s.logicalNot(M("a",n,e,t))];case"LogicalOr":return[s.logicalOr(M("a",n,e,t),M("b",n,e,t))];case"Select":case"SelectV2":return[s.where(M("condition",n,e,t),M("a",n,e,t),M("b",n,e,t))];case"BitwiseAnd":return[s.bitwiseAnd(M("a",n,e,t),M("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Boe=(n,e,t,s=ra)=>{switch(n.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[s.matMul(M("a",n,e,t),M("b",n,e,t),M("transposeA",n,e,t),M("transposeB",n,e,t))];case"Einsum":return[s.einsum(M("equation",n,e,t),...M("tensors",n,e,t))];case"Transpose":return[s.transpose(M("x",n,e,t),M("perm",n,e,t))];case"_FusedMatMul":const[r,a]=M("fusedOps",n,e,t),i=r==="biasadd",o=a==="prelu",l=M("numArgs",n,e,t),u=M("leakyreluAlpha",n,e,t);if(i){if(o&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[h,f]=M("args",n,e,t);return[s.fused.matMul({a:M("a",n,e,t),b:M("b",n,e,t),transposeA:M("transposeA",n,e,t),transposeB:M("transposeB",n,e,t),bias:h,activation:a,preluActivationWeights:f,leakyreluAlpha:u})];case"MatrixBandPart":return[s.linalg.bandPart(M("a",n,e,t),M("numLower",n,e,t),M("numUpper",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Soe=(n,e,t,s=ra)=>{switch(n.op){case"EuclideanNorm":return[s.euclideanNorm(M("x",n,e,t),M("axis",n,e,t),M("keepDims",n,e,t))];case"FusedBatchNorm":case"FusedBatchNormV2":return[s.batchNorm(M("x",n,e,t),M("mean",n,e,t),M("variance",n,e,t),M("offset",n,e,t),M("scale",n,e,t),M("epsilon",n,e,t))];case"FusedBatchNormV3":return[s.batchNorm(M("x",n,e,t),M("mean",n,e,t),M("variance",n,e,t),M("offset",n,e,t),M("scale",n,e,t),M("epsilon",n,e,t))];case"LRN":return[s.localResponseNormalization(M("x",n,e,t),M("radius",n,e,t),M("bias",n,e,t),M("alpha",n,e,t),M("beta",n,e,t))];case"Softmax":return[s.softmax(M("x",n,e,t))];case"LogSoftmax":return[s.logSoftmax(M("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Noe=(n,e,t,s=ra)=>{switch(n.op){case"RaggedGather":{const{outputNestedSplits:r,outputDenseValues:a}=s.raggedGather(M("paramsNestedSplits",n,e,t),M("paramsDenseValues",n,e,t),M("indices",n,e,t),M("outputRaggedRank",n,e,t));return r.concat(a)}case"RaggedRange":{const{rtNestedSplits:r,rtDenseValues:a}=s.raggedRange(M("starts",n,e,t),M("limits",n,e,t),M("splits",n,e,t));return[r,a]}case"RaggedTensorToTensor":return[s.raggedTensorToTensor(M("shape",n,e,t),M("values",n,e,t),M("defaultValue",n,e,t),M("rowPartitionTensors",n,e,t),M("rowPartitionTypes",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ioe=(n,e,t,s=ra)=>{switch(n.op){case"Max":{const o=M("axis",n,e,t),l=M("keepDims",n,e,t);return[s.max(M("x",n,e,t),o,l)]}case"Mean":{const o=M("axis",n,e,t),l=M("keepDims",n,e,t);return[s.mean(M("x",n,e,t),o,l)]}case"Min":{const o=M("axis",n,e,t),l=M("keepDims",n,e,t);return[s.min(M("x",n,e,t),o,l)]}case"Sum":{const o=M("axis",n,e,t),l=M("keepDims",n,e,t);return[s.sum(M("x",n,e,t),o,l)]}case"All":{const o=M("axis",n,e,t),l=M("keepDims",n,e,t);return[s.all(M("x",n,e,t),o,l)]}case"Any":{const o=M("axis",n,e,t),l=M("keepDims",n,e,t);return[s.any(M("x",n,e,t),o,l)]}case"ArgMax":{const o=M("axis",n,e,t);return[s.argMax(M("x",n,e,t),o)]}case"ArgMin":{const o=M("axis",n,e,t);return[s.argMin(M("x",n,e,t),o)]}case"Prod":{const o=M("axis",n,e,t),l=M("keepDims",n,e,t);return[s.prod(M("x",n,e,t),o,l)]}case"Cumprod":{const o=M("axis",n,e,t),l=M("exclusive",n,e,t),u=M("reverse",n,e,t);return[s.cumprod(M("x",n,e,t),o,l,u)]}case"Cumsum":{const o=M("axis",n,e,t),l=M("exclusive",n,e,t),u=M("reverse",n,e,t);return[s.cumsum(M("x",n,e,t),o,l,u)]}case"Bincount":const r=M("x",n,e,t),a=M("weights",n,e,t),i=M("size",n,e,t);return[s.bincount(r,a,i)];case"DenseBincount":{const o=M("x",n,e,t),l=M("weights",n,e,t),u=M("size",n,e,t),h=M("binaryOutput",n,e,t);return[s.denseBincount(o,l,u,h)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eoe=(n,e,t,s=ra)=>{switch(n.op){case"ConcatV2":case"Concat":{const r=M("n",n,e,t),a=M("axis",n,e,t);let i=M("tensors",n,e,t);return i=i.slice(0,r),[s.concat(i,a)]}case"Gather":{const r=M("x",n,e,t),a=M("indices",n,e,t);return[s.gather(r,s.cast(a,"int32"),0)]}case"GatherV2":{const r=M("axis",n,e,t),a=M("batchDims",n,e,t),i=M("x",n,e,t),o=M("indices",n,e,t);return[s.gather(i,s.cast(o,"int32"),r,a)]}case"Reverse":{const r=M("dims",n,e,t),a=[];for(let o=0;o<r.length;o++)r[o]&&a.push(o);const i=M("x",n,e,t);return[s.reverse(i,a)]}case"ReverseV2":{const r=M("axis",n,e,t),a=M("x",n,e,t);return[s.reverse(a,r)]}case"Slice":{const r=M("begin",n,e,t),a=M("size",n,e,t);return[s.slice(M("x",n,e,t),r,a)]}case"StridedSlice":{const r=M("begin",n,e,t),a=M("end",n,e,t),i=M("strides",n,e,t),o=M("beginMask",n,e,t),l=M("endMask",n,e,t),u=M("ellipsisMask",n,e,t),h=M("newAxisMask",n,e,t),f=M("shrinkAxisMask",n,e,t),d=M("x",n,e,t);return[s.stridedSlice(d,r,a,i,o,l,u,h,f)]}case"Pack":return De(()=>{const r=M("axis",n,e,t),a=M("tensors",n,e,t),i=a[0].shape,o=s.squeeze(a[0]).shape,l=a.map(u=>{const h=Bn(u.shape,i);if(!h&&!Bn(s.squeeze(u).shape,o))throw new Error("the input tensors shape does not match");return h?u:s.reshape(u,i)});return[s.stack(l,r)]});case"Unpack":{const r=M("axis",n,e,t),a=M("tensor",n,e,t);return s.unstack(a,r)}case"Tile":{const r=M("reps",n,e,t);return[s.tile(M("x",n,e,t),r)]}case"Split":case"SplitV":{const r=M("axis",n,e,t),a=M("numOrSizeSplits",n,e,t),i=M("x",n,e,t);return s.split(i,a,r)}case"ScatterNd":{const r=M("indices",n,e,t),a=M("values",n,e,t),i=M("shape",n,e,t);return[s.scatterND(r,a,i)]}case"GatherNd":{const r=M("x",n,e,t),a=M("indices",n,e,t);return[s.gatherND(r,a)]}case"SparseToDense":{const r=M("sparseIndices",n,e,t),a=M("outputShape",n,e,t),i=M("sparseValues",n,e,t),o=M("defaultValue",n,e,t);return[s.sparseToDense(r,i,a,i.dtype===o.dtype?o:s.cast(o,i.dtype))]}case"TensorScatterUpdate":{const r=M("indices",n,e,t),a=M("values",n,e,t),i=M("tensor",n,e,t);return[s.tensorScatterUpdate(i,r,a)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const koe=(n,e,t,s=ra)=>{switch(n.op){case"SparseFillEmptyRows":{const{outputIndices:r,outputValues:a,emptyRowIndicator:i,reverseIndexMap:o}=s.sparse.sparseFillEmptyRows(M("indices",n,e,t),M("values",n,e,t),M("denseShape",n,e,t),M("defaultValue",n,e,t));return[r,a,i,o]}case"SparseReshape":{const{outputIndices:r,outputShape:a}=s.sparse.sparseReshape(M("inputIndices",n,e,t),M("inputShape",n,e,t),M("newShape",n,e,t));return[r,a]}case"SparseSegmentMean":return[s.sparse.sparseSegmentMean(M("data",n,e,t),M("indices",n,e,t),M("segmentIds",n,e,t))];case"SparseSegmentSum":return[s.sparse.sparseSegmentSum(M("data",n,e,t),M("indices",n,e,t),M("segmentIds",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Foe=(n,e,t,s=ra)=>{switch(n.op){case"FFT":return[s.fft(M("x",n,e,t))];case"IFFT":return[s.ifft(M("x",n,e,t))];case"RFFT":return[s.rfft(M("x",n,e,t))];case"IRFFT":return[s.irfft(M("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Toe=(n,e,t,s=ra)=>{switch(n.op){case"StaticRegexReplace":return[s.string.staticRegexReplace(M("input",n,e,t),M("pattern",n,e,t),M("rewrite",n,e,t),M("replaceGlobal",n,e,t))];case"StringNGrams":{const{nGrams:r,nGramsSplits:a}=s.string.stringNGrams(M("data",n,e,t),M("dataSplits",n,e,t),M("separator",n,e,t),M("nGramWidths",n,e,t),M("leftPad",n,e,t),M("rightPad",n,e,t),M("padWidth",n,e,t),M("preserveShortSequences",n,e,t));return[r,a]}case"StringSplit":{const{indices:r,values:a,shape:i}=s.string.stringSplit(M("input",n,e,t),M("delimiter",n,e,t),M("skipEmpty",n,e,t));return[r,a,i]}case"StringToHashBucketFast":return[s.string.stringToHashBucketFast(M("input",n,e,t),M("numBuckets",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Doe=(n,e,t,s=ra)=>{switch(n.op){case"Cast":return[s.cast(M("x",n,e,t),M("dtype",n,e,t))];case"ExpandDims":{const r=M("axis",n,e,t);return[s.expandDims(M("x",n,e,t),r)]}case"Squeeze":{const r=M("axis",n,e,t);return[s.squeeze(M("x",n,e,t),r)]}case"Reshape":return[s.reshape(M("x",n,e,t),M("shape",n,e,t))];case"EnsureShape":return[s.ensureShape(M("x",n,e,t),M("shape",n,e,t))];case"MirrorPad":return[s.mirrorPad(M("x",n,e,t),M("padding",n,e,t),M("mode",n,e,t))];case"PadV2":case"Pad":return[s.pad(M("x",n,e,t),M("padding",n,e,t),M("constantValue",n,e,t))];case"SpaceToBatchND":{const r=M("blockShape",n,e,t),a=M("paddings",n,e,t);return[s.spaceToBatchND(M("x",n,e,t),r,a)]}case"BatchToSpaceND":{const r=M("blockShape",n,e,t),a=M("crops",n,e,t);return[s.batchToSpaceND(M("x",n,e,t),r,a)]}case"DepthToSpace":{const r=M("blockSize",n,e,t),a=M("dataFormat",n,e,t).toUpperCase();return[s.depthToSpace(M("x",n,e,t),r,a)]}case"BroadcastTo":return[s.broadcastTo(M("x",n,e,t),M("shape",n,e,t))];case"BroadcastArgs":return[s.broadcastArgs(M("s0",n,e,t),M("s1",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G4(n,e,t,s,r=De){const a=((i,o,l)=>{switch(i.category){case"arithmetic":return r(()=>ooe(i,o,l));case"basic_math":return r(()=>loe(i,o,l));case"control":return doe(i,o,l);case"convolution":return r(()=>poe(i,o,l));case"creation":return r(()=>moe(i,o,l));case"dynamic":return goe(i,o,l);case"evaluation":return r(()=>yoe(i,o,l));case"image":return r(()=>voe(i,o,l));case"graph":return r(()=>woe(i,o,l));case"logical":return r(()=>Coe(i,o,l));case"matrices":return r(()=>Boe(i,o,l));case"normalization":return r(()=>Soe(i,o,l));case"ragged":return r(()=>Noe(i,o,l));case"reduction":return r(()=>Ioe(i,o,l));case"slice_join":return r(()=>Eoe(i,o,l));case"sparse":return r(()=>koe(i,o,l));case"spectral":return r(()=>Foe(i,o,l));case"string":return r(()=>Toe(i,o,l));case"transformation":return r(()=>Doe(i,o,l));case"hash_table":return xoe(i,o,l,s);case"custom":const u=BO(i.op);if(u&&u.customExecutor)return u.customExecutor(new ioe(i,o,l));throw TypeError(`Custom op ${i.op} is not registered.`);default:throw TypeError(`Unknown op '${i.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(n,e,t);return Ef(a)?a.then(i=>[].concat(i)):[].concat(a)}class K4{constructor(e={},t={},s={},r={},a){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=s,this.functionMap=r,this.parseNodeNameCache=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const s=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(s))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(t=>t.id===0&&t.iterationId===0?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W4(n,e,t,s){const r=new Set,a=[];let i=null,o=null;const l=new Set,u=new Set(Object.keys(n).map(d=>wi(d)[0]));s=s||[];const h=new Set(s.map(d=>wi(d.name)[0])),f=[...e];for(;f.length>0;){const d=f.pop();if((gf(d)||Moe(d)||Hoe(d))&&i==null&&(i=d,o=i.children.map(m=>m.name).filter(m=>r.has(m))),r.add(d.name),t[d.name]==null&&!u.has(d.name)&&!h.has(d.name)){if(d.inputs.length===0){a.push(d.name);continue}d.inputs.forEach(m=>{l.has(m.name)||(l.add(m.name),f.push(m))})}}return{inputs:n,outputs:e,usedNodes:r,missingInputs:a,dynamicNode:i,syncInputs:o}}function Loe(n,e){const{usedNodes:t,inputs:s}=e,r=Object.keys(s).map(v=>wi(v)[0]).map(v=>n.nodes[v]),a=n.initNodes||[],i=v=>t.has(typeof v=="string"?v:v.name);function o(v){return[...new Map(v.map(b=>[b.name,b])).values()]}const l=o([...r,...n.weights,...a]).filter(i),u=o([...l,...Object.values(n.nodes)]).filter(i),h=new Map(u.map(v=>[v.name,v])),f={};for(const v of u){f[v.name]=f[v.name]||0;for(const b of v.children)i(b)||(f[b.name]=Number.POSITIVE_INFINITY),f[b.name]=(f[b.name]||0)+1}const d=Object.entries(f).filter(([,v])=>v===0).map(([v])=>v),m=[...d];for(;d.length>0;){const v=d.pop(),b=h.get(v);for(const C of b.children.filter(i))--f[C.name]===0&&(m.push(C.name),d.push(C.name))}const g=m.map(v=>h.get(v)),w=Uoe(g,l);return Roe(w,l),w}function Uoe(n,e){const t=new Map(n.map(i=>[i.name,i])),s=e.map(i=>i.name),r=new Set(s);for(;s.length>0;){const i=s.pop(),o=t.get(i);for(const l of o.children)!t.has(l.name)||r.has(l.name)||(r.add(l.name),s.push(l.name))}return n.filter(i=>r.has(i.name))}class Zy extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function Roe(n,e){const t=new Map(n.map((o,l)=>[o.name,l])),s=new Set(e.map(o=>o.name)),r=o=>s.has(typeof o=="string"?o:o.name),a=new Set(n.map(o=>o.name)),i=o=>a.has(typeof o=="string"?o:o.name);for(const o of n){for(const l of o.children.filter(i)){if(!t.has(l.name))throw new Zy(`Child ${l.name} of node ${o.name} is unreachable.`);if(t.get(o.name)>t.get(l.name))throw new Zy(`Node ${o.name} is scheduled to run after its child ${l.name}.`)}if(!r(o))for(const l of o.inputs){if(!t.has(l.name))throw new Zy(`Input ${l.name} of node ${o.name} is unreachable.`);if(t.get(l.name)>t.get(o.name))throw new Zy(`Node ${o.name} is scheduled to run before its input ${l.name}.`)}}}function $oe(n){const e=new Map(n.map((o,l)=>[o.name,l])),t=Number.MAX_SAFE_INTEGER,s=n.map((o,l)=>gf(o)?t:l),r=o=>{const l=s[e.get(o.name)];return l??-1},a=n.map((o,l)=>o.children.map(r).reduce((u,h)=>Math.max(u,h),s[l])),i=new Map;for(let o=0;o<n.length;++o){const l=a[o];if(l===t)continue;const u=n[o],h=n[l];i.has(h.name)||i.set(h.name,[]),i.get(h.name).push(u)}return i}const _oe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Ooe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Qoe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function gf(n){return _oe.has(n.op)}function Moe(n){return Ooe.has(n.op)}function Hoe(n){return Qoe.has(n.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fw{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map(s=>e[s].map(r=>r.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(s=>{this._functionExecutorMap[s]=new fw(e.functions[s],this)})}getCompilationKey(e,t){const s=e.map(a=>a.name).sort(),r=t.map(a=>a.name).sort();return s.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(e,t){const s=W4(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:a,syncInputs:i}=s;if(a!=null)throw new Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${i}]`);if(r.length>0){const u=t.map(f=>f.name),h=Object.keys(e);throw new Error(`Cannot compute the outputs [${u}] from the provided inputs [${h}]. Missing the following inputs: [${r}]`)}const o=Loe(this.graph,s),l=$oe(o);return{orderedNodes:o,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const t=e.clone();return _r(t),t}cloneTensorList(e){return e?e.map(s=>this.cloneAndKeepTensor(s)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([t,s])=>[t,this.cloneTensorList(s)]))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const s=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const r=s.map(d=>this.graph.nodes[wi(d)[0]]),a=t.map(d=>wi(d)[0]),i=new Set(a);let o=a.map(d=>this.graph.nodes[d]);o.length===0&&(o=this._outputs);const l=this.getCompilationKey(r,o);let u=this.compiledMap.get(l);u==null&&(u=this.compile(e,o),this.compiledMap.set(l,u));try{this.keepIntermediateTensors=Qe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const h={},f={};return De(()=>{const d=new K4(this.weightMap,h,f,this.functionExecutorMap,this.parseNodeNameCache),m=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(b=>{const[C,N]=wi(b,d),I=[];I[N]=e[b],m[C]=I,this.keepIntermediateTensors&&(this.clonedTensorsMap[C]=this.cloneTensorList(I))});const g=this.getFrozenTensorIds(m),{orderedNodes:w,nodeLiveUntilMap:v}=u;for(const b of w){if(m[b.name])continue;const C=G4(b,m,d,this._resourceManager);if(Ef(C))throw new Error(`The execution of the op '${b.op}' returned a promise. Please use model.executeAsync() instead.`);m[b.name]=C,this.keepIntermediateTensors&&(this.clonedTensorsMap[b.name]=this.cloneTensorList(C)),this.checkTensorForDisposalWithNodeLiveUntilInfo(b,m,d,g,i,v.get(b.name))}return this.parent==null&&d.dispose(g),t.map(b=>Jr(b,m,d))})}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map(s=>e[s]).map(s=>s.map(r=>r.id)));return new Set(t)}checkTensorForDisposal(e,t,s,r,a,i,o){if(!(gf(t)||i.has(e))){for(const l of s[e])l!=null&&(o[l.id]=(o[l.id]||0)+t.children.length);for(const l of t.inputs){if(gf(l))continue;const u=H4(l.name,s,r);if(u!=null)for(const h of u){if(!h||h.kept||a.has(h.id))continue;const f=o[h.id];f===1?(h.dispose(),delete o[h.id]):f!=null&&o[h.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,s,r,a,i){function o(l){return gf(l)||a.has(l.name)}if(!(gf(e)||i==null))for(const l of i){if(o(l))continue;const u=H4(l.name,t,s);for(const h of u)!h||h.kept||r.has(h.id)||h.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t,s=!1,r={},a={}){this.disposeIntermediateTensors(),s||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=Qe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const i=new K4(this.weightMap,r,a,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const o=await this.executeWithControlFlow(e,i,t,s),l=t.map(d=>Jr(d,o,i)),u=l.map(d=>d.id),h=Object.keys(e).map(d=>e[d].id),f=new Set([...u,...h,...this.weightIds]);return Object.values(o).forEach(d=>{d.forEach(m=>{m&&!m.isDisposed&&!f.has(m.id)&&m.dispose()})}),this.parent==null&&i.dispose(f),l}async executeFunctionAsync(e,t,s){const r=e.reduce((a,i,o)=>(a[this.inputs[o].name]=i,a),{});return this._executeAsync(r,this.outputNodes,!0,t,s)}async executeWithControlFlow(e,t,s,r){const a=Object.keys(e),i=a.map(I=>this.graph.nodes[wi(I)[0]]),o=s.map(I=>wi(I)[0]),l=new Set(o);let u=o.map(I=>this.graph.nodes[I]);u.length===0&&(u=this._outputs);const{usedNodes:h,missingInputs:f,dynamicNode:d,syncInputs:m}=W4(e,u,this.weightMap,this._initNodes),g=[...i,...this.graph.weights,...this._initNodes||[]].map(I=>({node:I,contexts:t.currentContext})),w=Object.assign({},this.weightMap);Object.keys(e).forEach(I=>{const[L,$]=wi(I),H=[];H[$]=e[I],w[L]=H});const v={},b=this.getFrozenTensorIds(w),C={};for(;g.length>0;){const I=this.processStack(i,g,t,w,C,b,l,v,h);await Promise.all(I)}d==null&&!r&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const N=u.filter(I=>!gf(I)&&!Jr(I.name,w,t)).map(I=>I.name);if(N.length>0){let I="";throw d!=null&&(I=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${m}]`),new Error(`Cannot compute the outputs [${N}] from the provided inputs [${a}]. Consider providing the following inputs: [${f}]. ${I}`)}return w}processStack(e,t,s,r,a,i,o,l,u){const h=[];for(;t.length>0;){const f=t.pop();s.currentContext=f.contexts;let d="";if(f.node.op==="Enter"&&M("isConstant",f.node,r,s)&&([d]=Cu(f.node.name,s)),r[f.node.name]==null){const m=G4(f.node,r,s,this._resourceManager);d||([d]=Cu(f.node.name,s));const g=s.currentContext;Ef(m)?h.push(m.then(w=>(r[d]=w,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(w)),s.currentContext=g,this.checkTensorForDisposal(d,f.node,r,s,i,o,l),this.processChildNodes(f.node,t,s,r,a,u),w))):(r[d]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(m)),this.checkTensorForDisposal(d,f.node,r,s,i,o,l),this.processChildNodes(f.node,t,s,r,a,u))}else this.processChildNodes(f.node,t,s,r,a,u)}return h}processChildNodes(e,t,s,r,a,i){e.children.forEach(o=>{const[l]=Cu(o.name,s);a[l]||!i.has(o.name)||(o.op==="Merge"?o.inputNames.some(u=>!!Jr(u,r,s))&&(a[l]=!0,t.push({contexts:s.currentContext,node:o})):o.inputNames.every(u=>!!Jr(u,r,s))&&(a[l]=!0,t.push({contexts:s.currentContext,node:o})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(t=>t.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{const s=e[t],[r]=wi(t),a=this.graph.nodes[r];if(a.attrParams.shape&&a.attrParams.shape.value){const i=a.attrParams.shape.value,o=i.length===s.shape.length&&s.shape.every((l,u)=>i[u]===-1||i[u]===l);se(o,()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${i}], but was [${s.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&se(s.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${s.dtype}`)})}mapInputs(e){var t,s;const r={};for(const a in e){const i=(s=(t=this._signature)===null||t===void 0?void 0:t.inputs)===null||s===void 0?void 0:s[a];i!=null?r[i.name]=e[a]:r[a]=e[a]}return r}checkInputs(e){const t=Object.keys(e).filter(s=>{const[r]=wi(s);return this.graph.nodes[r]==null});if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(t=>{var s,r;const a=(r=(s=this._signature)===null||s===void 0?void 0:s.outputs)===null||r===void 0?void 0:r[t];return a!=null?a.name:t},{})}checkOutputs(e){e.forEach(t=>{const[s]=wi(t);if(!this.graph.nodes[s])throw new Error(`The output '${t}' is not found in the graph`)})}}class Poe{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zoe="?tfjs-format=file",joe="model.json";class Voe{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,t={},s=IR){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=s,t==null&&(this.loadOptions={}),this.resourceManager=new Poe}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(t.length===0)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Ef(e)?e.then(t=>t.getWeightStream==null?this.loadSync(t):this.loadStreaming(t)):this.loadSync(e)}loadSync(e){const t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const t=await YL(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;const s=this.artifacts.modelTopology;let r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const a=this.artifacts.userDefinedMetadata;a.signature!=null&&(r=a.signature),a.structuredOutputKeys!=null&&(this.structuredOutputKeys=a.structuredOutputKeys)}if(this.signature=r,this.version=`${s.versions.producer}.${s.versions.minConsumer}`,this.executor=new fw(P4.Instance.transformGraph(s,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const a=P4.Instance.transformGraph(e.modelInitializer);this.initializer=new fw(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if(typeof e=="string"){const s=this.io.getSaveHandlers(e);if(s.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(s.length>1)throw new Error(`Found more than one (${s.length}) save handlers for URL '${e}'`);e=s[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t=e instanceof ps?[e]:e,s={};return t.forEach((r,a)=>s[this.structuredOutputKeys[a]]=r),s}return e}predict(e,t){const s=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(s)}async predictAsync(e,t){const s=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(s)}normalizeInputs(e){var t;if(!(e instanceof ps)&&!Array.isArray(e)){const a=(t=this.signature)===null||t===void 0?void 0:t.inputs;if(a!=null)for(const i in a){const o=a[i];o.resourceId!=null&&(e[i]=this.resourceIdToCapturedInput[o.resourceId])}return e}e=Array.isArray(e)?e:[e];const s=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+s!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-s} non-resource placeholders, while there are ${e.length} input tensors provided.`);let r=0;return this.inputNodes.reduce((a,i)=>{var o,l,u;const h=(u=(l=(o=this.signature)===null||o===void 0?void 0:o.inputs)===null||l===void 0?void 0:l[i])===null||u===void 0?void 0:u.resourceId;return h!=null?a[i]=this.resourceIdToCapturedInput[h]:a[i]=e[r++],a},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,s=Object.keys(t);for(let r=0;r<s.length;r++){const a=s[r],i=t[a];this.resourceIdToCapturedInput[i.resourceId]=e[r]}}}execute(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const s=this.executor.execute(e,t);return s.length>1?s:s[0]}async executeAsync(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const s=await this.executor.executeAsync(e,t);return s.length>1?s:s[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,s)=>(t[s]=[e[s]],t),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&on(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function Goe(n,e={},t=IR){if(n==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof n=="string"&&(n=Koe(n));const s=new Voe(n,e,t);return await s.load(),s}function Koe(n){return n.endsWith("/")||(n=n+"/"),`${n}${joe}${zoe}`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var q4;(function(n){n[n.FAIL=0]="FAIL",n[n.SHORTEST=1]="SHORTEST",n[n.LONGEST=2]="LONGEST"})(q4||(q4={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function It(n,e){Array.isArray(n)||(n=[n]),n.forEach(t=>{t!=null&&se(t.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Woe=R5;class Sx extends WS{nextDataId(){return Sx.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new CL(this,xA())}write(e,t,s){this.firstUse&&(this.firstUse=!1,Qe().get("IS_NODE")&&Ji(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:s,refCount:1}),r}makeTensorInfo(e,t,s){let r;if(t==="string"&&s!=null&&s.length>0&&e0(s[0])){const a=s.map(i=>qc(i));r=this.write(a,e,t)}else r=this.write(s,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const t=this.data.get(e);t.refCount++}decRef(e){if(this.data.has(e)){const t=this.data.get(e);t.refCount--}}move(e,t,s,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:s}=this.data.get(e);if(t==="complex64"){const r=this.readSync(s.real.dataId),a=this.readSync(s.imag.dataId);return Uu(r,a)}return YW(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if(e.dtype==="string")try{const s=t.map(r=>th(r));return un(e.shape,e.dtype,s)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return un(e.shape,e.dtype,t)}makeOutput(e,t,s){return xA().makeTensorFromTensorInfo(this.makeTensorInfo(t,s,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:s}=this.data.get(e);s!=null&&(this.disposeData(s.real.dataId,!0),this.disposeData(s.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=ni();return e(),{kernelMs:ni()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){It([e],"where");const t=this.readSync(e.dataId);return Woe(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Sx.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IO(n){const e=new Float32Array(n.length);for(let t=0;t<n.length;++t)e[t]=Math.abs(n[t]);return e}const qoe=n=>{const{x:e}=n.inputs,t=n.backend;It(e,"abs");let s=new Float32Array(je(e.shape));const r=t.data.get(e.dataId).values;return s=IO(r),t.makeOutput(s,e.shape,e.dtype)},Xoe={kernelName:Qw,backendName:"cpu",kernelFunc:qoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function er(n){return(e,t,s,r,a)=>{const i=sn(e,t),o=i.length,l=_t(i),u=je(i),h=ea(a,u),f=e.length,d=t.length,m=_t(e),g=_t(t),w=Bp(e,i),v=Bp(t,i);if(w.length+v.length===0)for(let b=0;b<h.length;++b)h[b]=n(s[b%s.length],r[b%r.length]);else for(let b=0;b<h.length;++b){const C=Mp(b,o,l),N=C.slice(-f);w.forEach(H=>N[H]=0);const I=EA(N,f,m),L=C.slice(-d);v.forEach(H=>L[H]=0);const $=EA(L,d,g);h[b]=n(s[I],r[$])}return[h,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xi(n){const{inputs:e,backend:t}=n,{real:s,imag:r}=e,a=t.data.get(s.dataId).values,i=t.data.get(r.dataId).values,o=t.makeTensorInfo(s.shape,"complex64"),l=t.data.get(o.dataId);return l.complexTensorInfos={real:t.makeTensorInfo(s.shape,"float32",a),imag:t.makeTensorInfo(r.shape,"float32",i)},o}const Yoe={kernelName:rN,backendName:"cpu",kernelFunc:xi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dw(n,e,t="float32"){if(t==="complex64"){const r=dw(n,e,"float32"),a=dw(n,e,"float32");return xi({inputs:{real:r,imag:a},backend:n})}const s=ma(je(e),t);return n.makeTensorInfo(e,t,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RA(n){const{inputs:e,backend:t}=n,{x:s}=e;return t.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const Joe={kernelName:x0,backendName:"cpu",kernelFunc:RA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qf(n){const{inputs:e,backend:t}=n,{input:s}=e,r=t.data.get(s.dataId).complexTensorInfos.real,a=t.data.get(r.dataId).values;return t.makeTensorInfo(r.shape,r.dtype,a)}const Zoe={kernelName:$N,backendName:"cpu",kernelFunc:Qf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EO(n,e,t,s){if(s==="int32"){const r=Int32Array.from(n);return[e,"int32",r]}if(s==="bool"){const r=zf([0],t),[a,i]=er((o,l)=>o!==l?1:0)(e,[],n,r,"bool");return[i,"bool",a]}throw new Error(`Error in Cast: failed to cast ${t} to ${s}`)}function uh(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{dtype:a}=s;if(a==="complex64"){if(r.dtype==="complex64")return RA({inputs:{x:r},backend:t});const h=dw(t,r.shape,r.dtype),f=uh({inputs:{x:r},backend:t,attrs:{dtype:"float32"}}),d=xi({inputs:{real:f,imag:h},backend:t});return t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(f),d}if(r.dtype==="complex64"){const h=Qf({inputs:{input:r},backend:t}),f=uh({inputs:{x:h},backend:t,attrs:{dtype:a}});return t.disposeIntermediateTensorInfo(h),f}if(!SL(r.dtype,a)){const h=RA({inputs:{x:r},backend:t});return{dataId:h.dataId,shape:h.shape,dtype:a}}const i=t.data.get(r.dataId).values,[o,l,u]=EO(i,r.shape,r.dtype,a);return t.makeTensorInfo(o,l,u)}const ele={kernelName:l0,backendName:"cpu",kernelFunc:uh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tr(n,e,t,s){return t==null?({inputs:r,backend:a})=>{const{a:i,b:o}=r,l=a;It([i,o],n);const u=l.data.get(i.dataId).values,h=l.data.get(o.dataId).values,f=i.dtype==="string"?Ru(u):u,d=i.dtype==="string"?Ru(h):h,m=s||i.dtype,[g,w]=e(i.shape,o.shape,f,d,m);return l.makeTensorInfo(w,m,g)}:({inputs:r,backend:a})=>{const{a:i,b:o}=r,l=a;if(i.dtype==="complex64"||o.dtype==="complex64"){const u=uh({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),h=l.data.get(u.dataId),f=h.complexTensorInfos.real,d=h.complexTensorInfos.imag,m=l.data.get(f.dataId).values,g=l.data.get(d.dataId).values,w=uh({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),v=l.data.get(w.dataId),b=v.complexTensorInfos.real,C=v.complexTensorInfos.imag,N=l.data.get(b.dataId).values,I=l.data.get(C.dataId).values,[L,$,H]=t(i.shape,o.shape,m,g,N,I),U=l.makeTensorInfo(H,"float32",L),O=l.makeTensorInfo(H,"float32",$),z=xi({inputs:{real:U,imag:O},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(w),l.disposeIntermediateTensorInfo(U),l.disposeIntermediateTensorInfo(O),z}else{const u=l.data.get(i.dataId).values,h=l.data.get(o.dataId).values,f=s||i.dtype,[d,m]=e(i.shape,o.shape,u,h,f);return l.makeTensorInfo(m,f,d)}}}function QI(n){return(e,t,s,r,a,i)=>{const o=sn(e,t),l=je(o),u=o.length,h=_t(o),f=ea("float32",l),d=ea("float32",l),m=Bp(e,o),g=Bp(t,o),w=Uu(s,r),v=Uu(a,i),b=e.length,C=_t(e),N=t.length,I=_t(t);if(m.length+g.length===0)for(let L=0;L<f.length;L++){const $=L%w.length,H=L%v.length,U=n(w[$*2],w[$*2+1],v[H*2],v[H*2+1]);f[L]=U.real,d[L]=U.imag}else for(let L=0;L<f.length;L++){const $=Mp(L,u,h),H=$.slice(-b);m.forEach(R=>H[R]=0);const U=EA(H,b,C),O=$.slice(-N);g.forEach(R=>O[R]=0);const z=EA(O,N,I),T=n(w[U*2],w[U*2+1],v[z*2],v[z*2+1]);f[L]=T.real,d[L]=T.imag}return[f,d,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kO=er((n,e)=>n+e),tle=QI((n,e,t,s)=>({real:n+t,imag:e+s})),Ep=Tr(Hp,kO,tle),nle={kernelName:Hp,backendName:"cpu",kernelFunc:Ep};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MI(n,e,t,s,r){const a=je(s),i=ma(r,t);for(let o=0;o<n.length;o++){const l=n[o];if(l<0)throw new Error("Input x must be non-negative!");l>=r||(a>0?i[l]+=e[o]:i[l]+=1)}return i}function FO(n,e,t,s=!1){const r=n.shape[0],a=n.shape[1],i=un([r,t],e.dtype);for(let o=0;o<r;o++)for(let l=0;l<a;l++){const u=n.get(o,l);if(u<0)throw new Error("Input x must be non-negative!");u>=t||(s?i.set(1,o,u):e.size>0?i.set(i.get(o,u)+e.get(o,l),o,u):i.set(i.get(o,u)+1,o,u))}return i}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TO=er((n,e)=>n&e),sle=Tr(Kw,TO),rle={kernelName:Kw,backendName:"cpu",kernelFunc:sle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HA(n){return(e,t,s)=>{const r=Xs(t,e.length);for(let a=0;a<e.length;++a)r[a]=n(e[a],s);return r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vn(n,e,t){const s=HA(e);return xh(n,s,t)}function xh(n,e,t){return({inputs:s,attrs:r,backend:a})=>{const{x:i}=s;It(i,n);const o=a,l=o.data.get(i.dataId).values;let u;if(i.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=Ru(l)}else u=l;const h=t||i.dtype,f=e(u,h,r);return o.makeTensorInfo(i.shape,h,f)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DO=HA(n=>Math.ceil(n)),ale=xh(A0,DO),ile={kernelName:A0,backendName:"cpu",kernelFunc:ale};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LO(n,e,t,s){const r=Xs(t,je(e));if(s&&t!=="string"){let a=0;n.forEach(i=>{const o=je(i.shape);r.set(i.vals,a),a+=o})}else{let a=0;n.forEach(i=>{const o=t==="string"?Ru(i.vals):i.vals;let l=0;for(let u=0;u<i.shape[0];++u){const h=u*e[1]+a;for(let f=0;f<i.shape[1];++f)r[h+f]=o[l++]}a+=i.shape[1]})}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UO=er((n,e)=>n===e?1:0),RO=Tr(nb,UO,null,"bool"),ole={kernelName:nb,backendName:"cpu",kernelFunc:RO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $O=HA(n=>Math.exp(n)),_O=xh(m0,$O,"float32"),lle={kernelName:m0,backendName:"cpu",kernelFunc:_O};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OO=HA(n=>Math.expm1(n)),Ale=xh(g0,OO),ule={kernelName:g0,backendName:"cpu",kernelFunc:Ale};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QO=HA(n=>Math.floor(n)),cle=xh(y0,QO),hle={kernelName:y0,backendName:"cpu",kernelFunc:cle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MO=er((n,e)=>Math.floor(n/e)),fle=Tr(w0,MO,null,"int32"),dle={kernelName:w0,backendName:"cpu",kernelFunc:fle};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HO(n,e,t,s,r,a,i,o,l){const u=un([s,a],t);for(let h=0;h<s;h++){const f=[];let d=0;for(let m=0;m<r;m++){const g=n[h*r+m];d+=g*i[m],f.push(g)}if(d<0||d>=l/a)throw new Error(`Invalid indices: ${f} does not index into ${o}`);for(let m=0;m<a;m++)u.values[h*a+m]=e.get(...e.indexToLoc(d*a+m))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PO(n,e,t){const s=un(t,n.dtype);for(let r=0;r<s.size;++r){const i=s.indexToLoc(r).slice(),o=i[0],l=i[2],u=e.locToIndex([o,l]);i[2]=e.values[u];const h=n.locToIndex(i);0<=h&&h<n.values.length&&(s.values[r]=n.values[h])}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zO=er((n,e)=>n>e?1:0),ple=Tr(ib,zO,null,"bool"),mle={kernelName:ib,backendName:"cpu",kernelFunc:ple};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jO=er((n,e)=>n>=e?1:0),gle=Tr(b0,jO,null,"bool"),yle={kernelName:b0,backendName:"cpu",kernelFunc:gle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VO=er((n,e)=>n<e?1:0),wle=Tr(lb,VO,null,"bool"),ble={kernelName:lb,backendName:"cpu",kernelFunc:wle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GO=er((n,e)=>n<=e?1:0),xle=Tr(Ab,GO,null,"bool"),vle={kernelName:Ab,backendName:"cpu",kernelFunc:xle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KO(n,e,t){const s=(e-n)/(t-1),r=ma(t,"float32");r[0]=n;for(let a=1;a<r.length;a++)r[a]=r[a-1]+s;return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WO=HA(n=>Math.log(n)),Cle=xh(S0,WO),Ble={kernelName:S0,backendName:"cpu",kernelFunc:Cle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qO(n,e,t,s){const r=ea(s,je(t));for(let a=0;a<r.length;++a){const i=a*e;let o=n[i];for(let l=0;l<e;++l){const u=n[i+l];(Number.isNaN(u)||u>o)&&(o=u)}r[a]=o}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XO=er((n,e)=>Math.max(n,e)),Sle=Tr(I0,XO),Nle={kernelName:I0,backendName:"cpu",kernelFunc:Sle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YO=er((n,e)=>Math.min(n,e)),Ile=Tr(E0,YO),Ele={kernelName:E0,backendName:"cpu",kernelFunc:Ile};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HI=er((n,e)=>n*e),kle=QI((n,e,t,s)=>({real:n*t-e*s,imag:n*s+e*t})),Nx=Tr(F0,HI,kle),Fle={kernelName:F0,backendName:"cpu",kernelFunc:Nx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JO(n,e,t){const s=hh(-1,t);return HI([],e,s,n,t)}function Tle(n){const{inputs:e,backend:t}=n,{x:s}=e;It(s,"neg");const r=t.data.get(s.dataId).values,[a,i]=JO(r,s.shape,s.dtype);return t.makeTensorInfo(i,s.dtype,a)}const Dle={kernelName:bb,backendName:"cpu",kernelFunc:Tle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZO=er((n,e)=>n!==e?1:0),Lle=Tr(xb,ZO,null,"bool"),Ule={kernelName:xb,backendName:"cpu",kernelFunc:Lle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PI(n,e,t,s,r){const a=e.length,i=je(e),o=_t(e),l=_t(r),u=ea(t,je(r));for(let h=0;h<i;++h){const f=Mp(h,a,o),d=new Array(f.length);for(let g=0;g<d.length;g++)d[g]=f[s[g]];const m=EA(d,a,l);u[m]=n[h]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ii(n){const{inputs:e,attrs:t,backend:s}=n,{x:r}=e,{perm:a}=t;It(r,"transpose");const i=r.shape.length,o=new Array(i);for(let f=0;f<o.length;f++)o[f]=r.shape[a[f]];const l=s.data.get(r.dataId).values,u=PI(l,r.shape,r.dtype,a,o);return{dataId:s.write(u,o,r.dtype),shape:o,dtype:r.dtype}}const Rle={kernelName:dp,backendName:"cpu",kernelFunc:ii};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eQ(n,e,t,s){const[r,a]=Hr(n,s),i=Si(e,"int32"),o=ma(je(r),i),l=je(a);for(let u=0;u<o.length;++u){const h=u*l;let f=1;for(let d=0;d<l;++d)f*=t[h+d];o[u]=f}return{outVals:o,outShape:r,outDtype:i}}function $le(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a,keepDims:i}=s;It(r,"prod");const o=r.shape.length,l=dn(a,r.shape),u=Us(l,o);let h=l,f=r;const d=[];u!=null&&(f=ii({inputs:{x:r},backend:t,attrs:{perm:u}}),d.push(f),h=Js(h.length,o));const m=t.data.get(f.dataId).values,{outVals:g,outShape:w,outDtype:v}=eQ(f.shape,f.dtype,m,h);let b=w;return i&&(b=Ys(w,l)),d.forEach(C=>t.disposeIntermediateTensorInfo(C)),t.makeTensorInfo(b,v,g)}const _le={kernelName:Ib,backendName:"cpu",kernelFunc:$le};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ole(n,e,t){n.forEach((s,r)=>{if(s<0||s>=t){const a=Mp(r,e.length,_t(e)).join(",");throw new Error(`indices[${a}] = ${s} is not in [0, ${t})`)}})}function Qle(n,e){for(let t=0;t<n.length;++t){const s=n[t],r=t===n.length-1?e:n[t+1].length;if(s.length===0)throw new Error("Ragged splits may not be empty");if(s[0]<0)throw new Error("Ragged splits must be non-negative");if(s[s.length-1]>r)throw new Error("Ragged splits must not point past values");for(let a=1;a<s.length;++a)if(s[a-1]>s[a])throw new Error("Ragged splits must be sorted in ascending order")}}function Mle(n,e,t,s){const r=[];let a=0;const i=e.length-1+t.length,o=new Array(i).fill(null).map(()=>[0]);Qle(t,s);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const h=e[u+1];for(let f=1;f<l+1;++f)o[u].push(f*h)}for(let u=0;u<n.length;++u){let h=n[u],f=n[u]+1;for(let d=0;d<t.length;++d){const m=t[d],g=d+e.length-1;if(g>=0){const w=o[g],v=w[w.length-1]-m[h];for(let b=h;b<f;++b)o[g].push(m[b+1]+v)}h=m[h],f=m[f]}f!==h&&(r.push([h,f]),a+=f-h)}return{outSplits:o,valueSlices:r,numValues:a}}function Hle(n){const e=[];for(let t=0;t<n.length;++t){const s=n[t].length,r=Xs("int32",s);e.push(r),n[t].forEach((a,i)=>r[i]=a)}return e}function X4(n,e){const t=n.slice(0,e);for(;t.length<e;)t.push(1);for(let s=e;s<n.length;s++)t[e-1]*=n[s];return t}function Ple(n,e,t,s,r,a){const i=X4(e,2)[1],o=X4(a,2)[1];let l=0;for(const u of t)for(let h=u[0];h<u[1];++h){for(let f=0;f<s;++f)r[l*o+f]=n[h*i+f];++l}}function zle(n,e,t,s,r){const a=e.slice();a[0]=r;const i=Xs(t,je(a)),o=n.length,l=o===0?0:o/e[0];return Ple(n,e,s,l,i,a),[i,a]}function tQ(n,e,t,s,r,a,i,o){if(n.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(Ole(a,i,l),s.length===0)throw new Error("params.rank must be nonzero");const u=s[0],{outSplits:h,valueSlices:f,numValues:d}=Mle(a,i,n,u),m=Hle(h),g=zle(t,s,r,f,d);return[m,g[0],g[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y4=2147483647;function nQ(n,e,t,s,r,a,i){if(e.length>1)throw new Error("starts must be a scalar or vector");if(r.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const o=e.length===0,l=r.length===0,u=i.length===0,h=[];o||h.push(e[0]),l||h.push(r[0]),u||h.push(i[0]);for(let v=1;v<h.length;++v)if(h[v]!==h[v-1])throw new Error("starts, limits, and deltas must have the same shape");const f=h.length===0?1:h[0],d=Xs("int32",f+1);d[0]=0;for(let v=0;v<f;++v){const b=o?n[0]:n[v],C=l?s[0]:s[v],N=u?a[0]:a[v];if(N===0)throw new Error("Requires delta != 0");let I;if(N>0&&C<b||N<0&&C>b)I=0;else if(I=Math.ceil(Math.abs((C-b)/N)),I>Y4)throw new Error(`Requires ((limit - start) / delta) <= ${Y4}`);d[v+1]=d[v]+I}const m=d[f],g=Xs(t,m);let w=0;for(let v=0;v<f;++v){const b=d[v+1]-d[v];let C=o?n[0]:n[v];const N=u?a[0]:a[v];for(let I=0;I<b;++I)g[w++]=C,C+=N}return[d,g]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Co=Cl;class pw{constructor(e,t,s,r,a,i,o,l,u,h){this.shape=e,this.shapeShape=t,this.values=s,this.valuesShape=r,this.valuesDType=a,this.defaultValue=i,this.defaultValueShape=o,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=OR(h),this.raggedRank=QR(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Co.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Co.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Co.VALUE_ROWIDS:return pw.getMaxWidthValueRowID(t);case Co.ROW_SPLITS:return pw.getMaxWidthRowSplit(t);default:throw new Error(`Cannot handle partition type ${Co[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const t=e.length;if(t===0||t===1)return 0;let s=0;for(let r=0;r<t-1;++r){const a=e[r+1]-e[r];a>s&&(s=a)}return s}static getMaxWidthValueRowID(e){const t=e.length;if(t===0)return 0;let s=0,r=e[0],a=0;for(let i=1;i<t;++i){const o=e[i];o!==r&&(r=o,a=Math.max(i-s,a),s=i)}return Math.max(t-s,a)}tensorShapeFromTensor(e,t,s=!0){if(t.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Z4(e,s)}calculateOutputSize(e){const t=this.valuesShape,s=this.defaultValueShape;MR(s,t);const r=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=_R(this.raggedRank,r,t);i[0]<0&&(i[0]=e);for(let o=1;o<=this.raggedRank;++o)i[o]<0&&(i[o]=this.getMaxWidth(o));return i}calculateFirstParentOutputIndex(e,t,s){const r=Math.min(e,s),a=[];let i=0;for(let o=0;o<r;++o,i+=t)a.push(i);for(let o=r;o<e;++o)a.push(-1);return se(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,t,s,r){const a=e.length,i=[];for(let o=0;o<a-1;++o){const l=e[o+1]-e[o];let u=Math.min(r,l),h=t[o];h===-1&&(u=0);for(let f=0;f<u;++f)i.push(h),h+=s;for(let f=0;f<l-u;++f)i.push(-1)}if(a>0&&i.length!==e[a-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,t,s,r){const a=e.length,i=[];if(a===0)return[];let o=0,l=e[0];if(l>=t.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${t.length}`);let u=t[l];i.push(u);for(let h=1;h<a;++h){const f=e[h];if(f===l)u>=0&&(++o,o<r?u+=s:u=-1);else{if(o=0,l=f,f>=t.length)throw new Error(`Got nextValueRowId=${f} which is not less than ${t.length}`);u=t[f]}i.push(u)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,t,s,r){const a=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case Co.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,s,r);case Co.ROW_SPLITS:if(a.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${a.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(a,t,s,r);default:throw new Error(`Unsupported partition type: ${Co[i]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case Co.FIRST_DIM_SIZE:return e[0];case Co.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Co.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Co[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const t=this.getFirstDimensionSize(),s=this.calculateOutputSize(t),r=new Array(this.raggedRank+1);r[r.length-1]=1;for(let l=r.length-2;l>=0;--l)r[l]=r[l+1]*s[l+1];const a=Z4(s,!1),i=Xs(this.valuesDType,je(a));if(r[0]*s[0]>0){let l=this.calculateFirstParentOutputIndex(t,r[0],s[0]);for(let u=1;u<=this.raggedRank;++u)l=this.calculateOutputIndex(u-1,l,r[u],s[u]);this.setOutput(this.raggedRank,l,i,a)}return[a,i]}setOutput(e,t,s,r){if(s.length===0)return;const a=this.values,i=s;let o=r.slice();o=o.slice(e+1);const l=je(o),u=t.length;let h=this.defaultValue;if(h.length!==l&&h.length!==1){const g=this.defaultValueShape;De(()=>{const w=Be(h,g);h=gp(w,o).dataSync()})}let f=0,d=0,m=0;for(let g=0;g<=u;++g){let w=g<u?t[g]:-1;if(w===m){++m;continue}if(d<m){const v=a.subarray(f*l),b=i.subarray(d*l),C=(m-d)*l;J4(b,v,C)}if(g>=u){const v=s.length;w=Math.floor(v/l)}if(w>m)if(this.defaultValue.length===1)i.subarray(m*l,w*l).fill(this.defaultValue[0]),m=w;else for(;w>m;){const v=i.slice(m*l);J4(v,h,l),++m}w<0?(f=g+1,d=m):(f=g,d=m,m=d+1)}}}function J4(n,e,t){for(let s=0;s<t;s++)n[s]=e[s]}function Z4(n,e){const t=[];for(let s of n){if(s<0){if(!e)throw new Error(`Dimension ${s} must be >= 0`);if(s<-1)throw new Error(`Dimension ${s} must be >= -1`);s=-1}t.push(s)}return t}function sQ(n,e,t,s,r,a,i,o,l,u){return new pw(n,e,t,s,r,a,i,o,l,u).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rQ(n,e,t,s){const r=n===e,a=n<e&&t<0,i=e<n&&t>1;if(r||a||i)return ma(0,s);const o=Math.abs(Math.ceil((e-n)/t)),l=ma(o,s);e<n&&t===1&&(t=-1),l[0]=n;for(let u=1;u<l.length;u++)l[u]=l[u-1]+t;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aQ=HA(n=>1/Math.sqrt(n)),jle=xh($0,aQ),Vle={kernelName:$0,backendName:"cpu",kernelFunc:jle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xf(n,e,t,s,r,a,i,o,l,u){const h=[s/r,r],f=n.values,d=e.values;if(s===0)return un(t,e.dtype);const m=l instanceof Ir?l:un(h,e.dtype);typeof l=="string"||typeof l=="number"?m.values.fill(l):typeof l=="boolean"&&m.values.fill(+l);for(let g=0;g<a;g++){const w=[];let v=0;for(let b=0;b<i;b++){const C=f[g*i+b];w.push(C),v+=C*o[b]}if(v<0||v>=s/r)throw new Error(`Invalid indices: ${w} does not index into ${t}`);for(let b=0;b<r;b++)u?m.values[v*r+b]+=d[g*r+b]:m.values[v*r+b]=e.rank===0?d[0]:d[g*r+b]}return m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gle=HA(n=>1/(1+Math.exp(-n))),iQ=Vn(H0,n=>1/(1+Math.exp(-n))),Kle={kernelName:H0,backendName:"cpu",kernelFunc:iQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oQ(n,e,t,s,r){const a=W5(s,e,t),i=je(t),o=_t(s);if(a){const f=q5(e,o);return r==="string"?n.slice(f,f+i):n.subarray(f,f+i)}const l=r==="string"?Ru(n):n,u=un(s,r,l),h=un(t,r);for(let f=0;f<h.size;++f){const d=h.indexToLoc(f),m=d.map((g,w)=>g+e[w]);h.set(u.get(...m),...d)}return r==="string"?i$(h.values):h.values}function Mf(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{begin:a,size:i}=s;It(r,"slice");const[o,l]=cx(r,a,i);G5(r,o,l);const u=t.data.get(r.dataId).values,h=oQ(u,o,l,r.shape,r.dtype);return t.makeTensorInfo(l,r.dtype,h)}const Wle={kernelName:Lb,backendName:"cpu",kernelFunc:Mf};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lQ(n,e,t,s,r,a,i){const o=e[0],l=a[0],u=new Array(l),h=new Array(o),f=e[1];if(l===0){if(o!==0)throw new Error(KR(o));const v=Xs(t,0),b=Xs(r,0);return[v,[0,f],b,u,h]}let d=!0,m=0;const g=new Array(l).fill(0);for(let v=0;v<o;++v){const b=n[v*f];if(b<0)throw new Error(WR(v,b));if(b>=l)throw new Error(qR(v,b,l));++g[b],d=d&&b>=m,m=b}let w=!0;for(let v=0;v<l;++v){const b=g[v]===0;u[v]=b,w=w&&!b,g[v]=Math.max(g[v],1),v>0&&(g[v]+=g[v-1])}if(w&&d){const v=n,b=s;for(let C=0;C<o;++C)h[C]=C;return[v,[o,f],b,u,h]}else{const v=g[l-1],b=Xs(t,v*f),C=Xs(r,v),N=new Array(l).fill(0);for(let I=0;I<o;++I){const L=n[I*f],$=N[L],H=(L===0?0:g[L-1])+$;N[L]++;for(let U=0;U<f;++U)b[H*f+U]=n[I*f+U];C[H]=s[I],h[I]=H}for(let I=0;I<l;++I)if(N[I]===0){const $=I===0?0:g[I-1];b[$*f+0]=I;for(let H=1;H<f;++H)b[$*f+H]=0;C[$]=i}return[b,[v,f],C,u,h]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AQ(n,e,t,s,r){const a=je(s),i=e[0],o=r.length,l=[];let u=1,h=-1;for(let v=0;v<o;++v){const b=r[v];if(b===-1){if(h!==-1)throw new Error(XR(h,v));h=v,l.push(1)}else{if(b<0)throw new Error(YR(v,b));u*=b,l.push(b)}}if(h!==-1){if(u<=0)throw new Error(JR());const v=Math.trunc(a/u);if(u*v!==a)throw new Error(ZR(s,l));l[h]=v}if(je(l)!==a)throw new Error(e$(s,l));const d=s.length,m=[];if(d>0){m[d-1]=1;for(let v=d-2;v>=0;--v)m[v]=m[v+1]*s[v+1]}const g=[];if(o>0){g[o-1]=1;for(let v=o-2;v>=0;--v)g[v]=g[v+1]*l[v+1]}const w=Xs(t,i*o);for(let v=0;v<i;++v){let b=0;for(let C=0;C<d;++C)b+=n[v*d+C]*m[C];for(let C=0;C<o;++C)w[v*o+C]=Math.trunc(b/g[C]),b%=g[C]}return[w,[i,o],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zI(n,e,t,s,r,a=!1,i=0){const o=s.length,l=[e[0],n.length/e[0]],u=l[1],f=o>0?r[o-1]+1:0;if(f<0)throw new Error(JB());const d=e.slice();d[0]=f;const m=d.reduce((N,I)=>N*I,1),g=Xs(t,m);if(o===0)return f>0&&g.fill(i),[g,d];if(f<=0)throw new Error(JB());let w=0,v=1,b=0,C=r[w];for(;;){let N=0;if(v<o){if(N=r[v],C===N){++v;continue}if(C>=N)throw new Error(t$())}if(C<0||C>=f)throw new Error(n$(C,f));C>b&&g.fill(i,b*u,C*u);for(let I=w;I<v;++I){const L=s[I];if(L<0||L>=l[0])throw new Error(s$(I,s[I],l[0]));for(let $=0;$<u;$++)g[C*u+$]+=n[L*u+$]}if(a)for(let I=0;I<u;I++)g[C*u+I]/=v-w;if(w=v,++v,b=C+1,C=N,v>o)break}return b<f&&g.fill(i,b*u,f*u),[g,d]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qle=HA(n=>Math.sqrt(n)),Xle=Vn(z0,n=>Math.sqrt(n)),Yle={kernelName:z0,backendName:"cpu",kernelFunc:Xle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uQ=er((n,e)=>{const t=n-e;return t*t}),Jle=Tr(j0,uQ),Zle={kernelName:j0,backendName:"cpu",kernelFunc:Jle};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cQ=HA((n,e)=>{const{pattern:t,replaceGlobal:s,rewrite:r}=e;return n.replace(new RegExp(t,s?"g":""),r)}),eAe=xh(Ob,cQ),tAe={kernelName:Ob,backendName:"cpu",kernelFunc:eAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hQ(n,e,t,s){const r=un(n,e.dtype);for(let a=0;a<r.size;a++){const i=r.indexToLoc(a),o=new Array(i.length);for(let l=0;l<o.length;l++)o[l]=i[l]*t[l]+s[l];r.set(e.get(...o),...i)}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nAe{constructor(e,t,s,r,a,i){this.separator=qc(e),this.nGramWidths=t,this.leftPad=qc(s),this.rightPad=qc(r),this.padWidth=a,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const s=this.getPadWidth(t);return Math.max(0,e+2*s-t+1)}createNGrams(e,t,s,r,a,i){for(let o=0;o<a;++o){const l=this.getPadWidth(i),u=Math.max(0,l-o),h=Math.max(0,l-(a-(o+1))),f=i-(u+h),d=t+(u>0?0:o-l);let m=0;m+=u*this.leftPad.length;for(let C=0;C<f;++C)m+=e[d+C].length;m+=h*this.rightPad.length;const g=u+h+f-1;m+=g*this.separator.length,s[r+o]=new Uint8Array(m);const w=s[r+o];let v=0;const b=C=>C.forEach(N=>w[v++]=N);for(let C=0;C<u;++C)b(this.leftPad),b(this.separator);for(let C=0;C<f-1;++C)b(e[d+C]),b(this.separator);if(f>0){b(e[d+f-1]);for(let C=0;C<h;++C)b(this.separator),b(this.rightPad)}else{for(let C=0;C<h-1;++C)b(this.rightPad),b(this.separator);b(this.rightPad)}}}compute(e,t){const s=e.length,r=t.length;if(r>0){let l=t[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<r;++u){let h=t[u]>=l;if(h=h&&t[u]<=s,!h)throw new Error(`Invalid split value ${t[u]}, must be in [${l}, ${s}]`);l=t[u]}if(l!==s)throw new Error(`Last split value must be data size. Expected ${s}, got ${l}`)}const a=r-1,i=Xs("int32",r);if(s===0||r===0){const l=new Array(s);for(let u=0;u<=a;++u)i[u]=0;return[l,i]}i[0]=0;for(let l=1;l<=a;++l){const u=t[l]-t[l-1];let h=0;this.nGramWidths.forEach(f=>{h+=this.getNumNGrams(u,f)}),this.preserveShort&&u>0&&h===0&&(h=1),i[l]=i[l-1]+h}const o=new Array(i[a]);for(let l=0;l<a;++l){const u=t[l];let h=i[l];if(this.nGramWidths.forEach(f=>{const d=t[l+1]-t[l],m=this.getNumNGrams(d,f);this.createNGrams(e,u,o,h,m,f),h+=m}),this.preserveShort&&h===i[l]){const f=t[l+1]-t[l];if(f===0)continue;const d=f+2*this.padWidth;this.createNGrams(e,u,o,h,1,d)}}return[o,i]}}function fQ(n,e,t,s,r,a,i,o){return new nAe(t,s,r,a,i,o).compute(n,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sAe(n,e,t,s){if(!n.length)return;if(e.length===0){for(let a=0;a<n.length;++a)s.push(n.subarray(a,a+1));return}if(e.length===1){const a=e[0];let i=n.indexOf(a);for(;i!==-1;){const o=n.subarray(0,i);(!t||o.length!==0)&&s.push(o),n=n.subarray(i+1),i=n.indexOf(a)}(!t||n.length!==0)&&s.push(n);return}let r=0;for(let a=0;a<n.length+1;a++)if(a===n.length||e.indexOf(n[a])!==-1){const i=n.subarray(r,a);(!t||i.length!==0)&&s.push(i),r=a+1}}function dQ(n,e,t){const s=n.length,r=[];let a=0,i=0;const o=new Array(s);for(let d=0;d<s;++d){const m=r.length;sAe(n[d],e,t,r);const g=r.length-m;o[d]=g,a+=g,i=Math.max(i,g)}const l=Xs("int32",a*2),u=new Array(a),h=[s,i];let f=0;for(let d=0;d<s;++d)for(let m=0;m<o[d];++m)l[f*2]=d,l[f*2+1]=m,u[f]=r[f],++f;return[l,u,h]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pQ(n,e){const t=Xs("int32",n.length);for(let s=0;s<n.length;++s)t[s]=p9(n[s]).modulo(e).getLowBitsUnsigned();return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mQ=er((n,e)=>n-e),rAe=QI((n,e,t,s)=>({real:n-t,imag:e-s})),jI=Tr(V0,mQ,rAe),aAe={kernelName:V0,backendName:"cpu",kernelFunc:jI};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gQ(n,e){const t=new Array(n.rank);for(let r=0;r<t.length;r++)t[r]=n.shape[r]*e[r];const s=un(t,n.dtype);for(let r=0;r<s.values.length;++r){const a=s.indexToLoc(r),i=new Array(n.rank);for(let l=0;l<i.length;l++)i[l]=a[l]%n.shape[l];const o=n.locToIndex(i);s.values[r]=n.values[o]}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gg=(n,e)=>{const t=e.value-n.value;return t===0?n.index-e.index:t};function yQ(n,e,t=0,s=n.length-1){for(;s>t;){if(s-t>600){const o=s-t+1,l=e-t+1,u=Math.log(o),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(o-h)/o)*Math.sign(l-o/2),d=Math.max(t,Math.floor(e-l*h/o+f)),m=Math.min(s,Math.floor(e+(o-l)*h/o+f));yQ(n,e,d,m)}const r=n[e];let a=t,i=s;for(tp(n,t,e),gg(n[s],r)>0&&tp(n,t,s);a<i;){for(tp(n,a,i),a++,i--;gg(n[a],r)<0;)a=a+1;for(;gg(n[i],r)>0;)i=i-1}gg(n[t],r)===0?tp(n,t,i):(i=i+1,tp(n,i,s)),i<=e&&(t=i+1),e<=i&&(s=i-1)}}function wQ(n,e,t,s,r){const a=e[e.length-1],[i,o]=[n.length/a,a],l=ea(t,i*s),u=ea("int32",i*s);for(let f=0;f<i;f++){const d=f*o,m=n.subarray(d,d+o);let g=new Array(m.length);m.forEach((C,N)=>g[N]={value:C,index:N}),s<g.length&&(yQ(g,s),g=g.slice(0,s)),r&&g.sort(gg);const w=f*s,v=l.subarray(w,w+s),b=u.subarray(w,w+s);for(let C=0;C<s;C++)v[C]=g[C].value,b[C]=g[C].index}const h=e.slice();return h[h.length-1]=s,[un(h,t,l),un(h,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bQ(n,e,t,s){const r=dn(e,t)[0],a=[1,t[0],1];for(let g=0;g<r;g++)a[0]*=t[g];a[1]=t[r];for(let g=r+1;g<t.length;g++)a[2]*=t[g];const i=new Map,o=new Int32Array(t[r]),l=new Ir(a,s,n),u=[],h=a[0]===1&&a[2]===1;for(let g=0;g<t[r];g++){let w;if(h)w=n[g].toString();else{const b=[];for(let C=0;C<a[0];C++)for(let N=0;N<a[2];N++)b.push(l.get(C,g,N));w=b.join(",")}const v=i.get(w);if(v!=null)o[g]=v;else{const b=i.size;i.set(w,b),o[g]=b,u.push(g)}}const f=a.slice();f[1]=i.size;const d=new Ir(f,s);u.forEach((g,w)=>{for(let v=0;v<a[0];v++)for(let b=0;b<a[2];b++)d.set(l.get(v,g,b),v,w,b)});const m=t.slice();return m[r]=f[1],{outputValues:d.values,outputShape:m,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iAe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:kO,bincountImpl:MI,bincountReduceImpl:FO,bitwiseAndImpl:TO,castImpl:EO,ceilImpl:DO,concatImpl:LO,equalImpl:UO,expImpl:$O,expm1Impl:OO,floorDivImpl:MO,floorImpl:QO,gatherNdImpl:HO,gatherV2Impl:PO,greaterEqualImpl:jO,greaterImpl:zO,lessEqualImpl:GO,lessImpl:VO,linSpaceImpl:KO,logImpl:WO,maxImpl:qO,maximumImpl:XO,minimumImpl:YO,multiplyImpl:HI,negImpl:JO,notEqualImpl:ZO,prodImpl:eQ,raggedGatherImpl:tQ,raggedRangeImpl:nQ,raggedTensorToTensorImpl:sQ,rangeImpl:rQ,rsqrtImpl:aQ,scatterImpl:xf,sigmoidImpl:Gle,simpleAbsImpl:IO,sliceImpl:oQ,sparseFillEmptyRowsImpl:lQ,sparseReshapeImpl:AQ,sparseSegmentReductionImpl:zI,sqrtImpl:qle,squaredDifferenceImpl:uQ,staticRegexReplaceImpl:cQ,stridedSliceImpl:hQ,stringNGramsImpl:fQ,stringSplitImpl:dQ,stringToHashBucketFastImpl:pQ,subImpl:mQ,tileImpl:gQ,topKImpl:wQ,transposeImpl:PI,uniqueImpl:bQ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */KL("cpu",()=>new Sx,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xQ=Vn(d0,n=>n>=0?n:Math.exp(n)-1),oAe={kernelName:d0,backendName:"cpu",kernelFunc:xQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vQ(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{alpha:a}=s;It([r],"leakyRelu");const i=je(r.shape),o=t.data.get(r.dataId).values,l=ea("float32",i);for(let u=0;u<o.length;u++)l[u]=o[u]<0?a*o[u]:o[u];return t.makeTensorInfo(r.shape,"float32",l)}const lAe={kernelName:ob,backendName:"cpu",kernelFunc:vQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AAe=er((n,e)=>n<0?e*n:n);function CQ(n){const{inputs:e,backend:t}=n,{x:s,alpha:r}=e;It([s,r],"prelu");const a=t.data.get(s.dataId).values,i=t.data.get(r.dataId).values,[o,l]=AAe(s.shape,r.shape,a,i,"float32");return t.makeTensorInfo(l,"float32",o)}const uAe={kernelName:Nb,backendName:"cpu",kernelFunc:CQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BQ=Vn(L0,n=>Math.max(0,n)),cAe={kernelName:L0,backendName:"cpu",kernelFunc:BQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQ=Vn(U0,n=>Math.min(Math.max(0,n),6)),hAe={kernelName:U0,backendName:"cpu",kernelFunc:SQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mw(n,e,t,s,r){if(t==="linear")return RA({inputs:{x:e},backend:n});if(t==="relu")return BQ({inputs:{x:e},backend:n});if(t==="elu")return xQ({inputs:{x:e},backend:n});if(t==="relu6")return SQ({inputs:{x:e},backend:n});if(t==="prelu")return CQ({inputs:{x:e,alpha:s},backend:n});if(t==="leakyrelu")return vQ({inputs:{x:e},backend:n,attrs:{alpha:r}});if(t==="sigmoid")return iQ({inputs:{x:e},backend:n});throw new Error(`Activation ${t} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function us(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{shape:a}=s,i=je(r.shape),o=BL(a,i),l=je(o);se(i===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${r.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),t.incRef(r.dataId);const u=t.data.get(r.dataId);if(u.complexTensorInfos!=null){const h=u.complexTensorInfos.real,f=u.complexTensorInfos.imag;h.shape=o,f.shape=o}return{dataId:r.dataId,shape:o,dtype:r.dtype}}const fAe={kernelName:Eb,backendName:"cpu",kernelFunc:us};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NQ(n){const{inputs:e,backend:t,attrs:s}=n,{a:r,b:a}=e,{transposeA:i,transposeB:o}=s;It([r,a],"matMul");const l=r.shape.length,u=a.shape.length,h=i?r.shape[l-2]:r.shape[l-1],f=o?a.shape[u-1]:a.shape[u-2],d=i?r.shape[l-1]:r.shape[l-2],m=o?a.shape[u-2]:a.shape[u-1],g=r.shape.slice(0,-2),w=a.shape.slice(0,-2),v=je(g),b=je(w),N=sn(r.shape.slice(0,-2),a.shape.slice(0,-2)).concat([d,m]);se(h===f,()=>`Error in matMul: inner shapes (${h}) and (${f}) of Tensors with shapes ${r.shape} and ${a.shape} and transposeA=${i} and transposeB=${o} must match.`);const I=i?[v,h,d]:[v,d,h],L=o?[b,m,f]:[b,f,m],$=us({inputs:{x:r},backend:t,attrs:{shape:I}}),H=us({inputs:{x:a},backend:t,attrs:{shape:L}}),U=i?$.shape[1]:$.shape[2],O=i?$.shape[2]:$.shape[1],z=o?H.shape[1]:H.shape[2],T=Math.max(v,b),R=t.data.get($.dataId).values,W=t.data.get(H.dataId).values,K=_t($.shape),re=_t(H.shape),[P,Y,J]=i?[K[0],1,K[1]]:[K[0],K[1],1],[te,j,ue]=o?[1,re[1],re[0]]:[re[1],1,re[0]],Q=O*z,V=un([T,O,z],$.dtype),Z=V.values,le=t.blockSize;for(let ce=0;ce<T;ce++){const pe=ce%v,ye=ce%b;for(let xe=0;xe<O;xe+=le){const Me=Math.min(xe+le,O);for(let ze=0;ze<z;ze+=le){const We=Math.min(ze+le,z);for(let tt=0;tt<U;tt+=le){const dt=Math.min(tt+le,U);for(let _e=xe;_e<Me;_e++)for(let fe=ze;fe<We;fe++){let ct=0;for(let lt=tt;lt<dt;lt++){const rt=R[pe*P+_e*Y+lt*J],ot=W[lt*te+fe*j+ye*ue];ct+=rt*ot}Z[ce*Q+(_e*z+fe)]+=ct}}}}}return t.disposeIntermediateTensorInfo($),t.disposeIntermediateTensorInfo(H),t.makeTensorInfo(N,V.dtype,V.values)}const dAe={kernelName:Vw,backendName:"cpu",kernelFunc:NQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pAe(n){const{inputs:e,backend:t,attrs:s}=n,{a:r,b:a,bias:i,preluActivationWeights:o}=e,{transposeA:l,transposeB:u,activation:h,leakyreluAlpha:f}=s;let d,m,g;const w=[];d=NQ({inputs:{a:r,b:a},attrs:{transposeA:l,transposeB:u},backend:t}),i&&(m=Ep({inputs:{a:d,b:i},backend:t}),w.push(d),d=m),h&&(g=mw(t,d,h,o,f),w.push(d),d=g);for(const b of w)t.disposeIntermediateTensorInfo(b);return d}const mAe={kernelName:q2,backendName:"cpu",kernelFunc:pAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gAe=Vn(t0,n=>Math.acos(n)),yAe={kernelName:t0,backendName:"cpu",kernelFunc:gAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wAe=Vn(n0,n=>Math.acosh(n)),bAe={kernelName:n0,backendName:"cpu",kernelFunc:wAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xAe(n){const{inputs:e,backend:t}=n,s=e;It(e,"addN");const r=s.map(o=>t.data.get(o.dataId).values),a=un(s[0].shape,s[0].dtype),i=a.values;for(let o=0;o<s.length;o++){const l=r[o];for(let u=0;u<i.length;u++)i[u]+=l[u]}return t.makeTensorInfo(a.shape,a.dtype,a.values)}const vAe={kernelName:Mw,backendName:"cpu",kernelFunc:xAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CAe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a,keepDims:i}=s;It(r,"all");const o=dn(a,r.shape);let l=o;const u=Us(l,r.shape.length);let h=r;u!=null&&(h=ii({inputs:{x:r},backend:t,attrs:{perm:u}}),l=Js(l.length,r.shape.length)),sa("all",l,h.shape.length);const[f,d]=Hr(h.shape,l),m=je(d),g=ma(je(f),h.dtype),w=t.data.get(h.dataId).values;for(let b=0;b<g.length;++b){const C=b*m;let N=w[C];for(let I=0;I<m;++I){const L=w[C+I];N=N&&L}g[b]=N}u!=null&&t.disposeIntermediateTensorInfo(h);const v=t.makeTensorInfo(f,h.dtype,g);if(i){const b=Ys(f,o),C=us({inputs:{x:v},backend:t,attrs:{shape:b}});return t.disposeIntermediateTensorInfo(v),C}return v}const BAe={kernelName:JS,backendName:"cpu",kernelFunc:CAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SAe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a,keepDims:i}=s;It(r,"any");const o=dn(a,r.shape);let l=o;const u=Us(l,r.shape.length);let h=r;u!=null&&(h=ii({inputs:{x:r},backend:t,attrs:{perm:u}}),l=Js(l.length,r.shape.length)),sa("any",l,h.shape.length);const[f,d]=Hr(h.shape,l),m=je(d),g=ma(je(f),h.dtype),w=t.data.get(h.dataId).values;for(let b=0;b<g.length;++b){const C=b*m;let N=w[C];for(let I=0;I<m;++I){const L=w[C+I];N=N||L}g[b]=N}u!=null&&t.disposeIntermediateTensorInfo(h);const v=t.makeTensorInfo(f,h.dtype,g);if(i){const b=Ys(f,o),C=us({inputs:{x:v},backend:t,attrs:{shape:b}});return t.disposeIntermediateTensorInfo(v),C}return v}const NAe={kernelName:ZS,backendName:"cpu",kernelFunc:SAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IAe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a}=s;It(r,"argMax");let i=dn(a,r.shape);const o=Us(i,r.shape.length);let l=r;const u=[];o!=null&&(l=ii({inputs:{x:r},backend:t,attrs:{perm:o}}),u.push(l),i=Js(i.length,l.shape.length)),i=[i[0]],sa("argMax",i,l.shape.length);const[h,f]=Hr(l.shape,i),d=je(h),m=ma(d,"int32"),g=je(f),w=t.data.get(l.dataId).values;for(let v=0;v<m.length;++v){const b=v*g;let C=w[b],N=0;for(let I=0;I<g;++I){const L=w[b+I];L>C&&(C=L,N=I)}m[v]=N}return u.forEach(v=>t.disposeIntermediateTensorInfo(v)),t.makeTensorInfo(h,"int32",m)}const EAe={kernelName:Hw,backendName:"cpu",kernelFunc:IAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kAe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a}=s;It(r,"argMin");let i=dn(a,r.shape);const o=Us(i,r.shape.length);let l=r;const u=[];o!=null&&(l=ii({inputs:{x:r},backend:t,attrs:{perm:o}}),u.push(l),i=Js(i.length,l.shape.length)),i=[i[0]],sa("argMin",i,l.shape.length);const[h,f]=Hr(l.shape,i),d=je(h),m=ma(d,"int32"),g=je(f),w=t.data.get(l.dataId).values;for(let v=0;v<m.length;++v){const b=v*g;let C=w[b],N=0;for(let I=0;I<g;++I){const L=w[b+I];L<C&&(C=L,N=I)}m[v]=N}return u.forEach(v=>t.disposeIntermediateTensorInfo(v)),t.makeTensorInfo(h,"int32",m)}const FAe={kernelName:Pw,backendName:"cpu",kernelFunc:kAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TAe=Vn(s0,n=>Math.asin(n)),DAe={kernelName:s0,backendName:"cpu",kernelFunc:TAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LAe=Vn(r0,n=>Math.asinh(n)),UAe={kernelName:r0,backendName:"cpu",kernelFunc:LAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RAe=Vn(a0,n=>Math.atan(n)),$Ae={kernelName:a0,backendName:"cpu",kernelFunc:RAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ae=er((n,e)=>Math.atan2(n,e)),OAe=Tr(o0,_Ae),QAe={kernelName:o0,backendName:"cpu",kernelFunc:OAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MAe=Vn(i0,n=>Math.atanh(n)),HAe={kernelName:i0,backendName:"cpu",kernelFunc:MAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VI(n,e,t,s,r,a){const i=r.strideHeight,o=r.strideWidth,l=r.dilationHeight,u=r.dilationWidth,h=r.effectiveFilterHeight,f=r.effectiveFilterWidth,d=r.padInfo.top,m=r.padInfo.left,g=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=un(r.outShape,t),v=w.values,b=r.outShape[1]*r.outShape[2]*r.outShape[3],C=r.outShape[2]*r.outShape[3],N=r.outShape[3];for(let I=0;I<r.batchSize;++I){const L=I*b,$=I*s[0];for(let H=0;H<r.inChannels;++H)for(let U=0;U<r.outHeight;++U){const O=U*i-d,z=Math.max(0,O),T=Math.min(r.inHeight,h+O),R=L+U*C;for(let W=0;W<r.outWidth;++W){const K=W*o-m,re=Math.max(0,K),P=Math.min(r.inWidth,f+K);let Y=g,J=0,te=0;for(let ue=z;ue<T;ue+=l){const Q=$+ue*s[1];for(let V=re;V<P;V+=u){const Z=Q+V*s[2],le=n[Z+H];a==="max"&&le>Y?Y=le:a==="avg"&&(J+=le,te++)}if(isNaN(Y))break}const j=R+W*N+H;v[j]=a==="avg"?J/te:Y}}}return w}function IQ(n,e,t,s,r=!1,a=!1){const i=un(s.outShape,"int32"),o=s.strideHeight,l=s.strideWidth,u=s.dilationHeight,h=s.dilationWidth,f=s.effectiveFilterHeight,d=s.effectiveFilterWidth,m=s.padInfo.top,g=s.padInfo.left,w=un(e,t,n);for(let v=0;v<s.batchSize;++v)for(let b=0;b<s.inChannels;++b)for(let C=0;C<s.outHeight;++C){const N=C*o-m;let I=N;for(;I<0;)I+=u;const L=Math.min(s.inHeight,f+N);for(let $=0;$<s.outWidth;++$){const H=$*l-g;let U=H;for(;U<0;)U+=h;const O=Math.min(s.inWidth,d+H);let z=Number.NEGATIVE_INFINITY,T=-1;for(let R=I;R<L;R+=u){const W=R-N;for(let K=U;K<O;K+=h){const re=K-H,P=w.get(v,R,K,b);P>z&&(z=P,r?T=a?((v*s.inHeight+R)*s.inWidth+K)*s.inChannels+b:(R*s.inWidth+K)*s.inChannels+b:T=W*d+re)}}i.set(T,v,C,$,b)}}return i}function EQ(n,e,t,s,r,a){const i=r.strideDepth,o=r.strideHeight,l=r.strideWidth,u=r.dilationDepth,h=r.dilationHeight,f=r.dilationWidth,d=r.effectiveFilterDepth,m=r.effectiveFilterHeight,g=r.effectiveFilterWidth,w=r.padInfo.front,v=r.padInfo.top,b=r.padInfo.left,C=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,N=un(r.outShape,t),I=N.values,L=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],$=r.outShape[2]*r.outShape[3]*r.outShape[4],H=r.outShape[3]*r.outShape[4],U=r.outShape[4];for(let O=0;O<r.batchSize;++O){const z=O*L,T=O*s[0];for(let R=0;R<r.inChannels;++R)for(let W=0;W<r.outDepth;++W){const K=W*i-w;let re=K;for(;re<0;)re+=u;const P=Math.min(r.inDepth,d+K),Y=z+W*$;for(let J=0;J<r.outHeight;++J){const te=J*o-v;let j=te;for(;j<0;)j+=h;const ue=Math.min(r.inHeight,m+te),Q=Y+J*H;for(let V=0;V<r.outWidth;++V){const Z=V*l-b;let le=Z;for(;le<0;)le+=f;const ce=Math.min(r.inWidth,g+Z),pe=Q+V*U;let ye=C,xe=0,Me=0;for(let We=re;We<P;We+=u){const tt=T+We*s[1];for(let dt=j;dt<ue;dt+=h){const _e=tt+dt*s[2];for(let fe=le;fe<ce;fe+=f){const ct=_e+fe*s[3],lt=n[ct+R];if(a==="max"&&lt>ye?ye=lt:a==="avg"&&(xe+=lt,Me++),isNaN(ye))break}if(isNaN(ye))break}if(isNaN(ye))break}const ze=pe+R;I[ze]=a==="avg"?xe/Math.max(Me,1):ye}}}}return N}function PAe(n,e){const t=un(e.outShape,"int32"),s=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=e.padInfo.front,m=e.padInfo.top,g=e.padInfo.left;for(let w=0;w<e.batchSize;++w)for(let v=0;v<e.inChannels;++v)for(let b=0;b<e.outDepth;++b){const C=b*s-d;let N=C;for(;N<0;)N+=i;const I=Math.min(e.inDepth,u+C);for(let L=0;L<e.outHeight;++L){const $=L*r-m;let H=$;for(;H<0;)H+=o;const U=Math.min(e.inHeight,h+$);for(let O=0;O<e.outWidth;++O){const z=O*a-g;let T=z;for(;T<0;)T+=l;const R=Math.min(e.inWidth,f+z);let W=Number.NEGATIVE_INFINITY,K=-1;for(let re=N;re<I;re+=i){const P=re-C;for(let Y=H;Y<U;Y+=o){const J=Y-$;for(let te=T;te<R;te+=l){const j=te-z,ue=n.get(w,re,Y,te,v);ue>=W&&(W=ue,K=P*h*f+J*h+j)}}}t.set(K,w,b,L,O,v)}}}return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zAe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e;It(r,"avgPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=s,u=1;se(na(i,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const h=Mo(r.shape,a,i,u,o,l);let f;if(h.filterWidth===1&&h.filterHeight===1&&Bn(h.inShape,h.outShape))f=RA({inputs:{x:r},backend:t});else{const d=t.data.get(r.dataId).values,m=_t(r.shape),g=VI(d,r.shape,r.dtype,m,h,"avg");f=t.makeTensorInfo(h.outShape,r.dtype,g.values)}return f}const jAe={kernelName:zw,backendName:"cpu",kernelFunc:zAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VAe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l,dataFormat:u}=s;It(r,"avgPool3d");const h=_u(r.shape,a,i,1,o,l,u),f=t.data.get(r.dataId).values,d=EQ(f,r.shape,r.dtype,_t(r.shape),h,"avg");return t.makeTensorInfo(d.shape,"float32",d.values)}const GAe={kernelName:jw,backendName:"cpu",kernelFunc:VAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KAe(n){const{inputs:e,backend:t,attrs:s}=n,{dy:r,input:a}=e,{filterSize:i,strides:o,pad:l,dimRoundingMode:u}=s;It([r,a],"avgPool3DGrad");const h=_u(a.shape,i,o,1,l,u),f=h.strideDepth,d=h.strideHeight,m=h.strideWidth,g=h.filterDepth,w=h.filterHeight,v=h.filterWidth,b=h.dilationDepth,C=h.dilationHeight,N=h.dilationWidth,I=h.effectiveFilterDepth,L=h.effectiveFilterHeight,$=h.effectiveFilterWidth,H=I-1-h.padInfo.front,U=$-1-h.padInfo.left,O=L-1-h.padInfo.top,z=un(a.shape,"float32"),T=1/(g*w*v),R=t.bufferSync(r);for(let W=0;W<h.batchSize;++W)for(let K=0;K<h.inChannels;++K)for(let re=0;re<h.inDepth;++re)for(let P=0;P<h.inHeight;++P)for(let Y=0;Y<h.inWidth;++Y){const J=re-H,te=P-O,j=Y-U;let ue=0;for(let Q=0;Q<I;Q+=b){const V=(J+Q)/f;if(!(V<0||V>=h.outDepth||Math.floor(V)!==V))for(let Z=0;Z<L;Z+=C){const le=(te+Z)/d;if(!(le<0||le>=h.outHeight||Math.floor(le)!==le))for(let ce=0;ce<$;ce+=N){const pe=(j+ce)/m;if(pe<0||pe>=h.outWidth||Math.floor(pe)!==pe)continue;const ye=R.get(W,V,le,pe,K);ue+=ye}}}z.set(ue*T,W,re,P,Y,K)}return t.makeTensorInfo(z.shape,z.dtype,z.values)}const WAe={kernelName:tN,backendName:"cpu",kernelFunc:KAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qAe(n){const{inputs:e,backend:t,attrs:s}=n,{dy:r,input:a}=e,i=a;It([r,a],"avgPoolGrad");const{filterSize:o,strides:l,pad:u}=s,h=Mo(i.shape,o,l,1,u),f=h.strideHeight,d=h.strideWidth,m=h.filterHeight,g=h.filterWidth,w=h.dilationHeight,v=h.dilationWidth,b=h.effectiveFilterHeight,C=h.effectiveFilterWidth,N=C-1-h.padInfo.left,I=b-1-h.padInfo.top,L=un(i.shape,"float32"),$=1/(m*g),H=t.data.get(r.dataId).values,U=un(r.shape,"float32",H);for(let O=0;O<h.batchSize;++O)for(let z=0;z<h.inChannels;++z)for(let T=0;T<h.inHeight;++T)for(let R=0;R<h.inWidth;++R){const W=T-I,K=R-N;let re=0;for(let P=0;P<b;P+=w){const Y=(W+P)/f;if(!(Y<0||Y>=h.outHeight||Math.floor(Y)!==Y))for(let J=0;J<C;J+=v){const te=(K+J)/d;if(te<0||te>=h.outWidth||Math.floor(te)!==te)continue;const j=U.get(O,Y,te,z);re+=j}}L.set(re*$,O,T,R,z)}return t.makeTensorInfo(L.shape,L.dtype,L.values)}const XAe={kernelName:eN,backendName:"cpu",kernelFunc:qAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YAe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,scale:a,offset:i,mean:o,variance:l}=e;se(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),se(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),se(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),It([r,o,l,a,i],"batchNorm");let{varianceEpsilon:u}=s;u==null&&(u=.001);const h=t.data.get(r.dataId).values,f=t.data.get(o.dataId).values,d=t.data.get(l.dataId).values,m=a?t.data.get(a.dataId).values:new Float32Array([1]),g=i?t.data.get(i.dataId).values:new Float32Array([0]),w=new Float32Array(h.length),v=g.length,b=m.length,C=d.length,N=f.length;let I=0,L=0,$=0,H=0;for(let U=0;U<h.length;++U)w[U]=g[I++]+(h[U]-f[L++])*m[$++]/Math.sqrt(d[H++]+u),I>=v&&(I=0),L>=N&&(L=0),$>=b&&($=0),H>=C&&(H=0);return t.makeTensorInfo(r.shape,r.dtype,w)}const JAe={kernelName:rb,backendName:"cpu",kernelFunc:YAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZAe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{blockShape:a,crops:i}=s;It([r],"batchToSpaceND");const o=a.reduce((b,C)=>b*C),l=r1(r.shape,a,o),u=a1(l.length,a.length),h=i1(r.shape,a,o),f=eI(i,a.length),d=tI(h,i,a.length),m=us({inputs:{x:r},backend:t,attrs:{shape:l}}),g=ii({inputs:{x:m},backend:t,attrs:{perm:u}}),w=us({inputs:{x:g},backend:t,attrs:{shape:h}}),v=Mf({inputs:{x:w},backend:t,attrs:{begin:f,size:d}});return t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(w),v}const eue={kernelName:Gw,backendName:"cpu",kernelFunc:ZAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tue(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,weights:a}=e,{size:i}=s,o=t.data.get(r.dataId).values,l=t.data.get(a.dataId).values,u=MI(o,l,a.dtype,a.shape,i);return t.makeTensorInfo([i],a.dtype,u)}const nue={kernelName:nN,backendName:"cpu",kernelFunc:tue};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sue(n){const{inputs:e,backend:t}=n,{s0:s,s1:r}=e,a=t.data.get(s.dataId).values,i=t.data.get(r.dataId).values,o=sn(Array.from(a),Array.from(i));return t.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const rue={kernelName:sN,backendName:"cpu",kernelFunc:sue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aue=Vn(u0,(n,e)=>{const t=e;return n>t.clipValueMax?t.clipValueMax:n<t.clipValueMin?t.clipValueMin:n}),iue={kernelName:u0,backendName:"cpu",kernelFunc:aue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oue=n=>{const{x:e}=n.inputs,t=n.backend,s=new Float32Array(je(e.shape)),r=t.data.get(e.dataId),a=r.complexTensorInfos.real,i=r.complexTensorInfos.imag,o=t.data.get(a.dataId).values,l=t.data.get(i.dataId).values;for(let u=0;u<o.length;u++){const h=o[u],f=l[u];s[u]=Math.hypot(h,f)}return t.makeOutput(s,e.shape,"float32")},lue={kernelName:Ww,backendName:"cpu",kernelFunc:oue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kp(n){const{inputs:e,backend:t}=n,{input:s}=e,r=t.data.get(s.dataId).complexTensorInfos.imag,a=t.data.get(r.dataId).values;return t.makeTensorInfo(r.shape,r.dtype,a)}const Aue={kernelName:vN,backendName:"cpu",kernelFunc:kp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fp(n){const{inputs:e,backend:t,attrs:s}=n,{axis:r}=s,a=dn(r,e[0].shape)[0],i=e.map(w=>w.shape);Y5(i,a);let o=FA(e.map(w=>w.shape),a);if(je(o)===0)return t.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(w=>je(w.shape)>0);if(l.length===1)return RA({inputs:{x:l[0]},backend:t});if(l[0].dtype==="complex64"){const w=l.map(I=>Qf({inputs:{input:I},backend:t})),v=l.map(I=>kp({inputs:{input:I},backend:t})),b=Fp({inputs:w,backend:t,attrs:{axis:a}}),C=Fp({inputs:v,backend:t,attrs:{axis:a}}),N=xi({inputs:{real:b,imag:C},backend:t});return w.forEach(I=>t.disposeIntermediateTensorInfo(I)),v.forEach(I=>t.disposeIntermediateTensorInfo(I)),t.disposeIntermediateTensorInfo(b),t.disposeIntermediateTensorInfo(C),N}const u=l.map(w=>{const b=[-1,je(w.shape.slice(a))];return us({inputs:{x:w},backend:t,attrs:{shape:b}})}),h=u.map(w=>({vals:t.data.get(w.dataId).values,shape:w.shape}));o=FA(u.map(w=>w.shape),1);const f=u[0].shape[0]===1,d=LO(h,o,e[0].dtype,f),m=FA(l.map(w=>w.shape),a),g=t.makeTensorInfo(m,e[0].dtype,d);return u.forEach(w=>t.disposeIntermediateTensorInfo(w)),g}const uue={kernelName:qw,backendName:"cpu",kernelFunc:Fp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kQ(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,filter:a}=e,{strides:i,pad:o,dataFormat:l,dilations:u,dimRoundingMode:h}=s;It([r,a],"conv2d");const f=Ou(l),d=Mr(r.shape,a.shape,i,u,o,h,!1,f),m=d.filterHeight,g=d.filterWidth,w=d.dilationHeight,v=d.dilationWidth,b=d.padInfo.left,C=d.padInfo.top,N=d.dataFormat==="channelsLast",I=new Ir(d.outShape,r.dtype),L=_t(r.shape),$=_t(a.shape),H=L[0],U=N?L[1]:L[2],O=N?L[2]:1,z=N?1:L[1],T=I.strides[0],R=N?I.strides[1]:I.strides[2],W=N?I.strides[2]:1,K=N?1:I.strides[1],re=t.data.get(r.dataId).values,P=t.data.get(a.dataId).values,Y=I.values;for(let J=0;J<d.batchSize;++J){const te=J*H,j=J*T;for(let ue=0;ue<d.outHeight;++ue){const Q=j+ue*R,V=ue*d.strideHeight-C;for(let Z=0;Z<m;++Z){const le=V+Z*w;if(le<0||le>=d.inHeight)continue;const ce=Z*$[0],pe=te+le*U;for(let ye=0;ye<d.outWidth;++ye){const xe=Q+ye*W,Me=ye*d.strideWidth-b;for(let ze=0;ze<g;++ze){const We=Me+ze*v;if(We<0||We>=d.inWidth)continue;const tt=ce+ze*$[1],dt=pe+We*O;let _e=tt;for(let fe=0;fe<d.inChannels;++fe){const ct=re[dt+fe*z];for(let lt=0;lt<d.outChannels;++lt)Y[xe+lt*K]+=ct*P[_e+lt];_e+=d.outChannels}}}}}}return t.makeTensorInfo(I.shape,I.dtype,Y)}const cue={kernelName:Xw,backendName:"cpu",kernelFunc:kQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hue(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,dy:a}=e,{strides:i,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:h}=s;It([r,a],"conv2dBackpropFilter");const f=Ou(l),d=Mr(r.shape,h,i,1,o,u,!1,f),{strideHeight:m,strideWidth:g,filterHeight:w,filterWidth:v}=d,b=d.dataFormat==="channelsLast",C=new Ir(d.filterShape,"float32"),N=d.padInfo.left,I=d.padInfo.top,L=t.data.get(r.dataId).values,$=t.data.get(a.dataId).values,H=new Ir(r.shape,r.dtype,L),U=new Ir(a.shape,a.dtype,$);for(let O=0;O<w;++O){const z=Math.max(0,Math.ceil((I-O)/m)),T=Math.min(d.outHeight,(d.inHeight+I-O)/m);for(let R=0;R<v;++R){const W=Math.max(0,Math.ceil((N-R)/g)),K=Math.min(d.outWidth,(d.inWidth+N-R)/g);for(let re=0;re<d.inChannels;++re)for(let P=0;P<d.outChannels;++P){let Y=0;for(let J=0;J<d.batchSize;++J)for(let te=z;te<T;++te){const j=O+te*m-I;for(let ue=W;ue<K;++ue){const Q=R+ue*g-N;b?Y+=H.get(J,j,Q,re)*U.get(J,te,ue,P):Y+=H.get(J,re,j,Q)*U.get(J,P,te,ue)}}C.set(Y,O,R,re,P)}}}return t.makeTensorInfo(C.shape,C.dtype,C.values)}const fue={kernelName:aN,backendName:"cpu",kernelFunc:hue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function due(n){const{inputs:e,backend:t,attrs:s}=n,{dy:r,filter:a}=e,{inputShape:i,strides:o,pad:l,dataFormat:u,dimRoundingMode:h}=s;It([r,a],"conv2dBackpropInput");const f=_t(a.shape),d=_t(r.shape);let m=Ou(u);const g=Mr(i,a.shape,o,1,l,h,!1,m),w=new Ir(g.inShape,"float32"),v=w.values,b=t.data.get(r.dataId).values,C=t.data.get(a.dataId).values,[N,I,L]=f,{batchSize:$,filterHeight:H,filterWidth:U,inChannels:O,inHeight:z,inWidth:T,outChannels:R,outHeight:W,outWidth:K,strideHeight:re,strideWidth:P}=g;m=g.dataFormat;const Y=H-1-g.padInfo.top,J=U-1-g.padInfo.left,te=m==="channelsLast",j=w.strides[0],ue=te?w.strides[1]:w.strides[2],Q=te?w.strides[2]:1,V=te?1:w.strides[1],Z=d[0],le=te?d[1]:d[2],ce=te?d[2]:1,pe=te?1:d[1];for(let ye=0;ye<$;++ye)for(let xe=0;xe<O;++xe)for(let Me=0;Me<z;++Me){const ze=Me-Y,We=Math.max(0,Math.ceil(ze/re)),tt=Math.min(W,(H+ze)/re);for(let dt=0;dt<T;++dt){const _e=dt-J,fe=Math.max(0,Math.ceil(_e/P)),ct=Math.min(K,(U+_e)/P);let lt=0;for(let ot=We;ot<tt;++ot){const ut=ot*re-ze;for(let At=fe;At<ct;++At){const St=At*P-_e,Rt=Z*ye+le*ot+ce*At,Ht=N*(H-1-ut)+I*(U-1-St)+L*xe;for(let Pt=0;Pt<R;++Pt){const Qt=b[Rt+pe*Pt],en=C[Ht+Pt];lt+=Qt*en}}}const rt=j*ye+ue*Me+Q*dt+V*xe;v[rt]=lt}}return t.makeTensorInfo(w.shape,w.dtype,w.values)}const pue={kernelName:Yw,backendName:"cpu",kernelFunc:due};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mue(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,filter:a}=e,{strides:i,pad:o,dilations:l}=s;It([r,a],"conv3d");const u=ph(r.shape,a.shape,i,l,o),{filterDepth:h,filterHeight:f,filterWidth:d,dilationDepth:m,dilationHeight:g,dilationWidth:w,padInfo:v}=u,b=v.front,C=v.left,N=v.top,I=new Ir(u.outShape,r.dtype),L=t.data.get(r.dataId).values,$=t.data.get(a.dataId).values,H=I.values,U=_t(r.shape),O=_t(a.shape);for(let z=0;z<u.batchSize;++z){const T=z*U[0],R=z*I.strides[0];for(let W=0;W<u.outDepth;++W){const K=R+W*I.strides[1],re=W*u.strideDepth-b;for(let P=0;P<h;++P){const Y=re+P*m;if(Y<0||Y>=u.inDepth)continue;const J=P*O[0],te=T+Y*U[1];for(let j=0;j<u.outHeight;++j){const ue=K+j*I.strides[2],Q=j*u.strideHeight-N;for(let V=0;V<f;++V){const Z=Q+V*g;if(Z<0||Z>=u.inHeight)continue;const le=J+V*O[1],ce=te+Z*U[2];for(let pe=0;pe<u.outWidth;++pe){const ye=ue+pe*u.outChannels,xe=pe*u.strideWidth-C;for(let Me=0;Me<d;++Me){const ze=xe+Me*w;if(ze<0||ze>=u.inWidth)continue;const We=le+Me*O[2],tt=ce+ze*u.inChannels;let dt=We;for(let _e=0;_e<u.inChannels;++_e){const fe=L[tt+_e];for(let ct=0;ct<u.outChannels;++ct)H[ye+ct]+=fe*$[dt+ct];dt+=u.outChannels}}}}}}}}return t.makeTensorInfo(I.shape,I.dtype,I.values)}const gue={kernelName:Jw,backendName:"cpu",kernelFunc:mue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yue(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,dy:a}=e,{strides:i,pad:o,filterShape:l}=s;It([r,a],"conv3dBackpropFilterV2");const u=_t(r.shape),h=_t(a.shape),f=ph(r.shape,l,i,1,o),d=f.strideDepth,m=f.strideHeight,g=f.strideWidth,w=f.filterDepth,v=f.filterHeight,b=f.filterWidth,C=new Ir(f.filterShape,"float32"),N=C.values,[I,L,$,H]=C.strides,U=t.data.get(a.dataId).values,[O,z,T,R]=h,W=t.data.get(r.dataId).values,[K,re,P,Y]=u,J=f.padInfo.front,te=f.padInfo.left,j=f.padInfo.top;for(let ue=0;ue<w;++ue){const Q=Math.max(0,Math.ceil((J-ue)/d)),V=Math.min(f.outDepth,(f.inDepth+J-ue)/d),Z=ue*I;for(let le=0;le<v;++le){const ce=Math.max(0,Math.ceil((j-le)/m)),pe=Math.min(f.outHeight,(f.inHeight+j-le)/m),ye=le*L+Z;for(let xe=0;xe<b;++xe){const Me=Math.max(0,Math.ceil((te-xe)/g)),ze=Math.min(f.outWidth,(f.inWidth+te-xe)/g),We=xe*$+ye;for(let tt=0;tt<f.inChannels;++tt){const dt=tt*H+We;for(let _e=0;_e<f.outChannels;++_e){let fe=0;for(let ct=0;ct<f.batchSize;++ct){const lt=ct*K,rt=ct*O;for(let ot=Q;ot<V;++ot){const At=(ue+ot*d-J)*re+lt,St=ot*z+rt;for(let Rt=ce;Rt<pe;++Rt){const Pt=(le+Rt*m-j)*P+At,Qt=Rt*T+St;for(let en=Me;en<ze;++en){const an=(xe+en*g-te)*Y+Pt,gt=en*R+Qt;fe+=W[an+tt]*U[gt+_e]}}}}N[dt+_e]=fe}}}}}return t.makeTensorInfo(C.shape,C.dtype,C.values)}const wue={kernelName:iN,backendName:"cpu",kernelFunc:yue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bue(n){const{inputs:e,backend:t,attrs:s}=n,{dy:r,filter:a}=e,{pad:i,strides:o,inputShape:l}=s;It([r],"conv3dBackpropInputV2");const u=_t(r.shape),h=_t(a.shape),f=ph(l,a.shape,o,1,i),d=new Ir(f.inShape,"float32"),m=d.values,[g,w,v,b]=d.strides,C=t.data.get(r.dataId).values,[N,I,L,$]=u,H=t.data.get(a.dataId).values,[U,O,z,T]=h,{batchSize:R,filterDepth:W,filterHeight:K,filterWidth:re,inChannels:P,inDepth:Y,inHeight:J,inWidth:te,outChannels:j,outDepth:ue,outHeight:Q,outWidth:V,strideDepth:Z,strideHeight:le,strideWidth:ce}=f,pe=W-1-f.padInfo.front,ye=K-1-f.padInfo.top,xe=re-1-f.padInfo.left;for(let Me=0;Me<R;++Me)for(let ze=0;ze<P;++ze)for(let We=0;We<Y;++We){const tt=We-pe,dt=Math.max(0,Math.ceil(tt/Z)),_e=Math.min(ue,(W+tt)/Z);for(let fe=0;fe<J;++fe){const ct=fe-ye,lt=Math.max(0,Math.ceil(ct/le)),rt=Math.min(Q,(K+ct)/le);for(let ot=0;ot<te;++ot){const ut=ot-xe,At=Math.max(0,Math.ceil(ut/ce)),St=Math.min(V,(re+ut)/ce);let Rt=0;for(let Ht=dt;Ht<_e;++Ht){const Pt=Ht*Z-tt;for(let Qt=lt;Qt<rt;++Qt){const en=Qt*le-ct;for(let Bt=At;Bt<St;++Bt){const an=Bt*ce-ut,gt=N*Me+I*Ht+L*Qt+$*Bt,pr=U*(W-1-Pt)+O*(K-1-en)+z*(re-1-an)+T*ze;for(let ln=0;ln<j;++ln){const Pr=C[gt+ln],bn=H[pr+ln];Rt+=Pr*bn}}}}m[g*Me+w*We+v*fe+b*ot+ze]=Rt}}}return t.makeTensorInfo(d.shape,d.dtype,d.values)}const xue={kernelName:oN,backendName:"cpu",kernelFunc:bue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vue=Vn(c0,n=>Math.cos(n)),Cue={kernelName:c0,backendName:"cpu",kernelFunc:vue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bue=Vn(h0,n=>Math.cosh(n)),Sue={kernelName:h0,backendName:"cpu",kernelFunc:Bue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nue(n){const{inputs:e,backend:t,attrs:s}=n,{image:r,boxes:a,boxInd:i}=e,{cropSize:o,method:l,extrapolationValue:u}=s,[h,f,d,m]=r.shape,g=a.shape[0],[w,v]=o,b=un([g,w,v,m],"float32"),C=t.data.get(a.dataId).values,N=t.data.get(i.dataId).values,I=t.data.get(r.dataId).values,L=_t(r.shape),$=_t(b.shape);for(let H=0;H<g;H++){const U=H*4,O=C[U],z=C[U+1],T=C[U+2],R=C[U+3],W=N[H];if(W>=h)continue;const K=w>1?(T-O)*(f-1)/(w-1):0,re=v>1?(R-z)*(d-1)/(v-1):0;for(let P=0;P<w;P++){const Y=w>1?O*(f-1)+P*K:.5*(O+T)*(f-1);if(Y<0||Y>f-1){for(let J=0;J<v;J++)for(let te=0;te<m;te++){const j=te+J*$[2]+P*$[1]+H*$[0];b.values[j]=u}continue}if(l==="bilinear"){const J=Math.floor(Y),te=Math.ceil(Y),j=Y-J;for(let ue=0;ue<v;ue++){const Q=v>1?z*(d-1)+ue*re:.5*(z+R)*(d-1);if(Q<0||Q>d-1){for(let ce=0;ce<m;ce++){const pe=ce+ue*$[2]+P*$[1]+H*$[0];b.values[pe]=u}continue}const V=Math.floor(Q),Z=Math.ceil(Q),le=Q-V;for(let ce=0;ce<m;ce++){let pe=ce+V*L[2]+J*L[1]+W*L[0];const ye=I[pe];pe=ce+Z*L[2]+J*L[1]+W*L[0];const xe=I[pe];pe=ce+V*L[2]+te*L[1]+W*L[0];const Me=I[pe];pe=ce+Z*L[2]+te*L[1]+W*L[0];const ze=I[pe],We=ye+(xe-ye)*le,tt=Me+(ze-Me)*le;pe=ce+ue*$[2]+P*$[1]+H*$[0],b.values[pe]=We+(tt-We)*j}}}else for(let J=0;J<v;++J){const te=v>1?z*(d-1)+J*re:.5*(z+R)*(d-1);if(te<0||te>d-1){for(let Q=0;Q<m;Q++){const V=Q+J*$[2]+P*$[1]+H*$[0];b.values[V]=u}continue}const j=Math.round(te),ue=Math.round(Y);for(let Q=0;Q<m;Q++){const V=Q+j*L[2]+ue*L[1]+W*L[0],Z=Q+J*$[2]+P*$[1]+H*$[0];b.values[Z]=I[V]}}}}return t.makeTensorInfo(b.shape,b.dtype,b.values)}const Iue={kernelName:AN,backendName:"cpu",kernelFunc:Nue};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eue(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a,exclusive:i,reverse:o}=s;It(r,"cumprod");const l=Us([a],r.shape.length);let u=r;l!=null&&(u=ii({inputs:{x:r},backend:t,attrs:{perm:l}}));const h=Js(1,r.shape.length)[0];if(h!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${h}`);const f=Si(u.dtype,"int32"),d=XS(je(u.shape),f),m=t.data.get(u.dataId).values,g=u.shape[u.shape.length-1],w=o?(b,C)=>b+g-C-1:(b,C)=>b+C;for(let b=0;b<m.length;b+=g)for(let C=0;C<g;C++){const N=w(b,C);if(C===0)d[N]=i?1:m[N];else{const I=w(b,C-1);d[N]=i?m[I]*d[I]:m[N]*d[I]}}const v=t.makeTensorInfo(u.shape,f,d);if(l!=null){const b=mh(l),C=ii({inputs:{x:v},backend:t,attrs:{perm:b}});return t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(u),C}return v}const kue={kernelName:lN,backendName:"cpu",kernelFunc:Eue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fue(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a,exclusive:i,reverse:o}=s;It(r,"cumsum");const l=Us([a],r.shape.length);let u=r;l!=null&&(u=ii({inputs:{x:r},backend:t,attrs:{perm:l}}));const h=Js(1,r.shape.length)[0];if(h!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${h}`);const f=Si(u.dtype,"int32"),d=ma(je(u.shape),f),m=t.data.get(u.dataId).values,g=u.shape[u.shape.length-1],w=o?(b,C)=>b+g-C-1:(b,C)=>b+C;for(let b=0;b<m.length;b+=g)for(let C=0;C<g;C++){const N=w(b,C);if(C===0)d[N]=i?0:m[N];else{const I=w(b,C-1);d[N]=i?m[I]+d[I]:m[N]+d[I]}}const v=t.makeTensorInfo(u.shape,f,d);if(l!=null){const b=mh(l),C=ii({inputs:{x:v},backend:t,attrs:{perm:b}});return t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(u),C}return v}const Tue={kernelName:Zw,backendName:"cpu",kernelFunc:Fue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Due(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,weights:a}=e,{size:i,binaryOutput:o}=s;if(r.shape.length===1){const l=t.data.get(r.dataId).values,u=t.data.get(a.dataId).values,h=MI(l,u,a.dtype,a.shape,i);return t.makeTensorInfo([i],a.dtype,h)}else if(r.shape.length===2){const l=t.bufferSync(r),u=t.bufferSync(a),h=FO(l,u,i,o);return t.makeTensorInfo(h.shape,a.dtype,h.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${r.shape.length}.`)}const Lue={kernelName:uN,backendName:"cpu",kernelFunc:Due};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uue(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{blockSize:a,dataFormat:i}=s;se(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const o=r.shape[0],l=r.shape[1],u=r.shape[2],h=r.shape[3],f=l*a,d=u*a,m=h/(a*a),g=t.data.get(r.dataId).values,w=new Float32Array(o*f*d*m);let v=0;for(let b=0;b<o;++b)for(let C=0;C<f;++C){const N=Math.floor(C/a),I=C%a;for(let L=0;L<d;++L){const $=Math.floor(L/a),H=L%a,U=(I*a+H)*m;for(let O=0;O<m;++O){const T=O+U+h*($+u*(N+l*b));w[v++]=g[T]}}}return t.makeTensorInfo([o,f,d,m],r.dtype,w)}const Rue={kernelName:cN,backendName:"cpu",kernelFunc:Uue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FQ(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,filter:a}=e,{strides:i,pad:o,dilations:l,dimRoundingMode:u}=s;It([r,a],"depthwiseConv2DNative");const h=_t(r.shape),f=_t(a.shape);let d=l;d==null&&(d=[1,1]),se(na(i,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${d}'`);const m=Mr(r.shape,a.shape,i,d,o,u,!0),{filterHeight:g,filterWidth:w,dilationHeight:v,dilationWidth:b,padInfo:C}=m,N=C.left,I=C.top,L=m.outChannels/m.inChannels,$=new Ir(m.outShape,r.dtype),H=t.data.get(r.dataId).values,U=t.data.get(a.dataId).values,O=$.values;for(let z=0;z<m.batchSize;++z){const T=z*h[0],R=z*$.strides[0];for(let W=0;W<m.outHeight;++W){const K=R+W*$.strides[1],re=W*m.strideHeight-I;for(let P=0;P<g;++P){const Y=re+P*v;if(Y<0||Y>=m.inHeight)continue;const J=P*f[0],te=T+Y*h[1];for(let j=0;j<m.outWidth;++j){const ue=K+j*$.strides[2],Q=j*m.strideWidth-N;for(let V=0;V<w;++V){const Z=Q+V*b;if(Z<0||Z>=m.inWidth)continue;const le=J+V*f[1],ce=te+Z*m.inChannels;let pe=ue,ye=le;for(let xe=0;xe<m.inChannels;++xe){const Me=H[ce+xe];for(let ze=0;ze<L;++ze)O[pe+ze]+=Me*U[ye+ze];pe+=L,ye+=L}}}}}}return t.makeTensorInfo($.shape,$.dtype,$.values)}const $ue={kernelName:eb,backendName:"cpu",kernelFunc:FQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ue(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,dy:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:u,filterShape:h}=s;It([r,a],"depthwiseConv2dNativeBackpropFilter");const f=Mr(r.shape,h,i,o,l,u,!0),{strideHeight:d,strideWidth:m,filterHeight:g,filterWidth:w}=f,v=new Ir(f.filterShape,"float32"),b=f.padInfo.left,C=f.padInfo.top,N=f.outChannels/f.inChannels,I=t.data.get(r.dataId).values,L=new Ir(r.shape,r.dtype,I),$=t.data.get(a.dataId).values,H=new Ir(a.shape,a.dtype,$);for(let U=0;U<g;++U){const O=Math.max(0,Math.ceil((C-U)/d)),z=Math.min(f.outHeight,(f.inHeight+C-U)/d);for(let T=0;T<w;++T){const R=Math.max(0,Math.ceil((b-T)/m)),W=Math.min(f.outWidth,(f.inWidth+b-T)/m);for(let K=0;K<f.outChannels;++K){const re=Math.trunc(K/N),P=K%N;let Y=0;for(let J=0;J<f.batchSize;++J)for(let te=O;te<z;++te){const j=U+te*d-C;for(let ue=R;ue<W;++ue){const Q=T+ue*m-b;Y+=L.get(J,j,Q,re)*H.get(J,te,ue,K)}}v.set(Y,U,T,re,P)}}}return t.makeTensorInfo(v.shape,v.dtype,v.values)}const Oue={kernelName:hN,backendName:"cpu",kernelFunc:_ue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Que(n){const{inputs:e,backend:t,attrs:s}=n,{dy:r,filter:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:u,inputShape:h}=s;It([r,a],"depthwiseConv2DNativeBackpropInput");const f=_t(r.shape),d=_t(a.shape),m=Mr(h,a.shape,i,o,l,u,!0),g=new Ir(m.inShape,"float32"),w=g.values,[v,b,C]=g.strides,N=t.data.get(r.dataId).values,[I,L,$]=f,H=t.data.get(a.dataId).values,[U,O,z]=d,{batchSize:T,filterHeight:R,filterWidth:W,inChannels:K,inHeight:re,inWidth:P,outChannels:Y,outHeight:J,outWidth:te,strideHeight:j,strideWidth:ue}=m,Q=R-1-m.padInfo.top,V=W-1-m.padInfo.left,Z=Y/K;for(let le=0;le<T;++le)for(let ce=0;ce<K;++ce)for(let pe=0;pe<re;++pe){const ye=pe-Q,xe=Math.max(0,Math.ceil(ye/j)),Me=Math.min(J,(R+ye)/j);for(let ze=0;ze<P;++ze){const We=ze-V,tt=Math.max(0,Math.ceil(We/ue)),dt=Math.min(te,(W+We)/ue);let _e=0;for(let fe=xe;fe<Me;++fe){const ct=fe*j-ye;for(let lt=tt;lt<dt;++lt){const rt=lt*ue-We,ot=I*le+L*fe+$*lt,ut=U*(R-1-ct)+O*(W-1-rt)+z*ce;for(let At=0;At<Z;++At){const St=ce*Z+At,Rt=N[ot+St],Ht=H[ut+At];_e+=Rt*Ht}}}w[v*le+b*pe+C*ze+ce]=_e}}return t.makeTensorInfo(g.shape,g.dtype,g.values)}const Mue={kernelName:fN,backendName:"cpu",kernelFunc:Que};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hue(n){const{inputs:e,backend:t}=n,{x:s}=e,r=je(s.shape),a=t.data.get(s.dataId).values,i=un([r,r],s.dtype),o=i.values;for(let u=0;u<a.length;u++)o[u*r+u]=a[u];const l=[...s.shape,...s.shape];return t.makeTensorInfo(l,i.dtype,i.values)}const Pue={kernelName:dN,backendName:"cpu",kernelFunc:Hue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zue={kernelName:tb,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:s,filter:r}=n,{strides:a,pad:i,dilations:o}=t,l=e,u=l.data.get(s.dataId).values,h=s.shape.length,f=l.data.get(r.dataId).values,d=r.shape.length,{batchSize:m,inHeight:g,inWidth:w,inChannels:v,outHeight:b,outWidth:C,padInfo:N,strideHeight:I,strideWidth:L,filterHeight:$,filterWidth:H,dilationHeight:U,dilationWidth:O,outShape:z}=Y0(s.shape,r.shape,a,i,"NHWC",o),T=je(z),R=z.length,W=Xs(s.dtype,T);for(let re=0;re<m;++re)for(let P=0;P<b;++P){const Y=P*I-N.top;for(let J=0;J<C;++J){const te=J*L-N.left;for(let j=0;j<v;++j){let ue=Number.MIN_SAFE_INTEGER;for(let V=0;V<$;++V){const Z=Y+V*U;if(Z>=0&&Z<g)for(let le=0;le<H;++le){const ce=te+le*O;if(ce>=0&&ce<w){const pe=EA([re,Z,ce,j],h,_t(s.shape)),ye=EA([V,le,j],d,_t(r.shape)),xe=u[pe]+f[ye];xe>ue&&(ue=xe)}}}const Q=EA([re,P,J,j],R,_t(z));W[Q]=ue}}}return{dataId:l.write(zf(W,s.dtype),z,s.dtype),shape:z,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jue={kernelName:LB,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:s,filter:r,dy:a}=n,{strides:i,pad:o,dilations:l}=t,u=e,h=Uo(s.shape,u.data.get(s.dataId).values),f=Uo(r.shape,u.data.get(r.dataId).values),{batchSize:d,inHeight:m,inWidth:g,inChannels:w,outHeight:v,outWidth:b,padInfo:C,strideHeight:N,strideWidth:I,filterHeight:L,filterWidth:$,dilationHeight:H,dilationWidth:U,outShape:O}=Y0(s.shape,r.shape,i,o,"NHWC",l);se(a.rank===O.length,()=>`Error in ${LB}, dy must have the same rank as output ${O.length}, but got ${a.rank}`);const z=Uo(O,u.data.get(a.dataId).values),T=IL(r.shape,r.dtype);for(let W=0;W<d;++W)for(let K=0;K<v;++K){const re=K*N-C.top;for(let P=0;P<b;++P){const Y=P*I-C.left;for(let J=0;J<w;++J){let te=Number.MIN_SAFE_INTEGER,j=0,ue=0;for(let Q=0;Q<L;++Q){const V=re+Q*H;if(V>=0&&V<m)for(let Z=0;Z<$;++Z){const le=Y+Z*U;if(le>=0&&le<g){const ce=h[W][V][le][J]+f[Q][Z][J];ce>te&&(te=ce,j=Q,ue=Z)}}}T[j][ue][J]+=z[W][K][P][J]}}}return{dataId:u.write(zf(T,s.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vue={kernelName:DB,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:s,filter:r,dy:a}=n,{strides:i,pad:o,dilations:l}=t,u=e,h=Uo(s.shape,u.data.get(s.dataId).values),f=Uo(r.shape,u.data.get(r.dataId).values),{batchSize:d,inHeight:m,inWidth:g,inChannels:w,outHeight:v,outWidth:b,padInfo:C,strideHeight:N,strideWidth:I,filterHeight:L,filterWidth:$,dilationHeight:H,dilationWidth:U,outShape:O}=Y0(s.shape,r.shape,i,o,"NHWC",l);se(a.rank===O.length,()=>`Error in ${DB}, dy must have the same rank as output ${O.length}, but got ${a.rank}`);const z=Uo(O,u.data.get(a.dataId).values),T=IL(s.shape,s.dtype);for(let W=0;W<d;++W)for(let K=0;K<v;++K){const re=K*N-C.top;for(let P=0;P<b;++P){const Y=P*I-C.left;for(let J=0;J<w;++J){let te=Number.MIN_SAFE_INTEGER,j=re<0?0:re,ue=Y<0?0:Y;for(let Q=0;Q<L;++Q){const V=re+Q*H;if(V>=0&&V<m)for(let Z=0;Z<$;++Z){const le=Y+Z*U;if(le>=0&&le<g){const ce=h[W][V][le][J]+f[Q][Z][J];ce>te&&(te=ce,j=V,ue=le)}}}T[W][j][ue][J]+=z[W][K][P][J]}}}return{dataId:u.write(zf(T,s.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gue(n){const{inputs:e,backend:t,attrs:s}=n,{image:r}=e,{canvas:a,options:i}=s,{contextOptions:o,imageOptions:l}=i||{},u=(l==null?void 0:l.alpha)||1,h=(o==null?void 0:o.contextType)||"2d";if(h!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const f=a.getContext(h,(o==null?void 0:o.contextAttributes)||{});if(f==null)throw new Error(`Could not get the context with ${h} type.`);const[d,m]=r.shape.slice(0,2),g=r.shape.length===2?1:r.shape[2],w=t.data.get(r.dataId).values,v=r.dtype==="float32"?255:1,b=new Uint8ClampedArray(m*d*4);for(let N=0;N<d*m;++N){const I=[0,0,0,255*u];for(let $=0;$<g;$++){const H=w[N*g+$];if(r.dtype==="float32"){if(H<0||H>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${H}.`)}else if(r.dtype==="int32"&&(H<0||H>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${H}.`);g===1?(I[0]=H*v,I[1]=H*v,I[2]=H*v):I[$]=H*v}const L=N*4;b[L+0]=Math.round(I[0]),b[L+1]=Math.round(I[1]),b[L+2]=Math.round(I[2]),b[L+3]=Math.round(I[3])}a.width=m,a.height=d;const C=new ImageData(b,m,d);return f.putImageData(C,0,0),r}const Kue={kernelName:a9,backendName:"cpu",kernelFunc:Gue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p1(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a,keepDims:i}=s;It(r,"sum");let o;r.dtype==="bool"?o=uh({inputs:{x:r},backend:t,attrs:{dtype:"int32"}}):o=RA({inputs:{x:r},backend:t});const l=o.shape.length,u=dn(a,o.shape),h=Us(u,l);let f=u,d=o;h!=null&&(d=ii({inputs:{x:o},backend:t,attrs:{perm:h}}),f=Js(f.length,l)),sa("sum",f,d.shape.length);const[m,g]=Hr(d.shape,f),w=Si(d.dtype,"int32");let v=dw(t,m,w);const b=je(g),C=t.data.get(v.dataId).values,N=t.data.get(d.dataId).values;for(let I=0;I<C.length;++I){const L=I*b;let $=0;for(let H=0;H<b;++H)$+=N[L+H];C[I]=$}if(i){const I=Ys(v.shape,u),L=v;v=us({inputs:{x:v},backend:t,attrs:{shape:I}}),t.disposeIntermediateTensorInfo(L)}return t.disposeIntermediateTensorInfo(o),h!=null&&t.disposeIntermediateTensorInfo(d),v}const Wue={kernelName:Ub,backendName:"cpu",kernelFunc:p1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function que(n){const{inputs:e,backend:t,attrs:s}=n,{equation:r}=s,a=e,{allDims:i,summedDims:o,idDims:l}=AI(r,a.length);cI(i.length,l,a);const{path:u,steps:h}=hI(o,l),f=h.length;let d=null,m=i.length;const g=[];for(let w=0;w<f;++w){for(const v of h[w]){const{permutationIndices:b,expandDims:C}=uI(m,l[v]);let N;fI(b)?N=a[v]:(N=ii({inputs:{x:a[v]},backend:t,attrs:{perm:b}}),g.push(N));const I=N.shape.slice();for(let L=0;L<C.length;++L)I.splice(C[L],0,1);Bn(N.shape,I)||(N=us({inputs:{x:N},backend:t,attrs:{shape:I}}),g.push(N)),d===null?d=N:(d=Nx({inputs:{a:N,b:d},backend:t}),g.push(d))}w<f-1&&(u[w]>=0&&(d=p1({inputs:{x:d},backend:t,attrs:{axis:u[w]-(i.length-m),keepDims:!1}}),g.push(d)),m--)}for(const w of g)w!==d&&t.disposeIntermediateTensorInfo(w);return d}const Xue={kernelName:pN,backendName:"cpu",kernelFunc:que};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yue(n){const{inputs:e,backend:t}=n,{dy:s,y:r}=e;It([s,r],"eluGrad");const a=new Float32Array(je(r.shape)),i=t.data.get(r.dataId).values,o=t.data.get(s.dataId).values;for(let l=0;l<i.length;++l){const u=i[l];u>=0?a[l]=o[l]:a[l]=o[l]*(u+1)}return t.makeTensorInfo(r.shape,"float32",a)}const Jue={kernelName:mN,backendName:"cpu",kernelFunc:Yue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zue=nI,ece=sI,tce=rI,nce=aI,sce=iI,rce=oI,ace=Vn(p0,n=>{const e=Math.sign(n),t=Math.abs(n),s=1/(1+Zue*t);return e*(1-((((rce*s+sce)*s+nce)*s+tce)*s+ece)*s*Math.exp(-t*t))}),ice={kernelName:p0,backendName:"cpu",kernelFunc:ace};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gw(n){const{inputs:e,backend:t,attrs:s}=n,{input:r}=e,{dim:a}=s,i=r.shape.length,o=r.shape.slice();let l=a;return a<0&&(se(-(i+1)<=a,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+a+1),o.splice(l,0,1),us({inputs:{x:r},backend:t,attrs:{shape:o}})}const oce={kernelName:sb,backendName:"cpu",kernelFunc:gw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lce=er((n,e)=>n/e),GI=Tr(f0,lce),bS={kernelName:f0,backendName:"cpu",kernelFunc:GI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TQ(n,e,t){const s=n.shape,r=s[0],a=s[1],i=t.data.get(n.dataId),o=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,u=[r,a],h=je(u),f=ea("float32",h),d=ea("float32",h);for(let v=0;v<r;v++){const b=Mf({inputs:{x:o},backend:t,attrs:{begin:[v,0],size:[1,a]}}),C=Mf({inputs:{x:l},backend:t,attrs:{begin:[v,0],size:[1,a]}}),N=xi({inputs:{real:b,imag:C},backend:t}),{real:I,imag:L}=Ace(N,e,t),$=Uu(I,L);for(let H=0;H<a;H++){const U=lI($,H);f[v*a+H]=U.real,d[v*a+H]=U.imag}t.disposeIntermediateTensorInfo(b),t.disposeIntermediateTensorInfo(C),t.disposeIntermediateTensorInfo(N)}const m=t.makeTensorInfo(u,"float32",f),g=t.makeTensorInfo(u,"float32",d),w=xi({inputs:{real:m,imag:g},backend:t});return t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(g),w}function Ace(n,e,t){const s=je(n.shape),r=t.data.get(n.dataId),a=t.data.get(r.complexTensorInfos.real.dataId).values,i=t.data.get(r.complexTensorInfos.imag.dataId).values;if(uce(s)){const o=xS(a,i,s,e,t),l=[n.shape[0],n.shape[1]];if(e){const u=t.makeTensorInfo(l,"float32",o.real),h=t.makeTensorInfo(l,"float32",o.imag),f=t.makeTensorInfo([],"float32",hh(s,"float32")),d=RA({inputs:{x:f},backend:t}),m=bS.kernelFunc({inputs:{a:u,b:f},backend:t}),g=bS.kernelFunc({inputs:{a:h,b:d},backend:t}),w=t.data.get(m.dataId).values,v=t.data.get(g.dataId).values;return t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(g),{real:w,imag:v}}return o}else{const o=Uu(a,i),l=cce(o,s,e);return HR(l)}}function uce(n){return(n&n-1)===0}function xS(n,e,t,s,r){if(t===1)return{real:n,imag:e};const a=Uu(n,e),i=t/2,o=PR(a),l=o.real,u=o.imag,h=[l.length],f=r.makeTensorInfo(h,"float32",l),d=r.makeTensorInfo(h,"float32",u),m=xi({inputs:{real:f,imag:d},backend:r}),g=zR(a),w=g.real,v=g.imag,b=[w.length],C=r.makeTensorInfo(b,"float32",w),N=r.makeTensorInfo(b,"float32",v),I=xi({inputs:{real:C,imag:N},backend:r}),L=xS(l,u,i,s,r),$=L.real,H=L.imag,U=[$.length],O=r.makeTensorInfo(U,"float32",$),z=r.makeTensorInfo(U,"float32",H),T=xi({inputs:{real:O,imag:z},backend:r}),R=xS(w,v,i,s,r),W=R.real,K=R.imag,re=[W.length],P=r.makeTensorInfo(re,"float32",W),Y=r.makeTensorInfo(re,"float32",K),J=xi({inputs:{real:P,imag:Y},backend:r}),te=VR(t,s),j=[te.real.length],ue=r.makeTensorInfo(j,"float32",te.real),Q=r.makeTensorInfo(j,"float32",te.imag),V=xi({inputs:{real:ue,imag:Q},backend:r}),Z=Nx({inputs:{a:V,b:J},backend:r}),le=Ep({inputs:{a:T,b:Z},backend:r}),ce=jI({inputs:{a:T,b:Z},backend:r}),pe=Qf({inputs:{input:le},backend:r}),ye=Qf({inputs:{input:ce},backend:r}),xe=kp({inputs:{input:le},backend:r}),Me=kp({inputs:{input:ce},backend:r}),ze=Fp({inputs:[pe,ye],backend:r,attrs:{axis:0}}),We=Fp({inputs:[xe,Me],backend:r,attrs:{axis:0}}),tt=r.data.get(ze.dataId).values,dt=r.data.get(We.dataId).values;return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(C),r.disposeIntermediateTensorInfo(N),r.disposeIntermediateTensorInfo(I),r.disposeIntermediateTensorInfo(O),r.disposeIntermediateTensorInfo(z),r.disposeIntermediateTensorInfo(T),r.disposeIntermediateTensorInfo(P),r.disposeIntermediateTensorInfo(Y),r.disposeIntermediateTensorInfo(J),r.disposeIntermediateTensorInfo(ue),r.disposeIntermediateTensorInfo(Q),r.disposeIntermediateTensorInfo(V),r.disposeIntermediateTensorInfo(Z),r.disposeIntermediateTensorInfo(le),r.disposeIntermediateTensorInfo(ce),r.disposeIntermediateTensorInfo(pe),r.disposeIntermediateTensorInfo(xe),r.disposeIntermediateTensorInfo(ye),r.disposeIntermediateTensorInfo(Me),r.disposeIntermediateTensorInfo(ze),r.disposeIntermediateTensorInfo(We),{real:tt,imag:dt}}function cce(n,e,t){const s=new Float32Array(e*2);for(let r=0;r<e;r++){let a=0,i=0;for(let o=0;o<e;o++){const l=GR(r*o,e,t),u=lI(n,o);a+=u.real*l.real-u.imag*l.imag,i+=u.real*l.imag+u.imag*l.real}t&&(a/=e,i/=e),jR(s,a,i,r)}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hce(n){const{inputs:e,backend:t}=n,{input:s}=e,r=je(s.shape),a=s.shape[s.shape.length-1],i=r/a,o=us({inputs:{x:s},backend:t,attrs:{shape:[i,a]}}),l=TQ(o,!1,t),u=us({inputs:{x:l},backend:t,attrs:{shape:s.shape}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(l),u}const fce={kernelName:gN,backendName:"cpu",kernelFunc:hce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KI(n){const{backend:e,attrs:t}=n,{shape:s,value:r,dtype:a}=t,i=a||Qp(r),o=Xs(i,je(s));return pce(o,r,i),e.makeTensorInfo(s,i,o)}const dce={kernelName:yN,backendName:"cpu",kernelFunc:KI};function pce(n,e,t){n.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mce={kernelName:wN,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:s}=n,r=t,a=ea(s.dtype,je(s.shape)),[i,o,l,u]=s.shape,h=r.data.get(s.dataId).values;for(let d=0;d<i;d++){const m=d*l*o*u;for(let g=0;g<o;g++){const w=g*(l*u);for(let v=0;v<l;v++){const b=v*u;for(let C=0;C<u;C++){const N=Math.round(l-v-1),I=m+w+b+C;let L=h[I];if(N>=0&&N<l){const $=N*u,H=m+w+$+C;L=h[H]}a[I]=L}}}}return{dataId:r.write(a,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gce(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:u,dataFormat:h,dilations:f,dimRoundingMode:d,activation:m,leakyreluAlpha:g}=s;let w=kQ({inputs:{x:r,filter:a},backend:t,attrs:{strides:l,pad:u,dataFormat:h,dilations:f,dimRoundingMode:d}});if(i){const v=w;if(h==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){const b=us({inputs:{x:i},backend:t,attrs:{shape:[i.shape[0],1,1]}});w=Ep({inputs:{a:w,b},backend:t}),t.disposeIntermediateTensorInfo(b)}else w=Ep({inputs:{a:w,b:i},backend:t});t.disposeIntermediateTensorInfo(v)}if(m){const v=w;if(h==="NCHW"&&m==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const b=us({inputs:{x:o},backend:t,attrs:{shape:[o.shape[0],1,1]}});w=mw(t,w,m,b,g),t.disposeIntermediateTensorInfo(b)}else w=mw(t,w,m,o,g);t.disposeIntermediateTensorInfo(v)}return w}const yce={kernelName:X2,backendName:"cpu",kernelFunc:gce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wce(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:u,dataFormat:h,dilations:f,dimRoundingMode:d,activation:m,leakyreluAlpha:g}=s;let w=FQ({inputs:{x:r,filter:a},backend:t,attrs:{strides:l,pad:u,dataFormat:h,dilations:f,dimRoundingMode:d}});if(i){const v=w;w=Ep({inputs:{a:w,b:i},backend:t}),t.disposeIntermediateTensorInfo(v)}if(m){const v=w;w=mw(t,w,m,o,g),t.disposeIntermediateTensorInfo(v)}return w}const bce={kernelName:Y2,backendName:"cpu",kernelFunc:wce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xce(n){const{inputs:e,backend:t}=n,{params:s,indices:r}=e,a=je(s.shape),i=r.shape,o=i[i.length-1],[l,u,h,f]=V5(s,r);if(u===0)return t.makeTensorInfo(l,s.dtype,[]);const d=t.data.get(r.dataId).values,m=t.bufferSync(s),g=HO(d,m,s.dtype,u,o,h,f,s.shape,a);return t.makeTensorInfo(l,s.dtype,g.values)}const vce={kernelName:bN,backendName:"cpu",kernelFunc:xce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cce(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,indices:a}=e,{axis:i,batchDims:o}=s;It([r,a],"gatherV2");const l=dn(i,r.shape)[0],u=t.data.get(a.dataId).values,h=r.shape[l];for(let I=0;I<u.length;++I){const L=u[I];se(L<=h-1&&L>=0,()=>`GatherV2: the index value ${L} is not in [0, ${h-1}]`)}let f=o;o==null&&(f=0);const d=je(a.shape),m=pI(r,a,l,f),g=us({inputs:{x:r},backend:t,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),w=us({inputs:{x:a},backend:t,attrs:{shape:[m.batchSize,d/m.batchSize]}}),v=[m.batchSize,m.outerSize,d/m.batchSize,m.sliceSize],b=t.bufferSync(w),C=t.bufferSync(g),N=PO(C,b,v);return t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(w),t.makeTensorInfo(m.outputShape,N.dtype,N.values)}const Bce={kernelName:ab,backendName:"cpu",kernelFunc:Cce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sce(n){const{inputs:e,backend:t}=n,{input:s}=e,r=je(s.shape),a=s.shape[s.shape.length-1],i=r/a,o=us({inputs:{x:s},backend:t,attrs:{shape:[i,a]}}),l=TQ(o,!0,t),u=us({inputs:{x:l},backend:t,attrs:{shape:s.shape}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(l),u}const Nce={kernelName:xN,backendName:"cpu",kernelFunc:Sce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ice=Vn(v0,n=>Number.isFinite(n)?1:0,"bool"),Ece={kernelName:v0,backendName:"cpu",kernelFunc:Ice};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kce=Vn(C0,n=>Math.abs(n)===1/0?1:0,"bool"),Fce={kernelName:C0,backendName:"cpu",kernelFunc:kce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tce=Vn(B0,n=>Number.isNaN(n)?1:0,"bool"),Dce={kernelName:B0,backendName:"cpu",kernelFunc:Tce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lce(n){const{backend:e,attrs:t}=n,{start:s,stop:r,num:a}=t,i=KO(s,r,a);return e.makeTensorInfo([i.length],"float32",i)}const Uce={kernelName:CN,backendName:"cpu",kernelFunc:Lce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rce=Vn(N0,n=>Math.log1p(n)),$ce={kernelName:N0,backendName:"cpu",kernelFunc:Rce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ce=er((n,e)=>n&&e),Oce=Tr(ub,_ce,null,"bool"),Qce={kernelName:ub,backendName:"cpu",kernelFunc:Oce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mce=Vn(cb,n=>n?0:1,"bool"),Hce={kernelName:cb,backendName:"cpu",kernelFunc:Mce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pce=er((n,e)=>n||e),zce=Tr(hb,Pce,null,"bool"),jce={kernelName:hb,backendName:"cpu",kernelFunc:zce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vce(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{depthRadius:a,bias:i,alpha:o,beta:l}=s;It(r,"LRN");const u=r.shape[3],h=u-1,f=t.data.get(r.dataId).values,d=je(r.shape),m=new Float32Array(d);function g(w){const v=w%u;let b=w-v+Math.max(0,v-a);const C=w-v+Math.min(v+a,h);let N=0;for(;b<=C;b++){const I=f[b];N+=I*I}return N}for(let w=0;w<d;w++){const v=g(w),b=f[w]*Math.pow(i+o*v,-l);m[w]=b}return t.makeTensorInfo(r.shape,r.dtype,m)}const Gce={kernelName:fb,backendName:"cpu",kernelFunc:Vce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kce(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,y:a,dy:i}=e,{depthRadius:o,bias:l,alpha:u,beta:h}=s;It(i,"LRNGrad");const f=je(i.shape),d=i.shape[3],m=t.data.get(i.dataId).values,g=t.data.get(r.dataId).values,w=t.data.get(a.dataId).values,v=new Float32Array(f),b=f;for(let C=0;C<b;C++){const N=C%d,I=C-N+Math.max(0,N-o),L=C-N+Math.min(d,N+o+1);let $=0;for(let H=I;H<L;H++)$+=Math.pow(g[H],2);$=u*$+l;for(let H=I;H<L;H++){let U=-2*u*h*g[H]*w[C]/$;C===H&&(U+=Math.pow($,-h)),U*=m[C],v[H]+=U}}return t.makeTensorInfo(i.shape,r.dtype,v)}const Wce={kernelName:BN,backendName:"cpu",kernelFunc:Kce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DQ(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{reductionIndices:a,keepDims:i}=s,o=t;let l=r.shape;const u=l.length,h=dn(a,l);let f=h;const d=Us(f,u);let m=o.data.get(r.dataId).values;if(d!=null){const I=new Array(u);for(let L=0;L<I.length;L++)I[L]=l[d[L]];m=PI(m,l,r.dtype,d,I),f=Js(f.length,u),l=I}It(r,"max"),sa("max",f,u);const[g,w]=Hr(l,f),v=je(w),b=qO(m,v,g,r.dtype),C=o.write(b,g,r.dtype);let N=g;return i&&(N=Ys(g,h)),{dataId:C,shape:N,dtype:r.dtype}}const qce={kernelName:db,backendName:"cpu",kernelFunc:DQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xce(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e;It(r,"maxPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=s,u=1;se(na(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const h=Mo(r.shape,a,i,u,o,l);let f;if(h.filterWidth===1&&h.filterHeight===1&&Bn(h.inShape,h.outShape))f=RA({inputs:{x:r},backend:t});else{const d=t.data.get(r.dataId).values,m=_t(r.shape),g=VI(d,r.shape,r.dtype,m,h,"max");f=t.makeTensorInfo(h.outShape,r.dtype,g.values)}return f}const Yce={kernelName:pb,backendName:"cpu",kernelFunc:Xce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jce(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l,dataFormat:u}=s;It(r,"maxPool3d");const h=_u(r.shape,a,i,1,o,l,u),f=t.data.get(r.dataId).values,d=EQ(f,r.shape,r.dtype,_t(r.shape),h,"max");return t.makeTensorInfo(d.shape,"float32",d.values)}const Zce={kernelName:mb,backendName:"cpu",kernelFunc:Jce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ehe(n){const{inputs:e,backend:t,attrs:s}=n,{dy:r,input:a}=e,{filterSize:i,strides:o,pad:l,dimRoundingMode:u}=s;It([r,a],"maxPool3DGrad");const h=_u(a.shape,i,o,1,l,u),f=t.bufferSync(a),d=PAe(f,h),m=h.strideDepth,g=h.strideHeight,w=h.strideWidth,v=h.dilationDepth,b=h.dilationHeight,C=h.dilationWidth,N=h.effectiveFilterDepth,I=h.effectiveFilterHeight,L=h.effectiveFilterWidth,$=N-1-h.padInfo.front,H=L-1-h.padInfo.left,U=I-1-h.padInfo.top,O=un(a.shape,"float32"),z=t.bufferSync(r);for(let T=0;T<h.batchSize;++T)for(let R=0;R<h.inChannels;++R)for(let W=0;W<h.inDepth;++W)for(let K=0;K<h.inHeight;++K)for(let re=0;re<h.inWidth;++re){const P=W-$,Y=K-U,J=re-H;let te=0;for(let j=0;j<N;j+=v){const ue=(P+j)/m;if(!(ue<0||ue>=h.outDepth||Math.floor(ue)!==ue))for(let Q=0;Q<I;Q+=b){const V=(Y+Q)/g;if(!(V<0||V>=h.outHeight||Math.floor(V)!==V))for(let Z=0;Z<L;Z+=C){const le=(J+Z)/w;if(le<0||le>=h.outWidth||Math.floor(le)!==le)continue;const ce=N*I*L-1-d.get(T,ue,V,le,R),pe=j*I*L+Q*L+Z,ye=ce===pe?1:0;if(ye===0)continue;const xe=z.get(T,ue,V,le,R);te+=xe*ye}}}O.set(te,T,W,K,re,R)}return t.makeTensorInfo(O.shape,O.dtype,O.values)}const the={kernelName:NN,backendName:"cpu",kernelFunc:ehe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nhe(n){const{inputs:e,backend:t,attrs:s}=n,{dy:r,input:a,output:i}=e,o=a;It([a,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:h,dimRoundingMode:f}=s,d=Mo(o.shape,l,u,1,h,f),m=t.data.get(o.dataId).values,g=un(d.outShape,o.dtype,IQ(m,o.shape,o.dtype,d).values),w=d.strideHeight,v=d.strideWidth,b=d.dilationHeight,C=d.dilationWidth,N=d.effectiveFilterHeight,I=d.effectiveFilterWidth,L=I-1-d.padInfo.left,$=N-1-d.padInfo.top,H=un(o.shape,"float32"),U=t.data.get(r.dataId).values,O=un(r.shape,"float32",U);for(let z=0;z<d.batchSize;++z)for(let T=0;T<d.inChannels;++T)for(let R=0;R<d.inHeight;++R)for(let W=0;W<d.inWidth;++W){const K=R-$,re=W-L;let P=0;for(let Y=0;Y<N;Y+=b){const J=(K+Y)/w;if(!(J<0||J>=d.outHeight||Math.floor(J)!==J))for(let te=0;te<I;te+=C){const j=(re+te)/v;if(j<0||j>=d.outWidth||Math.floor(j)!==j)continue;const ue=N*I-1-g.get(z,J,j,T),Q=Y*I+te,V=ue===Q?1:0;if(V===0)continue;const Z=O.get(z,J,j,T);P+=Z*V}}H.set(P,z,R,W,T)}return t.makeTensorInfo(H.shape,H.dtype,H.values)}const she={kernelName:SN,backendName:"cpu",kernelFunc:nhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rhe(n,e,t,s,r){const a=_t(e),i=VI(n,e,t,a,r,"max"),o=IQ(n,e,t,r,!0,s);return[i.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ahe={kernelName:IN,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:s}=n,{filterSize:r,strides:a,pad:i,includeBatchInIndex:o}=e,l=t;It(s,"MaxPoolWithArgmax");const u=l.data.get(s.dataId).values,h=Mo(s.shape,r,a,[1,1],i),[f,d]=rhe(u,s.shape,s.dtype,o,h),m=l.write(f,h.outShape,s.dtype),g=l.write(d,h.outShape,s.dtype);return[{dataId:m,shape:h.outShape,dtype:s.dtype},{dataId:g,shape:h.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ihe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a,keepDims:i}=s,o=dn(a,r.shape),u=Hr(r.shape,o)[1],h=je(u),f=[],d=t.makeTensorInfo([],"float32",new Float32Array([h]));f.push(d);const m=uh({inputs:{x:r},backend:t,attrs:{dtype:"float32"}});f.push(m);const g=GI({inputs:{a:m,b:d},backend:t});f.push(g);const w=p1({inputs:{x:g},backend:t,attrs:{axis:a,keepDims:i}});return f.forEach(v=>t.disposeIntermediateTensorInfo(v)),w}const ohe={kernelName:gb,backendName:"cpu",kernelFunc:ihe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lhe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a,keepDims:i}=s;It(r,"min");const o=dn(a,r.shape);let l=o;const u=Us(l,r.shape.length);let h=r;u!=null&&(h=ii({inputs:{x:r},backend:t,attrs:{perm:u}}),l=Js(l.length,r.shape.length)),sa("min",l,h.shape.length);const[f,d]=Hr(h.shape,l),m=je(d),g=ma(je(f),h.dtype),w=t.data.get(h.dataId).values;for(let b=0;b<g.length;++b){const C=b*m;let N=w[C];for(let I=0;I<m;++I){const L=w[C+I];(Number.isNaN(L)||L<N)&&(N=L)}g[b]=N}u!=null&&t.disposeIntermediateTensorInfo(h);const v=t.makeTensorInfo(f,h.dtype,g);if(i){const b=Ys(f,o),C=us({inputs:{x:v},backend:t,attrs:{shape:b}});return t.disposeIntermediateTensorInfo(v),C}return v}const Ahe={kernelName:yb,backendName:"cpu",kernelFunc:lhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uhe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{paddings:a,mode:i}=s;It(r,"mirrorPad");const o=a.map((N,I)=>N[0]+r.shape[I]+N[1]),l=a.map(N=>N[0]),u=a.map((N,I)=>N[0]+r.shape[I]),h=i==="reflect"?0:1,f=t.data.get(r.dataId).values,d=r.shape.length,m=_t(r.shape),g=je(o),w=o.length,v=_t(o),b=ea(r.dtype,g);for(let N=0;N<g;N++){let I=Mp(N,w,v);for(let $=0;$<w;$++)I[$]<l[$]?I[$]=l[$]*2-I[$]-h:I[$]>=u[$]&&(I[$]=(u[$]-1)*2-I[$]+h);I=I.map(($,H)=>$-l[H]);const L=EA(I,d,m);b[N]=f[L]}return{dataId:t.write(b,o,r.dtype),shape:o,dtype:r.dtype}}const che={kernelName:wb,backendName:"cpu",kernelFunc:uhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hhe=er((n,e)=>{const t=n%e;return n<0&&e<0||n>=0&&e>=0?t:(t+e)%e}),fhe=Tr(k0,hhe),dhe={kernelName:k0,backendName:"cpu",kernelFunc:fhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LQ(n){const{inputs:e,backend:t,attrs:s}=n,{logits:r}=e,{dim:a}=s,i=r.shape.length;let o=a;if(o===-1&&(o=i-1),o!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${o}`);const l=dn([o],r.shape),u=DQ({inputs:{x:r},backend:t,attrs:{reductionIndices:l,keepDims:!1}}),h=Ys(u.shape,l),f=us({inputs:{x:u},backend:t,attrs:{shape:h}}),d=jI({inputs:{a:r,b:f},backend:t}),m=_O({inputs:{x:d},backend:t}),g=p1({inputs:{x:m},backend:t,attrs:{axis:l,keepDims:!1}}),w=us({inputs:{x:g},backend:t,attrs:{shape:h}}),v=GI({inputs:{a:m,b:w},backend:t});return t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(w),v}const phe={kernelName:_b,backendName:"cpu",kernelFunc:LQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mhe(n){const{inputs:e,backend:t,attrs:s}=n,{logits:r}=e,{numSamples:a,seed:i,normalized:o}=s;It(r,"multinomial");const l=o?r:LQ({inputs:{logits:r},backend:t,attrs:{dim:-1}}),u=l.shape[0],h=l.shape[1],f=t.data.get(l.dataId).values,d=[u,a],m=ma(je(d),"int32");for(let g=0;g<u;++g){const w=g*h,v=new Float32Array(h-1);v[0]=f[w];for(let N=1;N<v.length;++N)v[N]=v[N-1]+f[w+N];const b=tx.alea(i.toString()),C=g*a;for(let N=0;N<a;++N){const I=b();m[C+N]=v.length;for(let L=0;L<v.length;L++)if(I<v[L]){m[C+N]=L;break}}}return o||t.disposeIntermediateTensorInfo(l),t.makeTensorInfo(d,"int32",m)}const ghe={kernelName:EN,backendName:"cpu",kernelFunc:mhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yhe=O5;function whe(n){const{inputs:e,backend:t,attrs:s}=n,{boxes:r,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=s;It(r,"NonMaxSuppression");const u=t.data.get(r.dataId).values,h=t.data.get(a.dataId).values,{selectedIndices:f}=yhe(u,h,i,o,l);return t.makeTensorInfo([f.length],"int32",new Int32Array(f))}const bhe={kernelName:kN,backendName:"cpu",kernelFunc:whe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xhe=Q5;function vhe(n){const{inputs:e,backend:t,attrs:s}=n,{boxes:r,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=s;It(r,"NonMaxSuppressionPadded");const h=t.data.get(r.dataId).values,f=t.data.get(a.dataId).values,{selectedIndices:d,validOutputs:m}=xhe(h,f,i,o,l,u);return[t.makeTensorInfo([d.length],"int32",new Int32Array(d)),t.makeTensorInfo([],"int32",new Int32Array([m]))]}const Che={kernelName:FN,backendName:"cpu",kernelFunc:vhe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bhe=M5;function She(n){const{inputs:e,backend:t,attrs:s}=n,{boxes:r,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=s;It(r,"NonMaxSuppressionWithScore");const h=t.data.get(r.dataId).values,f=t.data.get(a.dataId).values,d=i,m=o,g=l,w=u,{selectedIndices:v,selectedScores:b}=Bhe(h,f,d,m,g,w);return[t.makeTensorInfo([v.length],"int32",new Int32Array(v)),t.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const Nhe={kernelName:TN,backendName:"cpu",kernelFunc:She};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ihe(n){const{inputs:e,backend:t,attrs:s}=n,{indices:r}=e,{dtype:a,depth:i,onValue:o,offValue:l}=s;It(r,"oneHot");const u=je(r.shape),h=new Float32Array(u*i);h.fill(l);const f=t.data.get(r.dataId).values;for(let d=0;d<u;++d)f[d]>=0&&f[d]<i&&(h[d*i+f[d]]=o);return t.makeTensorInfo([...r.shape,i],a,h)}const Ehe={kernelName:Cb,backendName:"cpu",kernelFunc:Ihe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yw(n){const{inputs:e,backend:t}=n,{x:s}=e;if(s.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(s.dtype==="complex64"){const r=Qf({inputs:{input:s},backend:t}),a=yw({inputs:{x:r},backend:t}),i=kp({inputs:{input:s},backend:t}),o=yw({inputs:{x:i},backend:t}),l=xi({inputs:{real:a,imag:o},backend:t});return t.disposeIntermediateTensorInfo(r),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(o),l}else return KI({backend:t,attrs:{shape:s.shape,value:0,dtype:s.dtype}})}const khe={kernelName:Hb,backendName:"cpu",kernelFunc:yw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UQ(n){const{inputs:e,backend:t}=n,{x:s}=e;if(s.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(s.dtype==="complex64"){const r=Qf({inputs:{input:s},backend:t}),a=UQ({inputs:{x:r},backend:t}),i=kp({inputs:{input:s},backend:t}),o=yw({inputs:{x:i},backend:t}),l=xi({inputs:{real:a,imag:o},backend:t});return t.disposeIntermediateTensorInfo(r),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(o),l}else return KI({backend:t,attrs:{shape:s.shape,value:1,dtype:s.dtype}})}const Fhe={kernelName:vb,backendName:"cpu",kernelFunc:UQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RQ(n){const{inputs:e,backend:t,attrs:s}=n,{axis:r}=s;if(e.length===1)return gw({inputs:{input:e[0]},backend:t,attrs:{dim:r}});const a=e[0].shape,i=e[0].dtype;e.forEach(h=>{Di(a,h.shape,"All tensors passed to stack must have matching shapes"),se(i===h.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(h=>{const f=gw({inputs:{input:h},backend:t,attrs:{dim:r}});return o.push(f),f}),u=Fp({inputs:l,backend:t,attrs:{axis:r}});return o.forEach(h=>t.disposeIntermediateTensorInfo(h)),u}const The={kernelName:Bb,backendName:"cpu",kernelFunc:RQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dhe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{paddings:a,constantValue:i}=s;It(r,"pad");const o=a.map((C,N)=>C[0]+r.shape[N]+C[1]),l=a.map(C=>C[0]),u=t.data.get(r.dataId).values,h=je(r.shape),f=r.shape.length,d=_t(r.shape),m=je(o),g=o.length,w=_t(o),v=ea(r.dtype,m);i!==0&&v.fill(i);for(let C=0;C<h;C++){const I=Mp(C,f,d).map(($,H)=>$+l[H]),L=EA(I,g,w);v[L]=u[C]}return{dataId:t.write(v,o,r.dtype),shape:o,dtype:r.dtype}}const $Q={kernelName:Sb,backendName:"cpu",kernelFunc:Dhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lhe=er((n,e)=>Math.pow(n,e)),Uhe=Tr(T0,Lhe),Rhe={kernelName:T0,backendName:"cpu",kernelFunc:Uhe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $he(n){const{inputs:e,backend:t,attrs:s}=n,{paramsNestedSplits:r,paramsDenseValues:a,indices:i}=e,{outputRaggedRank:o}=s,l=r.map(b=>t.data.get(b.dataId).values),u=r.map(b=>b.shape),h=t.data.get(a.dataId).values,f=t.data.get(i.dataId).values,[d,m,g]=tQ(l,u,h,a.shape,a.dtype,f,i.shape),w=d.map(b=>t.makeTensorInfo([b.length],"int32",b)),v=t.makeTensorInfo(g,a.dtype,m);return w.concat([v])}const _he={kernelName:DN,backendName:"cpu",kernelFunc:$he};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ohe(n){const{inputs:e,backend:t}=n,{starts:s,limits:r,deltas:a}=e,i=t.data.get(s.dataId).values,o=t.data.get(r.dataId).values,l=t.data.get(a.dataId).values,[u,h]=nQ(i,s.shape,s.dtype,o,r.shape,l,a.shape),f=t.makeTensorInfo([u.length],"int32",u),d=t.makeTensorInfo([h.length],s.dtype,h);return[f,d]}const Qhe={kernelName:LN,backendName:"cpu",kernelFunc:Ohe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mhe(n){const{inputs:e,backend:t,attrs:s}=n,{shape:r,values:a,defaultValue:i,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=s,u=t.data.get(r.dataId).values,h=t.data.get(a.dataId).values,f=t.data.get(i.dataId).values,d=o.map(v=>t.data.get(v.dataId).values),m=o.map(v=>v.shape),[g,w]=sQ(u,r.shape,h,a.shape,a.dtype,f,i.shape,d,m,l);return t.makeTensorInfo(g,a.dtype,w)}const Hhe={kernelName:UN,backendName:"cpu",kernelFunc:Mhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Phe(n){const{backend:e,attrs:t}=n,{start:s,stop:r,dtype:a,step:i}=t,o=rQ(s,r,i,a);return e.makeTensorInfo([o.length],a,o)}const zhe={kernelName:RN,backendName:"cpu",kernelFunc:Phe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jhe=Vn(D0,n=>1/n),Vhe={kernelName:D0,backendName:"cpu",kernelFunc:jhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ghe(n){const{inputs:e,backend:t,attrs:s}=n,{images:r}=e,{alignCorners:a,halfPixelCenters:i,size:o}=s;It(r,"resizeBilinear");const l=_t(r.shape),[u,h]=o,[f,d,m,g]=r.shape,w=t.data.get(r.dataId).values,v=new Float32Array(je([f,u,h,g])),b=[a&&u>1?d-1:d,a&&h>1?m-1:m],C=[a&&u>1?u-1:u,a&&h>1?h-1:h];let N=0;const I=b[0]/C[0],L=b[1]/C[1];for(let $=0;$<f;$++)for(let H=0;H<u;H++){let U;i?U=I*(H+.5)-.5:U=I*H;const O=Math.max(0,Math.floor(U)),z=U-O,T=Math.min(d-1,Math.ceil(U)),R=$*l[0]+O*l[1],W=$*l[0]+T*l[1];for(let K=0;K<h;K++){let re;i?re=L*(K+.5)-.5:re=L*K;const P=Math.max(0,Math.floor(re)),Y=re-P,J=Math.min(m-1,Math.ceil(re)),te=R+P*l[2],j=W+P*l[2],ue=R+J*l[2],Q=W+J*l[2];for(let V=0;V<g;V++){const Z=w[te+V],le=w[j+V],ce=w[ue+V],pe=w[Q+V],ye=Z+(ce-Z)*Y,xe=le+(pe-le)*Y,Me=ye+(xe-ye)*z;v[N++]=Me}}}return t.makeTensorInfo([f,u,h,g],"float32",v)}const Khe={kernelName:Fb,backendName:"cpu",kernelFunc:Ghe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Whe(n){const{inputs:e,backend:t,attrs:s}=n,{images:r,dy:a}=e,{alignCorners:i}=s;It([a,r],"resizeBilinearGrad");const o=_t(r.shape),[l,u,h,f]=r.shape,[,d,m]=a.shape,g=new Float32Array(l*u*h*f),w=[i&&d>1?u-1:u,i&&m>1?h-1:h],v=[i&&d>1?d-1:d,i&&m>1?m-1:m],b=w[0]/v[0],C=w[1]/v[1],N=t.data.get(a.dataId).values;let I=0;for(let L=0;L<l;L++){const $=L*o[0];for(let H=0;H<d;H++){const U=H*b,O=Math.floor(U),z=Math.min(Math.ceil(U),u-1),T=$+O*o[1],R=$+z*o[1],W=U-O,K=1-W;for(let re=0;re<m;re++){const P=re*C,Y=Math.floor(P),J=Math.min(Math.ceil(P),h-1),te=P-Y,j=1-te,ue=T+Y*o[2],Q=T+J*o[2],V=R+Y*o[2],Z=R+J*o[2],le=K*j,ce=K*te,pe=W*j,ye=W*te;for(let xe=0;xe<f;xe++){const Me=N[I++];g[ue+xe]+=Me*le,g[Q+xe]+=Me*ce,g[V+xe]+=Me*pe,g[Z+xe]+=Me*ye}}}}return t.makeTensorInfo([l,h,u,f],"float32",g)}const qhe={kernelName:ON,backendName:"cpu",kernelFunc:Whe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xhe(n){const{inputs:e,backend:t,attrs:s}=n,{images:r}=e,{alignCorners:a,halfPixelCenters:i,size:o}=s;It(r,"resizeNearestNeighbor");const l=_t(r.shape),[u,h]=o,[f,d,m,g]=r.shape,w=t.data.get(r.dataId).values,v=new Float32Array(f*u*h*g),b=[a&&u>1?d-1:d,a&&h>1?m-1:m],C=[a&&u>1?u-1:u,a&&h>1?h-1:h],N=b[0]/C[0],I=b[1]/C[1];let L=0;for(let $=0;$<f;$++){const H=$*l[0];for(let U=0;U<u;U++){const O=i?N*(U+.5):N*U;let z=Math.min(d-1,a?Math.round(O):Math.floor(O));i&&(z=Math.max(0,z));const T=H+z*l[1];for(let R=0;R<h;R++){const W=i?I*(R+.5):I*R;let K=Math.min(m-1,a?Math.round(W):Math.floor(W));i&&(K=Math.max(0,K));const re=T+K*l[2];for(let P=0;P<g;P++){const Y=w[re+P];v[L++]=Y}}}}return t.makeTensorInfo([f,u,h,g],r.dtype,v)}const Yhe={kernelName:kb,backendName:"cpu",kernelFunc:Xhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jhe(n){const{inputs:e,backend:t,attrs:s}=n,{images:r,dy:a}=e,{alignCorners:i}=s;It([a,r],"resizeNearestNeighborGrad");const o=_t(r.shape),l=_t(a.shape),[u,h,f,d]=r.shape,[,m,g]=a.shape,w=new Float32Array(u*h*f*d),v=t.data.get(a.dataId).values,b=[i&&m>1?h-1:h,i&&g>1?f-1:f],C=[i&&m>1?m-1:m,i&&g>1?g-1:g],N=b[0]/C[0],I=b[1]/C[1],L=1/N,$=1/I,H=Math.ceil(L)*2+2,U=Math.ceil($)*2+2;for(let O=0;O<u;O++){const z=O*o[0];for(let T=0;T<h;T++){const R=z+T*o[1],W=Math.floor(T*L),K=Math.floor(W-H/2);for(let re=0;re<f;re++){const P=R+re*o[2],Y=Math.floor(re*$),J=Math.floor(Y-U/2);for(let te=0;te<d;te++){let j=0;for(let ue=0;ue<H;ue++){const Q=ue+K;if(Q<0||Q>=m)continue;const V=z+Q*l[1],Z=Q*N,le=Math.min(h-1,i?Math.round(Z):Math.floor(Z));if(T===le)for(let ce=0;ce<U;ce++){const pe=ce+J;if(pe<0||pe>=g)continue;const ye=V+pe*l[2],xe=pe*I,Me=Math.min(f-1,i?Math.round(xe):Math.floor(xe));re===Me&&(j+=v[ye+te])}}w[P+te]=j}}}}return t.makeTensorInfo(r.shape,r.dtype,w)}const Zhe={kernelName:_N,backendName:"cpu",kernelFunc:Jhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function efe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{dims:a}=s;It(r,"reverse");const i=r.shape.length,o=dn(a,r.shape);if(i===0)return RA({inputs:{x:r},backend:t});const l=new Ir(r.shape,r.dtype),u=t.bufferSync(r);for(let h=0;h<l.size;h++){const f=l.indexToLoc(h),d=f.slice();o.forEach(m=>d[m]=r.shape[m]-1-d[m]),l.set(u.get(...d),...f)}return t.makeTensorInfo(l.shape,l.dtype,l.values)}const tfe={kernelName:Tb,backendName:"cpu",kernelFunc:efe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nfe={kernelName:t5,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:s}=n,{radians:r,fillValue:a,center:i}=e,o=t,l=ea(s.dtype,je(s.shape)),[u,h,f,d]=s.shape,[m,g]=Z5(i,h,f),w=255,v=Math.sin(r),b=Math.cos(r),C=o.data.get(s.dataId).values;for(let I=0;I<u;I++){const L=I*f*h*d;for(let $=0;$<h;$++){const H=$*(f*d);for(let U=0;U<f;U++){const O=U*d;for(let z=0;z<d;z++){const T=[u,$,U,z],R=T[2],W=T[1];let K=(R-m)*b-(W-g)*v,re=(R-m)*v+(W-g)*b;K=Math.round(K+m),re=Math.round(re+g);let P=a;if(typeof a!="number"&&(z===3?P=w:P=a[z]),K>=0&&K<f&&re>=0&&re<h){const J=re*(f*d),te=K*d,j=L+J+te+z;P=C[j]}const Y=L+H+O+z;l[Y]=P}}}}return{dataId:o.write(l,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sfe=Vn(R0,n=>{const e=Math.floor(n);return n-e<.5?Math.floor(n):n-e>.5?Math.ceil(n):e%2===0?e:e+1}),rfe={kernelName:R0,backendName:"cpu",kernelFunc:sfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function afe(n){const{inputs:e,backend:t,attrs:s}=n,{indices:r,updates:a}=e,{shape:i}=s,{sliceRank:o,numUpdates:l,sliceSize:u,strides:h,outputSize:f}=Kf(a,r,i),d=!0,m=t.bufferSync(r),g=t.bufferSync(a),w=xf(m,g,i,f,u,l,o,h,0,d);return t.makeTensorInfo(i,w.dtype,w.values)}const ife={kernelName:QN,backendName:"cpu",kernelFunc:afe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ofe(n,e){let t=0,s=n.length,r=0;for(;t<s;)r=Math.floor((t+s)/2),n[r]<e?t=r+1:s=r;return s}function lfe(n,e){let t=0,s=n.length,r=0;for(;t<s;)r=Math.floor((t+s)/2),n[r]<=e?t=r+1:s=r;return s}function Afe(n,e,t,s,r,a){const i=Xs("int32",t*r);for(let o=0;o<t;++o){const l=n.slice(o*s,(o+1)*s),u=o*r;for(let h=0;h<r;++h)i[u+h]=a==="left"?ofe(l,e[h+u]):lfe(l,e[h+u])}return i}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ufe(n){const{inputs:e,backend:t,attrs:s}=n,{sortedSequence:r,values:a}=e,{side:i}=s,o=t.data.get(r.dataId).values,l=t.data.get(a.dataId).values,u=Afe(o,l,r.shape[0],r.shape[1],a.shape[1],i);return t.makeTensorInfo(a.shape,"int32",u)}const cfe={kernelName:HN,backendName:"cpu",kernelFunc:ufe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hfe(n){const{inputs:e,backend:t}=n,{condition:s,t:r,e:a}=e;It([s,r,a],"select");const i=s.shape.length,o=t.data.get(s.dataId).values,l=t.data.get(r.dataId).values,u=t.data.get(a.dataId).values,h=Si(r.dtype,a.dtype),f=ma(je(r.shape),h);let d=0;const m=i===0||i>1||r.shape.length===1?1:je(r.shape.slice(1));for(let g=0;g<o.length;g++)for(let w=0;w<m;w++)o[g]===1?f[d++]=l[g]:f[d++]=u[g];return t.makeTensorInfo(r.shape,h,f)}const ffe={kernelName:Db,backendName:"cpu",kernelFunc:hfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dfe=fx,pfe=dx,mfe=Vn(_0,n=>n>=0?pfe*n:dfe*(Math.exp(n)-1)),gfe={kernelName:_0,backendName:"cpu",kernelFunc:mfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yfe=Vn(M0,n=>n<0?-1:n>0?1:0),wfe={kernelName:M0,backendName:"cpu",kernelFunc:yfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bfe=Vn(O0,n=>Math.sin(n)),xfe={kernelName:O0,backendName:"cpu",kernelFunc:bfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vfe=Vn(Q0,n=>Math.sinh(n)),Cfe={kernelName:Q0,backendName:"cpu",kernelFunc:vfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bfe=11920928955078125e-23,e3=Math.log(Bfe)+2,Sfe=Vn(P0,n=>{const e=n>-e3,t=n<e3,s=Math.exp(n);let r;return t?r=s:e?r=n:r=Math.log(1+s),r}),Nfe={kernelName:P0,backendName:"cpu",kernelFunc:Sfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ife(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{blockShape:a,paddings:i}=s;It([r],"spaceToBatchND");const o=je(a),l=[[0,0]];l.push(...i);for(let $=1+a.length;$<r.shape.length;++$)l.push([0,0]);const u=$Q.kernelFunc({inputs:{x:r},backend:t,attrs:{paddings:l,constantValue:0}}),h=r1(u.shape,a,o,!1),f=a1(h.length,a.length,!1),d=i1(u.shape,a,o,!1),w=us({inputs:{x:u},backend:t,attrs:{shape:h}}),C=ii({inputs:{x:w},backend:t,attrs:{perm:f}}),L=us({inputs:{x:C},backend:t,attrs:{shape:d}});return t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(w),t.disposeIntermediateTensorInfo(C),L}const Efe={kernelName:Rb,backendName:"cpu",kernelFunc:Ife};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kfe(n){const{inputs:e,backend:t}=n,{indices:s,values:r,denseShape:a,defaultValue:i}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${a.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${s.shape}`);if(r.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${r.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const o=t.data.get(s.dataId).values,l=t.data.get(r.dataId).values,u=t.data.get(a.dataId).values,h=t.data.get(i.dataId).values[0],[f,d,m,g,w]=lQ(o,s.shape,s.dtype,l,r.dtype,u,h);return[t.makeTensorInfo(d,s.dtype,f),t.makeTensorInfo([d[0]],r.dtype,m),t.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(v=>Number(v)))),t.makeTensorInfo([w.length],s.dtype,new Int32Array(w))]}const Ffe={kernelName:PN,backendName:"cpu",kernelFunc:kfe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tfe(n){const{inputs:e,backend:t}=n,{inputIndices:s,inputShape:r,newShape:a}=e;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${s.shape}`);if(r.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const i=Array.from(t.data.get(r.dataId).values),o=t.data.get(s.dataId).values,l=Array.from(t.data.get(a.dataId).values),[u,h,f]=AQ(o,s.shape,s.dtype,i,l);return[t.makeTensorInfo(h,s.dtype,u),t.makeTensorInfo([f.length],a.dtype,new Int32Array(f))]}const Dfe={kernelName:zN,backendName:"cpu",kernelFunc:Tfe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lfe(n){const{inputs:e,backend:t}=n,{data:s,indices:r,segmentIds:a}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${r.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${a.shape}`);if(r.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const i=t.data.get(s.dataId).values,o=t.data.get(r.dataId).values,l=t.data.get(a.dataId).values,[u,h]=zI(i,s.shape,s.dtype,o,l,!0);return t.makeTensorInfo(h,s.dtype,u)}const Ufe={kernelName:jN,backendName:"cpu",kernelFunc:Lfe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rfe(n){const{inputs:e,backend:t}=n,{data:s,indices:r,segmentIds:a}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${r.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${a.shape}`);if(r.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const i=t.data.get(s.dataId).values,o=t.data.get(r.dataId).values,l=t.data.get(a.dataId).values,[u,h]=zI(i,s.shape,s.dtype,o,l);return t.makeTensorInfo(h,s.dtype,u)}const $fe={kernelName:VN,backendName:"cpu",kernelFunc:Rfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _fe(n){const{inputs:e,backend:t,attrs:s}=n,{sparseIndices:r,sparseValues:a,defaultValue:i}=e,{outputShape:o}=s,{sliceRank:l,numUpdates:u,sliceSize:h,strides:f,outputSize:d}=Kf(a,r,o),m=!1,g=t.bufferSync(r);let w;switch(a.dtype){case"bool":{const v=t.bufferSync(a),b=!!t.data.get(i.dataId).values[0];w=xf(g,v,o,d,h,u,l,f,b,m);break}case"float32":{const v=t.bufferSync(a),b=t.data.get(i.dataId).values[0];w=xf(g,v,o,d,h,u,l,f,b,m);break}case"int32":{const v=t.bufferSync(a),b=t.data.get(i.dataId).values[0];w=xf(g,v,o,d,h,u,l,f,b,m);break}case"string":{const v=t.bufferSync(a),b=th(t.data.get(i.dataId).values[0]);w=xf(g,v,o,d,h,u,l,f,b,m);break}default:throw new Error(`Unsupported type ${a.dtype}`)}return t.makeTensorInfo(o,w.dtype,w.values)}const Ofe={kernelName:GN,backendName:"cpu",kernelFunc:_fe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qfe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{numOrSizeSplits:a,axis:i}=s,o=dn(i,r.shape)[0],l=dI(r,a,o),u=new Array(r.shape.length).fill(0),h=r.shape.slice();return l.map(f=>{const d=[...h];d[o]=f;const m=Mf({inputs:{x:r},backend:t,attrs:{begin:u,size:d}});return u[o]+=f,m})}const Mfe={kernelName:$b,backendName:"cpu",kernelFunc:Qfe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hfe={kernelName:KN,backendName:"cpu",kernelFunc:({inputs:n,backend:e})=>{const{x:t}=n,s=e;It(t,"square");const r=s.data.get(t.dataId).values,a=new Float32Array(r.length);for(let o=0;o<r.length;++o){const l=r[o];a[o]=l*l}return{dataId:s.write(a,t.shape,t.dtype),shape:t.shape,dtype:t.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pfe=Vn(q0,(n,e)=>{const t=e;return isNaN(n)?NaN:n>0?1:t.alpha}),zfe={kernelName:q0,backendName:"cpu",kernelFunc:Pfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jfe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{begin:a,end:i,strides:o,beginMask:l,endMask:u,ellipsisMask:h,newAxisMask:f,shrinkAxisMask:d}=s;It(r,"stridedSlice");const{finalShapeSparse:m,finalShape:g,isIdentity:w,sliceDim0:v,isSimpleSlice:b,begin:C,end:N,strides:I}=X5(r.shape,a,i,o,l,u,h,f,d);let L;if(w)L=us({inputs:{x:r},backend:t,attrs:{shape:g}});else if(v||b){se(r.shape.length>=1,()=>`Input must have rank at least 1, got: ${r.shape.length}`);const $=K5(C,N,I),H=Mf({inputs:{x:r},backend:t,attrs:{begin:C,size:$}});L=us({inputs:{x:H},backend:t,attrs:{shape:g}}),t.disposeIntermediateTensorInfo(H)}else{const $=t.bufferSync(r),H=hQ(m,$,I,C);L=t.makeTensorInfo(g,H.dtype,H.values)}return L}const Vfe={kernelName:WN,backendName:"cpu",kernelFunc:jfe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gfe(n){const{inputs:e,backend:t,attrs:s}=n,{separator:r,nGramWidths:a,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:u}=s,{data:h,dataSplits:f}=e,d=t.data.get(h.dataId).values,m=t.data.get(f.dataId).values,[g,w]=fQ(d,m,r,a,i,o,l,u);return[t.makeTensorInfo([g.length],"string",g),t.makeTensorInfo(f.shape,"int32",w)]}const Kfe={kernelName:qN,backendName:"cpu",kernelFunc:Gfe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wfe(n){const{inputs:e,backend:t,attrs:s}=n,{skipEmpty:r}=s,{input:a,delimiter:i}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const o=t.data.get(a.dataId).values,l=t.data.get(i.dataId).values[0],[u,h,f]=dQ(o,l,r),d=h.length;return[t.makeTensorInfo([d,2],"int32",u),t.makeTensorInfo([d],"string",h),t.makeTensorInfo([2],"int32",new Int32Array(f))]}const qfe={kernelName:XN,backendName:"cpu",kernelFunc:Wfe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xfe(n){const{inputs:e,backend:t,attrs:s}=n,{numBuckets:r}=s,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");const i=t.data.get(a.dataId).values,o=pQ(i,r);return t.makeTensorInfo(a.shape,"int32",o)}const Yfe={kernelName:YN,backendName:"cpu",kernelFunc:Xfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jfe=Vn(G0,n=>Math.tan(n)),Zfe={kernelName:G0,backendName:"cpu",kernelFunc:Jfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ede=Vn(K0,n=>Math.tanh(n)),tde={kernelName:K0,backendName:"cpu",kernelFunc:ede};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nde(n){const{inputs:e,backend:t}=n,{tensor:s,indices:r,updates:a}=e,{sliceRank:i,numUpdates:o,sliceSize:l,strides:u,outputSize:h}=Kf(a,r,s.shape),f=!1,d=t.bufferSync(r),m=t.bufferSync(a),g=t.bufferSync(s),w=xf(d,m,s.shape,h,l,o,i,u,g,f);return t.makeTensorInfo(s.shape,w.dtype,w.values)}const sde={kernelName:MN,backendName:"cpu",kernelFunc:nde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rde(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{reps:a}=s;It(r,"tile");const i=gQ(t.bufferSync(r),a);return t.makeTensorInfo(i.shape,i.dtype,i.values)}const ade={kernelName:W0,backendName:"cpu",kernelFunc:rde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ide(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{k:a,sorted:i}=s;It(r,"topk");const o=t.data.get(r.dataId).values,[l,u]=wQ(o,r.shape,r.dtype,a,i);return[t.makeTensorInfo(l.shape,l.dtype,l.values),t.makeTensorInfo(u.shape,u.dtype,u.values)]}const ode={kernelName:JN,backendName:"cpu",kernelFunc:ide};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lde(n){const{inputs:e,attrs:t,backend:s}=n,{image:r,transforms:a}=e,{interpolation:i,fillMode:o,fillValue:l,outputShape:u}=t,[h,f,d,m]=r.shape,[g,w]=u??[f,d],v=[h,g,w,m],b=_t(r.shape),C=b[0],N=b[1],I=b[2],L=_t(v),$=L[0],H=L[1],U=L[2],O=ea(r.dtype,je(v));O.fill(l);const z=s.data.get(r.dataId).values,T=s.data.get(a.dataId).values;for(let W=0;W<h;++W){const K=a.shape[0]===1?T:T.subarray(W*8,W*8+8);for(let re=0;re<g;++re)for(let P=0;P<w;++P)for(let Y=0;Y<m;++Y){let J;const te=K[6]*P+K[7]*re+1;if(te===0)continue;const j=(K[0]*P+K[1]*re+K[2])/te,ue=(K[3]*P+K[4]*re+K[5])/te,Q=t3(j,d,o),V=t3(ue,f,o);switch(i){case"nearest":J=dde(z,f,d,C,N,I,W,V,Q,Y,l);break;case"bilinear":J=pde(z,f,d,C,N,I,W,V,Q,Y,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const Z=W*$+re*H+P*U+Y;O[Z]=J}return s.makeTensorInfo(v,r.dtype,O)}return{dataId:s.write(O,v,r.dtype),shape:r.shape,dtype:r.dtype}}const Ade={kernelName:ZN,backendName:"cpu",kernelFunc:lde};function t3(n,e,t){switch(t){case"reflect":return ude(n,e);case"wrap":return cde(n,e);case"nearest":return fde(n,e);case"constant":default:return hde(n)}}function ude(n,e){let t=n;if(t<0)if(e<=1)t=0;else{const s=2*e;t<s&&(t=s*Math.trunc(-t/s)+t),t=t<-e?t+s:-t-1}else if(t>e-1)if(e<=1)t=0;else{const s=2*e;t-=s*Math.trunc(t/s),t>=e&&(t=s-t-1)}return If(0,t,e-1)}function cde(n,e){let t=n;if(t<0)if(e<=1)t=0;else{const s=e-1;t+=e*(Math.trunc(-t/s)+1)}else if(t>e-1)if(e<=1)t=0;else{const s=e-1;t-=e*Math.trunc(t/s)}return If(0,t,e-1)}function hde(n,e){return n}function fde(n,e){return If(0,n,e-1)}function yg(n,e,t,s,r,a,i,o,l,u,h){const f=i*s+o*r+l*a+u;return 0<=o&&o<e&&0<=l&&l<t?n[f]:h}function dde(n,e,t,s,r,a,i,o,l,u,h){const f=Math.round(o),d=Math.round(l);return yg(n,e,t,s,r,a,i,f,d,u,h)}function pde(n,e,t,s,r,a,i,o,l,u,h){const f=Math.floor(o),d=Math.floor(l),m=f+1,g=d+1,w=(g-l)*yg(n,e,t,s,r,a,i,f,d,u,h)+(l-d)*yg(n,e,t,s,r,a,i,f,g,u,h),v=(g-l)*yg(n,e,t,s,r,a,i,m,d,u,h)+(l-d)*yg(n,e,t,s,r,a,i,m,g,u,h);return(m-o)*w+(o-f)*v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mde(n){const{inputs:e,attrs:t,backend:s}=n,{axis:r}=t,{x:a}=e;It(a,"unique");const i=s.data.get(a.dataId).values,{outputValues:o,outputShape:l,indices:u}=bQ(i,r,a.shape,a.dtype);return[s.makeTensorInfo(l,a.dtype,o),s.makeTensorInfo([u.length],"int32",u)]}const gde={kernelName:e5,backendName:"cpu",kernelFunc:mde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yde(n){const{inputs:e,backend:t,attrs:s}=n,{value:r}=e;let{axis:a}=s;a<0&&(a+=r.shape.length);const i=r.shape.length,o=r.shape[a],l=new Array(i-1);let u=0;for(let m=0;m<i;m++)m!==a&&(l[u++]=r.shape[m]);const h=new Array(i).fill(0),f=r.shape.slice();f[a]=1;const d=new Array(o);for(let m=0;m<d.length;m++){h[a]=m;const g=Mf({inputs:{x:r},backend:t,attrs:{begin:h,size:f}});d[m]=us({inputs:{x:g},backend:t,attrs:{shape:l}}),t.disposeIntermediateTensorInfo(g)}return d}const wde={kernelName:Qb,backendName:"cpu",kernelFunc:yde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bde(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,segmentIds:a}=e,{numSegments:i}=s;It(r,"unsortedSegmentSum");const o=r.shape.length,l=a.shape.length,u=[],h=[],f=o-l;let d=a;for(let g=0;g<f;++g){const w=gw({inputs:{input:d},backend:t,attrs:{dim:g+1}});d=w,h.push(w)}for(let g=0;g<i;++g){const w=hh(g,"int32"),v=t.makeTensorInfo([],"int32",w),b=RO({inputs:{a:v,b:d},backend:t}),C=uh({inputs:{x:b},backend:t,attrs:{dtype:"float32"}}),N=Nx({inputs:{a:C,b:r},backend:t}),I=p1({inputs:{x:N},backend:t,attrs:{axis:0,keepDims:!1}});u.push(I),h.push(v),h.push(b),h.push(C),h.push(N),h.push(I)}const m=RQ({inputs:u,backend:t,attrs:{axis:0}});return h.forEach(g=>t.disposeIntermediateTensorInfo(g)),m}const xde={kernelName:Mb,backendName:"cpu",kernelFunc:bde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vde=[mAe,Xoe,yAe,bAe,nle,vAe,BAe,NAe,EAe,FAe,DAe,UAe,$Ae,QAe,HAe,jAe,GAe,WAe,XAe,dAe,JAe,eue,nue,rle,rue,ele,ile,iue,Yoe,lue,uue,cue,fue,pue,gue,wue,xue,Cue,Sue,Iue,kue,Tue,Lue,Rue,$ue,Oue,Mue,Pue,zue,jue,Vue,Kue,Xue,oAe,Jue,ole,ice,lle,oce,ule,fce,dce,mce,hle,dle,yce,bce,vce,Bce,mle,yle,Joe,Nce,Aue,Ece,Fce,Dce,lAe,ble,vle,Uce,Ble,$ce,Qce,Hce,jce,Gce,Wce,qce,Nle,Yce,Zce,the,she,ahe,ohe,Ahe,Ele,che,dhe,ghe,Fle,Dle,bhe,Che,Nhe,Ule,Ehe,Fhe,The,$Q,Rhe,uAe,_le,_he,Qhe,Hhe,zhe,Zoe,bS,Vhe,cAe,hAe,fAe,Khe,qhe,Yhe,Zhe,tfe,nfe,rfe,Vle,ife,cfe,ffe,gfe,Kle,wfe,xfe,Cfe,Wle,phe,Nfe,Efe,Ffe,Dfe,Ufe,$fe,Ofe,Mfe,Yle,Hfe,Zle,tAe,zfe,Vfe,Kfe,qfe,Yfe,aAe,Wue,Zfe,tde,sde,ade,ode,Ade,Rle,gde,wde,xde,khe];for(const n of vde)FL(n);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yf={},e2={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Cde(n,e){yf[n]=e}function Dl(n,e){if(!(n in yf)||e!=null){const s=Sde(n,e);if(s!==null)yf[n]=s;else return console.log("Could not get context for WebGL version",n),null}const t=yf[n];return t==null||t.isContextLost()?(delete yf[n],Dl(n)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),yf[n])}function Bde(n){if(!Qe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&n===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Sde(n,e){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const t=e??Bde(n);return t.addEventListener("webglcontextlost",s=>{s.preventDefault(),delete yf[n]},!1),Qe().getBool("SOFTWARE_WEBGL_ENABLED")&&(e2.failIfMajorPerformanceCaveat=!1),n===1?t.getContext("webgl",e2)||t.getContext("experimental-webgl",e2):t.getContext("webgl2",e2)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Vg;(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(Vg||(Vg={}));var eo;(function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"})(eo||(eo={}));var Zr;(function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Zr||(Zr={}));function m1(n,e){return[e,n]}function Nde(n,e){return n*e}function t2(n){const e=je(n),t=Math.ceil(e/4);return EB(t)}function Wp(n,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(n/2))]}function Ide(n,e){const[t,s]=Wp(n,e);return t*s*4}function WI(n,e){const t=n;let s,r,a,i,o,l,u,h,f,d;return Qe().getNumber("WEBGL_VERSION")===2?(s=t.R32F,r=t.R16F,a=t.RGBA16F,i=t.RGBA32F,o=t.RED,u=4,h=1,f=t.HALF_FLOAT,d=t.FLOAT,l=t.RGBA8):(s=n.RGBA,r=n.RGBA,a=n.RGBA,i=t.RGBA,o=n.RGBA,u=4,h=4,f=e!=null?e.HALF_FLOAT_OES:null,d=n.FLOAT,l=n.RGBA),{internalFormatFloat:s,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:h,textureTypeHalfFloat:f,textureTypeFloat:d}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bt(n,e){const t=e();return Qe().getBool("DEBUG")&&Ede(n),t}function Ede(n){const e=n.getError();if(e!==n.NO_ERROR)throw new Error("WebGL Error: "+Dde(n,e))}const kde=596e-10,Fde=65504;function Tde(n){return!!(Qe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||kde<Math.abs(n)&&Math.abs(n)<Fde)}function Dde(n,e){switch(e){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function n2(n,e){return Hu(n,()=>n.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function Lde(n,e){const t=Hu(n,()=>n.createShader(n.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(bt(n,()=>n.shaderSource(t,e)),bt(n,()=>n.compileShader(t)),n.getShaderParameter(t,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(t)),new Error("Failed to compile vertex shader.");return t}function Ude(n,e){const t=Hu(n,()=>n.createShader(n.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(bt(n,()=>n.shaderSource(t,e)),bt(n,()=>n.compileShader(t)),Qe().get("ENGINE_COMPILE_ONLY"))return t;if(n.getShaderParameter(t,n.COMPILE_STATUS)===!1)throw _Q(e,n.getShaderInfoLog(t)),new Error("Failed to compile fragment shader.");return t}const Rde=/ERROR: [0-9]+:([0-9]+):/g;function _Q(n,e){const t=Rde.exec(e);if(t==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(n);return}const s=+t[1],r=n.split(`
`),a=r.length.toString().length+2,i=r.map((f,d)=>fp((d+1).toString(),a)+f);let o=0;for(let f=0;f<i.length;f++)o=Math.max(i[f].length,o);const l=i.slice(0,s-1),u=i.slice(s-1,s),h=i.slice(s);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${fp(u[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join(`
`))}function $de(n){return Hu(n,()=>n.createProgram(),"Unable to create WebGLProgram.")}function _de(n,e){if(bt(n,()=>n.linkProgram(e)),!Qe().get("ENGINE_COMPILE_ONLY")&&n.getProgramParameter(e,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function $C(n,e){if(bt(n,()=>n.validateProgram(e)),n.getProgramParameter(e,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function Ode(n,e){const t=Hu(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return bt(n,()=>n.bindBuffer(n.ARRAY_BUFFER,t)),bt(n,()=>n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW)),t}function Qde(n,e){const t=Hu(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return bt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t)),bt(n,()=>n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW)),t}function Mde(n){return Hu(n,()=>n.createTexture(),"Unable to create WebGLTexture.")}function Hde(n,e){const t=Qe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||e<=0){const s=`[${n}x${e}]`;throw new Error("Requested texture size "+s+" is invalid.")}if(n>t||e>t){const s=`[${n}x${e}]`,r=`[${t}x${t}]`;throw new Error("Requested texture size "+s+" greater than WebGL maximum on this browser / GPU "+r+".")}}function Pde(n){return Hu(n,()=>n.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function n3(n,e,t,s,r,a,i){const o=n.getAttribLocation(e,t);return o===-1?!1:(bt(n,()=>n.bindBuffer(n.ARRAY_BUFFER,s)),bt(n,()=>n.vertexAttribPointer(o,r,n.FLOAT,!1,a,i)),bt(n,()=>n.enableVertexAttribArray(o)),!0)}function zde(n,e,t){Wde(n,t),bt(n,()=>n.activeTexture(n.TEXTURE0+t)),bt(n,()=>n.bindTexture(n.TEXTURE_2D,e))}function jde(n,e,t){return Hu(n,()=>n.getUniformLocation(e,t),'uniform "'+t+'" not present in program.')}function Vde(n,e,t){return n.getUniformLocation(e,t)}function Gde(n,e,t,s){bt(n,()=>zde(n,e,s)),bt(n,()=>n.uniform1i(t,s))}function _C(n,e,t){bt(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,t)),bt(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0))}function s3(n,e){bt(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,e)),bt(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0))}function s2(n){const e=n.checkFramebufferStatus(n.FRAMEBUFFER);if(e!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Kde(n,e))}function Kde(n,e){switch(e){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Hu(n,e,t){const s=bt(n,()=>e());if(s==null)throw new Error(t);return s}function Wde(n,e){const t=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,s=e+n.TEXTURE0;if(s<n.TEXTURE0||s>t){const r=`[gl.TEXTURE0, gl.TEXTURE${t}]`;throw new Error(`textureUnit must be in ${r}.`)}}function Tp(n,e=2){return je(n.slice(0,n.length-e))}function Dp(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function r2(n){let e=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(e=[Tp(n),...Dp(n)]),e}function qde(n,e=!1){let t=Qe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),s=Qe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");s===1/0&&Qe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(s=t/2),e&&(t=t*2,s=s*2,n=n.map((o,l)=>l>=n.length-2?qS(n[l]):n[l]),n.length===1&&(n=[2,n[0]])),n.length!==2&&(n=ch(n).newShape);let r=je(n),a=null;n.length<=1&&r<=t?a=[1,r]:n.length===2&&n[0]<=t&&n[1]<=t?a=n:n.length===3&&n[0]*n[1]<=t&&n[2]<=t?a=[n[0]*n[1],n[2]]:n.length===3&&n[0]<=t&&n[1]*n[2]<=t?a=[n[0],n[1]*n[2]]:n.length===4&&n[0]*n[1]*n[2]<=t&&n[3]<=t?a=[n[0]*n[1]*n[2],n[3]]:n.length===4&&n[0]<=t&&n[1]*n[2]*n[3]<=t&&(a=[n[0],n[1]*n[2]*n[3]]);const i=a!=null&&Math.max(...a)>s&&Math.min(...a)<=(e?2:1)&&Math.min(...a)>0;if(a==null||i)if(e){const o=Tp(n);let l=2,u=2;n.length&&([l,u]=Dp(n)),r=o*(l/2)*(u/2),a=EB(r).map(h=>h*2)}else a=EB(r);return a}function a2(n){return n%2===0}function ww(n,e){if(n=n.slice(-2),e=e.slice(-2),Bn(n,e)||!n.length||!e.length||n[0]===0||n[1]===0||e[0]===0||e[1]===0)return!0;if(n.length!==e.length){const t=n[n.length-1],s=e[e.length-1];if(t===s||a2(t)&&a2(s)&&(n[0]===1||e[0]===1))return!0}return n[1]===e[1]&&a2(n[0])&&a2(e[0])}let OC,QC;function Xde(n){if(OC==null){const e=Dl(n);OC=e.getParameter(e.MAX_TEXTURE_SIZE)}return OC}function Yde(n){if(QC==null){const e=Dl(n);QC=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,QC)}function Jde(n){if(n===0)return 0;let e;const t=Dl(n);return Lo(t,"EXT_disjoint_timer_query_webgl2")&&n===2?e=2:Lo(t,"EXT_disjoint_timer_query")?e=1:e=0,e}function Lo(n,e){return n.getExtension(e)!=null}function r3(n){try{if(Dl(n)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function Zde(n){if(n===0)return!1;const e=Dl(n);if(n===1){if(!Lo(e,"OES_texture_float"))return!1}else if(!Lo(e,"EXT_color_buffer_float"))return!1;return vS(e)}function epe(n){if(n===0)return!1;const e=Dl(n);if(n===1){if(!Lo(e,"OES_texture_float")||!Lo(e,"WEBGL_color_buffer_float"))return!1}else{if(Lo(e,"EXT_color_buffer_float"))return vS(e);const s="EXT_color_buffer_half_float";if(Lo(e,s)){const r=e.getExtension(s);return tpe(e,r)}return!1}return vS(e)}function vS(n){const e=WI(n),t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const a=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,a),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);const i=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(t),n.deleteFramebuffer(a),i}function tpe(n,e){const t=WI(n,e),s=n.createTexture();n.bindTexture(n.TEXTURE_2D,s),n.texImage2D(n.TEXTURE_2D,0,t.internalFormatHalfFloat,1,1,0,t.textureFormatFloat,t.textureTypeHalfFloat,null);const i=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,i),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,s,0);const o=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(s),n.deleteFramebuffer(i),o}function npe(n){return n!==2?!1:Dl(n).fenceSync!=null}function g1(n,e){Array.isArray(n)||(n=[n]),n.forEach(t=>{t!=null&&se(t.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ft=Qe();Ft.registerFlag("HAS_WEBGL",()=>Ft.getNumber("WEBGL_VERSION")>0);Ft.registerFlag("WEBGL_VERSION",()=>r3(2)?2:r3(1)?1:0);Ft.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Ft.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ft.get("WEBGL_VERSION")===2);Ft.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Ft.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Ft.registerFlag("WEBGL_PACK",()=>Ft.getBool("HAS_WEBGL"));Ft.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_CLIP",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_REDUCE",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_CONV_IM2COL",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>Xde(Ft.getNumber("WEBGL_VERSION")));Ft.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>Yde(Ft.getNumber("WEBGL_VERSION")));Ft.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const n=Ft.getNumber("WEBGL_VERSION");return n===0?0:Jde(n)});Ft.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ft.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!zL());Ft.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>Zde(Ft.getNumber("WEBGL_VERSION")));Ft.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ft.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ft.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Ft.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>epe(Ft.getNumber("WEBGL_VERSION")));Ft.registerFlag("WEBGL_FENCE_API_ENABLED",()=>npe(Ft.getNumber("WEBGL_VERSION")));Ft.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ft.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Ft.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,n=>{if(typeof n!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${n}.`);if(n<0&&n!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${n}.`)});Ft.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>zL()?1:-1,n=>{if(typeof n!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${n}.`);if(n<0&&n!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${n}.`)});Ft.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Ft.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Ft.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Ft.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Ft.registerFlag("WEBGL_EXP_CONV",()=>!1);Ft.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Ft.getBool("IS_TEST"));Ft.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Ft.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Ft.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Ft.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function za(){let n,e,t,s,r,a,i,o,l,u;return Qe().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",e="in",t="out",s="in",r="texture",a="outputColor",i="out vec4 outputColor;",o=Qe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",e="attribute",t="varying",s="varying",r="texture2D",a="gl_FragColor",i="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:e,varyingVs:t,varyingFs:s,texture2D:r,output:a,defineOutput:i,defineSpecialNaN:o,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xf(n,e,t="index"){const s=_t(e);return s.map((r,a)=>{const i=`int ${n[a]} = ${t} / ${r}`,o=a===s.length-1?`int ${n[a+1]} = ${t} - ${n[a]} * ${r}`:`index -= ${n[a]} * ${r}`;return`${i}; ${o};`}).join("")}function Ix(n,e,t="index"){const s=_t(e);return s.map((r,a)=>{const i=`int ${n[a]} = ${t} / outShapeStrides[${a}]`,o=a===s.length-1?`int ${n[a+1]} = ${t} - ${n[a]} * outShapeStrides[${a}]`:`index -= ${n[a]} * outShapeStrides[${a}]`;return`${i}; ${o};`}).join("")}function spe(n,e){const t=n.length,s=n.map(a=>`${e}[${a}]`),r=new Array(t-1);r[t-2]=s[t-1];for(let a=t-3;a>=0;--a)r[a]=`(${r[a+1]} * ${s[a+1]})`;return r}function rpe(n,e,t="index"){const s=n.map((a,i)=>i),r=spe(s,e);return r.map((a,i)=>{const o=`int ${n[i]} = ${t} / ${r[i]}`,l=i===r.length-1?`int ${n[i+1]} = ${t} - ${n[i]} * ${r[i]}`:`index -= ${n[i]} * ${r[i]}`;return`${o}; ${l};`}).join("")}function qI(n){const e=_t(n).map(t=>t.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function XI(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const OQ=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:QQ}=bne;function ape(n,e,t){const s=[];if(n.forEach(m=>{const g=je(m.shapeInfo.logicalShape);if(m.shapeInfo.isUniform?s.push(`uniform float ${m.name}${g>1?`[${g}]`:""};`):(s.push(`uniform sampler2D ${m.name};`),s.push(`uniform int offset${m.name};`)),t.enableShapeUniforms){const{uniformShape:w}=YI(t.packedInputs,m.shapeInfo.logicalShape,m.shapeInfo.texShape);switch(w.length){case 1:s.push(`uniform int ${m.name}Shape;`);break;case 2:s.push(`uniform ivec2 ${m.name}Shape;`);break;case 3:s.push(`uniform ivec3 ${m.name}Shape;`);break;case 4:s.push(`uniform ivec4 ${m.name}Shape;`);break}s.push(`uniform ivec2 ${m.name}TexShape;`)}}),t.enableShapeUniforms){switch(e.logicalShape.length){case 1:s.push("uniform int outShape;");break;case 2:s.push("uniform ivec2 outShape;"),s.push("uniform int outShapeStrides;");break;case 3:s.push("uniform ivec3 outShape;"),s.push("uniform ivec2 outShapeStrides;");break;case 4:s.push("uniform ivec4 outShape;"),s.push("uniform ivec3 outShapeStrides;");break}s.push("uniform ivec2 outTexShape;")}t.customUniforms&&t.customUniforms.forEach(m=>{s.push(`uniform ${m.type} ${m.name}${m.arrayIndex?`[${m.arrayIndex}]`:""};`)});const r=s.join(`
`),a=n.map(m=>ipe(m,e,t.packedInputs,t.enableShapeUniforms)).join(`
`),i=e.texShape,o=za(),l=Ape(o);let u,h,f=hpe(o);return e.isPacked?(u=ope(e.logicalShape,i,t.enableShapeUniforms),h=cpe(o)):(u=lpe(e.logicalShape,i,t.enableShapeUniforms),h=upe(o)),t.packedInputs&&(f+=mpe),[f,l,h,r,u,a,t.userCode].join(`
`)}function qp(n,e=!1){const t=n.shapeInfo.logicalShape;switch(t.length){case 0:return Epe(n,e);case 1:return Fpe(n,e);case 2:return Dpe(n,e);case 3:return Upe(n,e);case 4:return $pe(n,e);case 5:return _pe(n);case 6:return Ope(n);default:throw new Error(`${t.length}-D input sampling is not yet supported`)}}function MQ(n,e){switch(n.shapeInfo.logicalShape.length){case 0:return Ipe(n);case 1:return kpe(n,e);case 2:return Tpe(n,e);case 3:return Lpe(n,e);default:return Rpe(n,e)}}function ipe(n,e,t=!1,s){let r="";t?r+=MQ(n,s):r+=qp(n,s);const a=n.shapeInfo.logicalShape,i=e.logicalShape;return a.length<=i.length&&(t?r+=Qpe(n,e):r+=Mpe(n,e)),r}function ope(n,e,t){switch(n.length){case 0:return HQ();case 1:return gpe(n,e,t);case 2:return Spe(n,e,t);case 3:return wpe(n,e,t);default:return xpe(n,e,t)}}function lpe(n,e,t){switch(n.length){case 0:return HQ();case 1:return ype(n,e,t);case 2:return Npe(n,e,t);case 3:return bpe(n,e,t);case 4:return vpe(n,e,t);case 5:return Cpe(n,e);case 6:return Bpe(n,e);default:throw new Error(`${n.length}-D output sampling is not yet supported`)}}function Ape(n){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${n.texture2D}(textureSampler, uv).r;
    }
  `}function upe(n){return`
    void setOutput(float val) {
      ${n.output} = vec4(val, 0, 0, 0);
    }
  `}function cpe(n){return`
    void setOutput(vec4 val) {
      ${n.output} = val;
    }
  `}function hpe(n){return`${n.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${n.varyingFs} vec2 resultUV;
    ${n.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${n.defineSpecialNaN}
    ${n.defineSpecialInf}
    ${n.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${fpe}
    ${dpe}
    ${ppe}
  `}const fpe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,dpe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ppe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,mpe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function HQ(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function gpe(n,e,t){const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return s[0]===1?t?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${s[1]}.0);
      }
    `:s[1]===1?t?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${s[0]}.0);
      }
    `:t?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      return 2 * (resTexRC.x * ${s[1]} + resTexRC.y);
    }
  `}function ype(n,e,t){return e[0]===1?t?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?t?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:t?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function wpe(n,e,t){if(t)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(n[2]/2),a=r*Math.ceil(n[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec3(b, r, c);
    }
  `}function bpe(n,e,t){if(t)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${Ix(["r","c","d"],n)}
    return ivec3(r, c, d);
  }
`;const s=Xf(["r","c","d"],n);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${s}
      return ivec3(r, c, d);
    }
  `}function xpe(n,e,t){if(t)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(n[n.length-1]/2),a=r*Math.ceil(n[n.length-2]/2);let i=a,o="",l="b, r, c";for(let u=2;u<n.length-1;u++)i*=n[n.length-u-1],o=`
      int b${u} = index / ${i};
      index -= b${u} * ${i};
    `+o,l=`b${u}, `+l;return`
    ivec${n.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      ${o}

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec${n.length}(${l});
    }
  `}function vpe(n,e,t){if(t)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${Ix(["r","c","d","d2"],n)}
      return ivec4(r, c, d, d2);
    }
  `;const s=Xf(["r","c","d","d2"],n);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${s}
      return ivec4(r, c, d, d2);
    }
  `}function Cpe(n,e){const t=Xf(["r","c","d","d2","d3"],n);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${t}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Bpe(n,e){const t=Xf(["r","c","d","d2","d3","d4"],n);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${t}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Spe(n,e,t){const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Bn(n,e))return t?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${s[0]}, ${s[1]}));
      }
    `;const r=Math.ceil(n[1]/2);return t?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));

      int index = resTexRC.x * ${s[1]} + resTexRC.y;
      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec2(r, c);
    }
  `}function Npe(n,e,t){return Bn(n,e)?t?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:n[1]===1?t?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:n[0]===1?t?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:t?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${n[1]};
      int c = index - r * ${n[1]};
      return ivec2(r, c);
    }
  `}function Yf(n){return`offset${n}`}function Ipe(n){const e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1),s=za();return`
    vec4 ${t}() {
      return ${s.texture2D}(${e}, halfCR);
    }
  `}function Epe(n,e){const t=n.name,s="get"+t.charAt(0).toUpperCase()+t.slice(1);if(n.shapeInfo.isUniform)return`float ${s}() {return ${t};}`;const[r,a]=n.shapeInfo.texShape;if(r===1&&a===1)return`
      float ${s}() {
        return sampleTexture(${t}, halfCR);
      }
    `;const i=Yf(t);if(e)return`
    float ${s}() {
      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], ${i});
      return sampleTexture(${t}, uv);
    }
  `;const[o,l]=n.shapeInfo.texShape;return`
    float ${s}() {
      vec2 uv = uvFromFlat(${o}, ${l}, ${i});
      return sampleTexture(${t}, uv);
    }
  `}function kpe(n,e){const t=n.name,s="get"+t.charAt(0).toUpperCase()+t.slice(1),r=n.shapeInfo.texShape,a=za();if(e)return`
    vec4 ${s}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${t}TexShape[0]) / 2.0), ceil(float(${t}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${a.texture2D}(${t}, uv);
    }
  `;const i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return`
    vec4 ${s}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${a.texture2D}(${t}, uv);
    }
  `}function Fpe(n,e){const t=n.name,s="get"+t.charAt(0).toUpperCase()+t.slice(1);if(n.shapeInfo.isUniform)return`
      float ${s}(int index) {
        ${Xp(n)}
      }
    `;const r=n.shapeInfo.texShape,a=r[0],i=r[1];if(i===1&&a===1)return`
      float ${s}(int index) {
        return sampleTexture(${t}, halfCR);
      }
    `;const o=Yf(t);return i===1?e?`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${t}TexShape[0]));
        return sampleTexture(${t}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${a}.0);
        return sampleTexture(${t}, uv);
      }
    `:a===1?e?`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${t}TexShape[1]), 0.5);
        return sampleTexture(${t}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${t}, uv);
      }
    `:e?`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], index + ${o});
      return sampleTexture(${t}, uv);
    }
  `:`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${a}, ${i}, index + ${o});
      return sampleTexture(${t}, uv);
    }
  `}function Tpe(n,e){const t=n.shapeInfo.logicalShape,s=n.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),a=n.shapeInfo.texShape,i=a[0],o=a[1],l=za();if(a!=null&&Bn(t,a))return e?`
      vec4 ${r}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);

        return ${l.texture2D}(${s}, uv);
      }
    `:`
      vec4 ${r}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${i}.0);

        return ${l.texture2D}(${s}, uv);
      }
    `;if(e)return`
    vec4 ${r}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `;const u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],h=Math.ceil(t[1]/2);return`
    vec4 ${r}(int row, int col) {
      vec2 uv = packedUVfrom2D(${h}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `}function Dpe(n,e){const t=n.shapeInfo.logicalShape,s=n.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),a=n.shapeInfo.texShape;if(a!=null&&Bn(t,a)){if(e)return`
      float ${r}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `;const d=a[0],m=a[1];return`
    float ${r}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${m}.0, ${d}.0);
      return sampleTexture(${s}, uv);
    }
  `}const{newShape:i,keptDims:o}=ch(t),l=i;if(l.length<t.length){const d=Yp(n,l),m=["row","col"];return`
      ${qp(d,e)}
      float ${r}(int row, int col) {
        return ${r}(${Jp(m,o)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${t[1]}, 1)));
        ${Xp(n)}
      }
    `;const u=a[0],h=a[1],f=Yf(s);return h===1?e?`
      float ${r}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${s}TexShape[0]));
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${r}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${s}, uv);
    }
  `:u===1?e?`
      float ${r}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${s}TexShape[1]), 0.5);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${r}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${h}.0, 0.5);
      return sampleTexture(${s}, uv);
    }
  `:e?`
      float ${r}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s}Shape[1] + col + ${f};
        vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
        return sampleTexture(${s}, uv);
      }
    `:`
  float ${r}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${t[1]} + col + ${f};
    vec2 uv = uvFromFlat(${u}, ${h}, index);
    return sampleTexture(${s}, uv);
  }
`}function Lpe(n,e){const t=n.shapeInfo.logicalShape,s=n.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),a=n.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(t[0]===1){const d=t.slice(1),m=[1,2],g=Yp(n,d),w=["b","row","col"];return`
        ${MQ(g,e)}
        vec4 ${r}(int b, int row, int col) {
          return ${r}(${Jp(w,m)});
        }
      `}const o=za();if(e)return`
    vec4 ${r}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${s}, uv);
    }
  `;const l=i[0],u=i[1],h=Math.ceil(t[2]/2),f=h*Math.ceil(t[1]/2);return`
    vec4 ${r}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${f}, ${h}, b, row, col);
      return ${o.texture2D}(${s}, uv);
    }
  `}function Upe(n,e){const t=n.shapeInfo.logicalShape,s=n.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),a=t[1]*t[2],i=t[2],{newShape:o,keptDims:l}=ch(t),u=o;if(u.length<t.length){const w=Yp(n,u),v=["row","col","depth"];return`
        ${qp(w,e)}
        float ${r}(int row, int col, int depth) {
          return ${r}(${Jp(v,l)});
        }
      `}if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${a}, ${i}, 1)));
        ${Xp(n)}
      }
    `;const h=n.shapeInfo.texShape,f=h[0],d=h[1],m=n.shapeInfo.flatOffset;if(d===a&&m==null)return e?`
      float ${r}(int row, int col, int depth) {
        int stride1 = ${s}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
        float ${r}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${d}.0, ${f}.0);
          return sampleTexture(${s}, uv);
        }
      `;if(d===i&&m==null)return e?`
      float ${r}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${s}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${r}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${t[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${f}.0);
      return sampleTexture(${s}, uv);
    }
  `;const g=Yf(s);return e?`
    float ${r}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${s}Shape[1] * ${s}Shape[2];
      int stride1 = ${s}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${g};
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
      return sampleTexture(${s}, uv);
    }
    `:`
      float ${r}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${a} + col * ${i} + depth + ${g};
        vec2 uv = uvFromFlat(${f}, ${d}, index);
        return sampleTexture(${s}, uv);
      }
  `}function Rpe(n,e){const t=n.name,s="get"+t.charAt(0).toUpperCase()+t.slice(1),r=za();if(e)return`
    vec4 ${s}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${t}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${t}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${t}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${t}TexShape[0]) / 2.0), ceil(float(${t}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${r.texture2D}(${t}, uv);
    }
  `;const a=n.shapeInfo.logicalShape,i=a.length,o=n.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],u=l[0],h=l[1],f=Math.ceil(a[i-1]/2);let d=f*Math.ceil(a[i-2]/2),m="int b, int row, int col",g=`b * ${d} + (row / 2) * ${f} + (col / 2)`;for(let w=2;w<i-1;w++)m=`int b${w}, `+m,d*=a[i-w-1],g=`b${w} * ${d} + `+g;return`
    vec4 ${s}(${m}) {
      int index = ${g};
      int texR = index / ${h};
      int texC = index - texR * ${h};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}, ${u});
      return ${r.texture2D}(${t}, uv);
    }
  `}function $pe(n,e){const t=n.shapeInfo.logicalShape,s=n.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),a=t[3],i=t[2]*a,o=t[1]*i,{newShape:l,keptDims:u}=ch(t);if(l.length<t.length){const C=Yp(n,l),N=["row","col","depth","depth2"];return`
      ${qp(C,e)}
      float ${r}(int row, int col, int depth, int depth2) {
        return ${r}(${Jp(N,u)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${i}, ${a}, 1)));
        ${Xp(n)}
      }
    `;const h=n.shapeInfo.flatOffset,f=n.shapeInfo.texShape,d=f[0],m=f[1],g=`int stride2 = ${s}Shape[3];`,w=`int stride1 = ${s}Shape[2] * stride2;`,v=`int stride0 = ${s}Shape[1] * stride1;`;if(m===o&&h==null)return e?`
      float ${r}(int row, int col, int depth, int depth2) {
        ${g}
        ${w}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${d}.0);
        return sampleTexture(${s}, uv);
      }
    `;if(m===a&&h==null)return e?`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${s}Shape[1] * ${s}Shape[2], ${s}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${t[1]*t[2]}, ${t[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${d}.0);
        return sampleTexture(${s}, uv);
      }
    `;const b=Yf(s);return e?`
    float ${r}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${g}
      ${w}
      ${v}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index + ${b});
      return sampleTexture(${s}, uv);
    }
  `:`
    float ${r}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${i} +
          depth * ${a} + depth2;
      vec2 uv = uvFromFlat(${d}, ${m}, index + ${b});
      return sampleTexture(${s}, uv);
    }
  `}function _pe(n){const e=n.shapeInfo.logicalShape,t=n.name,s="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e[4],a=e[3]*r,i=e[2]*a,o=e[1]*i,{newShape:l,keptDims:u}=ch(e);if(l.length<e.length){const w=Yp(n,l),v=["row","col","depth","depth2","depth3"];return`
      ${qp(w)}
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        return ${s}(${Jp(v,u)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${i}, ${a}, ${r})) +
          depth3;
        ${Xp(n)}
      }
    `;const h=n.shapeInfo.flatOffset,f=n.shapeInfo.texShape,d=f[0],m=f[1];if(m===o&&h==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${a}, ${r}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${d}.0);
        return sampleTexture(${t}, uv);
      }
    `;if(m===r&&h==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${d}.0);
        return sampleTexture(${t}, uv);
      }
    `;const g=Yf(t);return`
    float ${s}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${i} + depth * ${a} +
          depth2 * ${r} + depth3 + ${g};
      vec2 uv = uvFromFlat(${d}, ${m}, index);
      return sampleTexture(${t}, uv);
    }
  `}function Ope(n){const e=n.shapeInfo.logicalShape,t=n.name,s="get"+t.charAt(0).toUpperCase()+t.slice(1),{newShape:r,keptDims:a}=ch(e);if(r.length<e.length){const v=Yp(n,r),b=["row","col","depth","depth2","depth3","depth4"];return`
      ${qp(v)}
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${s}(${Jp(b,a)});
      }
    `}const i=e[5],o=e[4]*i,l=e[3]*o,u=e[2]*l,h=e[1]*u;if(n.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${h}, ${u}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${Xp(n)}
      }
    `;const f=n.shapeInfo.flatOffset,d=n.shapeInfo.texShape,m=d[0],g=d[1];if(g===h&&f==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${o}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${m}.0);
        return sampleTexture(${t}, uv);
      }
    `;if(g===i&&f==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${m}.0);
        return sampleTexture(${t}, uv);
      }
    `;const w=Yf(t);return`
    float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${h} + col * ${u} + depth * ${l} +
          depth2 * ${o} + depth3 * ${i} + depth4 + ${w};
      vec2 uv = uvFromFlat(${m}, ${g}, index);
      return sampleTexture(${t}, uv);
    }
  `}function Xp(n){const e=n.name,t=je(n.shapeInfo.logicalShape);return t<2?`return ${e};`:`
    for (int i = 0; i < ${t}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function Qpe(n,e){const t=n.name,s=t.charAt(0).toUpperCase()+t.slice(1),r="get"+s+"AtOutCoords",a=n.shapeInfo.logicalShape.length,i=e.logicalShape.length,o=QQ(n.shapeInfo.logicalShape,e.logicalShape),l=Jn(i),u=i-a;let h;const f=["x","y","z","w","u","v"];a===0?h="":i<2&&o.length>=1?h="coords = 0;":h=o.map(C=>`coords.${f[C+u]} = 0;`).join(`
`);let d="";i<2&&a>0?d="coords":d=n.shapeInfo.logicalShape.map((C,N)=>`coords.${f[N+u]}`).join(", ");let m="return outputValue;";const w=je(n.shapeInfo.logicalShape)===1,b=je(e.logicalShape)===1;if(a===1&&!w&&!b)m=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(w&&!b)i===1?m=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:m=`
        return vec4(outputValue.x);
      `;else if(o.length){const C=a-2,N=a-1;o.indexOf(C)>-1&&o.indexOf(N)>-1?m="return vec4(outputValue.x);":o.indexOf(C)>-1?m="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(N)>-1&&(m="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${r}() {
      ${l} coords = getOutputCoords();
      ${h}
      vec4 outputValue = get${s}(${d});
      ${m}
    }
  `}function Mpe(n,e){const t=n.name,s=t.charAt(0).toUpperCase()+t.slice(1),r="get"+s+"AtOutCoords",a=e.texShape,i=n.shapeInfo.texShape,o=n.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!n.shapeInfo.isUniform&&o===l&&n.shapeInfo.flatOffset==null&&Bn(i,a))return`
      float ${r}() {
        return sampleTexture(${t}, resultUV);
      }
    `;const u=Jn(l),h=QQ(n.shapeInfo.logicalShape,e.logicalShape),f=l-o;let d;const m=["x","y","z","w","u","v"];o===0?d="":l<2&&h.length>=1?d="coords = 0;":d=h.map(w=>`coords.${m[w+f]} = 0;`).join(`
`);let g="";return l<2&&o>0?g="coords":g=n.shapeInfo.logicalShape.map((w,v)=>`coords.${m[v+f]}`).join(", "),`
    float ${r}() {
      ${u} coords = getOutputCoords();
      ${d}
      return get${s}(${g});
    }
  `}function Jn(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error(`GPU for rank ${n} is not yet supported`)}function YI(n,e,t){const{newShape:s,keptDims:r}=ch(e),a=e.length,i=n&&a===3&&e[0]===1,o=i?e.slice(1):s,l=!n&&a>1&&!Bn(e,t)&&s.length<a||i;return{useSqueezeShape:l,uniformShape:l?o:e,keptDims:r}}function Yp(n,e){const t=JSON.parse(JSON.stringify(n));return t.shapeInfo.logicalShape=e,t}function Jp(n,e){return e.map(t=>n[t]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hpe(n,e,t,s){const r=t.map((h,f)=>{const d={logicalShape:h.shape,texShape:h.isUniform?null:h.texData.texShape,isUniform:h.isUniform,isPacked:h.isUniform?!1:h.texData.isPacked,flatOffset:null};return h.texData!=null&&h.texData.slice!=null&&h.texData.slice.flatOffset>0&&(d.flatOffset=h.texData.slice.flatOffset),{name:e.variableNames[f],shapeInfo:d}}),a=r.map(h=>h.shapeInfo),i={logicalShape:s.shape,texShape:s.texData.texShape,isUniform:!1,isPacked:s.texData.isPacked,flatOffset:null},o=ape(r,i,e),l=Ude(n.gl,o),u=n.createProgram(l);return Qe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:o,webGLProgram:u,inShapeInfos:a,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(n.buildVao(u),Object.assign({program:e,fragmentShader:l,source:o,webGLProgram:u,inShapeInfos:a,outShapeInfo:i},PQ(n,e,u)))}function PQ(n,e,t){const s=[],r=[];let a,i,o,l=null,u=null;u=n.getUniformLocation(t,"NAN",!1),Qe().getNumber("WEBGL_VERSION")===1&&(l=n.getUniformLocation(t,"INFINITY",!1));const h=!1;for(const f of e.variableNames){const d={name:f,uniform:n.getUniformLocation(t,f,h),offset:n.getUniformLocation(t,`offset${f}`,h)};e.enableShapeUniforms&&(d.shape=n.getUniformLocation(t,`${f}Shape`,h),d.texShape=n.getUniformLocation(t,`${f}TexShape`,h)),s.push(d)}if(e.enableShapeUniforms&&(a=n.getUniformLocation(t,"outShape",h),o=n.getUniformLocation(t,"outShapeStrides",h),i=n.getUniformLocation(t,"outTexShape",h)),e.customUniforms)for(const f of e.customUniforms)r.push(n.getUniformLocation(t,f.name,h));return{variablesLocations:s,customUniformLocations:r,infLoc:l,nanLoc:u,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:i}}function a3(n,e){if(n.length!==e.length)throw Error(`Binary was compiled with ${n.length} inputs, but was executed with ${e.length} inputs`);n.forEach((t,s)=>{const r=t.logicalShape,a=e[s],i=a.shape;if(!Bn(r,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${i} must match`);if(t.isUniform&&a.isUniform)return;const o=t.texShape,l=a.isUniform?null:a.texData.texShape;if(!Bn(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function Ppe(n,e,t,s,r){e.program.enableShapeUniforms||(a3(e.inShapeInfos,t),a3([e.outShapeInfo],[s]));const a=s.texData.texture,i=s.texData.texShape;s.texData.isPacked?n.setOutputPackedMatrixTexture(a.texture,i[0],i[1]):n.setOutputMatrixTexture(a.texture,i[0],i[1]),n.setProgram(e.webGLProgram),n.bindVertexArray(e.webGLProgram.vao),Qe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&n.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&n.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<t.length;++l){const u=t[l],{uniform:h,offset:f,shape:d,texShape:m}=e.variablesLocations[l];if(d){const{uniformShape:g}=YI(e.program.packedInputs,u.shape,u.texData.texShape);switch(g.length){case 1:n.gl.uniform1iv(d,new Int32Array(g));break;case 2:n.gl.uniform2iv(d,new Int32Array(g));break;case 3:n.gl.uniform3iv(d,new Int32Array(g));break;case 4:n.gl.uniform4iv(d,new Int32Array(g));break}}if(m&&n.gl.uniform2i(m,u.texData.texShape[0],u.texData.texShape[1]),h!=null){if(u.isUniform){if(je(u.shape)<2)n.gl.uniform1f(h,u.uniformValues[0]);else{let g=u.uniformValues;g instanceof Float32Array||(g=new Float32Array(g)),n.gl.uniform1fv(h,g)}continue}u.texData.slice!=null&&f!=null&&n.gl.uniform1i(f,u.texData.slice.flatOffset),n.setInputMatrixTexture(u.texData.texture.texture,h,l)}}const o=e.outShapeLocation;if(o)switch(s.shape.length){case 1:n.gl.uniform1iv(o,new Int32Array(s.shape));break;case 2:n.gl.uniform2iv(o,new Int32Array(s.shape));break;case 3:n.gl.uniform3iv(o,new Int32Array(s.shape));break;case 4:n.gl.uniform4iv(o,new Int32Array(s.shape));break}if(e.outShapeStridesLocation){const l=_t(s.shape);switch(s.shape.length){case 2:n.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:n.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:n.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&n.gl.uniform2i(e.outTexShapeLocation,s.texData.texShape[0],s.texData.texShape[1]),e.program.customUniforms&&r)for(let l=0;l<e.program.customUniforms.length;++l){const u=e.program.customUniforms[l],h=e.customUniformLocations[l],f=r[l];if(u.type==="float")n.gl.uniform1fv(h,f);else if(u.type==="vec2")n.gl.uniform2fv(h,f);else if(u.type==="vec3")n.gl.uniform3fv(h,f);else if(u.type==="vec4")n.gl.uniform4fv(h,f);else if(u.type==="int")n.gl.uniform1iv(h,f);else if(u.type==="ivec2")n.gl.uniform2iv(h,f);else if(u.type==="ivec3")n.gl.uniform3iv(h,f);else if(u.type==="ivec4")n.gl.uniform4iv(h,f);else throw Error(`uniform type ${u.type} is not supported yet.`)}n.executeProgram()}function zpe(n,e,t){let s="";e.concat(t).forEach(i=>{const o=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(n.enableShapeUniforms&&!i.isUniform){const l=i.texData.texShape,{useSqueezeShape:u,uniformShape:h,keptDims:f}=YI(n.packedInputs,i.shape,l);let d="",m="",g="";if(h.length===1&&n.packedInputs){const L=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];d=`${L[0]>1}_${L[1]>1}`}else if(h.length===2&&!n.packedInputs)m=`${h[0]>1}_${h[1]>1}`;else if(h.length>2&&!n.packedInputs){const L=_t(h);g=`${L[0]===l[1]}_${L[L.length-1]===l[1]}`}const w=i.shape.length,v=h.length===2&&Bn(i.shape,l),b=je(i.shape)===1,C=Bp(i.shape,t.shape),N=!n.packedInputs&&w===t.shape.length&&Bn(l,t.texData.texShape),I=n.packedInputs||h.length>2?"":`${l[0]>1}_${l[1]>1}`;s+=`${w}_${N}_${u?f:""}_${h.length}_${b}_${C}_${v}_${d}_${m}_${g}_${I}_${o}`}else{const l=i.isUniform?"uniform":i.texData.texShape;s+=`${i.shape}_${l}_${o}`}});const r=n.userCode;let a=n.constructor.name;return a+="_"+s+"_"+r+`${Qe().getNumber("WEBGL_VERSION")}`,a}function ya(n){return Qe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&n<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jpe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Vg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=za();this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Ix(["r","c","d"],e):Xf(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vpe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Vg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=za();this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Ix(["r","c","d"],e):Xf(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gpe{constructor(e){this.variableNames=["A"],this.outTexUsage=eo.DOWNLOAD;const t=za();this.outputShape=e,this.userCode=`
      ${OQ}

      void main() {
        float x = getAAtOutCoords();
        ${t.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kpe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=eo.DOWNLOAD;const t=za();this.outputShape=e,this.userCode=`
      ${OQ}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${t.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wpe={R:0,G:1,B:2,A:3};class i3{constructor(e,t=!1,s="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=za();this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length);let a="result";t&&(a="floor(result * 255. + 0.5)");let i="";for(let o=0;o<s.length;o++){const l=s[o];i+=`
          if(offset == ${o}) {
            result = values[${Wpe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?XI():qI(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${s.length});

        flatIndex = idiv(flatIndex, ${s.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${r.texture2D}(A, uv);
          ${i}
        }
        ${r.output} = vec4(${a}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qpe{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=za();this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length);let r="",a="result";t&&(a="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let o=0;o<=1;o++){const l=i*2+o;r+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${s.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?XI():qI(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${r}

          ${s.output} = ${a};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xpe(n){const e=za(),t=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Lde(n,t)}function Ype(n){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Ode(n,e)}function Jpe(n){const e=new Uint16Array([0,1,2,2,1,3]);return Qde(n,e)}function y1(n,e,t,s,r,a){Hde(e,t);const i=Mde(n),o=n.TEXTURE_2D;return bt(n,()=>n.bindTexture(o,i)),bt(n,()=>n.texParameteri(o,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)),bt(n,()=>n.texParameteri(o,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)),bt(n,()=>n.texParameteri(o,n.TEXTURE_MIN_FILTER,n.NEAREST)),bt(n,()=>n.texParameteri(o,n.TEXTURE_MAG_FILTER,n.NEAREST)),Qe().getNumber("WEBGL_VERSION")===1?bt(n,()=>n.texImage2D(o,0,s,e,t,0,r,a,null)):bt(n,()=>n.texStorage2D(o,1,s,e,t)),bt(n,()=>n.bindTexture(n.TEXTURE_2D,null)),{texture:i,texShape:[t,e]}}function zQ(n){return n.internalFormatFloat}function Zpe(n,e,t,s){const[r,a]=m1(e,t);return y1(n,r,a,zQ(s),s.textureFormatFloat,n.FLOAT)}function jQ(n){return n.internalFormatHalfFloat}function eme(n,e,t,s){const[r,a]=m1(e,t);return y1(n,r,a,jQ(s),s.textureFormatFloat,s.textureTypeHalfFloat)}function VQ(n){return n.downloadTextureFormat}function tme(n,e,t,s){const[r,a]=m1(e,t);return y1(n,r,a,VQ(s),n.RGBA,n.UNSIGNED_BYTE)}function GQ(n){return n.internalFormatPackedFloat}function nme(n,e,t,s){const[r,a]=Wp(e,t);return y1(n,r,a,GQ(s),n.RGBA,n.FLOAT)}function KQ(n){return n.internalFormatPackedHalfFloat}function sme(n,e,t,s){const[r,a]=Wp(e,t);return y1(n,r,a,KQ(s),n.RGBA,s.textureTypeHalfFloat)}function rme(n,e,t){return bt(n,()=>n.bindBuffer(n.ARRAY_BUFFER,t)),n3(n,e,"clipSpacePos",t,3,20,0)&&n3(n,e,"uv",t,2,20,12)}function ame(n,e,t,s,r,a){bt(n,()=>n.bindTexture(n.TEXTURE_2D,e));let i,o,l;r instanceof Uint8Array?(i=new Uint8Array(t*s*4),o=n.UNSIGNED_BYTE,l=n.RGBA):(i=new Float32Array(t*s*4),o=n.FLOAT,l=a.internalFormatPackedFloat),i.set(r),Qe().getNumber("WEBGL_VERSION")===2?bt(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,t,s,n.RGBA,o,i)):bt(n,()=>n.texImage2D(n.TEXTURE_2D,0,l,t,s,0,n.RGBA,o,i)),bt(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function ime(n,e,t){bt(n,()=>n.bindTexture(n.TEXTURE_2D,e)),t.data instanceof Uint8Array?Qe().getNumber("WEBGL_VERSION")===2?bt(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,t.width,t.height,n.RGBA,n.UNSIGNED_BYTE,t.data)):bt(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t.width,t.height,0,n.RGBA,n.UNSIGNED_BYTE,t.data)):Qe().getNumber("WEBGL_VERSION")===2?bt(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,t)):bt(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)),bt(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function ome(n,e,t,s){const r=n.createBuffer();bt(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,r));const o=4*4*e*t;return bt(n,()=>n.bufferData(n.PIXEL_PACK_BUFFER,o,n.STREAM_READ)),bt(n,()=>n.readPixels(0,0,t,e,n.RGBA,n.FLOAT,0)),bt(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,null)),r}function lme(n,e,t){const s=n,r=new Float32Array(t);return s.bindBuffer(s.PIXEL_PACK_BUFFER,e),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,r),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),r}function Ame(n,e,t,s){const[r,a]=m1(e,t),i=4,o=new Uint8Array(Nde(e*t,i));return bt(n,()=>n.readPixels(0,0,r,a,s.downloadTextureFormat,n.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function ume(n,e,t,s,r,a,i,o){const l=n,u=new Float32Array(Ide(a,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function cme(n,e,t){const s=new Float32Array(e*t*4);return bt(n,()=>n.readPixels(0,0,t,e,n.RGBA,n.FLOAT,s)),s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MC{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=Qe().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,Cde(t,e)):this.gl=Dl(t),e=this.gl,Qe().getNumber("WEBGL_VERSION")===2){const a=e;this.createVertexArray=()=>bt(a,()=>a.createVertexArray()),this.bindVertexArray=i=>bt(a,()=>a.bindVertexArray(i)),this.deleteVertexArray=i=>bt(a,()=>a.deleteVertexArray(i)),this.getVertexArray=()=>bt(a,()=>a.getParameter(a.VERTEX_ARRAY_BINDING))}else if(e!=null){const a=e.getExtension("OES_vertex_array_object");if(a==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>bt(e,()=>a.createVertexArrayOES()),this.bindVertexArray=i=>bt(e,()=>a.bindVertexArrayOES(i)),this.deleteVertexArray=i=>bt(e,()=>a.deleteVertexArrayOES(i)),this.getVertexArray=()=>bt(e,()=>e.getParameter(a.VERTEX_ARRAY_BINDING_OES))}let s="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Qe().getNumber("WEBGL_VERSION")===1){const a="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=n2(this.gl,a),Lo(this.gl,i))this.textureHalfFloatExtension=n2(this.gl,i);else if(Qe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(s),Lo(this.gl,r))this.colorBufferHalfFloatExtension=n2(this.gl,r);else if(Qe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(s="EXT_color_buffer_float",Lo(this.gl,s))this.colorBufferFloatExtension=this.gl.getExtension(s);else if(Lo(this.gl,r))this.colorBufferHalfFloatExtension=this.gl.getExtension(r);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=Ype(this.gl),this.indexBuffer=Jpe(this.gl),this.framebuffer=Pde(this.gl),this.textureConfig=WI(this.gl,this.textureHalfFloatExtension)}get debug(){return Qe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;bt(e,()=>e.finish()),bt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),bt(e,()=>e.deleteFramebuffer(this.framebuffer)),bt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),bt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),bt(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),Zpe(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),eme(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),tme(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),ime(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,s,r){this.throwIfDisposed(),ame(this.gl,e,t,s,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),sme(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),nme(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(s3(this.gl,this.framebuffer),this.outputTexture=null),bt(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,s){return this.downloadMatrixDriver(e,()=>Ame(this.gl,t,s,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,s,r,a,i){return ume(this.gl,e,t,s,r,a,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return lme(this.gl,e,t)}createBufferFromTexture(e,t,s){this.bindTextureToFrameBuffer(e);const r=ome(this.gl,t,s,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,s;if(Qe().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,a=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),s=()=>{const i=r.clientWaitSync(a,0,0);return i===r.ALREADY_SIGNALED||i===r.CONDITION_SATISFIED},t=a}else Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),s=()=>this.isQueryAvailable(t,Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):s=()=>!0;return{query:t,isFencePassed:s}}downloadMatrixFromPackedTexture(e,t,s){return this.downloadMatrixDriver(e,()=>cme(this.gl,t,s))}createProgram(e){this.throwIfDisposed();const t=this.gl;this.vertexShader==null&&(this.vertexShader=Xpe(t));const s=$de(t);bt(t,()=>t.attachShader(s,this.vertexShader)),bt(t,()=>t.attachShader(s,e)),_de(t,s);const r=Object.assign(s,{vao:this.createVertexArray()});return this.debug&&$C(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;bt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),rme(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(bt(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&$C(this.gl,this.program),bt(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,s=!0){return this.throwIfDisposed(),s?jde(this.gl,e,t):Vde(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),bt(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,s){this.throwIfDisposed(),this.throwIfNoProgram(),Gde(this.gl,e,t,s)}setOutputMatrixTexture(e,t,s){this.setOutputMatrixTextureDriver(e,s,t)}setOutputPackedMatrixTexture(e,t,s){this.throwIfDisposed();const[r,a]=Wp(t,s);this.setOutputMatrixTextureDriver(e,r,a)}setOutputMatrixWriteRegion(e,t,s,r){this.setOutputMatrixWriteRegionDriver(s,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,s,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&$C(this.gl,this.program),s2(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}bt(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),bt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=n2(this.gl,Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const s=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=s.createQuery();return s.beginQuery(r.TIME_ELAPSED_EXT,a),a}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const t=this.gl,s=this.getQueryTimerExtensionWebGL2();t.endQuery(s.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await _T(()=>this.disposed||this.isQueryAvailable(e,Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(t===0)return null;if(t===2){const s=this.gl;return s.getQueryParameter(e,s.QUERY_RESULT)/1e6}else{const s=this.getQueryTimerExtensionWebGL1();return s.getQueryObjectEXT(e,s.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(t===0)return!0;if(t===2){const s=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=s.getQueryParameter(e,s.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}else{const s=this.getQueryTimerExtensionWebGL1(),r=s.getQueryObjectEXT(e,s.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),r&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=hme(this.itemsToPoll.map(t=>t.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:s}=this.itemsToPoll[t];s()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let s;"setTimeoutCustom"in Qe().platform&&(s=Qe().platform.setTimeoutCustom.bind(Qe().platform)),_T(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,s)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),_C(this.gl,e,this.framebuffer),this.debug&&s2(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(_C(this.gl,this.outputTexture,this.framebuffer),this.debug&&s2(this.gl)):s3(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const s=t();return this.unbindTextureToFrameBuffer(),s}setOutputMatrixTextureDriver(e,t,s){this.throwIfDisposed();const r=this.gl;_C(r,e,this.framebuffer),this.debug&&s2(r),this.outputTexture=e,bt(r,()=>r.viewport(0,0,t,s)),bt(r,()=>r.scissor(0,0,t,s))}setOutputMatrixWriteRegionDriver(e,t,s,r){this.throwIfDisposed(),bt(this.gl,()=>this.gl.scissor(e,t,s,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function hme(n){let e=0;for(;e<n.length&&n[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:fme,bincountImpl:WQ,bincountReduceImpl:dme,bitwiseAndImpl:pme,castImpl:mme,ceilImpl:gme,concatImpl:yme,equalImpl:wme,expImpl:bme,expm1Impl:xme,floorImpl:vme,gatherNdImpl:Cme,gatherV2Impl:Bme,greaterImpl:Sme,greaterEqualImpl:Nme,lessImpl:Ime,lessEqualImpl:Eme,linSpaceImpl:kme,logImpl:Fme,maxImpl:Tme,maximumImpl:Dme,minimumImpl:Lme,multiplyImpl:Ume,negImpl:Rme,notEqualImpl:$me,prodImpl:_me,raggedGatherImpl:Ome,raggedRangeImpl:Qme,raggedTensorToTensorImpl:Mme,rangeImpl:Hme,rsqrtImpl:Pme,scatterImpl:zme,sigmoidImpl:jme,simpleAbsImpl:qQ,sliceImpl:Vme,sparseFillEmptyRowsImpl:Gme,sparseReshapeImpl:Kme,sparseSegmentReductionImpl:XQ,sqrtImpl:Wme,staticRegexReplaceImpl:qme,stridedSliceImpl:Xme,stringNGramsImpl:Yme,stringSplitImpl:Jme,stringToHashBucketFastImpl:Zme,subImpl:ege,tileImpl:tge,topKImpl:nge,transposeImpl:JI,uniqueImpl:sge}=iAe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YQ(n,e){return["x","y","z","w","u","v"].slice(0,e).map(t=>`${n}.${t}`)}function Qa(n,e){return e===1?[n]:YQ(n,e)}function rge(n,e){if(n===1)return"rc";let t="";for(let s=0;s<n;s++)t+=e[s],s<n-1&&(t+=",");return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class age{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=ya(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const t=Qa("rc",this.rank),s=Jn(this.rank),r=this.getOutOfBoundsCondition(t),a=this.getSetup(t),i=this.getOutput(t);this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();

          if(${r}) {
            setOutput(vec4(0));
          } else {
            ${a}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(e){const t=[];for(let s=0;s<=1;s++)for(let r=0;r<=1;r++){let a=`${s===0?"r":"rp1"}, ${r===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)a=`${e[e.length-1-i]},`+a;t.push(a)}return t}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let s=this.rank-2;s<this.rank;s++)t+=`${e[s]} >= ${this.enableShapeUniforms?`outShape[${s}]`:this.outputShape[s]}`,s<this.rank-1&&(t+="||");return t}getSetup(e){if(this.rank===1)return"";const t=e.slice(-2),s=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${t[0]};
      int c = ${t[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${s};
      bool rEdge = rp1 >= ${r};
    `}getOutput(e){const t=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${t[0]}),
            cEdge ? 0. : getA(${t[1]}),
            rEdge ? 0. : getA(${t[2]}),
            rEdge || cEdge ? 0. : getA(${t[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JQ{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length);let s="";for(let r=0;r<4;r++){let a="thisRC = rc;";r%2===1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),s+=`
        ${a}
        ${r>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${r}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${r>0?"}":""}
      `}this.userCode=`
      ${ige(t,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?XI():qI(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${s}

        setOutput(result);
      }
    `}}function ige(n,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?rpe(["r","c","d"],"inputShape"):Xf(["r","c","d"],n)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oge{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,s){const r=l3(t,s),a=A3(e,r,s);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const i=o3(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,s);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const l=this.freeTextures[a].pop();return this.usedTextures[a].push(l),l}let o;return r===Zr.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===Zr.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===Zr.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===Zr.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===Zr.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o}releaseTexture(e,t,s,r){if(this.freeTextures==null)return;const a=l3(s,r),i=A3(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);const o=o3(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),l=Qe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const u=this.usedTextures[i],h=u&&u.indexOf(e);if(h==null||h<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[h]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function lge(n,e){const t=n;if(e===t.R32F)return 4;if(e===t.R16F)return 2;if(e===t.RGBA32F)return 16;if(e===n.RGBA)return 16;if(e===t.RGBA16F)return 8;if(e===t.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function o3(n,e,t,s,r){const a=Age(e,s);let i;if(r){const[l,u]=Wp(n[0],n[1]);i=l*u}else{const[l,u]=m1(n[0],n[1]);i=l*u}const o=lge(t,a);return i*o}function Age(n,e){switch(n){case Zr.PACKED_2X2_FLOAT32:return GQ(e);case Zr.PACKED_2X2_FLOAT16:return KQ(e);case Zr.UNPACKED_FLOAT32:return zQ(e);case Zr.UNPACKED_FLOAT16:return jQ(e);case Zr.PACKED_4X1_UNSIGNED_BYTE:return VQ(e);default:throw new Error(`Unknown physical texture type ${n}`)}}function uge(n){return Qe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?Zr.PACKED_2X2_FLOAT32:Zr.UNPACKED_FLOAT32:n?Zr.PACKED_2X2_FLOAT16:Zr.UNPACKED_FLOAT16}function l3(n,e){if(n===eo.UPLOAD)return Zr.PACKED_2X2_FLOAT32;if(n===eo.RENDER||n==null)return uge(e);if(n===eo.DOWNLOAD||n===eo.PIXELS)return Zr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${n}`)}function A3(n,e,t){return`${n[0]}_${n[1]}_${e}_${t}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NA{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${t}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Po="if (isnan(x)) return x;",cge="return x;",u3="return abs(x);",hge="return (x >= 0.0) ? x : (exp(x) - 1.0);",fge=Po+`
  return (x < 0.0) ? 0.0 : x;
`,dge=Po+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,_c="return x;",pge="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mge="return x;",gge=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,yge=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,wge=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,bge="return 1.0 / (1.0 + exp(-1.0 * x));";class jc{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${t}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xge{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length);const t=e.length,s=Qa("rc",t),r=Jn(t),a=rge(t,s),i=s.slice(-2),o=t<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${r} rc = getOutputCoords();
        vec4 packedInput = getA(${a});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vge=R5,Cge=1e-7,Bge=1e-4,i2={};function Sge(n){return n in i2||(i2[n]={}),i2[n]}const Nge=Qe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Ige=600;function Ege(){return Qe().global.screen==null?1024:Qe().global.screen.height*Qe().global.screen.width*window.devicePixelRatio*Ige/1024/1024}class Ex extends WS{nextDataId(){return Ex.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Qe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(e!=null){if(e instanceof MC)t=e;else{const s=Dl(Qe().getNumber("WEBGL_VERSION"),e);t=new MC(s)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const s=Dl(Qe().getNumber("WEBGL_VERSION"));t=new MC(s),this.binaryCache=Sge(Qe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new oge(this.gpgpu),this.numMBBeforeWarning=Ege(),this.texData=new CL(this,xA())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,s,r,a,i){const o=this.makeTensorInfo(t,s),l=this.texData.get(o.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[r,a]},l.texShape=[r,a];const u=r2(t),h=new i3(u,!1,i),f=this.runWebGLProgram(h,[o],s,[[r,a]]);return f.shape=t,l.texture=null,this.disposeIntermediateTensorInfo(o),f.dataId}write(e,t,s){if((Qe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Qe().getBool("DEBUG"))&&this.checkNumericalProblems(e),s==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:s,values:e,usage:eo.UPLOAD,refCount:1}),r}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const t=this.texData.get(e);t.refCount++}decRef(e){if(this.texData.has(e)){const t=this.texData.get(e);t.refCount--}}move(e,t,s,r,a){if(Qe().getBool("DEBUG")&&this.checkNumericalProblems(t),r==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:s,dtype:r,values:t,usage:eo.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:s,dtype:r,complexTensorInfos:a,slice:i,shape:o,isPacked:l}=t;if(i!=null){let d;l?d=new jc(o,_c):d=new NA(o,_c);const m=this.runWebGLProgram(d,[{dataId:e,shape:o,dtype:r}],r),g=this.readSync(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(s!=null)return this.convertAndCacheOnCPU(e);if(r==="string")return s;const u=this.activeTimers!=null;let h;u&&(h=ni());let f;if(r==="complex64"){const d=this.readSync(a.real.dataId),m=this.readSync(a.imag.dataId);f=Uu(d,m)}else f=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=ni()-h),this.convertAndCacheOnCPU(e,f)}async read(e){if(this.pendingRead.has(e)){const g=this.pendingRead.get(e);return new Promise(w=>g.push(w))}const t=this.texData.get(e),{values:s,shape:r,slice:a,dtype:i,complexTensorInfos:o,isPacked:l}=t;if(a!=null){let g;l?g=new jc(r,_c):g=new NA(r,_c);const w=this.runWebGLProgram(g,[{dataId:e,shape:r,dtype:i}],i),v=this.read(w.dataId);return this.disposeIntermediateTensorInfo(w),v}if(s!=null)return this.convertAndCacheOnCPU(e);if(Qe().getBool("DEBUG")&&!Qe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Qe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,h;if(i!=="complex64"&&Qe().get("WEBGL_BUFFER_SUPPORTED")){h=this.decode(e);const g=this.texData.get(h.dataId);u=this.gpgpu.createBufferFromTexture(g.texture.texture,...t2(r))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let f;if(i==="complex64"){const g=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),w=g[0],v=g[1];f=Uu(w,v)}else if(u==null)f=this.getValuesFromTexture(e);else{const g=je(r);f=this.gpgpu.downloadFloat32MatrixFromBuffer(u,g)}if(h!=null&&this.disposeIntermediateTensorInfo(h),u!=null){const g=this.gpgpu.gl;bt(g,()=>g.deleteBuffer(u))}const d=this.convertAndCacheOnCPU(e,f),m=this.pendingRead.get(e);return this.pendingRead.delete(e),m.forEach(g=>g(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&xA().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e,t={}){const s=this.texData.get(e),{values:r,shape:a,slice:i,dtype:o,isPacked:l,texture:u}=s;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let m;l?m=new jc(a,_c):m=new NA(a,_c);const g=this.runWebGLProgram(m,[{dataId:e,shape:a,dtype:o}],o),w=this.readToGPU(g,t);return this.disposeIntermediateTensorInfo(g),w}if(u==null)throw r!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const h=this.decode(e,t.customTexShape),f=xA().makeTensorFromTensorInfo(h),d=this.texData.get(h.dataId);return Object.assign({tensorRef:f},d.texture)}bufferSync(e){const t=this.readSync(e.dataId);if(e.dtype==="string")try{const s=t.map(r=>th(r));return un(e.shape,e.dtype,s)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return un(e.shape,e.dtype,t)}checkNumericalProblems(e){if(e!=null)for(let t=0;t<e.length;t++){const s=e[t];if(!Tde(s))throw Qe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${s} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${s} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:t,dtype:s,isPacked:r}=this.texData.get(e),a=je(t);if(Qe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const d=this.decode(e),m=this.texData.get(d.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(m.texture.texture,...t2(t)).subarray(0,a);return this.disposeIntermediateTensorInfo(d),g}const i=Qe().getBool("WEBGL_PACK")&&r===!0,o=i?r2(t):t,l=i?new Kpe(o):new Gpe(o),u=this.runWebGLProgram(l,[{shape:o,dtype:s,dataId:e}],"float32"),h=this.texData.get(u.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture.texture,h.texShape[0],h.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(u),f}timerAvailable(){return Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,s=[];let r=!1;this.programTimersStack==null?(this.programTimersStack=s,r=!0):this.activeTimers.push(s),this.activeTimers=s,e();const a=kf(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),i=kf(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=t,r&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(a);o.kernelMs=VW(l),o.getExtraProfileInfo=()=>l.map((u,h)=>({name:i[h],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ni(),endMs:null}}endTimer(e){return Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=ni(),e)}async getQueryTime(e){if(Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:s}=this.texData.get(e);return s!=null&&(this.disposeData(s.real.dataId,t),this.disposeData(s.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:s,texShape:r,usage:a,isPacked:i,slice:o}=this.texData.get(e),l=o&&o.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),t!=null&&(this.numBytesInGPU-=this.computeBytes(r,s),this.textureManager.releaseTexture(t,r,a,i)));const h=this.texData.get(e);h.texture=null,h.texShape=null,h.isPacked=!1,h.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=Nge){return Qe().getBool("WEBGL_CPU_FORWARD")&&e.every(s=>this.texData.get(s.dataId).texture==null&&je(s.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){Ji("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return vge(e.shape,t)}packedUnaryOp(e,t,s){const r=new jc(e.shape,t),a=this.compileAndRun(r,[e],s);return xA().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const r=qQ(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,r)}if(Qe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,u3,e.dtype);const t=new NA(e.shape,u3),s=this.compileAndRun(t,[e]);return xA().makeTensorFromTensorInfo(s)}makeTensorInfo(e,t,s){let r;if(t==="string"&&s!=null&&s.length>0&&e0(s[0])){const a=s.map(i=>qc(i));r=this.write(a,e,t)}else r=this.write(s,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,s){return xA().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,s),this)}unpackTensor(e){const t=new xge(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new age(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const s=[Tp(e.shape),...Dp(e.shape)],r={dtype:e.dtype,shape:s,dataId:e.dataId},a=[Tp(t),...Dp(t)],i=new JQ(a,s),o=!0,l=[s],u=this.runWebGLProgram(i,[r],e.dtype,l,o);return{dataId:u.dataId,shape:t,dtype:u.dtype}}decode(e,t){const s=this.texData.get(e),{isPacked:r,shape:a,dtype:i}=s;if(t!=null){const d=je(a),m=t[0]*t[1]*4;se(d<=m,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=r2(a);let l;r?l=new Vpe(o):l=new jpe(o);const u=!0,h=[t??t2(o)],f=this.runWebGLProgram(l,[{shape:o,dtype:i,dataId:e}],i,h,u,t);return{dtype:i,shape:a,dataId:f.dataId}}runWebGLProgram(e,t,s,r,a=!1,i){const o=this.makeTensorInfo(e.outputShape,s),l=this.texData.get(o.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Vg.DENSE){const b=i??t2(e.outputShape);l.texShape=b.map(C=>C*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),je(o.shape)===0)return l.values=ea(o.dtype,0),o;const u=[],h=t.map(b=>{if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let C=this.texData.get(b.dataId);if(C.texture==null){if(!e.packedInputs&&je(b.shape)<=Qe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:C.values};e.packedInputs&&(C.isPacked=!0,C.shape=b.shape)}if(this.uploadToGPU(b.dataId),!!C.isPacked!=!!e.packedInputs)b=C.isPacked?this.unpackTensor(b):this.packTensor(b),u.push(b),C=this.texData.get(b.dataId);else if(C.isPacked&&!ww(C.shape,b.shape)){const N=b,I=b.shape;b.shape=C.shape,b=this.packedReshape(b,I),u.push(b),C=this.texData.get(b.dataId),N.shape=I}return{shape:b.shape,texData:C,isUniform:!1}});this.uploadToGPU(o.dataId);const f={shape:o.shape,texData:l,isUniform:!1},d=zpe(e,h,f),m=this.getAndSaveBinary(d,()=>Hpe(this.gpgpu,e,h,f)),g=this.activeTimers!=null;let w;g&&(w=this.startTimer()),Qe().get("ENGINE_COMPILE_ONLY")||Ppe(this.gpgpu,m,h,f,r),u.forEach(b=>this.disposeIntermediateTensorInfo(b)),g&&(w=this.endTimer(w),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(w)}));const v=Qe().getNumber("WEBGL_FLUSH_THRESHOLD");if(v>0){const b=ni();b-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!Qe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){const b=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),b}return o}compileAndRun(e,t,s,r,a=!1){return s=s||t[0].dtype,this.runWebGLProgram(e,t,s,r,a)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Qe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(t=>{this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram),delete this.binaryCache[t]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=De(()=>{if(!Qe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Qe().getBool("DEBUG");Qe().set("DEBUG",!1);const t=this.abs(Ut(1e-8)).dataSync()[0];if(Qe().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Cge:Bge}uploadToGPU(e){const t=this.texData.get(e),{shape:s,dtype:r,values:a,texture:i,usage:o,isPacked:l}=t;if(i!=null)return;const u=this.activeTimers!=null;let h;u&&(h=ni());let f=t.texShape;if(f==null&&(f=qde(s,l),t.texShape=f),a!=null){const d=r2(s);let m,g=f[1],w=f[0];const v=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(l||!v)&&([g,w]=Wp(f[0],f[1])),l?m=new qpe(d,v):m=new i3(d,v);const b=v?[w,g]:f,C=this.makeTensorInfo(b,r),N=this.texData.get(C.dataId);v?N.usage=eo.PIXELS:N.usage=eo.UPLOAD,N.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(C.dataId),g,w,a);const I=[[w,g]],$=this.runWebGLProgram(m,[C],r,I,!0),H=this.texData.get($.dataId);t.texShape=H.texShape,t.isPacked=H.isPacked,t.usage=H.usage,Qe().get("ENGINE_COMPILE_ONLY")?this.disposeData($.dataId):(t.texture=H.texture,t.values=null,this.texData.delete($.dataId)),this.disposeIntermediateTensorInfo(C),u&&(this.uploadWaitMs+=ni()-h)}else{const d=this.acquireTexture(f,o,r,l);t.texture=d}}convertAndCacheOnCPU(e,t){const s=this.texData.get(e),{dtype:r}=s;return t!=null&&(s.values=kge(t,r)),s.values}acquireTexture(e,t,s,r){if(this.numBytesInGPU+=this.computeBytes(e,s),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*W2(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}else{for(const[,t]of Object.entries(this.binaryCache)){const s=new Promise(r=>{try{this.checkCompletion_(t),r(!0)}catch(a){throw a}});e.push(s)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await $R(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(_Q(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:s,infLoc:r,nanLoc:a,outShapeLocation:i,outShapeStridesLocation:o,outTexShapeLocation:l}=PQ(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=s,e.infLoc=r,e.nanLoc=a,e.outShapeLocation=i,e.outShapeStridesLocation=o,e.outTexShapeLocation=l}}createTensorFromGPUData(e,t,s){e.channels=e.channels||"RGBA";const{texture:r,height:a,width:i,channels:o}=e,l=xA().backend;if(!l.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=l.writeTexture(r,t,s,a,i,o);return xA().makeTensorFromDataId(u,t,s,l)}}Ex.nextDataId=0;function kge(n,e){if(e==="float32"||e==="complex64")return n;if(e==="int32"||e==="bool"){const t=e==="int32"?new Int32Array(n.length):new Uint8Array(n.length);for(let s=0;s<t.length;++s)t[s]=Math.round(n[s]);return t}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */jL()&&KL("webgl",()=>new Ex,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZI=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Hf{constructor(e,t,s){this.variableNames=["A","B"],this.outputShape=sn(t,s),this.enableShapeUniforms=ya(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jf=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Zp{constructor(e,t,s,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=sn(t,s);const a=this.outputShape.length;this.enableShapeUniforms=ya(a);let i="";if(r)if(a===0||je(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${Jn(a)} coords = getOutputCoords();
        `,a===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Qa("coords",a);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${l[a-2]} + 1) >= outShape[${a} - 2];
            bool nextColOutOfBounds =
              (${l[a-1]} + 1) >= outShape[${a} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${l[a-2]} + 1) >= ${this.outputShape[a-2]};
            bool nextColOutOfBounds =
              (${l[a-1]} + 1) >= ${this.outputShape[a-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fi(n){const{inputs:e,backend:t}=n,{x:s}=e;return t.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const Fge={kernelName:x0,backendName:"webgl",kernelFunc:Fi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vh(n){const{inputs:e,backend:t}=n,{real:s,imag:r}=e,a=t.makeTensorInfo(s.shape,"complex64"),i=t.texData.get(a.dataId),o=Fi({inputs:{x:s},backend:t}),l=Fi({inputs:{x:r},backend:t});return i.complexTensorInfos={real:o,imag:l},a}const Tge={kernelName:rN,backendName:"webgl",kernelFunc:vh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZQ="return (a < 0.) ? b * a : a;",e6=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Dge(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{alpha:a}=s,i=t.makeTensorInfo([],"float32",hh(a,"float32")),o=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Zp(e6,r.shape,i.shape):new Hf(ZQ,r.shape,i.shape),l=t.runWebGLProgram(o,[r,i],"float32");return t.disposeIntermediateTensorInfo(i),l}const Lge={kernelName:ob,backendName:"webgl",kernelFunc:Dge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t6="return (a < 0.) ? b * a : a;",n6=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Uge(n){const{inputs:e,backend:t}=n,{x:s,alpha:r}=e,a=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Zp(n6,s.shape,r.shape):new Hf(t6,s.shape,r.shape);return t.runWebGLProgram(a,[s,r],"float32")}const Rge={kernelName:Nb,backendName:"webgl",kernelFunc:Uge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const em="if (isnan(x)) return x;";function Fn({opSnippet:n,packedOpSnippet:e,cpuKernelImpl:t,dtype:s}){return({inputs:r,backend:a})=>{const{x:i}=r,o=a,l=s||i.dtype;if(o.shouldExecuteOnCPU([i])&&t!=null){const f=o.texData.get(i.dataId),d=t(f.values,l);return o.makeTensorInfo(i.shape,l,d)}const u=Qe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let h;return u?h=new jc(i.shape,e):h=new NA(i.shape,n),o.runWebGLProgram(h,[i],l)}}function aa({opSnippet:n,packedOpSnippet:e,checkOutOfBounds:t=!1,supportsComplex:s=!1,cpuKernelImpl:r,dtype:a}){return({inputs:i,backend:o})=>{const{a:l,b:u}=i,h=o;if(s&&l.dtype==="complex64"){const g=h.texData.get(l.dataId),w=h.texData.get(u.dataId),[v,b]=[[g.complexTensorInfos.real,w.complexTensorInfos.real],[g.complexTensorInfos.imag,w.complexTensorInfos.imag]].map(N=>{const[I,L]=N,$={dataId:I.dataId,dtype:I.dtype,shape:l.shape},H={dataId:L.dataId,dtype:L.dtype,shape:u.shape},U=new Hf(n,l.shape,u.shape);return h.runWebGLProgram(U,[$,H],Si(I.dtype,L.dtype))}),C=vh({inputs:{real:v,imag:b},backend:h});return h.disposeIntermediateTensorInfo(v),h.disposeIntermediateTensorInfo(b),C}const f=a||Si(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||h.shouldExecuteOnCPU([l,u]))&&r!=null){const g=h.texData.get(l.dataId).values,w=h.texData.get(u.dataId).values,v=l.dtype==="string"?Ru(g):g,b=l.dtype==="string"?Ru(w):w,[C,N]=r(l.shape,u.shape,v,b,f),I=h.makeTensorInfo(N,f),L=h.texData.get(I.dataId);return L.values=C,I}const d=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let m;return d?m=new Zp(e,l.shape,u.shape,t):m=new Hf(n,l.shape,u.shape),h.runWebGLProgram(m,[l,u],f)}}function Gg(n,e=!1){if(n==="linear")return e?mge:cge;if(n==="relu")return e?yge:fge;if(n==="elu")return e?gge:hge;if(n==="relu6")return e?wge:dge;if(n==="prelu")return e?n6:t6;if(n==="leakyrelu")return e?e6:ZQ;if(n==="sigmoid")return e?bge:pge;throw new Error(`Activation ${n} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s6{constructor(e,t,s,r=!1,a=!1,i=!1,o=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s,this.enableShapeUniforms=ya(this.outputShape.length);const h=r?e[1]:e[2],f=Math.ceil(h/2),d=r?"i * 2, rc.y":"rc.y, i * 2",m=a?"rc.z, i * 2":"i * 2, rc.z",g=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],w=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",b="";o&&(l?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:u?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:v=`vec4 activation(vec4 x) {
          ${o}
        }`,b="result = activation(result);");const C=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let N="rc.x",I="rc.x";e[0]<t[0]?N=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(I=`imod(rc.x, ${t[0]})`),this.userCode=`
      ${v}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${f}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${N};
        int batchB = ${I};
        for (int i = 0; i < ${f}; i++) {
          vec4 a = getMatrixA(batchA, ${d});
          vec4 b = getMatrixB(batchB, ${m});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${g[0]} * ${w[0]});
          result += (${g[1]} * ${w[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${C}

        ${b}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c3={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class h3{constructor(e,t,s){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=sn(t,s),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f3="return a * b;";function eE(n){const{inputs:e,backend:t}=n,{a:s,b:r}=e,a=Si(s.dtype,r.dtype);if(s.dtype==="complex64"){const o=t.texData.get(s.dataId),l=t.texData.get(r.dataId),u=new h3(c3.REAL,s.shape,r.shape),h=new h3(c3.IMAG,s.shape,r.shape),f=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:s.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:s.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:r.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:r.shape}],d=t.runWebGLProgram(u,f,"float32"),m=t.runWebGLProgram(h,f,"float32"),g=vh({inputs:{real:d,imag:m},backend:t});return t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(m),g}if(t.shouldExecuteOnCPU([s,r])){const o=t.texData.get(s.dataId),l=t.texData.get(r.dataId),[u,h]=Ume(s.shape,r.shape,o.values,l.values,a),f=t.makeTensorInfo(h,a),d=t.texData.get(f.dataId);return d.values=u,f}let i;return Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new Zp(f3,s.shape,r.shape):i=new Hf(f3,s.shape,r.shape),t.runWebGLProgram(i,[s,r],a)}const $ge={kernelName:F0,backendName:"webgl",kernelFunc:eE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ge(n,e,t){const s=[Tp(n.shape),...Dp(n.shape)],r={dtype:n.dtype,shape:s,dataId:n.dataId},a=[Tp(e),...Dp(e)],i=new JQ(a,s),o=!0,l=[s],u=t.runWebGLProgram(i,[r],n.dtype,l,o);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pt(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{shape:a}=s,i=t,o=je(r.shape),l=BL(a,o),u=je(l);se(o===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${r.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const h=i.texData.get(r.dataId);return h.isPacked&&!ww(r.shape,l)&&!(h.texture!==null&&ww(h.shape,l))?_ge(r,l,i):(i.incRef(r.dataId),{dataId:r.dataId,shape:l,dtype:r.dtype})}const Oge={kernelName:Eb,backendName:"webgl",kernelFunc:pt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d3{constructor(e,t){this.variableNames=["x"];const{windowSize:s,batchSize:r,inSize:a,outSize:i}=e;this.outputShape=[r,i];const o=Math.floor(s/4)*4,l=s%4;let u="sumValue += dot(values, ones);";if(t!=null){const f=1/t;u=`sumValue += dot(values * ${xp(f)?f.toPrecision(2):f}, ones);`}let h="";a%s>0&&(h=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${o};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qge{constructor(e,t){this.variableNames=["x"];const{windowSize:s,batchSize:r,inSize:a,outSize:i}=e;this.outputShape=[r,i];let o="0.0",l="";t==="prod"?o="1.0":t==="min"?(o="1.0 / 1e-20",l="min"):t==="max"&&(o="-1.0 / 1e-20",l="max");let u=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="sum"?u="sumValue":t==="prod"?u="prodValue":t==="all"?u="allValue":t==="any"&&(u="anyValue");const h=Math.floor(s/4)*4,f=s%4;let d=`
      if (${t==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${t==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${t==="min"} || ${t==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,m="vec4";t==="all"?(o="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):t==="any"&&(o="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");let g="";a%s>0&&(g=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${h}; i += 4) {
          int inIdx = inOffset + i;
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${h};
        if (${f===1}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===2}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===3}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${d}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mge(n){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const t=e.length?e[e.length-1].outSize:n[1],s=hx(t);e.push({inSize:t,windowSize:s,outSize:Math.ceil(t/s)})}return e}function Zf(n,e,t,s){const r=Mge(n.shape);let a=n;for(let i=0;i<r.length;i++){const{inSize:o,windowSize:l,outSize:u}=r[i];let h,f;t==="mean"?h=i===0?new d3({windowSize:l,inSize:o,batchSize:n.shape[0],outSize:u},o):new d3({windowSize:l,inSize:o,batchSize:n.shape[0],outSize:u}):h=new Qge({windowSize:l,inSize:o,batchSize:n.shape[0],outSize:u},t),f=a,a=s.runWebGLProgram(h,[a],e),f.dataId!==n.dataId&&s.disposeIntermediateTensorInfo(f)}return a}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hge{constructor(e,t){this.variableNames=["A"];const s=new Array(e.length);for(let i=0;i<s.length;i++)s[i]=e[t[i]];this.outputShape=s,this.rank=s.length;const r=Jn(this.rank),a=Pge(t);this.userCode=`
    void main() {
      ${r} resRC = getOutputCoords();
      setOutput(getA(${a}));
    }
    `}}function Pge(n){const e=n.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],s=new Array(e);for(let r=0;r<n.length;r++)s[n[r]]=t[r];return s.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zge{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const s=new Array(e.length);for(let h=0;h<s.length;h++)s[h]=e[t[h]];if(this.outputShape=s,this.rank=s.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=Jn(this.rank),a=YQ("rc",this.rank),i=new Array(this.rank);for(let h=0;h<t.length;h++)i[t[h]]=a[h];const o=`vec2(${i.slice(-2).join()})`,l=`++${a[this.rank-1]} < ${s[this.rank-1]}`,u=`getChannel(getA(${i.join()}), ${o})`;this.userCode=`
    void main() {
      ${r} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${a[this.rank-1]};
      if(++${a[this.rank-2]} < ${s[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kx(n,e,t){const s=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zge(n.shape,e):new Hge(n.shape,e);return t.runWebGLProgram(s,[n],n.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jge(n,e,t,s){const r=e,a=n.shape.length,i=dn(r,n.shape);let o=i;const l=Us(o,a),u=l!=null;let h=n;u&&(h=kx(n,l,s),o=Js(o.length,a)),sa("sum",o,a);const[f,d]=Hr(h.shape,o);let m=f;t&&(m=Ys(f,i));const g=je(d),v=je(n.shape)/g,b=pt({inputs:{x:h},attrs:{shape:[v,g]},backend:s}),C=n5(n.dtype),N=Zf(b,C,"sum",s),I=pt({inputs:{x:N},attrs:{shape:m},backend:s});return s.disposeIntermediateTensorInfo(b),s.disposeIntermediateTensorInfo(N),u&&s.disposeIntermediateTensorInfo(h),I}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fx(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a,keepDims:i}=s;return jge(r,a,i,t)}const Vge={kernelName:Ub,backendName:"webgl",kernelFunc:Fx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ha(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{perm:a}=s,i=t,o=r.shape.length,l=new Array(o);for(let h=0;h<l.length;h++)l[h]=r.shape[a[h]];let u;if(i.shouldExecuteOnCPU([r])){const f=i.texData.get(r.dataId).values,d=JI(f,r.shape,r.dtype,a,l);u=i.makeTensorInfo(l,r.dtype);const m=i.texData.get(u.dataId);m.values=d}else u=kx(r,a,i);return u}const Gge={kernelName:dp,backendName:"webgl",kernelFunc:Ha};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r6=1e3;function bw({a:n,b:e,transposeA:t,transposeB:s,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:l=null}){const u=n.shape.length,h=e.shape.length,f=t?n.shape[u-2]:n.shape[u-1],d=s?e.shape[h-1]:e.shape[h-2],m=t?n.shape[u-1]:n.shape[u-2],g=s?e.shape[h-2]:e.shape[h-1],w=n.shape.slice(0,-2),v=e.shape.slice(0,-2),b=je(w),C=je(v),I=sn(n.shape.slice(0,-2),e.shape.slice(0,-2)).concat([m,g]);se(f===d,()=>`Error in matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${n.shape} and ${e.shape} and transposeA=${t} and transposeB=${s} must match.`);const L=t?[b,f,m]:[b,m,f],$=s?[C,g,d]:[C,d,g],H=pt({inputs:{x:n},backend:r,attrs:{shape:L}}),U=pt({inputs:{x:e},backend:r,attrs:{shape:$}}),O=[H,U],z=Math.max(b,C),T=t?H.shape[1]:H.shape[2],R=a!=null,W=i!=null,K=l==="leakyrelu",re=l!=null?Gg(l,!0):null,P=R||W||K||re!=null;let Y;if((m===1||g===1)&&T>r6&&P===!1){let te=H,j=U;t&&(te=Ha({inputs:{x:H},backend:r,attrs:{perm:[0,2,1]}}),O.push(te)),s&&(j=Ha({inputs:{x:U},backend:r,attrs:{perm:[0,2,1]}}),O.push(j));const ue=g!==1,Q=g===1;let V=te;ue&&(V=pt({inputs:{x:te},backend:r,attrs:{shape:[z,T,1]}}),O.push(V));const Z=g===1?2:1;let le=j;Q&&(le=pt({inputs:{x:j},backend:r,attrs:{shape:[z,1,T]}}),O.push(le));const ce=eE({inputs:{a:V,b:le},backend:r});Y=Fx({inputs:{x:ce},backend:r,attrs:{axis:Z,keepDims:!0}}),O.push(ce)}else{const te=Si(n.dtype,e.dtype),j=new s6(L,$,[z,m,g],t,s,R,re,W,K),ue=[H,U];if(a!=null&&ue.push(a),W&&ue.push(i),K){const Q=r.makeTensorInfo([],"float32",hh(o,"float32"));ue.push(Q),O.push(Q)}Y=r.runWebGLProgram(j,ue,te)}const J=pt({inputs:{x:Y},backend:r,attrs:{shape:I}});O.push(Y);for(const te of O)r.disposeIntermediateTensorInfo(te);return J}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kge(n){const{inputs:e,backend:t,attrs:s}=n,{a:r,b:a,bias:i,preluActivationWeights:o}=e,{transposeA:l,transposeB:u,activation:h,leakyreluAlpha:f}=s;return bw({a:r,b:a,transposeA:l,transposeB:u,backend:t,bias:i,preluActivationWeights:o,leakyreluAlpha:f,activation:h})}const Wge={kernelName:q2,backendName:"webgl",kernelFunc:Kge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p3="return abs(x);";function qge(n){const{inputs:e,backend:t}=n,{x:s}=e;if(t.shouldExecuteOnCPU([s])&&s.dtype!=="complex64"){const a=t.texData.get(s.dataId),i=qQ(a.values);return t.makeTensorInfo(s.shape,s.dtype,i)}let r;return Qe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?r=new jc(s.shape,p3):r=new NA(s.shape,p3),t.runWebGLProgram(r,[s],s.dtype)}const Xge={kernelName:Qw,backendName:"webgl",kernelFunc:qge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yge=Po+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Jge=Fn({opSnippet:Yge}),Zge={kernelName:t0,backendName:"webgl",kernelFunc:Jge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e0e=Po+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,t0e=Fn({opSnippet:e0e}),n0e={kernelName:n0,backendName:"webgl",kernelFunc:t0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m3="return a + b;",s0e=aa({opSnippet:m3,packedOpSnippet:m3,supportsComplex:!0,cpuKernelImpl:fme}),r0e={kernelName:Hp,backendName:"webgl",kernelFunc:s0e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a0e{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((a,i)=>`T${i}`);const s=[];this.variableNames.forEach(a=>{s.push(`float v${a} = get${a}AtOutCoords();`)});const r=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        float result = ${r};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i0e{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((a,i)=>`T${i}`);const s=[];this.variableNames.forEach(a=>{s.push(`vec4 v${a} = get${a}AtOutCoords();`)});const r=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        vec4 result = ${r};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T2(n){const{inputs:e,backend:t}=n,s=e;if(s.length===1)return Fi({inputs:{x:s[0]},backend:t});if(s.length>Qe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(s.length/2),u=T2({inputs:s.slice(0,l),backend:t}),h=T2({inputs:s.slice(l),backend:t});return T2({inputs:[u,h],backend:t})}const r=s.map(l=>l.dtype).reduce((l,u)=>Si(l,u)),a=s.map(l=>l.shape),o=Qe().getBool("WEBGL_PACK")?new i0e(s[0].shape,a):new a0e(s[0].shape,a);return t.runWebGLProgram(o,s,r)}const o0e={kernelName:Mw,backendName:"webgl",kernelFunc:T2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l0e(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a,keepDims:i}=s,o=r.shape.length,l=dn(a,r.shape);let u=l;const h=Us(u,o);let f=r;h!=null&&(f=Ha({inputs:{x:r},backend:t,attrs:{perm:h}}),u=Js(u.length,o)),sa("all",u,o);const[d,m]=Hr(f.shape,u),g=je(m),w=pt({inputs:{x:f},backend:t,attrs:{shape:[-1,g]}}),v=Zf(w,w.dtype,"all",t);let b;if(i){const C=Ys(d,l);b=pt({inputs:{x:v},backend:t,attrs:{shape:C}})}else b=pt({inputs:{x:v},backend:t,attrs:{shape:d}});return t.disposeIntermediateTensorInfo(w),t.disposeIntermediateTensorInfo(v),h!=null&&t.disposeIntermediateTensorInfo(f),b}const A0e={kernelName:JS,backendName:"webgl",kernelFunc:l0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u0e(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a,keepDims:i}=s,o=r.shape.length,l=dn(a,r.shape);let u=l;const h=Us(u,o);let f=r;h!=null&&(f=Ha({inputs:{x:r},backend:t,attrs:{perm:h}}),u=Js(u.length,o)),sa("any",u,o);const[d,m]=Hr(f.shape,u),g=je(m),w=pt({inputs:{x:f},backend:t,attrs:{shape:[-1,g]}}),v=Zf(w,w.dtype,"any",t);let b;if(i){const C=Ys(d,l);b=pt({inputs:{x:v},backend:t,attrs:{shape:C}})}else b=pt({inputs:{x:v},backend:t,attrs:{shape:d}});return t.disposeIntermediateTensorInfo(w),t.disposeIntermediateTensorInfo(v),h!=null&&t.disposeIntermediateTensorInfo(f),b}const c0e={kernelName:ZS,backendName:"webgl",kernelFunc:u0e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h0e{constructor(e,t,s){this.variableNames=["A"];const{windowSize:r,batchSize:a,outSize:i}=e;s||this.variableNames.push("bestIndicesA"),this.outputShape=[a,i];const o=t==="max"?">":"<",l=s?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${r}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f0e{constructor(e,t,s,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,se(e.length>2,()=>`Packed arg${s.charAt(0).toUpperCase()+s.slice(1)} supports only inputs with rank above 2.`);const a=e[e.length-1],i=Math.ceil(a/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");const o=this.outputShape,l=o.length,u=Jn(l),h=Qa("coords",l);let f,d;if(i===1){d=l+1;const U=Jn(d);f=`
        ${U} sourceLocR = ${U}(${h.join()}, 0);
        ++${h[l-1]};
        ${U} sourceLocG = ${U}(${h.join()}, 0);
        ++${h[l-2]};
        ${U} sourceLocA = ${U}(${h.join()}, 0);
        --${h[l-1]};
        ${U} sourceLocB = ${U}(${h.join()}, 0);
        --${h[l-2]};`}else d=l,f=`
        ${u} sourceLocR = coords;
        ++${h[l-1]};
        ${u} sourceLocG = coords;
        ++${h[l-2]};
        ${u} sourceLocA = coords;
        --${h[l-1]};
        ${u} sourceLocB = coords;
        --${h[l-2]};`;const m=["x","y","z","w","u","v"].slice(0,d),g="."+m[d-1],w=m.map(U=>"int "+U),v=Qa("sourceLocR",d-1).concat("inIdx.r"),b=Qa("sourceLocG",d-1).concat("inIdx.g"),C=Qa("sourceLocB",d-1).concat("inIdx.b"),N=Qa("sourceLocA",d-1).concat("inIdx.a"),I=s==="max"?"greaterThan":"lessThan",L=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${C.join()}),
                             getBestIndicesAChannel(${N.join()})));`,$=`vec4(
            getAChannel(${v.join()}),
            hasNextCol ? getAChannel(${b.join()}) : 0.,
            hasNextRow ? getAChannel(${C.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${N.join()}) : 0.)`,H=r?"":`
      float getBestIndicesAChannel(${w.join()}) {
        return getChannel(getBestIndicesA(${m.join()}),
                                          vec2(${m.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${w.join()}) {
        return getChannel(getA(${m.join()}),
                               vec2(${m.slice(-2).join()}));
      }
      ${H}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${h[l-1]} < ${o[l-1]-1};
        bool hasNextRow = ${h[l-2]} < ${o[l-2]-1};
        ${f}
        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},
          sourceLocB${g}, sourceLocA${g}) * ${t};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${$};

        for (int i = 0; i < ${t}; i++) {
          inIdx = srcIdx;
          ${L}
          vec4 candidate = ${$};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${I}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a6(n,e,t,s=null){let r=e.shape[0],a=e.shape[1];s!=null&&(r=s.shape[0],a=s.shape[1]);const i=hx(a),o={windowSize:i,inSize:a,batchSize:r,outSize:Math.ceil(a/i)},l=new h0e(o,t,s==null),u=[e];s!=null&&u.push(s);const h=n.runWebGLProgram(l,u,"int32");if(h.shape[1]===1)return h;const f=a6(n,e,t,h);return n.disposeIntermediateTensorInfo(h),f}function i6(n,e,t,s=null){const r=s!=null?s.shape:e.shape,a=r[r.length-1],i=hx(a),o=new f0e(r,i,t,s==null),l=s==null?[e]:[e,s],u=n.runWebGLProgram(o,l,"int32");if(u.shape.length===e.shape.length){const h=i6(n,e,t,u);return n.disposeIntermediateTensorInfo(u),h}return u}function o6(n,e,t,s){const r=[t];if(sa("arg"+s.charAt(0).toUpperCase()+s.slice(1),r,e.shape.length),!Qe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const a=[],i=n.texData.get(e.dataId),o=i!==null&&i.isPacked;let l=e;o&&(l=n.unpackTensor(e),a.push(l));const[u,h]=Hr(l.shape,r),f=je(h),d=pt({inputs:{x:l},backend:n,attrs:{shape:[-1,f]}});a.push(d);const m=a6(n,d,s);a.push(m);const g=pt({inputs:{x:m},backend:n,attrs:{shape:u}});return a.forEach(w=>n.disposeIntermediateTensorInfo(w)),g}return i6(n,e,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d0e(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a}=s;let i=dn(a,r.shape);const o=Us(i,r.shape.length);let l=r;const u=[];o!=null&&(l=Ha({inputs:{x:r},backend:t,attrs:{perm:o}}),u.push(l),i=Js(i.length,l.shape.length)),sa("argMax",[i[0]],l.shape.length);const h=o6(t,l,i[0],"max");return u.forEach(f=>t.disposeIntermediateTensorInfo(f)),h}const p0e={kernelName:Hw,backendName:"webgl",kernelFunc:d0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m0e(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a}=s;let i=dn(a,r.shape);const o=Us(i,r.shape.length);let l=r;const u=[];o!=null&&(l=Ha({inputs:{x:r},backend:t,attrs:{perm:o}}),u.push(l),i=Js(i.length,l.shape.length)),sa("argMin",[i[0]],l.shape.length);const h=o6(t,l,i[0],"min");return u.forEach(f=>t.disposeIntermediateTensorInfo(f)),h}const g0e={kernelName:Pw,backendName:"webgl",kernelFunc:m0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y0e=Po+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,w0e=Fn({opSnippet:y0e}),b0e={kernelName:s0,backendName:"webgl",kernelFunc:w0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x0e=Po+"return log(x + sqrt(x * x + 1.0));",v0e=Fn({opSnippet:x0e}),C0e={kernelName:r0,backendName:"webgl",kernelFunc:v0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B0e=Po+`
  return atan(x);
`,S0e=Fn({opSnippet:B0e}),N0e={kernelName:a0,backendName:"webgl",kernelFunc:S0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I0e=ZI+`
  return atan(a, b);
`,E0e=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Jf+`
  return result;
`,k0e=aa({opSnippet:I0e,packedOpSnippet:E0e}),F0e={kernelName:o0,backendName:"webgl",kernelFunc:k0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T0e=Po+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,D0e=Fn({opSnippet:T0e}),L0e={kernelName:i0,backendName:"webgl",kernelFunc:D0e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kg{constructor(e,t,s,r=!1,a=!1){if(this.variableNames=["x"],t==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,o=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,m=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;const w=t==="avg",v=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,b=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let C="0.0";if(w||(C="-1.0 / 1e-20"),s){const U=">=";this.userCode=`
        const ivec2 strides = ivec2(${o}, ${l});
        const ivec2 pads = ivec2(${m}, ${g});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d};
                wC += ${h}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${U} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${r?a?v:b:`wR * ${d} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const N="max";let I=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(I="avgValue / max(count, 1.0)");const L=Math.floor(i/4)*4,$=i%4,H=`
      if (${w}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${N}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${m}, ${g});
      const float initializationValue = ${C};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${C});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${f};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${L}; wC += 4) {
            int xC = xCCorner + wC * ${h};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${h}, d),
              getValue(batch, xR, xC + 2 * ${h}, d),
              getValue(batch, xR, xC + 3 * ${h}, d)
            );

            ${H}
          }

          int xC = xCCorner + ${L};
          if (${$===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${H}
          } else if (${$===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${h}, d),
              initializationValue,
              initializationValue
            );

            ${H}
          } else if (${$===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${h}, d),
              getValue(batch, xR, xC + 2 * ${h}, d),
              initializationValue
            );

            ${H}
          }
        }
        setOutput(${I});
      }
    `}}class tE{constructor(e,t,s,r=!1,a=!1){if(this.variableNames=["x"],t==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,o=e.strideDepth,l=e.strideHeight,u=e.strideWidth,h=e.dilationDepth,f=e.dilationHeight,d=e.dilationWidth,m=e.effectiveFilterDepth,g=e.effectiveFilterHeight,w=e.effectiveFilterWidth,v=e.padInfo.front,b=e.padInfo.top,C=e.padInfo.left;this.outputShape=e.outShape;const N=t==="avg";let I="0.0";if(N||(I="-1.0 / 1e-20"),s){const z=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${l}, ${u});
        const ivec3 pads = ivec3(${v}, ${b}, ${C});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${m};
              wD += ${h}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${g};
                wR += ${f}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${w};
                  wC += ${d}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${z} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${r?a?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${g} * ${w} +
                      wR * ${w} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const L="max";let $=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&($="avgValue / max(count, 1.0)");const H=Math.floor(i/4)*4,U=i%4,O=`
      if (${N}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${L}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${l}, ${u});
      const ivec3 pads = ivec3(${v}, ${b}, ${C});
      const float initializationValue = ${I};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${I});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${m};
            wD += ${h}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${g};
            wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${H}; wC += 4) {
              int xC = xCCorner + wC * ${d};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                getValue(batch, xD, xR, xC + 3 * ${d}, ch)
              );

              ${O}
            }

            int xC = xCCorner + ${H};
            if (${U===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${O}
            } else if (${U===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                initializationValue,
                initializationValue
              );

              ${O}
            } else if (${U===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                initializationValue
              );

              ${O}
            }
          }
        }
        setOutput(${$});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U0e(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e;g1(r,"avgPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=s,u=1;se(na(i,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const h=Mo(r.shape,a,i,u,o,l);if(h.filterWidth===1&&h.filterHeight===1&&Bn(h.inShape,h.outShape))return Fi({inputs:{x:r},backend:t});const f=new Kg(h,"avg",!1);return t.runWebGLProgram(f,[r],"float32")}const R0e={kernelName:zw,backendName:"webgl",kernelFunc:U0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $0e(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l,dataFormat:u}=s,h=[1,1,1],f=_u(r.shape,a,i,h,o,l,u),d=new tE(f,"avg",!1);return t.runWebGLProgram(d,[r],"float32")}const _0e={kernelName:jw,backendName:"webgl",kernelFunc:$0e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O0e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,s=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,h=l-1-e.padInfo.top,f=u-1-e.padInfo.left,d=1/(t*s);this.userCode=`
      const ivec2 pads = ivec2(${h}, ${f});
      const float avgMultiplier = float(${d});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class Q0e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,s=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,h=e.dilationWidth,f=e.effectiveFilterDepth,d=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=f-1-e.padInfo.front,w=d-1-e.padInfo.top,v=m-1-e.padInfo.left,b=1/(t*s*r);this.userCode=`
      const ivec3 pads = ivec3(${g}, ${w}, ${v});
      const float avgMultiplier = float(${b});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${a}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${m};
                wC += ${h}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M0e(n){const{inputs:e,backend:t,attrs:s}=n,{dy:r,input:a}=e,i=a,{filterSize:o,strides:l,pad:u,dimRoundingMode:h}=s,f=[1,1,1],d=_u(i.shape,o,l,f,u,h),m=new Q0e(d);return t.runWebGLProgram(m,[r],i.dtype)}const H0e={kernelName:tN,backendName:"webgl",kernelFunc:M0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P0e(n){const{inputs:e,backend:t,attrs:s}=n,{dy:r,input:a}=e,i=a;g1([r,a],"avgPoolGrad");const{filterSize:o,strides:l,pad:u}=s,h=Mo(i.shape,o,l,1,u),f=new O0e(h);return t.runWebGLProgram(f,[r],i.dtype)}const z0e={kernelName:eN,backendName:"webgl",kernelFunc:P0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j0e(n){const{inputs:e,backend:t,attrs:s}=n,{a:r,b:a}=e,{transposeA:i,transposeB:o}=s;return bw({a:r,b:a,transposeA:i,transposeB:o,backend:t})}const V0e={kernelName:Vw,backendName:"webgl",kernelFunc:j0e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G0e{constructor(e,t,s,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],sn(e,t),sn(e,s);let o="0.0";r!=null&&(sn(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="1.0";a!=null&&(sn(e,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K0e{constructor(e,t,s,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],sn(e,t),sn(e,s);let o="vec4(0.0)";r!=null&&(sn(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="vec4(1.0)";a!=null&&(sn(e,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W0e=({inputs:n,backend:e,attrs:t})=>{const{x:s,mean:r,variance:a,offset:i,scale:o}=n;se(r.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),se(i==null||r.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),se(o==null||r.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=t;l==null&&(l=.001);const u=[s,r,a];let h=null;i!=null&&(h=i.shape,u.push(i));let f=null;o!=null&&(f=o.shape,u.push(o));const d=Qe().getBool("WEBGL_PACK_NORMALIZATION")?new K0e(s.shape,r.shape,a.shape,h,f,l):new G0e(s.shape,r.shape,a.shape,h,f,l);return e.runWebGLProgram(d,u,u[0].dtype)},q0e={kernelName:rb,backendName:"webgl",kernelFunc:W0e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X0e{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=Jn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const s=Y0e(this.rank);let r;const a=e.map((i,o)=>`sourceLoc.${CS[o]} = start[${o}] + coords.${CS[o]};`);r=`
        ${t} sourceLoc;
        ${t} coords = getOutputCoords();
        ${a.join(`
`)}
      `,this.userCode=`
      void main() {
        ${r}
        setOutput(getSource(${s}));
      }
    `}}const CS=["x","y","z","w","u","v"];function Y0e(n){if(n===1)return"sourceLoc";if(n<=6)return CS.slice(0,n).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${n} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J0e{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=Jn(this.rank),s=Qa("coords",this.rank),r=Qa("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":`vec2(${r.slice(-2).join()})`,i=`getChannel(getSource(${r.join()}), ${a})`,o=`
      result.x = ${i};
      if (++${s[this.rank-1]} < ${e[this.rank-1]}) {
        ++${r[this.rank-1]};
        result.y = ${i};
        --${r[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${s[this.rank-1]};
      if (++${s[this.rank-2]} < ${e[this.rank-2]}) {
        ++${r[this.rank-2]};
        result.z = ${i};
        if (++${s[this.rank-1]} < ${e[this.rank-1]}) {
          ++${r[this.rank-1]};
          result.w = ${i};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${t}(${e.map((h,f)=>`start[${f}]`).join()});`:e.map((h,f)=>`${r[f]} = ${s[f]} + start[${f}];`).join(`
`);this.userCode=`
      void main() {
        ${t} coords = getOutputCoords();
        ${t} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${o}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z0e(n,e,t,s){const r=s.texData.get(n.dataId),a=s.makeTensorInfo(t,n.dtype),i=s.texData.get(a.dataId);Object.assign(i,r),i.refCount=1,i.shape=t,i.dtype=n.dtype;let o=q5(e,_t(n.shape));r.slice&&(o+=r.slice.flatOffset),i.slice={flatOffset:o,origDataId:r.slice&&r.slice.origDataId||n.dataId};const l=s.dataRefCount.get(i.slice.origDataId)||1;return s.dataRefCount.set(i.slice.origDataId,l+1),a}function tm(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{begin:a,size:i}=s,[o,l]=cx(r,a,i);if(G5(r,o,l),je(l)===0)return t.makeTensorInfo(l,r.dtype,[]);if(t.shouldExecuteOnCPU([r])||r.dtype==="string"){const f=t.texData.get(r.dataId),d=Vme(f.values,o,l,r.shape,r.dtype);return t.makeTensorInfo(l,r.dtype,d)}const{isPacked:u}=t.texData.get(r.dataId),h=W5(r.shape,o,l);if(u||!h){const f=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new J0e(l):new X0e(l),d=[o];return t.runWebGLProgram(f,[r],r.dtype,d)}return t.uploadToGPU(r.dataId),Z0e(r,o,l,t)}const e1e={kernelName:Lb,backendName:"webgl",kernelFunc:tm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t1e=n=>{const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{blockShape:a,crops:i}=s;se(r.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=a.reduce((C,N)=>C*N),l=r1(r.shape,a,o),u=a1(l.length,a.length),h=i1(r.shape,a,o),f=eI(i,a.length),d=tI(h,i,a.length),m=[],g=pt({inputs:{x:r},backend:t,attrs:{shape:l}}),w=Ha({inputs:{x:g},backend:t,attrs:{perm:u}}),v=pt({inputs:{x:w},backend:t,attrs:{shape:h}}),b=tm({inputs:{x:v},backend:t,attrs:{begin:f,size:d}});return m.push(g),m.push(w),m.push(v),m.forEach(C=>t.disposeIntermediateTensorInfo(C)),b},n1e={kernelName:Gw,backendName:"webgl",kernelFunc:t1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s1e(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,weights:a}=e,{size:i}=s,o=t.readSync(r.dataId),l=t.readSync(a.dataId),u=WQ(o,l,a.dtype,a.shape,i);return t.makeTensorInfo([i],a.dtype,u)}const r1e={kernelName:nN,backendName:"webgl",kernelFunc:s1e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a1e=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,i1e=`
  return float(int(a.r) & int(b.r));
`;function o1e(n){const{inputs:e,backend:t}=n,{a:s,b:r}=e,a=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=Qe().getNumber("WEBGL_VERSION");if(t.shouldExecuteOnCPU([s,r])||i===1){const l=t.texData.get(s.dataId).values,u=t.texData.get(r.dataId).values,[h,f]=pme(s.shape,r.shape,l,u,s.dtype),d=t.makeTensorInfo(f,s.dtype),m=t.texData.get(d.dataId);return m.values=h,d}let o;return a?o=new Zp(a1e,s.shape,r.shape,!1):o=new Hf(i1e,s.shape,r.shape),t.runWebGLProgram(o,[s,r],s.dtype)}const l1e={kernelName:Kw,backendName:"webgl",kernelFunc:o1e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A1e(n){const{inputs:e,backend:t}=n,{s0:s,s1:r}=e,a=t.readSync(s.dataId),i=t.readSync(r.dataId),o=sn(Array.from(a),Array.from(i));return t.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const u1e={kernelName:sN,backendName:"webgl",kernelFunc:A1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c1e="return float(a != b);",l6=aa({opSnippet:c1e,cpuKernelImpl:$me,dtype:"bool"}),h1e={kernelName:xb,backendName:"webgl",kernelFunc:l6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w1(n){const{inputs:e,backend:t}=n,{input:s}=e,r=t.texData.get(s.dataId);return Fi({inputs:{x:r.complexTensorInfos.real},backend:t})}const f1e={kernelName:$N,backendName:"webgl",kernelFunc:w1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d1e="return float(int(x));";function p1e(n,e){const t=new NA(n.shape,d1e),s=e.runWebGLProgram(t,[n],"int32");return{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BS(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{dtype:a}=s;if(a==="complex64"){if(r.dtype==="complex64")return Fi({inputs:{x:r},backend:t});const i=Br(r.shape),o=BS({inputs:{x:r},backend:t,attrs:{dtype:"float32"}}),l=vh({inputs:{real:o,imag:i},backend:t});return i.dispose(),t.disposeIntermediateTensorInfo(o),l}if(r.dtype==="complex64"){const i=w1({inputs:{input:r},backend:t}),o=BS({inputs:{x:i},backend:t,attrs:{dtype:a}});return t.disposeIntermediateTensorInfo(i),o}if(!SL(r.dtype,a)){const i=Fi({inputs:{x:r},backend:t});return{dataId:i.dataId,shape:i.shape,dtype:a}}if(t.shouldExecuteOnCPU([r])){const i=t.texData.get(r.dataId).values,[o,l,u]=mme(i,r.shape,r.dtype,a);return t.makeTensorInfo(o,l,u)}if(a==="int32")return p1e(r,t);if(a==="bool"){const i=t.makeTensorInfo([],"bool",ea("bool",1)),l=l6({inputs:{a:r,b:i},backend:t});return t.disposeIntermediateTensorInfo(i),l}throw new Error(`Error in Cast: failed to cast ${r.dtype} to ${a}`)}const m1e={kernelName:l0,backendName:"webgl",kernelFunc:BS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g3="return ceil(x);",g1e=Fn({opSnippet:g3,packedOpSnippet:g3,cpuKernelImpl:gme}),y1e={kernelName:A0,backendName:"webgl",kernelFunc:g1e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w1e{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b1e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x1e(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{clipValueMin:a,clipValueMax:i}=s;let o;Qe().getBool("WEBGL_PACK_CLIP")?o=new b1e(r.shape):o=new w1e(r.shape);const l=[[a],[i]];return t.runWebGLProgram(o,[r],r.dtype,l)}const v1e={kernelName:u0,backendName:"webgl",kernelFunc:x1e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C1e{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y3(n,e){return{dataId:e.dataId,dtype:e.dtype,shape:n.shape}}function B1e(n){const{inputs:e,backend:t}=n,{x:s}=e,r=t.texData.get(s.dataId),a=new C1e(s.shape),i=[y3(s,r.complexTensorInfos.real),y3(s,r.complexTensorInfos.imag)];return t.runWebGLProgram(a,i,i[0].dtype)}const S1e={kernelName:Ww,backendName:"webgl",kernelFunc:B1e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N1e{constructor(e){this.outputShape=[],this.outputShape=FA(e,1),this.variableNames=e.map((i,o)=>`T${o}`);const t=new Array(e.length-1);t[0]=e[0][1];for(let i=1;i<t.length;i++)t[i]=t[i-1]+e[i][1];const s=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<t.length;i++){const o=t[i-1];s.push(`else if (yC < ${t[i]}) setOutput(getT${i}(yR, yC-${o}));`)}const r=t.length,a=t[t.length-1];s.push(`else setOutput(getT${r}(yR, yC-${a}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${s.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I1e{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=FA(e,t);const s=this.outputShape,r=s.length,a=Jn(r),i=Qa("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((w,v)=>`T${v}`);const l=new Array(e.length-1);l[0]=e[0][t];for(let w=1;w<l.length;w++)l[w]=l[w-1]+e[w][t];const u=o[t],h=o.slice(-2),f=o.join();let d=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${f}), vec2(${h.join()}));
        }`;for(let w=1;w<l.length;w++){const v=l[w-1];d+=`
        if (${u} < ${l[w]}  && ${u} >= ${l[w-1]}) {
          return getChannel(
            getT${w}(${o2(o,u,v)}),
            vec2(${o2(h,u,v)}));
        }`}const m=l.length,g=l[l.length-1];d+=`
        return getChannel(
          getT${m}(${o2(o,u,g)}),
          vec2(${o2(h,u,g)}));`,this.userCode=`
      float getValue(${o.map(w=>"int "+w)}) {
        ${d}
      }

      void main() {
        ${a} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[r-1]} = ${i[r-1]} + 1;
        if (${i[r-1]} < ${s[r-1]}) {
          result.g = getValue(${i});
        }

        ${i[r-2]} = ${i[r-2]} + 1;
        if (${i[r-2]} < ${s[r-2]}) {
          result.a = getValue(${i});
        }

        ${i[r-1]} = ${i[r-1]} - 1;
        if (${i[r-2]} < ${s[r-2]} &&
            ${i[r-1]} < ${s[r-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function o2(n,e,t){const s=n.indexOf(e);return n.map((a,i)=>i===s?`${a} - ${t}`:a).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tx(n){const{inputs:e,backend:t}=n,{input:s}=e,r=t.texData.get(s.dataId);return Fi({inputs:{x:r.complexTensorInfos.imag},backend:t})}const E1e={kernelName:vN,backendName:"webgl",kernelFunc:Tx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wg(n,e,t){const s=n[0].dtype;if(s==="complex64"){const m=n.map(C=>w1({inputs:{input:C},backend:t})),g=n.map(C=>Tx({inputs:{input:C},backend:t})),w=wg(m,e,t),v=wg(g,e,t),b=vh({inputs:{real:w,imag:v},backend:t});return m.forEach(C=>t.disposeIntermediateTensorInfo(C)),g.forEach(C=>t.disposeIntermediateTensorInfo(C)),t.disposeIntermediateTensorInfo(w),t.disposeIntermediateTensorInfo(v),b}let r=t.shouldExecuteOnCPU(n);if(s==="string"&&(r=!0),r){const m=n.map(I=>{const $=[-1,je(I.shape.slice(e))];return pt({inputs:{x:I},backend:t,attrs:{shape:$}})}),g=m.map(I=>({vals:t.readSync(I.dataId),shape:I.shape})),w=FA(m.map(I=>I.shape),1),v=m[0].shape[0]===1,b=yme(g,w,s,v),C=FA(n.map(I=>I.shape),e),N=t.makeTensorInfo(C,s,b);return m.forEach(I=>t.disposeIntermediateTensorInfo(I)),N}const a=n.filter(m=>je(m.shape)>0),i=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(a.length===1){const m=i?new NA(n[0].shape,_c):new jc(n[0].shape,_c);return t.runWebGLProgram(m,n,s)}const o=Qe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>o){const m=[];for(let w=0;w<a.length;w+=o){const v=a.slice(w,w+o);m.push(wg(v,e,t))}const g=wg(m,e,t);for(const w of m)t.disposeIntermediateTensorInfo(w);return g}if(i){const m=new I1e(a.map(g=>g.shape),e);return t.runWebGLProgram(m,a,s)}const{tensors2D:l,outShape:u}=k1e(a,e,t),h=new N1e(l.map(m=>m.shape)),f=t.runWebGLProgram(h,l,s);l.forEach(m=>t.disposeIntermediateTensorInfo(m));const d=pt({inputs:{x:f},attrs:{shape:u},backend:t});return t.disposeIntermediateTensorInfo(f),d}function k1e(n,e,t){const s=FA(n.map(a=>a.shape),e);return{tensors2D:n.map(a=>pt({inputs:{x:a},attrs:{shape:[-1,je(a.shape.slice(e))]},backend:t})),outShape:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A6(n){const{inputs:e,backend:t,attrs:s}=n,{axis:r}=s,a=dn(r,e[0].shape)[0],i=e.map(u=>u.shape);Y5(i,a);const o=FA(e.map(u=>u.shape),a);if(je(o)===0)return t.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(u=>je(u.shape)>0);return l.length===1?Fi({inputs:{x:l[0]},backend:t}):wg(l,a,t)}const F1e={kernelName:qw,backendName:"webgl",kernelFunc:A6};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u6{constructor(e,t=!1,s=null,r=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,h=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,m=e.filterWidth,g=Math.floor(e.inChannels/4)*4,w=e.inChannels%4,v=e.dataFormat==="channelsLast",b=v?1:2,C=v?2:3,N=v?3:1;let I="",L="";s&&(r?I=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:a?I=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:I=`
          float activation(float x) {
            ${s}
          }
        `,L="result = activation(result);");const $=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${I}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${i}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${N}];

        ivec2 xRCCorner =
            ivec2(coords[${b}], coords[${C}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${d}; wR++) {
          int xR = xRCorner + wR * ${h};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${m}; wC++) {
            int xC = xCCorner + wC * ${f};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${g}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${v}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${w===1}) {

              if (${v}) {
                dotProd +=
                    getX(batch, xR, xC, ${g}) *
                    getW(wR, wC, ${g}, d2);
              } else {
                dotProd +=
                    getX(batch, ${g}, xR, xC) *
                    getW(wR, wC, ${g}, d2);
              }

            } else if (${w===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2)
              );

              if (${v}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${w===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2),
                getW(wR, wC, ${g} + 2, d2)
              );

              if (${v}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1),
                  getX(batch, xR, xC, ${g} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC),
                  getX(batch, ${g} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${$}
        ${L}
        setOutput(result);
      }
    `}}class T1e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,s=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,h=e.dilationWidth,f=e.filterDepth,d=e.filterHeight,m=e.filterWidth,g=Math.floor(e.inChannels/4)*4,w=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${a}, ${i}, ${o});
      const ivec3 pads = ivec3(${t}, ${s}, ${r});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${d}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${m}; wC++) {
              int xC = xCCorner + wC * ${h};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${g}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${w===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${g}) *
                  getW(wF, wR, wC, ${g}, d2);
              } else if (${w===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${w===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1),
                  getX(batch, xF, xR, xC, ${g} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2),
                  getW(wF, wR, wC, ${g} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c6{constructor(e,t=!1,s=null,r=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ya(this.outputShape.length);const i=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,h=e.filterWidth,f=h;let d=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<h;v++)d+=`
           vec4 xTexelC${v*2};
           int xTexelC${v*2}Ready;
           vec4 xTexelC${v*2+1};
           int xTexelC${v*2+1}Ready;
           vec4 xC${v};`;d+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let v=0;v<h;v++)d+=`
           xTexelC${v*2} = vec4(0.0);
           xTexelC${v*2}Ready = 0;
           xTexelC${v*2+1} = vec4(0.0);
           xTexelC${v*2+1}Ready = 0;
           xC${v} = vec4(0.0);`;d+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let v=0;v<(f+1)/2;v++){const b=v*2;if(d+=`
           xC = xCCorner + ${b*l};
           `,o===1){if(b<h&&(i%2===1?(d+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }
               `,l===1&&b>0?d+=`
                 xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                 `:d+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                   } else {
                     xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                   }
                   `):d+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xC${b} = xTexelC${b};
                 `,b+1<h)){const C=i%2===0?qS(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(d+=`
                   xCOffset = xC + imod(pads[1], 2) + ${C};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                     xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${b+1}.zw = vec2(0.0);
                     }
                     xTexelC${b+1}Ready = 1;
                   }
                   `,l>1?d+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                     } else {
                      xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                     }
                     `:d+=`
                     xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                     `):C===1?d+=`
                     xC${b+1} = xTexelC${b};
                     `:d+=`
                     xCOffset = xC + ${C};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                       xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${b+1}.zw = vec2(0.0);
                       }
                       xTexelC${b+1}Ready = 1;
                     }

                     xC${b+1} = xTexelC${b+1};
                     `}}else b<h&&(i%2===1?(d+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.0);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
               `,b+1<h&&(d+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                 `)):(d+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(
                   xTexelC${b}.xy, xTexelC${b+1}.xy);
               `,b+1<h&&(d+=`
                   xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                 `)));b<h&&(d+=`
             wTexel = getW(r, ${b}, d1, d2);
             dotProd += xC${b}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${b}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,b+1<h&&(d+=`
               wTexel = getW(r, ${b+1}, d1, d2);
               dotProd += xC${b+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${b+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}d+=`
     }
   `,d+=`
     }
   `,d+=`
     }
   `;let m="",g="";s&&(r?m=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${s}
         }`:a?m=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${s}
         }`:m=`vec4 activation(vec4 x) {
           ${s}
         }`,g="result = activation(result);");const w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${m}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${d}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${w}
         ${g}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D1e{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length);const{dataFormat:s}=t,r=za(),a=s==="channelsLast",i=a?1:2,o=a?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let h=0;h<=1;h++)for(let f=0;f<=1;f++)u+=`
          blockIndex = rc.z + ${f};
          pos = rc.y + ${h};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${a}) {
                  innerDims = vec2(d1, ch);
                  result[${h*2+f}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${h*2+f}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${r.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xw(n,e){const t=n.length;return t>=3?e?[...n.slice(0,-3),n[t-3]*n[t-2],n[t-1]]:[...n.slice(0,-3),n[t-3],n[t-2]*n[t-1]]:!e&&t===1&&n[0]>1?[n[0],1]:null}function h6({x:n,filter:e,convInfo:t,backend:s,bias:r=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:o=null}){const l=n.shape,u=s.texData.get(n.dataId),h=t.inChannels,f=l[0]*l[1]*l[2],d=t.outChannels,m=t.dataFormat==="channelsLast",g=!1,w=!1;let v;const b=[];if(a!=null){const I=xw(a.shape,m);I!=null&&(a=pt({inputs:{x:a},backend:s,attrs:{shape:I}}),b.push(a))}if(r!=null){const I=xw(r.shape,m);I!=null&&(r=pt({inputs:{x:r},backend:s,attrs:{shape:I}}),b.push(r))}if(!((f===1||d===1)&&h>r6)&&u.isPacked&&m&&u.texture!=null&&l[2]%2!==0&&Bn(u.shape.slice(-3),l.slice(-3))){const I=l[0]*l[1]*(l[2]+1),L={dataId:n.dataId,shape:[1,I,t.inChannels],dtype:n.dtype},$=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,se(ww(u.shape,L.shape),()=>`packed reshape ${u.shape} to ${L.shape} isn't free`);const H=pt({inputs:{x:e},backend:s,attrs:{shape:[1,t.inChannels,t.outChannels]}});b.push(H);const U=bw({a:L,b:H,backend:s,transposeA:g,transposeB:w,bias:r,activation:o,preluActivationWeights:a,leakyreluAlpha:i}),O=s.texData.get(U.dataId);se(O.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=$,O.shape=t.outShape,v=Fi({inputs:{x:U},backend:s}),v.shape=t.outShape,b.push(U)}else{const I=t.outHeight*t.outWidth,L=pt({inputs:{x:n},backend:s,attrs:{shape:m?[t.batchSize,I,t.inChannels]:[t.batchSize,t.inChannels,I]}}),$=pt({inputs:{x:e},backend:s,attrs:{shape:[1,t.inChannels,t.outChannels]}}),H=bw({a:m?L:$,b:m?$:L,transposeA:!m,transposeB:w,backend:s,bias:r,activation:o,preluActivationWeights:a,leakyreluAlpha:i});v=pt({inputs:{x:H},backend:s,attrs:{shape:t.outShape}}),b.push(L),b.push($),b.push(H)}for(const I of b)s.disposeIntermediateTensorInfo(I);return v}function f6({x:n,filter:e,convInfo:t,backend:s,bias:r=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:o=null}){const{filterWidth:l,filterHeight:u,inChannels:h,outWidth:f,outHeight:d,dataFormat:m}=t,g=m==="channelsLast",w=l*u*h,v=d*f,b=[t.batchSize,w,v],C=!0,N=!1,I=[];if(a!=null){const J=xw(a.shape,g);J!=null&&(a=pt({inputs:{x:a},backend:s,attrs:{shape:J}}),I.push(a))}if(r!=null){const J=xw(r.shape,g);J!=null&&(r=pt({inputs:{x:r},backend:s,attrs:{shape:J}}),I.push(r))}const L=pt({inputs:{x:e},backend:s,attrs:{shape:[1,w,je(e.shape)/w]}});I.push(L);const $=new D1e(b,t),H=[n.shape,[t.padInfo.top,t.padInfo.left],[t.strideHeight,t.strideWidth],[t.dilationHeight,t.dilationWidth],[t.inChannels],[t.filterWidth*t.inChannels],[t.outWidth]],U=s.runWebGLProgram($,[n],"float32",H),O=pt({inputs:{x:U},backend:s,attrs:{shape:b}});I.push(U),I.push(O);const z=r!=null,T=a!=null,R=o==="leakyrelu",W=o?Gg(o,!0):null,K=new s6(g?O.shape:L.shape,g?L.shape:O.shape,g?[t.batchSize,v,t.outChannels]:[t.batchSize,t.outChannels,v],C,N,z,W,T,R),re=g?[O,L]:[L,O];if(r&&re.push(r),T&&re.push(a),R){const J=s.makeTensorInfo([],"float32",hh(i,"float32"));re.push(J),I.push(J)}const P=s.runWebGLProgram(K,re,"float32"),Y=pt({inputs:{x:P},backend:s,attrs:{shape:t.outShape}});I.push(P);for(const J of I)s.disposeIntermediateTensorInfo(J);return Y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L1e(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,filter:a}=e,{strides:i,pad:o,dataFormat:l,dilations:u,dimRoundingMode:h}=s,f=Ou(l),d=Mr(r.shape,a.shape,i,u,o,h,!1,f);let m;if(d.filterHeight===1&&d.filterWidth===1&&d.dilationHeight===1&&d.dilationWidth===1&&d.strideHeight===1&&d.strideWidth===1&&(d.padInfo.type==="SAME"||d.padInfo.type==="VALID"))m=h6({x:r,filter:a,convInfo:d,backend:t});else if(d.strideWidth<=2&&f==="channelsLast"&&Qe().getBool("WEBGL_EXP_CONV")){const w=new c6(d),v=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];m=t.runWebGLProgram(w,[r,a],"float32",v)}else if(Qe().getBool("WEBGL_CONV_IM2COL"))m=f6({x:r,filter:a,convInfo:d,backend:t});else{const w=new u6(d);m=t.runWebGLProgram(w,[r,a],"float32")}const g=pt({inputs:{x:m},backend:t,attrs:{shape:d.outShape}});return t.disposeIntermediateTensorInfo(m),g}const U1e={kernelName:Xw,backendName:"webgl",kernelFunc:L1e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R1e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,s=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${r};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${i?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class $1e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,s=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dataFormat==="channelsLast",o=t-1-e.padInfo.top,l=s-1-e.padInfo.left,u=i?1:2,h=i?2:3,f=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${f}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${h}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class _1e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,s=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${t} - ${a};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${s} - ${i};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${r} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class O1e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,s=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=t-1-e.padInfo.front,u=s-1-e.padInfo.top,h=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${t}; wF++) {
          float dyF = float(dyFCorner + wF) / ${a}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${t} - 1 - wF;

          for (int wR = 0; wR < ${s}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${s} - 1 - wR;

            for (int wC = 0; wC < ${r}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${r} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q1e(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,dy:a}=e,{strides:i,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:h}=s,f=Ou(l),d=Mr(r.shape,h,i,1,o,u,!1,f),m=new R1e(d);return t.runWebGLProgram(m,[r,a],"float32")}const M1e={kernelName:aN,backendName:"webgl",kernelFunc:Q1e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H1e{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=ya(this.outputShape.length);const t=e.filterHeight,s=e.filterWidth,r=t-1-e.padInfo.top,a=s-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${r}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            int wCPerm = ${s} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P1e(n){const{inputs:e,backend:t,attrs:s}=n,{dy:r,filter:a}=e,{inputShape:i,strides:o,pad:l,dataFormat:u,dimRoundingMode:h}=s,f=Ou(u),d=Mr(i,a.shape,o,1,l,h,!1,f);if(Qe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&f==="channelsLast"){const m=[[d.strideHeight,d.strideWidth]],g=new H1e(d);return t.runWebGLProgram(g,[r,a],"float32",m)}else{const m=new $1e(d);return t.runWebGLProgram(m,[r,a],"float32")}}const z1e={kernelName:Yw,backendName:"webgl",kernelFunc:P1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j1e(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,filter:a}=e,{strides:i,pad:o,dilations:l}=s,u=ph(r.shape,a.shape,i,l,o),h=new T1e(u);return t.runWebGLProgram(h,[r,a],"float32")}const V1e={kernelName:Jw,backendName:"webgl",kernelFunc:j1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G1e(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,dy:a}=e,{strides:i,pad:o,filterShape:l}=s,u=ph(r.shape,l,i,1,o),h=new _1e(u);return t.runWebGLProgram(h,[r,a],"float32")}const K1e={kernelName:iN,backendName:"webgl",kernelFunc:G1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W1e(n){const{inputs:e,backend:t,attrs:s}=n,{dy:r,filter:a}=e,{pad:i,strides:o,inputShape:l}=s,u=ph(l,a.shape,o,1,i),h=new O1e(u);return t.runWebGLProgram(h,[r,a],"float32")}const q1e={kernelName:oN,backendName:"webgl",kernelFunc:W1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X1e=em+`
  return cos(x);
`,Y1e=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Jf}
  return result;
`,J1e=Fn({opSnippet:X1e,packedOpSnippet:Y1e}),Z1e={kernelName:c0,backendName:"webgl",kernelFunc:J1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eye=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,tye=Fn({opSnippet:eye}),nye={kernelName:h0,backendName:"webgl",kernelFunc:tye};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sye{constructor(e,t,s,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,o,l,u]=e,[h]=t,[f,d]=s;this.outputShape=[h,f,d,u];const m=r==="bilinear"?1:0,[g,w]=[`${o-1}.0`,`${l-1}.0`],[v,b,C]=f>1?[`${(o-1)/(f-1)}`,"(y2-y1) * height_ratio",`y1*${g} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${g}`],[N,I,L]=d>1?[`${(l-1)/(d-1)}`,"(x2-x1) * width_ratio",`x1*${w} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${w}`];this.userCode=`
      const float height_ratio = float(${v});
      const float width_ratio = float(${N});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${b};
        float width_scale = ${I};

        float in_y = ${C};
        if( in_y < 0.0 || in_y > ${g} ) {
          setOutput(float(${a}));
          return;
        }
        float in_x = ${L};
        if( in_x < 0.0 || in_x > ${w} ) {
          setOutput(float(${a}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${m} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rye=n=>{const{inputs:e,backend:t,attrs:s}=n,{image:r,boxes:a,boxInd:i}=e,{cropSize:o,method:l,extrapolationValue:u}=s,h=new sye(r.shape,a.shape,o,l,u);return t.runWebGLProgram(h,[r,a,i],"float32")},aye={kernelName:AN,backendName:"webgl",kernelFunc:rye};var Wg;(function(n){n.Prod="*",n.Sum="+"})(Wg||(Wg={}));class w3{constructor(e,t,s,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const a=this.outputShape.length,i=this.op===Wg.Prod?"1.0":"0.0",o=s?i:`getX(${b3(a,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",h="";s?(u=r?`end != ${l-1}`:"end != 0",h=r?"end + 1":"end - 1"):(u=r?`end + pow2 < ${l}`:"end >= pow2",h=r?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Jn(a)} coords = getOutputCoords();
        int end = ${x3(a,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${h};
          ${x3(a,"coords",this.op)} = idx;
          val ${this.op}= getX(${b3(a,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function b3(n,e,t){if(n===1)return`${e}`;if(n===2)return`${e}.x, ${e}.y`;if(n===3)return`${e}.x, ${e}.y, ${e}.z`;if(n===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${t} for rank ${n} is not yet supported`)}function x3(n,e,t){if(n===1)return`${e}`;if(n===2)return`${e}.y`;if(n===3)return`${e}.z`;if(n===4)return`${e}.w`;throw new Error(`Cumulative ${t} for rank ${n} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d6(n,e,t,s,r,a){const i=e.shape.length,o=Us([s],i);let l=e;o!=null&&(l=Ha({inputs:{x:e},backend:t,attrs:{perm:o}}));const u=Js(1,i)[0];if(u!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${s}`);const h=l.shape[u];let f=Fi({inputs:{x:l},backend:t});for(let d=0;d<=Math.ceil(Math.log2(h))-1;d++){const m=new w3(n,l.shape,!1,a),g=[[d]],w=f;f=t.runWebGLProgram(m,[f],f.dtype,g),t.disposeIntermediateTensorInfo(w)}if(r){const d=new w3(n,l.shape,r,a),m=f;f=t.runWebGLProgram(d,[f],f.dtype),t.disposeIntermediateTensorInfo(m)}if(o!=null){const d=mh(o),m=Ha({inputs:{x:f},backend:t,attrs:{perm:d}});return t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(l),m}return f}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iye(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a,exclusive:i,reverse:o}=s;return d6(Wg.Prod,r,t,a,i,o)}const oye={kernelName:lN,backendName:"webgl",kernelFunc:iye};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lye(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a,exclusive:i,reverse:o}=s;return d6(Wg.Sum,r,t,a,i,o)}const Aye={kernelName:Zw,backendName:"webgl",kernelFunc:lye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uye(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,weights:a}=e,{size:i,binaryOutput:o}=s;if(r.shape.length===1){const l=t.readSync(r.dataId),u=t.readSync(a.dataId),h=WQ(l,u,a.dtype,a.shape,i);return t.makeTensorInfo([i],a.dtype,h)}else if(r.shape.length===2){const l=t.bufferSync(r),u=t.bufferSync(a),h=dme(l,u,i,o);return t.makeTensorInfo(h.shape,a.dtype,h.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${r.shape.length}.`)}const cye={kernelName:uN,backendName:"webgl",kernelFunc:uye};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hye{constructor(e,t,s){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=s,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${t};
      int offset_h = imod(h, ${t});
      int in_w = w / ${t};
      int offset_w = imod(w, ${t});
      int offset_d = (offset_h * ${t} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fye(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{blockSize:a,dataFormat:i}=s,o=r.shape[0],l=i==="NHWC"?r.shape[1]:r.shape[2],u=i==="NHWC"?r.shape[2]:r.shape[3],h=i==="NHWC"?r.shape[3]:r.shape[1],f=l*a,d=u*a,m=h/(a*a),g=i==="NHWC"?[o,f,d,m]:[o,m,f,d],w=new hye(g,a,i);return t.runWebGLProgram(w,[r],r.dtype)}const dye={kernelName:cN,backendName:"webgl",kernelFunc:fye};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p6{constructor(e,t=!1,s=null,r=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ya(this.outputShape.length);const i=e.filterHeight,o=e.filterWidth,l=e.outChannels/e.inChannels;let u="",h="";s&&(r?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:a?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:u=`
          float activation(float x) {
            ${s}
          }
        `,h="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${f}
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m6{constructor(e,t=!1,s=null,r=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ya(this.outputShape.length);const i=e.outChannels/e.inChannels,o=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,d=f;let m=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<f;b++)m+=`
          vec4 xTexelC${b*2};
          int xTexelC${b*2}Ready;
          vec4 xTexelC${b*2+1};
          int xTexelC${b*2+1}Ready;
          vec4 xC${b};`;m+=`
    for (int r = 0; r < ${h}; r++) {
      `;for(let b=0;b<f;b++)m+=`
          xTexelC${b*2} = vec4(0.0);
          xTexelC${b*2}Ready = 0;
          xTexelC${b*2+1} = vec4(0.0);
          xTexelC${b*2+1}Ready = 0;
          xC${b} = vec4(0.0);`;m+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let b=0;b<(d+1)/2;b++){const C=b*2;if(m+=`
          xC = xCCorner + ${C*u};
          `,l===1){if(C<f&&(o%2===1?(m+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }
              `,u===1&&C>0?m+=`
                xC${C} = vec4(xTexelC${C-2}.zw, xTexelC${C}.xy);
                `:m+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${C} = vec4(previous.zw, xTexelC${C}.xy);
                  } else {
                    xC${C} = vec4(0.0, 0.0, xTexelC${C}.xy);
                  }
                  `):m+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }

                xC${C} = xTexelC${C};
                `,C+1<f)){const N=o%2===0?qS(u):u;u%2===0&&o%2===1||u%2!==0&&o%2!==1?(m+=`
                  xCOffset = xC + imod(pads[1], 2) + ${N};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                    xTexelC${C+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${C+1}.zw = vec2(0.0);
                    }
                    xTexelC${C+1}Ready = 1;
                  }
                  `,u>1?m+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${C+1} = vec4(previous.zw, xTexelC${C+1}.xy);
                    } else {
                     xC${C+1} = vec4(0.0, 0.0, xTexelC${C+1}.xy);
                    }
                    `:m+=`
                    xC${C+1} = vec4(xTexelC${C}.zw, xTexelC${C+1}.xy);
                    `):N===1?m+=`
                    xC${C+1} = xTexelC${C};
                    `:m+=`
                    xCOffset = xC + ${N};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                      xTexelC${C+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${C+1}.zw = vec2(0.0);
                      }
                      xTexelC${C+1}Ready = 1;
                    }

                    xC${C+1} = xTexelC${C+1};
                    `}}else C<f&&(o%2===1?(m+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${C+1}Ready == 0) {
                  xTexelC${C+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${C+1}.zw = vec2(0.0);
                  }
                  xTexelC${C+1}Ready = 1;
                }

                xC${C} = vec4(xTexelC${C}.zw, xTexelC${C+1}.zw);
              `,C+1<f&&(m+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${C+1} = vec4(xTexelC${C+1}.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                  xTexelC${C+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${C+1}.zw = vec2(0.);
                  }
                  xTexelC${C+1}Ready = 1;
                }

                xC${C} = vec4(
                  xTexelC${C}.xy, xTexelC${C+1}.xy);
              `,C+1<f&&(m+=`
                  xC${C+1} = vec4(xTexelC${C}.zw, xTexelC${C+1}.zw);
                `)));C<f&&(m+=`
            wTexel = getW(r, ${C}, d1, q);
            dotProd += xC${C} * vec4(wTexel.xz, wTexel.xz);
          `,C+1<f&&(m+=`
              wTexel = getW(r, ${C+1}, d1, q);
              dotProd += xC${C+1} * vec4(wTexel.xz, wTexel.xz);
            `))}m+=`
    }
  `,m+=`
      }
    `;let g="",w="";s&&(r?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:a?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:g=`vec4 activation(vec4 x) {
          ${s}
        }`,w="result = activation(result);");const v=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${g}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${m}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${v}
        ${w}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pye(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,filter:a}=e,{strides:i,pad:o,dilations:l,dimRoundingMode:u}=s;let h=l;h==null&&(h=[1,1]),se(na(i,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${h}'`);const f=Mr(r.shape,a.shape,i,h,o,u,!0);let d;Qe().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?d=new m6(f):d=new p6(f);const m=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return t.runWebGLProgram(d,[r,a],"float32",m)}const mye={kernelName:eb,backendName:"webgl",kernelFunc:pye};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gye{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,s=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${r};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class yye{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,s=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,o=s-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wye(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,dy:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:u,filterShape:h}=s,f=Mr(r.shape,h,i,o,l,u,!0),d=new gye(f);return t.runWebGLProgram(d,[r,a],"float32")}const bye={kernelName:hN,backendName:"webgl",kernelFunc:wye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xye(n){const{inputs:e,backend:t,attrs:s}=n,{dy:r,filter:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:u,inputShape:h}=s,f=Mr(h,a.shape,i,o,l,u,!0),d=new yye(f);return t.runWebGLProgram(d,[r,a],"float32")}const vye={kernelName:fN,backendName:"webgl",kernelFunc:xye};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cye{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bye(n){const{inputs:e,backend:t}=n,{x:s}=e,r=[...s.shape,...s.shape],a=je(s.shape),i=pt({inputs:{x:s},backend:t,attrs:{shape:[a]}}),o=new Cye(a),l=t.runWebGLProgram(o,[i],i.dtype),u=pt({inputs:{x:l},backend:t,attrs:{shape:r}});return t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(l),u}const Sye={kernelName:dN,backendName:"webgl",kernelFunc:Bye};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nye{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:s,padInfo:r,strideHeight:a,strideWidth:i,filterHeight:o,filterWidth:l,dilationHeight:u,dilationWidth:h}=e,{top:f,left:d}=r;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${i});
      const ivec2 pads = ivec2(${f}, ${d});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${t}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${h};

              if (wIn >= 0 && wIn < ${s}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iye(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,filter:a}=e,{strides:i,pad:o,dilations:l}=s,u=Y0(r.shape,a.shape,i,o,"NHWC",l);let h;const f=new Nye(u);h=t.runWebGLProgram(f,[r,a],"float32");const d=pt({inputs:{x:h},backend:t,attrs:{shape:u.outShape}});return t.disposeIntermediateTensorInfo(h),d}const Eye={kernelName:tb,backendName:"webgl",kernelFunc:Iye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kye(n){const{inputs:e,backend:t,attrs:s}=n,{equation:r}=s,a=e,{allDims:i,summedDims:o,idDims:l}=AI(r,a.length);cI(i.length,l,a);const{path:u,steps:h}=hI(o,l),f=h.length;let d=null,m=i.length;const g=[];for(let w=0;w<f;++w){for(const v of h[w]){const{permutationIndices:b,expandDims:C}=uI(m,l[v]);let N;fI(b)?N=a[v]:(N=Ha({inputs:{x:a[v]},backend:t,attrs:{perm:b}}),g.push(N));const I=N.shape.slice();for(let L=0;L<C.length;++L)I.splice(C[L],0,1);Bn(N.shape,I)||(N=pt({inputs:{x:N},backend:t,attrs:{shape:I}}),g.push(N)),d===null?d=N:(d=eE({inputs:{a:N,b:d},backend:t}),g.push(d))}w<f-1&&(u[w]>=0&&(d=Fx({inputs:{x:d},backend:t,attrs:{axis:u[w]-(i.length-m),keepDims:!1}}),g.push(d)),m--)}for(const w of g)w!==d&&t.disposeIntermediateTensorInfo(w);return d}const Fye={kernelName:pN,backendName:"webgl",kernelFunc:kye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tye="return (x >= 0.0) ? x : (exp(x) - 1.0);",Dye=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Lye=Fn({opSnippet:Tye,packedOpSnippet:Dye}),Uye={kernelName:d0,backendName:"webgl",kernelFunc:Lye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rye="return (b >= 0.0) ? a : a * (b + 1.0);",$ye=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,_ye=n=>{const{inputs:e,backend:t}=n,{dy:s,y:r}=e,a=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Zp($ye,s.shape,r.shape):new Hf(Rye,s.shape,r.shape);return t.runWebGLProgram(a,[s,r],s.dtype)},Oye={kernelName:mN,backendName:"webgl",kernelFunc:_ye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qye=`
  return vec4(equal(a, b));
`,Mye="return float(a == b);",Hye=aa({opSnippet:Mye,packedOpSnippet:Qye,dtype:"bool",cpuKernelImpl:wme}),Pye={kernelName:nb,backendName:"webgl",kernelFunc:Hye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zye=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${nI};
  float a1 = ${sI};
  float a2 = ${rI};
  float a3 = ${aI};
  float a4 = ${iI};
  float a5 = ${oI};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,jye=Fn({opSnippet:zye}),Vye={kernelName:p0,backendName:"webgl",kernelFunc:jye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gye=em+`
  return exp(x);
`,Kye=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,g6=Fn({opSnippet:Gye,packedOpSnippet:Kye,cpuKernelImpl:bme,dtype:"float32"}),Wye={kernelName:m0,backendName:"webgl",kernelFunc:g6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SS(n){const{inputs:e,attrs:t,backend:s}=n,{dim:r}=t,{input:a}=e,i=a.shape.length,o=a.shape.slice();let l=r;return r<0&&(se(-(i+1)<=r,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+r+1),o.splice(l,0,1),pt({inputs:{x:a},backend:s,attrs:{shape:o}})}const qye={kernelName:sb,backendName:"webgl",kernelFunc:SS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v3="return exp(x) - 1.0;",Xye=Fn({opSnippet:v3,packedOpSnippet:v3,cpuKernelImpl:xme}),Yye={kernelName:g0,backendName:"webgl",kernelFunc:Xye};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C3{constructor(e,t,s){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const a=s?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=s?`${r}.0`:"1.0";let o;if(e==="real")o="return real * expR - imag * expI;";else if(e==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${a};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${r});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${r}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y6(n,e,t){const s=t.texData.get(n.dataId),r=je(n.shape),a=n.shape[n.shape.length-1],i=r/a,o=pt({inputs:{x:n},backend:t,attrs:{shape:[i,a]}}),l=o.shape,u=new C3("real",l,e),h=new C3("imag",l,e),f=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:l},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:l}],d=t.runWebGLProgram(u,f,"float32"),m=t.runWebGLProgram(h,f,"float32"),g=vh({inputs:{real:d,imag:m},backend:t});t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(m);const w=pt({inputs:{x:g},backend:t,attrs:{shape:n.shape}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(g),w}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jye(n){const{inputs:e,backend:t}=n,{input:s}=e;return y6(s,!1,t)}const Zye={kernelName:gN,backendName:"webgl",kernelFunc:Jye};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e2e{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b1(n){const{backend:e,attrs:t}=n,{shape:s,value:r}=t;let{dtype:a}=t;if(a=a||Qp(r),a==="string"){const i=Xs(a,je(s));return i.fill(r),e.makeTensorInfo(s,a,i)}else{const i=new e2e(s,r),o=[[r]];return e.runWebGLProgram(i,[],a,o)}}const t2e={kernelName:yN,backendName:"webgl",kernelFunc:b1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n2e{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${t} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${t}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s2e={kernelName:wN,backendName:"webgl",kernelFunc:({inputs:n,backend:e})=>{const{image:t}=n,s=e,r=new n2e(t.shape);return s.runWebGLProgram(r,[t],t.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B3="return floor(x);",r2e=Fn({opSnippet:B3,packedOpSnippet:B3,cpuKernelImpl:vme}),a2e={kernelName:y0,backendName:"webgl",kernelFunc:r2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i2e=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,o2e=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,l2e=aa({opSnippet:i2e,packedOpSnippet:o2e,dtype:"int32"}),A2e={kernelName:w0,backendName:"webgl",kernelFunc:l2e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u2e{constructor(e){this.variableNames=["A"];const t=za(),[s,r]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${s}.0);

        vec4 values = ${t.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c2e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=za(),[s,r]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${r}.0, ${s}.0);
            vec4 values = ${t.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h2e={kernelName:UB,backendName:"webgl",kernelFunc:f2e};let Xd,HC=Qe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function f2e(n){const{inputs:e,backend:t,attrs:s}=n;let{pixels:r}=e;const{numChannels:a}=s,i=typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement,[l,u]=i?[r.videoWidth,r.videoHeight]:[r.width,r.height],h=[u,l],f=[u,l,a];if(o||i){const w=Qe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Xd==null||w!==HC)&&(HC=w,Xd=document.createElement("canvas").getContext("2d",{willReadFrequently:HC})),Xd.canvas.width=l,Xd.canvas.height=u,Xd.drawImage(r,0,0,l,u),r=Xd.canvas}const d=t.makeTensorInfo(h,"int32");t.texData.get(d.dataId).usage=eo.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(d.dataId),r);const m=Qe().getBool("WEBGL_PACK")?new c2e(f):new u2e(f),g=t.runWebGLProgram(m,[d],"int32");return t.disposeData(d.dataId),g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d2e(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:u,dataFormat:h,dilations:f,dimRoundingMode:d,activation:m,leakyreluAlpha:g}=s,w=Ou(h),v=Mr(r.shape,a.shape,l,f,u,d,!1,w);let b;const C=[],N=i!=null,I=o!=null,L=m==="leakyrelu",$=()=>{const U=[r,a],O=(z,T)=>{if(T==="NCHW"&&z.shape.length===1&&z.shape[0]!==1){const R=pt({inputs:{x:z},backend:t,attrs:{shape:[z.shape[0],1,1]}});return C.push(R),R}return z};if(N&&U.push(O(i,h)),I&&U.push(O(o,h)),L){const z=t.makeTensorInfo([],"float32",hh(g,"float32"));U.push(z),C.push(z)}return U};if(v.filterHeight===1&&v.filterWidth===1&&v.dilationHeight===1&&v.dilationWidth===1&&v.strideHeight===1&&v.strideWidth===1&&(v.padInfo.type==="SAME"||v.padInfo.type==="VALID"))b=h6({x:r,filter:a,convInfo:v,backend:t,bias:i,activation:m,preluActivationWeights:o,leakyreluAlpha:g});else if(v.strideWidth<=2&&w==="channelsLast"&&Qe().getBool("WEBGL_EXP_CONV")){const U=m?Gg(m,!0):null,O=new c6(v,N,U,I,L),z=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],T=$();b=t.runWebGLProgram(O,T,"float32",z)}else if(Qe().getBool("WEBGL_CONV_IM2COL"))b=f6({x:r,filter:a,convInfo:v,backend:t,bias:i,activation:m,preluActivationWeights:o,leakyreluAlpha:g});else{const U=m?Gg(m,!1):null,O=new u6(v,N,U,I,L),z=$();b=t.runWebGLProgram(O,z,"float32")}const H=pt({inputs:{x:b},backend:t,attrs:{shape:v.outShape}});return C.push(b),C.forEach(U=>t.disposeIntermediateTensorInfo(U)),H}const p2e={kernelName:X2,backendName:"webgl",kernelFunc:d2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m2e(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:u,dilations:h,dimRoundingMode:f,activation:d,leakyreluAlpha:m}=s,g=[];let w=h;w==null&&(w=[1,1]),se(na(l,w),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${w}'`);const v=Mr(r.shape,a.shape,l,w,u,f,!0),b=Qe().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,C=d?Gg(d,b):null,N=[r,a],I=i!=null,L=o!=null,$=d==="leakyrelu";if(I&&N.push(i),L&&N.push(o),$){const z=t.makeTensorInfo([],"float32",hh(m,"float32"));N.push(z),g.push(z)}let H;b?H=new m6(v,I,C,L,$):H=new p6(v,I,C,L,$);const U=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],O=t.runWebGLProgram(H,N,"float32",U);return g.forEach(z=>t.disposeIntermediateTensorInfo(z)),O}const g2e={kernelName:Y2,backendName:"webgl",kernelFunc:m2e};class y2e{constructor(e,t,s,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=s;const a=Jn(s.length);let i=`
    int index;`;for(let o=0;o<this.sliceDim;o++)i+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${a} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w2e(n){const{inputs:e,backend:t}=n,{params:s,indices:r}=e,a=r.shape,i=a[a.length-1],o=je(s.shape),[l,u,h,f]=V5(s,r),d=pt({inputs:{x:r},backend:t,attrs:{shape:[u,i]}}),m=pt({inputs:{x:s},backend:t,attrs:{shape:[je(s.shape)/h,h]}});if(t.shouldExecuteOnCPU([s,r])||s.dtype==="string"){const b=t.readSync(r.dataId),C=t.bufferSync(s),N=Cme(b,C,s.dtype,u,i,h,f,s.shape,o);return t.makeTensorInfo(l,s.dtype,N.values)}const g=new y2e(i,f,[u,h],s.shape),w=t.runWebGLProgram(g,[m,d],m.dtype),v=pt({inputs:{x:w},backend:t,attrs:{shape:l}});return t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(w),v}const b2e={kernelName:bN,backendName:"webgl",kernelFunc:w2e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x2e{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const s=Jn(this.rank),r=v2e(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${r}));
      }
    `}}function v2e(n,e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[];for(let r=0;r<n.length;r++)r===2?s.push("index"):s.push(`${t[r]}`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w6(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,indices:a}=e,{axis:i,batchDims:o}=s,l=dn(i,r.shape)[0];if(Qe().get("DEBUG")){const C=t.readSync(a.dataId),N=r.shape[l];for(let I=0;I<C.length;++I){const L=C[I];se(L<=N-1&&L>=0,()=>`GatherV2: the index value ${L} is not in [0, ${N-1}]`)}}const u=pI(r,a,l,o),h=je(a.shape),f=[],d=pt({inputs:{x:r},backend:t,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),m=pt({inputs:{x:a},backend:t,attrs:{shape:[u.batchSize,h/u.batchSize]}});f.push(d),f.push(m);const g=[u.batchSize,u.outerSize,h/u.batchSize,u.sliceSize];if(t.shouldExecuteOnCPU([r,a])||r.dtype==="string"){const C=t.bufferSync(m),N=t.bufferSync(d),I=Bme(N,C,g);return f.forEach(L=>t.disposeIntermediateTensorInfo(L)),t.makeTensorInfo(u.outputShape,I.dtype,I.values)}const w=new x2e(d.shape,g),v=t.runWebGLProgram(w,[d,m],d.dtype);f.push(v);const b=pt({inputs:{x:v},backend:t,attrs:{shape:u.outputShape}});return f.forEach(C=>t.disposeIntermediateTensorInfo(C)),b}const C2e={kernelName:ab,backendName:"webgl",kernelFunc:w6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B2e="return float(a > b);",S2e=`
  return vec4(greaterThan(a, b));
`,N2e=aa({opSnippet:B2e,packedOpSnippet:S2e,cpuKernelImpl:Sme,dtype:"bool"}),I2e={kernelName:ib,backendName:"webgl",kernelFunc:N2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E2e="return float(a >= b);",k2e=`
  return vec4(greaterThanEqual(a, b));
`,F2e=aa({opSnippet:E2e,packedOpSnippet:k2e,dtype:"bool",cpuKernelImpl:Nme}),T2e={kernelName:b0,backendName:"webgl",kernelFunc:F2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2e(n){const{inputs:e,backend:t}=n,{input:s}=e;return y6(s,!0,t)}const L2e={kernelName:xN,backendName:"webgl",kernelFunc:D2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U2e="return float(!isnan(x) && !isinf(x));",R2e=Fn({opSnippet:U2e,dtype:"bool"}),$2e={kernelName:v0,backendName:"webgl",kernelFunc:R2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _2e="return float(isinf(x));",O2e=Fn({opSnippet:_2e,dtype:"bool"}),Q2e={kernelName:C0,backendName:"webgl",kernelFunc:O2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M2e="return float(isnan(x));",H2e=Fn({opSnippet:M2e,dtype:"bool"}),P2e={kernelName:B0,backendName:"webgl",kernelFunc:H2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z2e="return float(a < b);",j2e=`
  return vec4(lessThan(a, b));
`,V2e=aa({opSnippet:z2e,packedOpSnippet:j2e,cpuKernelImpl:Ime,dtype:"bool"}),G2e={kernelName:lb,backendName:"webgl",kernelFunc:V2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K2e="return float(a <= b);",W2e=`
  return vec4(lessThanEqual(a, b));
`,q2e=aa({opSnippet:K2e,packedOpSnippet:W2e,cpuKernelImpl:Eme,dtype:"bool"}),X2e={kernelName:Ab,backendName:"webgl",kernelFunc:q2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y2e(n){const{backend:e,attrs:t}=n,{start:s,stop:r,num:a}=t,i=kme(s,r,a);return e.makeTensorInfo([i.length],"float32",i)}const J2e={kernelName:CN,backendName:"webgl",kernelFunc:Y2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z2e=em+`
  return x < 0.0 ? 0./0. : log(x);
`,ewe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,twe=Fn({opSnippet:Z2e,packedOpSnippet:ewe,cpuKernelImpl:Fme}),nwe={kernelName:S0,backendName:"webgl",kernelFunc:twe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const swe=em+`
  return log(1.0 + x);
`,rwe=Fn({opSnippet:swe}),awe={kernelName:N0,backendName:"webgl",kernelFunc:rwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iwe="return float(a >= 1.0 && b >= 1.0);",owe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,lwe=aa({opSnippet:iwe,packedOpSnippet:owe,dtype:"bool"}),Awe={kernelName:ub,backendName:"webgl",kernelFunc:lwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uwe="return float(!(x >= 1.0));",cwe=Fn({opSnippet:uwe}),hwe={kernelName:cb,backendName:"webgl",kernelFunc:cwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fwe="return float(a >= 1.0 || b >= 1.0);",dwe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,pwe=aa({opSnippet:fwe,packedOpSnippet:dwe,dtype:"bool"}),mwe={kernelName:hb,backendName:"webgl",kernelFunc:pwe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gwe{constructor(e,t,s,r,a){this.variableNames=["x"],this.outputShape=[];const i=t,o=e[3]-1;this.outputShape=e;let l;const u=`float(${s}) + float(${r}) * sum`;a===.5?l=`inversesqrt(${u})`:a===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ywe{constructor(e,t,s,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=t,o=e[3]-1;this.outputShape=e;let l;const u=`float(${s}) + float(${r}) * sum`;a===.5?l=`inversesqrt(${u})`:a===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wwe=n=>{const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{depthRadius:a,bias:i,alpha:o,beta:l}=s,u=Qe().getBool("WEBGL_PACK_NORMALIZATION")?new ywe(r.shape,a,i,o,l):new gwe(r.shape,a,i,o,l);return t.runWebGLProgram(u,[r],r.dtype)},bwe={kernelName:fb,backendName:"webgl",kernelFunc:wwe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xwe{constructor(e,t,s,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=s,this.alpha=r,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${t})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${t} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${r}) * norm + float(${s});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${r})
                * float(${a})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${a});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vwe=n=>{const{inputs:e,backend:t,attrs:s}=n,{x:r,y:a,dy:i}=e,{depthRadius:o,bias:l,alpha:u,beta:h}=s,f=new xwe(r.shape,o,l,u,h);return t.runWebGLProgram(f,[r,a,i],r.dtype)},Cwe={kernelName:BN,backendName:"webgl",kernelFunc:vwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bwe(n,e,t,s){const r=je(e),i=je(n.shape)/r,o=pt({inputs:{x:n},attrs:{shape:[i,r]},backend:s}),l=Zf(o,n.dtype,"max",s),u=pt({inputs:{x:l},attrs:{shape:t},backend:s});return s.disposeIntermediateTensorInfo(o),s.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b6(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{reductionIndices:a,keepDims:i}=s,o=r.shape.length,l=dn(a,r.shape);let u=l;const h=Us(u,o),f=h!=null,d=t.shouldExecuteOnCPU([r]);let m=r;if(f){if(d){const N=t.texData.get(m.dataId).values,I=new Array(o);for(let H=0;H<I.length;H++)I[H]=r.shape[h[H]];const L=JI(N,r.shape,r.dtype,h,I);m=t.makeTensorInfo(I,r.dtype);const $=t.texData.get(m.dataId);$.values=L}else m=kx(r,h,t);u=Js(u.length,o)}sa("max",u,o);const[g,w]=Hr(m.shape,u);let v=g;i&&(v=Ys(g,l));let b;if(d){const N=t.texData.get(m.dataId).values,I=Tme(N,je(w),v,r.dtype);b=t.makeTensorInfo(v,r.dtype);const L=t.texData.get(b.dataId);L.values=I}else b=Bwe(m,w,v,t);return f&&t.disposeIntermediateTensorInfo(m),b}const Swe={kernelName:db,backendName:"webgl",kernelFunc:b6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nwe=ZI+`
  return max(a, b);
`,Iwe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Jf+`
  return result;
`,Ewe=aa({opSnippet:Nwe,packedOpSnippet:Iwe,cpuKernelImpl:Dme}),kwe={kernelName:I0,backendName:"webgl",kernelFunc:Ewe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fwe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e;g1(r,"maxPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=s,u=1;se(na(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const h=Mo(r.shape,a,i,u,o,l);if(h.filterWidth===1&&h.filterHeight===1&&Bn(h.inShape,h.outShape))return Fi({inputs:{x:r},backend:t});const f=new Kg(h,"max",!1);return t.runWebGLProgram(f,[r],r.dtype)}const Twe={kernelName:pb,backendName:"webgl",kernelFunc:Fwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dwe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{filterSize:a,strides:i,pad:o,dataFormat:l,dimRoundingMode:u}=s,h=[1,1,1],f=_u(r.shape,a,i,h,o,u,l),d=new tE(f,"max",!1);return t.runWebGLProgram(d,[r],r.dtype)}const Lwe={kernelName:mb,backendName:"webgl",kernelFunc:Dwe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uwe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,s=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=a-1-e.padInfo.top,l=i-1-e.padInfo.left,u=a*i-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${a};
          wR += ${r}) {
          float dyR = float(dyRCorner + wR) / ${t}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class Rwe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,s=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=l-1-e.padInfo.front,d=u-1-e.padInfo.top,m=h-1-e.padInfo.left,g=l*u*h-1;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${d}, ${m});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${a}) {
          float dyD = float(dyDCorner + wD) / ${t}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${r}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${g} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${h} +
                  wR * ${h} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $we(n){const{inputs:e,backend:t,attrs:s}=n,{dy:r,input:a}=e,i=a,{filterSize:o,strides:l,pad:u,dimRoundingMode:h}=s,f=[1,1,1],d=_u(i.shape,o,l,f,u,h),m=new tE(d,"max",!0),g=t.runWebGLProgram(m,[i],i.dtype),w=new Rwe(d),v=t.runWebGLProgram(w,[r,g],i.dtype);return t.disposeIntermediateTensorInfo(g),v}const _we={kernelName:NN,backendName:"webgl",kernelFunc:$we};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Owe(n){const{inputs:e,backend:t,attrs:s}=n,{dy:r,input:a,output:i}=e,o=a;g1([a,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:h,dimRoundingMode:f}=s,d=Mo(o.shape,l,u,1,h,f),m=!0,g=new Kg(d,"max",m),w=t.runWebGLProgram(g,[o],o.dtype),v=new Uwe(d),b=t.runWebGLProgram(v,[r,w],o.dtype);return t.disposeIntermediateTensorInfo(w),b}const Qwe={kernelName:SN,backendName:"webgl",kernelFunc:Owe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mwe(n,e,t,s){let r=new Kg(t,"max",!1);const a=s.runWebGLProgram(r,[n],"float32");r=new Kg(t,"max",!0,!0,e);const i=s.runWebGLProgram(r,[n],"float32");return[a,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hwe={kernelName:IN,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:s}=n,{filterSize:r,strides:a,pad:i,includeBatchInIndex:o}=e,l=t;se(s.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.shape.length}.`);const u=[1,1];se(na(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const h=Mo(s.shape,r,a,u,i),[f,d]=Mwe(s,o,h,l);return[f,d]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pwe(n,e,t,s){const r=je(e),i=je(n.shape)/r,o=pt({inputs:{x:n},attrs:{shape:[i,r]},backend:s}),l=Zf(o,"float32","mean",s),u=pt({inputs:{x:l},attrs:{shape:t},backend:s});return s.disposeIntermediateTensorInfo(o),s.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zwe={kernelName:gb,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:s}=n,{keepDims:r,axis:a}=e,i=t,o=s.shape.length,l=dn(a,s.shape);let u=l;const h=Us(u,o),f=h!=null,d=i.shouldExecuteOnCPU([s]),m=[];let g=s;if(f){if(d){const I=i.texData.get(g.dataId).values,L=new Array(o);for(let U=0;U<L.length;U++)L[U]=s.shape[h[U]];const $=JI(I,s.shape,s.dtype,h,L);g=i.makeTensorInfo(L,s.dtype);const H=i.texData.get(g.dataId);H.values=$}else g=kx(s,h,i);m.push(g),u=Js(u.length,o)}sa("sum",u,o);const[w,v]=Hr(g.shape,u);let b=w;r&&(b=Ys(w,l));const C=Pwe(g,v,b,i);for(const N of m)i.disposeIntermediateTensorInfo(N);return C}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jwe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a,keepDims:i}=s,o=r.shape.length,l=dn(a,r.shape);let u=l;const h=Us(u,o);let f=r;h!=null&&(f=Ha({inputs:{x:r},backend:t,attrs:{perm:h}}),u=Js(u.length,r.shape.length)),sa("min",u,o);const[d,m]=Hr(f.shape,u),g=je(m),w=pt({inputs:{x:f},backend:t,attrs:{shape:[-1,g]}}),v=Zf(w,w.dtype,"min",t);let b;if(i){const C=Ys(d,l);b=pt({inputs:{x:v},backend:t,attrs:{shape:C}})}else b=pt({inputs:{x:v},backend:t,attrs:{shape:d}});return t.disposeIntermediateTensorInfo(w),t.disposeIntermediateTensorInfo(v),h!=null&&t.disposeIntermediateTensorInfo(f),b}const Vwe={kernelName:yb,backendName:"webgl",kernelFunc:jwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gwe=ZI+`
  return min(a, b);
`,Kwe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Jf+`
  return result;
`,Wwe=aa({opSnippet:Gwe,packedOpSnippet:Kwe,cpuKernelImpl:Lme}),qwe={kernelName:E0,backendName:"webgl",kernelFunc:Wwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xwe{constructor(e,t,s){this.variableNames=["x"],this.outputShape=t.map((h,f)=>h[0]+e[f]+h[1]);const r=e.length,a=Jn(r),i=t.map(h=>h[0]).join(","),o=t.map((h,f)=>h[0]+e[f]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),u=s==="reflect"?0:1;if(r===1){this.userCode=`
        int start = ${i};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${i});
      ${a} end = ${a}(${o});

      void main() {
        ${a} outC = getOutputCoords();
        for (int i = 0; i < ${r}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${a} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ywe{constructor(e,t,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((g,w)=>g[0]+e[w]+g[1]);const r=e.length,a=Jn(r),i=t.map(g=>g[0]).join(","),o=t.map((g,w)=>g[0]+e[w]).join(","),l=Qa("rc",r),u=Qa("source",r),h=`${l[r-1]} < ${this.outputShape[r-1]}`,f=r===1?"source":`vec2(${u.slice(-2).join()})`,d=s==="reflect"?0:1;let m="";if(r===1){const g=`
        ${a} source = rc;
        if (source < start) {
          source = start * 2 - source - ${d};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${d};
        }
        source -= start;
      `;m=`
        ${a} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${l[r-1]} += 1;
        if(${h}) {
          ${g}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
      `}else{const g=`
        ${a} source = rc;
        ${a} lt = ${a}(lessThan(source, start));
        ${a} gte = ${a}(greaterThanEqual(source, end));
        ${a} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${d}) +
                gte * ((end - 1) * 2 - source + ${d});
        source -= start;
      `;m=`
        ${a} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${l[r-1]} += 1;
        if(${h}) {
          ${g}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
        rc = outputLoc;
        ${l[r-2]} += 1;
        if(${l[r-2]} < ${this.outputShape[r-2]}) {
          ${g}
          result[2] = getChannel(getX(${u.join()}), ${f});
          ${l[r-1]} += 1;
          if(${h}) {
            ${g}
            result[3] = getChannel(getX(${u.join()}), ${f});
          }
        }
      `}this.userCode=`
      const ${a} start = ${a}(${i});
      const ${a} end = ${a}(${o});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jwe=({inputs:n,backend:e,attrs:t})=>{const{x:s}=n,{paddings:r,mode:a}=t,i=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ywe(s.shape,r,a):new Xwe(s.shape,r,a);return e.runWebGLProgram(i,[s],s.dtype)},Zwe={kernelName:wb,backendName:"webgl",kernelFunc:Jwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ebe=`if (b == 0.0) return NAN;
  return mod(a, b);`,tbe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Jf+`
  return result;
`,nbe=aa({opSnippet:ebe,packedOpSnippet:tbe}),sbe={kernelName:k0,backendName:"webgl",kernelFunc:nbe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rbe{constructor(e,t,s){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,s],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${t-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${t-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const abe=`
if (a == b) {
  return 1.0;
};
return a / b;`,ibe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,x6=aa({opSnippet:abe,packedOpSnippet:ibe,checkOutOfBounds:!0}),obe={kernelName:f0,backendName:"webgl",kernelFunc:x6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S3="return a - b;",v6=aa({opSnippet:S3,packedOpSnippet:S3,supportsComplex:!0,cpuKernelImpl:ege}),lbe={kernelName:V0,backendName:"webgl",kernelFunc:v6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C6(n){const{inputs:e,backend:t,attrs:s}=n,{logits:r}=e,{dim:a}=s,i=dn([a],r.shape),o=b6({inputs:{x:r},backend:t,attrs:{reductionIndices:i,keepDims:!1}}),l=Ys(o.shape,i),u=pt({inputs:{x:o},backend:t,attrs:{shape:l}}),h=v6({inputs:{a:r,b:u},backend:t}),f=g6({inputs:{x:h},backend:t}),d=Fx({inputs:{x:f},backend:t,attrs:{axis:i,keepDims:!1}}),m=pt({inputs:{x:d},backend:t,attrs:{shape:l}}),g=x6({inputs:{a:f,b:m},backend:t});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(m),g}const Abe={kernelName:_b,backendName:"webgl",kernelFunc:C6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ube(n){const{inputs:e,backend:t,attrs:s}=n,{logits:r}=e,{numSamples:a,seed:i,normalized:o}=s,l=o?r:C6({inputs:{logits:r},backend:t,attrs:{dim:r.shape.length-1}}),u=l.shape[0],h=l.shape[1],f=new rbe(u,h,a),d=[[i]],m=t.runWebGLProgram(f,[l],"int32",d);return o||t.disposeIntermediateTensorInfo(l),m}const cbe={kernelName:EN,backendName:"webgl",kernelFunc:ube};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hbe=Po+`
  return -x;
`,fbe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function dbe(n){const{inputs:e,backend:t}=n,{x:s}=e;if(t.shouldExecuteOnCPU([s])){const a=t.texData.get(s.dataId),[i,o]=Rme(a.values,s.shape,s.dtype);return t.makeTensorInfo(o,s.dtype,i)}let r;return Qe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?r=new jc(s.shape,fbe):r=new NA(s.shape,hbe),t.runWebGLProgram(r,[s],s.dtype)}const pbe={kernelName:bb,backendName:"webgl",kernelFunc:dbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mbe=O5;function gbe(n){Ji("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:s}=n,{boxes:r,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=s,u=t.readSync(r.dataId),h=t.readSync(a.dataId),{selectedIndices:f}=mbe(u,h,i,o,l);return t.makeTensorInfo([f.length],"int32",new Int32Array(f))}const ybe={kernelName:kN,backendName:"webgl",kernelFunc:gbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wbe=Q5;function bbe(n){Ji("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:s}=n,{boxes:r,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=s,h=t.readSync(r.dataId),f=t.readSync(a.dataId),{selectedIndices:d,validOutputs:m}=wbe(h,f,i,o,l,u);return[t.makeTensorInfo([d.length],"int32",new Int32Array(d)),t.makeTensorInfo([],"int32",new Int32Array([m]))]}const xbe={kernelName:FN,backendName:"webgl",kernelFunc:bbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vbe=M5;function Cbe(n){Ji("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:s}=n,{boxes:r,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=s,h=t.readSync(r.dataId),f=t.readSync(a.dataId),d=i,m=o,g=l,w=u,{selectedIndices:v,selectedScores:b}=vbe(h,f,d,m,g,w);return[t.makeTensorInfo([v.length],"int32",new Int32Array(v)),t.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const Bbe={kernelName:TN,backendName:"webgl",kernelFunc:Cbe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sbe{constructor(e,t,s,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${r}), float(${s}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nbe=n=>{const{inputs:e,backend:t,attrs:s}=n,{indices:r}=e,{dtype:a,depth:i,onValue:o,offValue:l}=s,u=je(r.shape),h=new Sbe(u,i,o,l),f=pt({inputs:{x:r},backend:t,attrs:{shape:[u]}}),d=t.runWebGLProgram(h,[f],a);t.disposeIntermediateTensorInfo(f);const m=[...r.shape,i],g=pt({inputs:{x:d},backend:t,attrs:{shape:m}});return t.disposeIntermediateTensorInfo(d),g},Ibe={kernelName:Cb,backendName:"webgl",kernelFunc:Nbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vw(n){const{inputs:e,backend:t}=n,{x:s}=e;if(s.dtype==="complex64"){const r=w1({inputs:{input:s},backend:t}),a=vw({inputs:{x:r},backend:t}),i=Tx({inputs:{input:s},backend:t}),o=vw({inputs:{x:i},backend:t}),l=vh({inputs:{real:a,imag:o},backend:t});return t.disposeIntermediateTensorInfo(r),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(o),l}else return b1({attrs:{shape:s.shape,dtype:s.dtype,value:s.dtype==="string"?"":0},backend:t})}const Ebe={kernelName:Hb,backendName:"webgl",kernelFunc:vw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B6(n){const{inputs:e,backend:t}=n,{x:s}=e;if(s.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(s.dtype==="complex64"){const r=w1({inputs:{input:s},backend:t}),a=B6({inputs:{x:r},backend:t}),i=Tx({inputs:{input:s},backend:t}),o=vw({inputs:{x:i},backend:t}),l=vh({inputs:{real:a,imag:o},backend:t});return t.disposeIntermediateTensorInfo(r),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(o),l}else return b1({attrs:{shape:s.shape,dtype:s.dtype,value:1},backend:t})}const kbe={kernelName:vb,backendName:"webgl",kernelFunc:B6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fbe(n){const{inputs:e,backend:t,attrs:s}=n,{axis:r}=s;if(e.length===1)return SS({inputs:{input:e[0]},backend:t,attrs:{dim:r}});const a=e[0].shape,i=e[0].dtype;e.forEach(h=>{Di(a,h.shape,"All tensors passed to stack must have matching shapes"),se(i===h.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(h=>{const f=SS({inputs:{input:h},backend:t,attrs:{dim:r}});return o.push(f),f}),u=A6({inputs:l,backend:t,attrs:{axis:r}});return o.forEach(h=>t.disposeIntermediateTensorInfo(h)),u}const Tbe={kernelName:Bb,backendName:"webgl",kernelFunc:Fbe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dbe{constructor(e,t,s){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((u,h)=>u[0]+e[h]+u[1]);const r=e.length,a=Jn(r),i=t.map(u=>u[0]).join(","),o=t.map((u,h)=>u[0]+e[h]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);if(r===1){this.userCode=`
        int start = ${i};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${i});
      ${a} end = ${a}(${o});

      void main() {
        ${a} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${a} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lbe{constructor(e,t,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((w,v)=>w[0]+e[v]+w[1]);const r=e.length,a=Jn(r),i=t.map(w=>w[0]).join(","),o=t.map((w,v)=>w[0]+e[v]).join(","),l=Qa("rc",r),u=Qa("source",r),h=`${l[r-1]} < ${this.outputShape[r-1]}`,f=r===1?"source":`vec2(${u.slice(-2).join()})`,d=[`${a} rc = outputLoc;`,`${l[r-1]} += 1;
       if(${h}) {
      `,r===1?"":`}
       rc = outputLoc;
       ${l[r-2]} += 1;
       if(${l[r-2]} < ${this.outputShape[r-2]}) {`,r===1?"":`  ${l[r-1]} += 1;
         if(${h}) {`],m=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let g="";for(let w=0,v=r===1?2:4;w<v;w++)g+=`
        ${d[w]}
        if (${m}) {
          result[${w}] = float(value);
        } else {
          ${a} source = rc - start;
          result[${w}] = getChannel(getX(${u.join()}), ${f});
        }
      `;g+=r===1?"} ":"}}",this.userCode=`
      const ${a} start = ${a}(${i});
      const ${a} end = ${a}(${o});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S6=n=>{const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{paddings:a,constantValue:i}=s;if(je(r.shape)===0){const u=a.map((h,f)=>h[0]+r.shape[f]+h[1]);return b1({backend:t,attrs:{shape:u,value:i,dtype:r.dtype}})}const o=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Lbe(r.shape,a,i):new Dbe(r.shape,a,i),l=[[i]];return t.runWebGLProgram(o,[r],r.dtype,l)},Ube={kernelName:Sb,backendName:"webgl",kernelFunc:S6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rbe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,$be=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Jf+`
  return result;
`,_be=aa({opSnippet:Rbe,packedOpSnippet:$be}),Obe={kernelName:T0,backendName:"webgl",kernelFunc:_be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qbe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{axis:a,keepDims:i}=s,o=r.shape.length,l=[],u=dn(a,r.shape);let h=u;const f=Us(h,o);let d=r;f!=null&&(d=Ha({inputs:{x:r},backend:t,attrs:{perm:f}}),h=Js(h.length,o),l.push(d)),sa("prod",h,o);let m;if(t.shouldExecuteOnCPU([d])){const g=t.texData.get(d.dataId).values,{outVals:w,outShape:v,outDtype:b}=_me(d.shape,d.dtype,g,h);m=t.makeTensorInfo(v,b,w)}else{const[g,w]=Hr(d.shape,h),v=je(w),b=pt({inputs:{x:d},backend:t,attrs:{shape:[-1,v]}}),C=n5(r.dtype),N=Zf(b,C,"prod",t);m=pt({inputs:{x:N},backend:t,attrs:{shape:g}}),l.push(b),l.push(N)}if(i){l.push(m);const g=Ys(m.shape,u);m=pt({inputs:{x:m},backend:t,attrs:{shape:g}})}return l.forEach(g=>t.disposeIntermediateTensorInfo(g)),m}const Mbe={kernelName:Ib,backendName:"webgl",kernelFunc:Qbe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hbe(n){const{inputs:e,backend:t,attrs:s}=n,{paramsNestedSplits:r,paramsDenseValues:a,indices:i}=e,{outputRaggedRank:o}=s,l=r.map(b=>t.readSync(b.dataId)),u=r.map(b=>b.shape),h=t.readSync(a.dataId),f=t.readSync(i.dataId),[d,m,g]=Ome(l,u,h,a.shape,a.dtype,f,i.shape,o),w=d.map(b=>t.makeTensorInfo([b.length],"int32",b)),v=t.makeTensorInfo(g,a.dtype,m);return w.concat([v])}const Pbe={kernelName:DN,backendName:"webgl",kernelFunc:Hbe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zbe(n){const{inputs:e,backend:t}=n,{starts:s,limits:r,deltas:a}=e,i=t.readSync(s.dataId),o=t.readSync(r.dataId),l=t.readSync(a.dataId),[u,h]=Qme(i,s.shape,s.dtype,o,r.shape,l,a.shape),f=t.makeTensorInfo([u.length],"int32",u),d=t.makeTensorInfo([h.length],s.dtype,h);return[f,d]}const jbe={kernelName:LN,backendName:"webgl",kernelFunc:zbe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vbe(n){const{inputs:e,backend:t,attrs:s}=n,{shape:r,values:a,defaultValue:i,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=s,u=t.readSync(r.dataId),h=t.readSync(a.dataId),f=t.readSync(i.dataId),d=o.map(v=>t.readSync(v.dataId)),m=o.map(v=>v.shape),[g,w]=Mme(u,r.shape,h,a.shape,a.dtype,f,i.shape,d,m,l);return t.makeTensorInfo(g,a.dtype,w)}const Gbe={kernelName:UN,backendName:"webgl",kernelFunc:Vbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N6=n=>{const{backend:e,attrs:t}=n,{start:s,stop:r,step:a,dtype:i}=t,o=Hme(s,r,a,i);return e.makeTensorInfo([o.length],i,o)},Kbe={kernelName:RN,backendName:"webgl",kernelFunc:N6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wbe="return 1.0 / x;",qbe=Fn({opSnippet:Wbe}),Xbe={kernelName:D0,backendName:"webgl",kernelFunc:qbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ybe=Po+`
  return (x < 0.0) ? 0.0 : x;
`,Jbe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Zbe=Fn({opSnippet:Ybe,packedOpSnippet:Jbe}),exe={kernelName:L0,backendName:"webgl",kernelFunc:Zbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const txe=Po+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,nxe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,sxe=Fn({opSnippet:txe,packedOpSnippet:nxe}),rxe={kernelName:U0,backendName:"webgl",kernelFunc:sxe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class axe{constructor(e,t,s,r,a){this.variableNames=["A"],this.outputShape=[];const[i,o,l,u]=e;this.outputShape=[i,t,s,u];const h=[r&&t>1?o-1:o,r&&s>1?l-1:l],f=[r&&t>1?t-1:t,r&&s>1?s-1:s];let d;a?d="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${h[0]/f[0]},
          ${h[1]/f[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ixe{constructor(e,t,s,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,o,l,u]=e;this.outputShape=[i,t,s,u];const h=[r&&t>1?o-1:o,r&&s>1?l-1:l],f=[r&&t>1?t-1:t,r&&s>1?s-1:s];let d;a?d="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${h[0]/f[0]},
          ${h[1]/f[1]},
          ${h[1]/f[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${s-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oxe(n){const{inputs:e,backend:t,attrs:s}=n,{images:r}=e,{alignCorners:a,halfPixelCenters:i,size:o}=s,[l,u]=o,h=Qe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ixe(r.shape,l,u,a,i):new axe(r.shape,l,u,a,i);return t.runWebGLProgram(h,[r],"float32")}const lxe={kernelName:Fb,backendName:"webgl",kernelFunc:oxe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Axe{constructor(e,t,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,i,o]=e,l=[s&&i>1?r-1:r,s&&o>1?a-1:a],u=[s&&i>1?i-1:i,s&&o>1?o-1:o],h=l[0]/u[0],f=l[1]/u[1],d=1/h,m=1/f,g=Math.ceil(d)*2+2,w=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${h});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${m});

        const int winHeight = int(${g});
        const int winWidth = int(${w});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uxe(n){const{inputs:e,backend:t,attrs:s}=n,{images:r,dy:a}=e,{alignCorners:i}=s,o=new Axe(a.shape,r.shape,i);return t.runWebGLProgram(o,[a],a.dtype)}const cxe={kernelName:ON,backendName:"webgl",kernelFunc:uxe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hxe{constructor(e,t,s,r,a){this.variableNames=["A"],this.outputShape=[];const[i,o,l,u]=e;this.outputShape=[i,t,s,u];const h=[r&&t>1?o-1:o,r&&s>1?l-1:l],f=[r&&t>1?t-1:t,r&&s>1?s-1:s],d=r?"0.5":"0.0";let m;a?m="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":m="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${h[0]/f[0]},
          ${h[1]/f[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${m};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fxe{constructor(e,t,s,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,o,l,u]=e;this.outputShape=[i,t,s,u];const h=[r&&t>1?o-1:o,r&&s>1?l-1:l],f=[r&&t>1?t-1:t,r&&s>1?s-1:s],d=r?"0.5":"0.0";let m;a?m="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":m="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${h[0]/f[0]},
          ${h[1]/f[1]},
          ${h[1]/f[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${m};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${s-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dxe(n){const{inputs:e,backend:t,attrs:s}=n,{images:r}=e,{alignCorners:a,halfPixelCenters:i,size:o}=s,[l,u]=o,h=Qe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new fxe(r.shape,l,u,a,i):new hxe(r.shape,l,u,a,i);return t.runWebGLProgram(h,[r],r.dtype)}const pxe={kernelName:kb,backendName:"webgl",kernelFunc:dxe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mxe{constructor(e,t,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,i,o]=e,l=[s&&i>1?r-1:r,s&&o>1?a-1:a],u=[s&&i>1?i-1:i,s&&o>1?o-1:o],h=l[0]/u[0],f=l[1]/u[1],d=1/h,m=1/f,g=Math.ceil(d)*2+2,w=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${h});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${m});

        const int winHeight = int(${g});
        const int winWidth = int(${w});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${r}) - 1),
                ${s} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${a}) - 1),
                ${s} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gxe(n){const{inputs:e,backend:t,attrs:s}=n,{images:r,dy:a}=e,{alignCorners:i}=s,o=new mxe(a.shape,r.shape,i);return t.runWebGLProgram(o,[a],a.dtype)}const yxe={kernelName:_N,backendName:"webgl",kernelFunc:gxe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wxe{constructor(e,t){this.variableNames=["x"];const s=e.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);if(this.outputShape=e,s===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const r=o=>t.indexOf(o)!==-1&&e[o]!==1?`${e[o]} - coords[${o}] - 1`:`coords[${o}]`,a=e.map((o,l)=>r(l)).join(","),i=Jn(s);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bxe{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const s=e.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);this.outputShape=e;const r=Qa("rc",s),a=`${r[s-1]} + 1 < ${this.outputShape[s-1]}`,i=`${r[s-2]} + 1 < ${this.outputShape[s-2]}`,o=Jn(s);s===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${a}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(r.slice())};
          if(${a}){
            result.g = ${u(r.slice())};
          }
          if(${i}) {
            result.b = ${h(r.slice())};
            if(${a}) {
              result.a = ${f(r.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(g){return d(g)}function u(g){return g[s-1]="("+g[s-1]+" + 1)",d(g)}function h(g){return g[s-2]="("+g[s-2]+" + 1)",d(g)}function f(g){return g[s-1]="("+g[s-1]+" + 1)",g[s-2]="("+g[s-2]+" + 1)",d(g)}function d(g){const w=e.map((C,N)=>m(N,g)),v=w.join(","),b=w.slice(-2).join(",");return`getChannel(getX(${v}), vec2(${b}))`}function m(g,w){return t.indexOf(g)!==-1&&e[g]!==1?`${e[g]} - ${w[g]} - 1`:`${w[g]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xxe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{dims:a}=s,i=r.shape.length,o=dn(a,r.shape);if(i===0)return Fi({inputs:{x:r},backend:t});const l=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bxe(r.shape,o):new wxe(r.shape,o);return t.runWebGLProgram(l,[r],r.dtype)}const vxe={kernelName:Tb,backendName:"webgl",kernelFunc:xxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cxe{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const s=e[1],r=e[2];this.outputShape=e;let a="";typeof t=="number"?a=`float outputValue = ${t.toFixed(2)};`:a=`
        vec3 fill = vec3(${t.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${a}
          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${s}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bxe={kernelName:t5,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:s}=n,{radians:r,fillValue:a,center:i}=e,o=t,l=new Cxe(s.shape,a),[u,h]=Z5(i,s.shape[1],s.shape[2]),f=[[u,h,Math.sin(r),Math.cos(r)]];return o.runWebGLProgram(l,[s],s.dtype,f)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sxe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,Nxe=Fn({opSnippet:Sxe}),Ixe={kernelName:R0,backendName:"webgl",kernelFunc:Nxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Exe="return inversesqrt(x);",kxe=Fn({opSnippet:Exe,cpuKernelImpl:Pme}),Fxe={kernelName:$0,backendName:"webgl",kernelFunc:kxe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nE{constructor(e,t,s,r,a,i,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const u=Jn(a.length),h=Jn(i.length);let f="";s===1?f="i":s===2&&(f="i, j");const d=`getIndices(${f})`;let m="";r===1?m="i":r===2&&(m="i, coords[1]");const g=`getUpdates(${m})`;let w="";l&&(w="coords[0], coords[1]");const v=`getDefaultValue(${w})`,b=t>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${a});

        void main() {
          ${h} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${t}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${b};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${g};
              found = true;
            }
          }
          setOutput(mix(${v}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Txe{constructor(e,t,s,r,a,i,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const u=Jn(a.length),h=Jn(i.length);let f="";s===1?f="i":s===2&&(f="i, j");const d=`getIndices(${f})`;let m="";r===1?m="i":r===2&&(m="i, coords[1]");const g=`getUpdates(${m})`;let w="";l&&(w="coords[0], coords[1]");const v=`getDefaultValue(${w})`,b=t>1?"strides[j]":"strides",C=t>1?"strides[j + 1]":"strides";this.userCode=`
        ${u} strides = ${u}(${a});

        void main() {
          ${h} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${t}; j+=2) {
              ivec4 index = round(${d});
              flattenedIndex += index.xz * ${b};
              if (j + 1 < ${t}) {
                flattenedIndex += index.yw * ${C};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${g};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${v}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dxe(n){const{inputs:e,backend:t,attrs:s}=n,{indices:r,updates:a}=e,{shape:i}=s,{sliceRank:o,numUpdates:l,sliceSize:u,strides:h,outputSize:f}=Kf(a,r,i),d=[f/u,u];if(f===0)return t.makeTensorInfo(i,r.dtype);const m=pt({inputs:{x:r},backend:t,attrs:{shape:[l,o]}}),g=pt({inputs:{x:a},backend:t,attrs:{shape:[l,u]}}),w=t.makeTensorInfo([],"float32",new Float32Array([0]));let v;Qe().getBool("WEBGL_PACK")?v=new Txe(l,o,m.shape.length,g.shape.length,h,d):v=new nE(l,o,m.shape.length,g.shape.length,h,d);const b=t.runWebGLProgram(v,[g,m,w],g.dtype),C=pt({inputs:{x:b},backend:t,attrs:{shape:i}});return t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(b),t.disposeIntermediateTensorInfo(w),C}const Lxe={kernelName:QN,backendName:"webgl",kernelFunc:Dxe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uxe{constructor(e,t,s,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,s];const a="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,o=Qe().getNumber("WEBGL_VERSION")===2?a:i,l=r==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rxe(n){const{inputs:e,backend:t,attrs:s}=n,{sortedSequence:r,values:a}=e,{side:i}=s,o=new Uxe(r.shape[0],r.shape[1],a.shape[1],i),l=[[r.shape[1]]];return t.runWebGLProgram(o,[r,a],"int32",l)}const $xe={kernelName:HN,backendName:"webgl",kernelFunc:Rxe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _xe{constructor(e,t,s){this.variableNames=["c","a","b"],this.outputShape=t;let r,a;if(s>4)throw Error(`Where for rank ${s} is not yet supported`);if(s===1)a="resRC",r="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let h=0;h<t.length;h++)u.push(`${o[h]}`),h<e&&l.push(`${o[h]}`);r=l.join(),a=u.join()}const i=Jn(s);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${r});
        if (cVal >= 1.0) {
          setOutput(getA(${a}));
        } else {
          setOutput(getB(${a}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oxe(n){const{inputs:e,backend:t}=n,{condition:s,t:r,e:a}=e,i=new _xe(s.shape.length,r.shape,r.shape.length);return t.runWebGLProgram(i,[s,r,a],Si(r.dtype,a.dtype))}const Qxe={kernelName:Db,backendName:"webgl",kernelFunc:Oxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mxe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${fx};
  float scale = ${dx};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Hxe=Fn({opSnippet:Mxe}),Pxe={kernelName:_0,backendName:"webgl",kernelFunc:Hxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zxe=em+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,jxe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Vxe=Fn({opSnippet:zxe,packedOpSnippet:jxe,cpuKernelImpl:jme}),Gxe={kernelName:H0,backendName:"webgl",kernelFunc:Vxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kxe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,Wxe=Fn({opSnippet:Kxe}),qxe={kernelName:M0,backendName:"webgl",kernelFunc:Wxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xxe=em+`
  return sin(x);
`,Yxe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Jf}
  return result;
`,Jxe=Fn({opSnippet:Xxe,packedOpSnippet:Yxe}),Zxe={kernelName:O0,backendName:"webgl",kernelFunc:Jxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eve=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,tve=Fn({opSnippet:eve}),nve={kernelName:Q0,backendName:"webgl",kernelFunc:tve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sve=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,rve=Fn({opSnippet:sve}),ave={kernelName:P0,backendName:"webgl",kernelFunc:rve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ive=n=>{const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{blockShape:a,paddings:i}=s;se(r.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=a.reduce((b,C)=>b*C),l=[[0,0]];l.push(...i);for(let b=1+a.length;b<r.shape.length;++b)l.push([0,0]);const u=[],h=S6({inputs:{x:r},backend:t,attrs:{paddings:l,constantValue:0}}),f=r1(h.shape,a,o,!1),d=a1(f.length,a.length,!1),m=i1(h.shape,a,o,!1),g=pt({inputs:{x:h},backend:t,attrs:{shape:f}}),w=Ha({inputs:{x:g},backend:t,attrs:{perm:d}}),v=pt({inputs:{x:w},backend:t,attrs:{shape:m}});return u.push(h),u.push(g),u.push(w),u.forEach(b=>t.disposeIntermediateTensorInfo(b)),v},ove={kernelName:Rb,backendName:"webgl",kernelFunc:ive};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lve(n){const{inputs:e,backend:t}=n,{indices:s,values:r,denseShape:a,defaultValue:i}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${a.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${s.shape}`);if(r.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${r.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const o=t.readSync(s.dataId),l=t.readSync(r.dataId),u=t.readSync(a.dataId),h=t.readSync(i.dataId)[0],[f,d,m,g,w]=Gme(o,s.shape,s.dtype,l,r.dtype,u,h);return[t.makeTensorInfo(d,s.dtype,f),t.makeTensorInfo([d[0]],r.dtype,m),t.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(v=>Number(v)))),t.makeTensorInfo([w.length],s.dtype,new Int32Array(w))]}const Ave={kernelName:PN,backendName:"webgl",kernelFunc:lve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uve(n){const{inputs:e,backend:t}=n,{inputIndices:s,inputShape:r,newShape:a}=e;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${s.shape}`);if(r.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${r.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const i=Array.from(t.readSync(r.dataId)),o=t.readSync(s.dataId),l=Array.from(t.readSync(a.dataId)),[u,h,f]=Kme(o,s.shape,s.dtype,i,l);return[t.makeTensorInfo(h,s.dtype,u),t.makeTensorInfo([f.length],a.dtype,new Int32Array(f))]}const cve={kernelName:zN,backendName:"webgl",kernelFunc:uve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hve(n){const{inputs:e,backend:t}=n,{data:s,indices:r,segmentIds:a}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${r.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${a.shape}`);const i=t.readSync(s.dataId),o=t.readSync(r.dataId),l=t.readSync(a.dataId),[u,h]=XQ(i,s.shape,s.dtype,o,l,!0);return t.makeTensorInfo(h,s.dtype,u)}const fve={kernelName:jN,backendName:"webgl",kernelFunc:hve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dve(n){const{inputs:e,backend:t}=n,{data:s,indices:r,segmentIds:a}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${r.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${a.shape}`);const i=t.readSync(s.dataId),o=t.readSync(r.dataId),l=t.readSync(a.dataId),[u,h]=XQ(i,s.shape,s.dtype,o,l);return t.makeTensorInfo(h,s.dtype,u)}const pve={kernelName:VN,backendName:"webgl",kernelFunc:dve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mve(n){const{inputs:e,backend:t,attrs:s}=n,{sparseIndices:r,sparseValues:a,defaultValue:i}=e,{outputShape:o}=s,{sliceRank:l,numUpdates:u,sliceSize:h,strides:f,outputSize:d}=Kf(a,r,o),m=!1;if(a.dtype==="string"){const b=t.bufferSync(r),C=t.bufferSync(a),N=th(t.readSync(i.dataId)[0]),I=zme(b,C,o,d,h,u,l,f,N,m);return t.makeTensorInfo(o,I.dtype,I.values)}const g=new nE(u,l,r.shape.length,a.shape.length,f,[d,1],m),w=t.runWebGLProgram(g,[a,r,i],a.dtype),v=pt({inputs:{x:w},backend:t,attrs:{shape:o}});return t.disposeIntermediateTensorInfo(w),v}const gve={kernelName:GN,backendName:"webgl",kernelFunc:mve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yve(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{numOrSizeSplits:a,axis:i}=s,o=dn(i,r.shape)[0],l=dI(r,a,o),u=r.shape.length,h=new Array(u).fill(0),f=r.shape.slice();return l.map(d=>{const m=[...f];m[o]=d;const g=tm({inputs:{x:r},backend:t,attrs:{begin:h,size:m}});return h[o]+=d,g})}const wve={kernelName:$b,backendName:"webgl",kernelFunc:yve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N3="return sqrt(x);",bve=Fn({opSnippet:N3,packedOpSnippet:N3,cpuKernelImpl:Wme}),xve={kernelName:z0,backendName:"webgl",kernelFunc:bve};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vve="return x * x;",Cve=Fn({opSnippet:vve}),Bve={kernelName:KN,backendName:"webgl",kernelFunc:Cve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I3="return (a - b) * (a - b);",Sve=aa({opSnippet:I3,packedOpSnippet:I3}),Nve={kernelName:j0,backendName:"webgl",kernelFunc:Sve};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ive(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");const a=t.readSync(r.dataId),i=Ru(a),o=qme(i,"string",s);return t.makeTensorInfo(r.shape,"string",o)}const Eve={kernelName:Ob,backendName:"webgl",kernelFunc:Ive};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kve({inputs:n,attrs:e,backend:t}){const{x:s}=n,r=Po+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,a=new NA(s.shape,r);return t.runWebGLProgram(a,[s],s.dtype)}const Fve={kernelName:q0,backendName:"webgl",kernelFunc:kve};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tve{constructor(e,t,s){this.variableNames=["x"],this.outputShape=s;const r=s.length,a=Jn(s.length),i=Jn(s.length);let o="";if(r===1)o="coords * strides + begin";else{let l=0;o=s.map((u,h)=>(l++,s.length===1?`coords * strides[${h}] + begin[${h}]`:`coords[${l-1}] * strides[${h}] + begin[${h}]`)).join(",")}this.userCode=`
      ${a} begin = ${a}(${e});
      ${a} strides = ${a}(${t});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dve(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{begin:a,end:i,strides:o,beginMask:l,endMask:u,ellipsisMask:h,newAxisMask:f,shrinkAxisMask:d}=s,{finalShapeSparse:m,finalShape:g,isIdentity:w,sliceDim0:v,isSimpleSlice:b,begin:C,end:N,strides:I}=X5(r.shape,a,i,o,l,u,h,f,d);let L;if(w)L=pt({inputs:{x:r},backend:t,attrs:{shape:g}});else if(v||b){se(r.shape.length>=1,()=>`Input must have rank at least 1, got: ${r.shape.length}`);const H=K5(C,N,I),U=tm({inputs:{x:r},backend:t,attrs:{begin:C,size:H}});L=pt({inputs:{x:U},backend:t,attrs:{shape:g}}),t.disposeIntermediateTensorInfo(U)}else if(t.shouldExecuteOnCPU([r])){const U=t.readSync(r.dataId),O=un(r.shape,r.dtype,U),z=Xme(m,O,I,C);L=t.makeTensorInfo(g,r.dtype,z.values)}else{const U=new Tve(C,I,m);L=t.runWebGLProgram(U,[r],r.dtype)}const $=pt({inputs:{x:L},backend:t,attrs:{shape:g}});return t.disposeIntermediateTensorInfo(L),$}const Lve={kernelName:WN,backendName:"webgl",kernelFunc:Dve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uve(n){const{inputs:e,backend:t,attrs:s}=n,{separator:r,nGramWidths:a,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:u}=s,{data:h,dataSplits:f}=e,d=t.readSync(h.dataId),m=t.readSync(f.dataId),[g,w]=Yme(d,m,r,a,i,o,l,u);return[t.makeTensorInfo([g.length],"string",g),t.makeTensorInfo(f.shape,"int32",w)]}const Rve={kernelName:qN,backendName:"webgl",kernelFunc:Uve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ve(n){const{inputs:e,backend:t,attrs:s}=n,{skipEmpty:r}=s,{input:a,delimiter:i}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const o=t.readSync(a.dataId),l=t.readSync(i.dataId)[0],[u,h,f]=Jme(o,l,r),d=h.length;return[t.makeTensorInfo([d,2],"int32",u),t.makeTensorInfo([d],"string",h),t.makeTensorInfo([2],"int32",new Int32Array(f))]}const _ve={kernelName:XN,backendName:"webgl",kernelFunc:$ve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ove(n){const{inputs:e,backend:t,attrs:s}=n,{numBuckets:r}=s,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");const i=t.readSync(a.dataId),o=Zme(i,r);return t.makeTensorInfo(a.shape,"int32",o)}const Qve={kernelName:YN,backendName:"webgl",kernelFunc:Ove};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mve="return tan(x);",Hve=Fn({opSnippet:Mve}),Pve={kernelName:G0,backendName:"webgl",kernelFunc:Hve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zve=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,jve=Fn({opSnippet:zve}),Vve={kernelName:K0,backendName:"webgl",kernelFunc:jve};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gve(n){const{inputs:e,backend:t,attrs:s}=n,{tensor:r,indices:a,updates:i}=e,{sliceRank:o,numUpdates:l,sliceSize:u,strides:h,outputSize:f}=Kf(i,a,r.shape),d=[f/u,u];if(f===0)return t.makeTensorInfo(r.shape,a.dtype);const m=pt({inputs:{x:a},backend:t,attrs:{shape:[l,o]}}),g=pt({inputs:{x:i},backend:t,attrs:{shape:[l,u]}}),w=pt({inputs:{x:r},backend:t,attrs:{shape:d}}),v=new nE(l,o,m.shape.length,g.shape.length,h,d,!1,!0),b=t.runWebGLProgram(v,[g,m,w],w.dtype),C=pt({inputs:{x:b},backend:t,attrs:{shape:r.shape}});return t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(w),t.disposeIntermediateTensorInfo(b),C}const Kve={kernelName:MN,backendName:"webgl",kernelFunc:Gve};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wve{constructor(e,t){this.variableNames=["A"];const s=new Array(e.length);for(let i=0;i<s.length;i++)s[i]=e[i]*t[i];this.outputShape=s,this.rank=s.length;const r=Jn(this.rank),a=qve(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        setOutput(getA(${a}));
      }
    `}}function qve(n){const e=n.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${n[0]})`;const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],s=[];for(let r=0;r<n.length;r++)s.push(`imod(${t[r]}, ${n[r]})`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I6(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{reps:a}=s;if(r.dtype==="string"||r.shape.length>5){const l=t.readSync(r.dataId),u=r.dtype==="string"?l.map(d=>th(d)):l,h=un(r.shape,r.dtype,u),f=tge(h,a);return t.makeTensorInfo(f.shape,f.dtype,f.values)}const i=new Wve(r.shape,a);return t.runWebGLProgram(i,[r],r.dtype)}const Xve={kernelName:W0,backendName:"webgl",kernelFunc:I6};class Yve{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class Jve{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uf(n,e){e!==null&&n.disposeIntermediateTensorInfo(e)}function E3(n){let e=1;for(;e<n;)e*=2;return e}function Zve(n){const{inputs:e,backend:t,attrs:s}=n,{x:r}=e,{k:a,sorted:i}=s,o=Qe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Qe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=r.shape,h=u[u.length-1];if(t.shouldExecuteOnCPU([r])||h<o||a>l){const z=t.readSync(r.dataId),[T,R]=nge(z,u,r.dtype,a,i);return[t.makeTensorInfo(T.shape,T.dtype,T.values),t.makeTensorInfo(R.shape,R.dtype,R.values)]}if(a===0)return u[u.length-1]=0,[t.makeTensorInfo(u,r.dtype,[]),t.makeTensorInfo(u,"int32",[])];if(h===1)return[r,b1({attrs:{shape:u,dtype:"int32",value:0},backend:t})];const f=t.texData.get(r.dataId),d=f!==null&&f.isPacked,m=d?t.unpackTensor(r):r,w=je(u)/h,v=pt({inputs:{x:m},attrs:{shape:[w,h]},backend:t});d&&uf(t,m);const b=E3(a),C=E3(h);let N=null;const I=()=>N===null?[v,v]:[v,N],L=(z,T,R)=>{const W=I(),K=new Yve(R),P=[[h],[N===null?1:0],[Number.NEGATIVE_INFINITY],[z],[T]],Y=N;N=t.runWebGLProgram(K,W,"int32",P),uf(t,Y)};for(let z=1;z<b;z*=2){const T=z*2;for(let R=z;R>=1;R/=2)L(T,R,[w,C])}for(let z=C;z>b;z/=2){const T=I(),R=new Jve([w,z/2]),K=[[h],[N===null?1:0],[b]],re=N;N=t.runWebGLProgram(R,T,"int32",K),uf(t,re);const P=b/2,Y=P*2;for(let J=P;J>=1;J/=2)L(Y,J,N.shape)}let $=N;N=tm({inputs:{x:N},backend:t,attrs:{begin:0,size:[w,a]}}),uf(t,$);let H=w6({inputs:{x:v,indices:N},backend:t,attrs:{axis:1,batchDims:1}});uf(t,v);const U=u.slice(0,-1);U.push(a),$=N,N=pt({inputs:{x:N},attrs:{shape:U},backend:t}),uf(t,$);const O=H;return H=pt({inputs:{x:H},attrs:{shape:U},backend:t}),uf(t,O),[H,N]}const eCe={kernelName:JN,backendName:"webgl",kernelFunc:Zve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tCe{constructor(e,t,s,r,a,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const o=s==="nearest"?1:2;let l;switch(r){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${a});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${a});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${t}));
                float mapY = mapCoord(inY, float(${e}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nCe(n){const{inputs:e,backend:t,attrs:s}=n,{image:r,transforms:a}=e,{interpolation:i,fillMode:o,fillValue:l,outputShape:u}=s,[h,f,d,m]=r.shape,[g,w]=u??[f,d],v=[h,g,w,m],b=new tCe(f,d,i,o,l,v);return t.runWebGLProgram(b,[r,a],"float32")}const sCe={kernelName:ZN,backendName:"webgl",kernelFunc:nCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rCe(n){const{inputs:e,attrs:t,backend:s}=n,{axis:r}=t,{x:a}=e;g1(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=s.readSync(a.dataId),{outputValues:o,outputShape:l,indices:u}=sge(i,r,a.shape,a.dtype);return[s.makeTensorInfo(l,a.dtype,o),s.makeTensorInfo([u.length],"int32",u)]}const aCe={kernelName:e5,backendName:"webgl",kernelFunc:rCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iCe(n){const{inputs:e,backend:t,attrs:s}=n,{value:r}=e;let{axis:a}=s;a<0&&(a+=r.shape.length);const i=r,o=i.shape.length,l=r.shape[a],u=new Array(o-1);let h=0;for(let w=0;w<o;w++)w!==a&&(u[h++]=i.shape[w]);const f=[],d=new Array(o).fill(0),m=i.shape.slice();m[a]=1;const g=new Array(l);for(let w=0;w<g.length;w++){d[a]=w;const v=tm({inputs:{x:i},backend:t,attrs:{begin:d,size:m}}),b=pt({inputs:{x:v},backend:t,attrs:{shape:u}});g[w]=b,f.push(v)}return f.forEach(w=>t.disposeIntermediateTensorInfo(w)),g}const oCe={kernelName:Qb,backendName:"webgl",kernelFunc:iCe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lCe{constructor(e,t){this.variableNames=["x","segmentIds"];const s=e.windowSize,r=e.batchSize,a=e.inSize,i=e.numSegments,o=i*Math.ceil(a/s);this.outputShape=[r,o];const l="0.0",u="sumValue",h=Math.floor(s/4)*4,f=s%4,d=`
        sumValue += dot(values, segFilter);
    `;let m="";a%s>0&&(m=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `);let g="";a%s>0&&(g=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${g}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${s}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${h}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${d}
        }

        int inIdx = inOffset + ${h};
        if (${f===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${d}
        } else if (${f===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${d}
        } else if (${f===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${d}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ACe(n){const{inputs:e,backend:t,attrs:s}=n,{x:r,segmentIds:a}=e,{numSegments:i}=s,o=r.shape.length,l=[];let u=0;const h=Us([u],o);let f=r;h!=null&&(f=Ha({inputs:{x:r},backend:t,attrs:{perm:h}}),l.push(f),u=Js(1,o)[0]);const d=a$(f.shape,u,i),m=je([f.shape[u]]),g=pt({inputs:{x:f},backend:t,attrs:{shape:[-1,m]}});l.push(g);const w=n5(r.dtype),v=(I,L,$,H,U)=>{const O=I.shape[0],z=I.shape[1],T=r$(z,U),R={windowSize:T,inSize:z,batchSize:O,numSegments:U},W=new lCe(R,L),K=t.compileAndRun(W,[I,$],H);if(l.push(K),K.shape[1]===U)return K;const re=N6({backend:t,attrs:{start:0,stop:U,step:1,dtype:"float32"}}),P=I6({inputs:{x:re},backend:t,attrs:{reps:[z/T]}});return l.push(re),l.push(P),v(K,L,P,H,U)},b=v(g,"unsortedSegmentSum",a,w,i),C=pt({inputs:{x:b},backend:t,attrs:{shape:d}});let N=C;if(h!=null){l.push(C);const I=mh(h);N=Ha({inputs:{x:N},backend:t,attrs:{perm:I}})}return l.forEach(I=>t.disposeIntermediateTensorInfo(I)),N}const uCe={kernelName:Mb,backendName:"webgl",kernelFunc:ACe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cCe=[Wge,Xge,Zge,n0e,r0e,o0e,A0e,c0e,p0e,g0e,b0e,C0e,N0e,F0e,L0e,R0e,_0e,H0e,z0e,V0e,q0e,n1e,r1e,l1e,u1e,m1e,y1e,v1e,Tge,S1e,F1e,U1e,M1e,z1e,V1e,K1e,q1e,Z1e,nye,aye,oye,Aye,cye,dye,mye,bye,vye,Sye,Eye,Fye,Uye,Oye,Pye,Vye,Wye,qye,Yye,Zye,t2e,s2e,a2e,A2e,h2e,p2e,g2e,b2e,C2e,I2e,T2e,Fge,L2e,E1e,$2e,Q2e,P2e,Lge,G2e,X2e,J2e,nwe,awe,Awe,hwe,mwe,bwe,Cwe,Swe,kwe,Twe,Lwe,_we,Qwe,Hwe,zwe,Vwe,qwe,Zwe,sbe,cbe,$ge,pbe,ybe,xbe,Bbe,h1e,Ibe,kbe,Tbe,Ube,Obe,Rge,Mbe,Pbe,jbe,Gbe,Kbe,f1e,obe,Xbe,exe,rxe,Oge,lxe,cxe,pxe,yxe,vxe,Bxe,Ixe,Fxe,Lxe,$xe,Qxe,Pxe,Gxe,qxe,Zxe,nve,e1e,Abe,ave,ove,Ave,cve,fve,pve,gve,wve,xve,Bve,Nve,Eve,Fve,Lve,Rve,_ve,Qve,lbe,Vge,Pve,Vve,Kve,Xve,eCe,sCe,Gge,aCe,oCe,uCe,Ebe];for(const n of cCe)FL(n);const hCe=async()=>{try{return await U9(),{model:await Goe("/model/model.json"),error:null}}catch(n){return{model:null,error:n.message}}},fCe=n=>De(()=>{const e=Ane(n);return Bl.resizeBilinear(e,[224,224]).toFloat().sub(Ut(127.5)).div(Ut(127.5)).expandDims()}),dCe=async(n,e)=>{try{console.log("Melakukan prediksi dengan GraphModel...");const t=n.predict(e);let s;if(t instanceof ps)s=await t.data(),on(t);else if(Array.isArray(t)&&t[0]instanceof ps)s=await t[0].data(),on(t);else throw console.error("Format output prediksi tidak terduga:",t),new Error("Format output prediksi dari GraphModel tidak dikenali.");return s}catch(t){throw console.error("Error saat prediksi dengan GraphModel:",t),new Error(`Error saat prediksi: ${t.message}`)}},pCe=(n,e)=>{let t=-1,s=-1;for(let r=0;r<n.length;r++)n[r]>t&&(t=n[r],s=r);if(s!==-1&&e&&e[s])return{className:e[s],probability:t};throw new Error("Gagal memproses hasil prediksi (indeks atau nama kelas tidak valid).")};let l2=null,ig=null;const mCe=()=>{const[n,e]=Ee.useState(l2),[t,s]=Ee.useState(!l2),[r,a]=Ee.useState(null);return Ee.useEffect(()=>{(async()=>{if(l2){s(!1);return}if(ig){s(!0);try{const o=await ig;e(o),a(null)}catch(o){a(o)}finally{s(!1)}return}s(!0),a(null),ig=hCe();try{const{model:o,error:l}=await ig;o?(e(o),l2=o,a(null)):a(l)}catch(o){a(o)}finally{s(!1),ig=null}})()},[]),{model:n,isLoadingModel:t,modelError:r}},gCe=n=>{const s=document.createElement("canvas");s.width=100,s.height=100;const r=s.getContext("2d");r.drawImage(n,0,0,100,100);const a=r.getImageData(0,0,100,100).data;let i=0;for(let o=0;o<a.length;o+=4){const l=a[o],u=a[o+1],h=a[o+2];u>l+20&&u>h+20&&i++}return i/(100*100)>.1},yCe=()=>{const n=navigator.userAgent||"",e=/iPhone|iPad|iPod/.test(n),t=/Android/.test(n),s=window.innerWidth<window.innerHeight;return e||t||s},wCe=["Hawar","Karat","Layu","Sehat"],bCe=.5,xCe=()=>{const[n,e]=Ee.useState(null),[t,s]=Ee.useState(!1),[r,a]=Ee.useState(null);return{result:n,isPredicting:t,predictionError:r,performPrediction:async(l,u)=>{if(!l){a("Model belum siap. Mohon tunggu.");return}if(a(null),e(null),!gCe(u)){a("Gambar yang diunggah sepertinya bukan daun jagung.");return}try{s(!0);const h=fCe(u),f=await dCe(l,h),d=pCe(f,wCe);d.confidence<bCe?(a("Gambar tidak dapat dikenali sebagai salah satu kategori penyakit jagung."),e(null)):e(d),on(h)}catch(h){a("Terjadi error saat prediksi: "+h.message)}finally{s(!1)}},resetPrediction:()=>{e(null),a(null)}}},vCe=n=>{const[e,t]=Ee.useState(!1),[s,r]=Ee.useState(null),a=Ee.useRef(null),i=Ee.useRef(null),o=Ee.useRef(null),l=Ee.useCallback(()=>{r(null),t(!0)},[]),u=Ee.useCallback(()=>{o.current&&(o.current.getTracks().forEach(f=>f.stop()),o.current=null),a.current&&(a.current.srcObject=null),t(!1)},[]);Ee.useEffect(()=>{if(!e){o.current&&o.current.getTracks().forEach(d=>d.stop());return}return(async()=>{try{const m=yCe()?{width:{ideal:480},height:{ideal:640},aspectRatio:{ideal:3/4},facingMode:{ideal:"environment"},frameRate:{ideal:30}}:{width:{ideal:1280},height:{ideal:720},aspectRatio:{ideal:16/9},facingMode:{ideal:"environment"},frameRate:{ideal:30}},g=await navigator.mediaDevices.getUserMedia({video:m,audio:!1});a.current&&(a.current.srcObject=g,o.current=g,r(null),await a.current.play().catch(console.warn))}catch(d){let m;switch(d.name){case"NotAllowedError":m="Akses kamera ditolak. Mohon izinkan di pengaturan browser.";break;case"NotFoundError":m="Tidak ada kamera yang ditemukan di perangkat ini.";break;case"NotReadableError":m="Kamera sedang digunakan oleh aplikasi lain.";break;case"OverconstrainedError":m="Kamera tidak mendukung resolusi yang diminta.";break;default:m=`Error mengakses kamera: ${d.message}`}r(m),t(!1)}})(),()=>{o.current&&o.current.getTracks().forEach(d=>d.stop())}},[e]);const h=Ee.useCallback(()=>{if(a.current&&i.current){const f=i.current,d=a.current;f.width=d.videoWidth,f.height=d.videoHeight,f.getContext("2d").drawImage(d,0,0,f.width,f.height),f.toBlob(g=>{if(g){const w=new File([g],`capture-${Date.now()}.jpg`,{type:"image/jpeg"});n&&n(w)}},"image/jpeg",.9),u()}},[n,u]);return{videoRef:a,canvasRef:i,isCameraOpen:e,cameraError:s,openCamera:l,closeCamera:u,capturePhoto:h}},x1=({message:n="Memuat model, mohon tunggu..."})=>F.jsx("div",{className:"min-h-screen flex items-center justify-center",children:F.jsxs("div",{className:"text-center",children:[F.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),F.jsx("p",{className:"text-gray-600",children:n})]})}),CCe=({model:n,isLoadingModel:e,error:t})=>n||e||t?null:F.jsx("div",{className:"text-amber-500 text-center my-5 px-4 py-3 bg-amber-100/40 rounded-md italic border-l-4 border-amber-500",children:"Model belum siap atau gagal dimuat tanpa error eksplisit. Periksa konsol untuk detail."}),BCe=({onFileChange:n,disabled:e})=>{const t=Ee.useRef(null),[s,r]=Ee.useState(!1),a=()=>{e||t.current.click()},i=h=>{n(h)},o=h=>{h.preventDefault(),e||r(!0)},l=h=>{h.preventDefault(),r(!1)},u=h=>{if(h.preventDefault(),r(!1),!e&&h.dataTransfer.files.length>0){const f=h.dataTransfer.files[0];f.type.startsWith("image/")&&n({target:{files:[f]}})}};return F.jsxs("div",{className:`border-2 border-dashed border-gray-300 rounded-2xl p-8 transition-all duration-200 cursor-pointer min-h-[200px] flex items-center justify-center ${e?"opacity-50 cursor-not-allowed pointer-events-none":s?"border-green-500 bg-green-50":"hover:border-green-400 hover:bg-green-50"}`,onClick:a,onDragOver:o,onDragLeave:l,onDrop:u,children:[F.jsxs("div",{className:"text-center",children:[F.jsx(X3,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),F.jsx("p",{className:"text-gray-600 mb-2",children:"Drag & drop foto daun jagung di sini"}),F.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"atau"}),F.jsx("button",{className:"bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium transition-colors",type:"button",children:"Pilih File"}),F.jsx("div",{className:"mt-4 text-xs text-gray-500",children:"Format: JPG, PNG (max 5MB)"})]}),F.jsx("input",{type:"file",accept:"image/*",onChange:i,ref:t,className:"hidden",disabled:e})]})},E6=({preview:n})=>n?F.jsxs("div",{className:"my-8 mx-5 text-center animate-fade-in-up",children:[F.jsx("h3",{className:"text-gray-800 font-semibold text-xl mb-5",children:"Pratinjau Gambar:"}),F.jsx("img",{src:n,alt:"Preview",className:"max-w-full max-h-[400px] mx-auto rounded-xl object-contain shadow-lg hover:scale-[1.02] transition-transform duration-300"})]}):null,SCe={Sehat:{icon:"",title:"Sehat",description:"Daun jagung dalam kondisi sehat dan optimal.",actions:["Lanjutkan pemantauan rutin daun dan kondisi tanaman secara berkala.","Jaga kelembaban dan nutrisi tanah tetap optimal.","Lakukan rotasi tanaman secara berkala untuk mencegah penumpukan patogen."],color:"green",severity:"low"},Hawar:{icon:"",title:"Hawar Daun (Leaf Blight)",description:"Bercak kecoklatan memanjang, cepat menyebar di permukaan daun.",actions:["Gunakan fungisida berbahan aktif seperti **mancozeb**, **chlorothalonil**, atau **azoxystrobin**.","Pangkas daun yang sudah parah agar tidak menyebar.","Tingkatkan sirkulasi udara antar tanaman dengan jarak tanam yang baik.","Hindari penyiraman dari atas (basahi tanah, bukan daun)."],color:"orange",severity:"medium"},Karat:{icon:"",title:"Karat Daun (Common Rust)",description:"Bintik kecil berwarna oranye atau kecoklatan seperti serbuk di permukaan daun.",actions:["Aplikasikan fungisida sistemik seperti **propiconazole** atau **tebuconazole**.","Gunakan varietas jagung yang tahan karat bila tersedia.","Lakukan sanitasi lahan: bersihkan sisa tanaman dan gulma yang bisa jadi inang penyakit."],color:"orange",severity:"medium"},Layu:{icon:"",title:"Layu (Wilt)",description:"Daun menguning lalu layu meskipun tanah cukup air, batang kadang membusuk.",actions:["Periksa kemungkinan serangan jamur seperti *Fusarium* atau bakteri penyebab layu.","Gunakan fungisida seperti **carbendazim** untuk infeksi jamur.","Tingkatkan drainase lahan jika terlalu becek.","Cabut tanaman yang sudah parah untuk mencegah penyebaran ke tanaman sehat."],color:"red",severity:"high"}},qg=n=>SCe[n]||{icon:"",title:"Tidak Diketahui",description:"Kondisi daun tidak dapat diidentifikasi dengan pasti.",actions:["Silakan ambil foto ulang dengan kualitas yang lebih baik.","Pastikan pencahayaan cukup dan foto tidak blur.","Konsultasikan dengan ahli pertanian jika masalah berlanjut."],color:"gray",severity:"unknown"},k6=({result:n,error:e})=>{if(!n||e)return null;const t=(n.probability*100).toFixed(2),s=qg(n.className);let r="bg-gradient-to-r from-green-400 to-green-600",a="from-green-50 to-emerald-50",i="text-green-600",o="Sangat Baik",l=$p;n.probability<.7&&n.probability>=.4?(r="bg-gradient-to-r from-yellow-400 to-orange-500",a="from-yellow-50 to-orange-50",i="text-yellow-600",o="Cukup Yakin",l=op):n.probability<.4&&(r="bg-gradient-to-r from-red-400 to-red-600",a="from-red-50 to-pink-50",i="text-red-600",o="Kurang Yakin",l=n8);const h=(f=>{switch(f){case"low":return{bgGradient:"from-green-50 to-emerald-50",borderColor:"border-green-200",iconColor:"text-green-600",titleColor:"text-green-800",RecommendationIcon:U2};case"medium":return{bgGradient:"from-orange-50 to-yellow-50",borderColor:"border-orange-200",iconColor:"text-orange-600",titleColor:"text-orange-800",RecommendationIcon:op};case"high":return{bgGradient:"from-red-50 to-pink-50",borderColor:"border-red-200",iconColor:"text-red-600",titleColor:"text-red-800",RecommendationIcon:Sw};default:return{bgGradient:"from-gray-50 to-slate-50",borderColor:"border-gray-200",iconColor:"text-gray-600",titleColor:"text-gray-800",RecommendationIcon:op}}})(s.severity);return F.jsxs("div",{className:"my-6 p-4 sm:my-8 sm:p-8 bg-white rounded-3xl shadow-xl border border-gray-100 transform transition-all duration-500 hover:shadow-2xl",children:[" ",F.jsxs("div",{className:"flex items-center justify-center mb-4 sm:mb-8",children:[" ",F.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[F.jsx(Qr,{className:"w-6 h-6 sm:w-8 sm:h-8 text-[#039b62]"})," ",F.jsxs("h3",{className:"text-lg sm:text-2xl font-bold text-[#039b62]",children:[" ","Hasil Analisis Daun"]})]})]}),F.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[" ",F.jsxs("div",{className:`p-4 sm:p-6 bg-gradient-to-br ${a} rounded-2xl border border-gray-200 shadow-sm`,children:[" ",F.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[" ",F.jsx("span",{className:"text-xs sm:text-sm font-semibold uppercase tracking-wider text-gray-600",children:"Kondisi Terdeteksi"}),F.jsx(l,{className:`w-4 h-4 sm:w-6 sm:h-6 ${i}`})," "]}),F.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[F.jsx("span",{className:"text-xl sm:text-3xl mr-1 sm:mr-2",children:s.icon})," ",F.jsx("span",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:n.className})]})]}),F.jsxs("div",{className:"p-4 sm:p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl border border-gray-200 shadow-sm",children:[" ",F.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[" ",F.jsx("span",{className:"text-xs sm:text-sm font-semibold uppercase tracking-wider text-gray-600",children:"Akurasi Deteksi"}),F.jsx("span",{className:`text-xs sm:text-sm font-bold px-2 sm:px-3 py-1 rounded-full ${n.probability>=.7?"bg-green-100 text-green-700":n.probability>=.4?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:o})]}),F.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[F.jsx("div",{className:"flex justify-between items-center",children:F.jsxs("span",{className:"text-xl sm:text-3xl font-bold text-gray-800",children:[" ",t,"%"]})}),F.jsxs("div",{className:"relative bg-gray-200 rounded-full h-2 sm:h-4 shadow-inner overflow-hidden",children:[" ",F.jsx("div",{className:`h-full ${r} transition-all duration-1000 ease-out shadow-lg`,style:{width:`${t}%`},children:F.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-20 animate-pulse"})})]}),F.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1 sm:mt-2",children:[F.jsx("span",{children:"0%"}),F.jsx("span",{children:"25%"}),F.jsx("span",{children:"50%"}),F.jsx("span",{children:"75%"}),F.jsx("span",{children:"100%"})]})]})]}),F.jsxs("div",{className:`p-4 sm:p-6 bg-gradient-to-br ${h.bgGradient} rounded-2xl border ${h.borderColor} shadow-sm`,children:[" ",F.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 mb-2 sm:mb-4",children:[" ",F.jsx(h.RecommendationIcon,{className:`w-5 h-5 sm:w-6 sm:h-6 ${h.iconColor}`})," ",F.jsx("span",{className:"text-xs sm:text-sm font-semibold uppercase tracking-wider text-gray-600",children:"Informasi Kondisi"})]}),F.jsxs("h4",{className:`text-base sm:text-xl font-bold ${h.titleColor} mb-2`,children:[" ",s.title]}),F.jsxs("p",{className:"text-sm text-gray-700 leading-normal sm:leading-relaxed",children:[" ",s.description]})]}),F.jsxs("div",{className:"p-4 sm:p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl border border-blue-200 shadow-sm",children:[" ",F.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 mb-2 sm:mb-4",children:[" ",F.jsx(U2,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600"})," ",F.jsx("span",{className:"text-xs sm:text-sm font-semibold uppercase tracking-wider text-gray-600",children:"Rekomendasi Tindakan"})]}),F.jsxs("div",{className:"space-y-3",children:[" ",s.actions.map((f,d)=>F.jsxs("div",{className:"flex items-start space-x-3",children:[F.jsxs("div",{className:"flex-shrink-0 w-5 h-5 bg-blue-100 rounded-full flex items-center justify-center mt-0.5 sm:w-6 sm:h-6",children:[" ",F.jsx("span",{className:"text-blue-600 text-xs font-bold sm:text-sm",children:d+1})," "]}),F.jsxs("p",{className:"text-gray-700 text-sm leading-normal sm:leading-relaxed text-left flex-1 break-words",children:[" ",f.split("**").map((m,g)=>g%2===1?F.jsx("strong",{className:"font-semibold text-gray-800",children:m},g):m)]})]},d))]})]}),F.jsxs("div",{className:"p-4 sm:p-6 bg-gradient-to-br from-gray-50 to-slate-50 rounded-2xl border border-gray-200 shadow-sm",children:[" ",F.jsxs("span",{className:"text-xs sm:text-sm font-semibold uppercase tracking-wider text-gray-600 block mb-2 sm:mb-3",children:[" ","Catatan Akurasi"]}),F.jsxs("p",{className:"text-sm text-gray-700 leading-normal sm:leading-relaxed",children:[" ",n.probability>=.7?"Hasil deteksi sangat akurat. Kondisi daun telah teridentifikasi dengan baik. Lakukan tindakan sesuai rekomendasi di atas.":n.probability>=.4?"Hasil deteksi cukup baik. Disarankan untuk mengambil foto dengan pencahayaan lebih baik untuk konfirmasi yang lebih akurat.":"Hasil deteksi kurang akurat. Silakan ambil foto ulang dengan kualitas yang lebih baik. Jika masalah berlanjut, konsultasikan dengan ahli pertanian."]})]})]})]})},F6=({error:n})=>n?F.jsxs("div",{className:"mx-5 my-5 px-5 py-4 bg-gradient-to-r from-red-500 to-red-400 text-white rounded-xl shadow-lg font-medium animate-slide-in-down",children:["Error: ",n]}):null,NCe=({model:n,isPredicting:e,error:t,result:s,preview:r,onImageUpload:a,onReset:i})=>{const o=Ee.useRef(null),l=()=>{o.current&&(o.current.value=""),i()};return F.jsxs("div",{children:[F.jsx(F6,{error:t}),F.jsx(BCe,{onFileChange:a,disabled:!n||e,ref:o}),e&&F.jsx(x1,{}),F.jsx(E6,{preview:r,onReset:l}),F.jsx(k6,{result:s,error:t})]})},ICe=({videoRef:n,isCameraOpen:e,cameraError:t,openCamera:s,closeCamera:r,capturePhoto:a,isPredicting:i,modelReady:o})=>F.jsxs("div",{children:[F.jsx(F6,{error:t}),e?F.jsxs("div",{className:"relative",children:[F.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,className:"w-full rounded-lg"}),F.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-4",children:[F.jsx("button",{onClick:r,className:"bg-red-500 hover:bg-red-600 text-white p-3 rounded-full transition-colors shadow-lg",title:"Tutup Kamera",children:F.jsx(_S,{className:"w-6 h-6"})}),F.jsx("button",{onClick:a,disabled:i,className:"bg-white hover:bg-gray-100 disabled:bg-gray-300 text-green-600 p-4 rounded-full transition-colors shadow-lg border-4 border-green-500",title:"Ambil Foto",children:F.jsx(Vc,{className:"w-8 h-8"})})]}),F.jsxs("div",{className:"absolute top-4 left-4 bg-black bg-opacity-50 text-white px-3 py-2 rounded-lg text-sm",children:[F.jsx("p",{children:" Arahkan kamera ke daun jagung"}),F.jsx("p",{children:" Pastikan pencahayaan cukup"})]}),i&&F.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-lg",children:F.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[F.jsx(x1,{}),F.jsx("p",{className:"text-gray-600 mt-2",children:"Menganalisis foto..."})]})})]}):F.jsxs("div",{className:"text-center py-12",children:[F.jsx(Vc,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),F.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Gunakan Kamera"}),F.jsx("p",{className:"text-gray-600 mb-6",children:"Ambil foto daun jagung langsung dengan kamera"}),F.jsxs("button",{onClick:s,disabled:!o,className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:[F.jsx(Vc,{className:"w-5 h-5 inline mr-2"}),"Buka Kamera"]})]})]}),ECe=()=>{const n=$A(),{model:e,isLoadingModel:t,modelError:s}=mCe(),{result:r,isPredicting:a,predictionError:i,performPrediction:o,resetPrediction:l}=xCe(),[u,h]=Ee.useState(null),[f,d]=Ee.useState("upload"),[m,g]=Ee.useState(!1),[w,v]=Ee.useState(!1),[b,C]=Ee.useState(""),[N,I]=Ee.useState("");Ee.useEffect(()=>{const te=localStorage.getItem("token");if(g(!!te),te){const j=JSON.parse(localStorage.getItem("user"));j&&j.name&&I(j.name)}},[]);const L=async()=>{if(!r||!m||!u)return;const te=localStorage.getItem("token");v(!0),C("");const j=qg(r.className);j&&Array.isArray(j.actions)&&j.actions.join(`
`);try{const ue=await fetch(Sl.historySave,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${te}`},body:JSON.stringify({detection_result:r.className,accuracy:r.probability,recommendation:j.description||"Tidak ada deskripsi rekomendasi.",image_data:u})});if(ue.status===401||ue.status===403){localStorage.removeItem("token"),localStorage.removeItem("user"),n("/login");return}const Q=await ue.json();if(!ue.ok)throw new Error(Q.message||"Gagal menyimpan.");C(Q.message)}catch(ue){C(ue.message)}finally{v(!1)}},$=async()=>{if(!r||!u){alert("Tidak ada hasil deteksi atau gambar untuk diunduh.");return}const te=new Vt,j=new Date,ue=qg(r.className),Q=ue&&Array.isArray(ue.actions)?ue.actions:["Tidak ada rekomendasi penanganan yang tersedia."],V=ue.title||r.className,Z=ue.description||"Tidak ada deskripsi tersedia.",le=ue.icon||"";te.setFontSize(22),te.text("Laporan Deteksi Penyakit Daun Jagung",10,20),te.setFontSize(10),te.text("Aplikasi Scanner Daun Jagung - Powered by AI",10,27),te.setLineWidth(.5),te.line(10,30,200,30),te.setFontSize(12),te.text(`Tanggal Deteksi: ${j.toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})}`,10,40),te.text(`Waktu Deteksi: ${j.toLocaleTimeString("id-ID")}`,10,47),N&&te.text(`Pengguna: ${N}`,10,54),te.text(`Sumber Gambar: ${f==="upload"?"Unggah Gambar":"Kamera"}`,10,N?61:54);const ce=N?70:63;if(te.setFontSize(14),te.text("Gambar yang Dideteksi:",10,ce),u){const pe=new Image;pe.src=u,pe.onload=()=>{const xe=pe.height*80/pe.width,Me=10,ze=ce+7;te.addImage(u,"JPEG",Me,ze,80,xe);let We=ze+xe+10;te.setFontSize(14),te.text("Hasil Deteksi:",10,We),We+=10,te.setFontSize(12),te.text(`Penyakit Teridentifikasi: ${le} ${V}`,10,We),We+=7,te.text(`Deskripsi: ${Z}`,10,We),We+=7,te.text(`Tingkat Keyakinan: ${(r.probability*100).toFixed(2)}%`,10,We),We+=17,te.setFontSize(14),te.text("Rekomendasi Penanganan:",10,We),We+=10,te.setFontSize(12),Q.forEach((_e,fe)=>{const ct=`${fe+1}. ${_e}`,lt=te.splitTextToSize(ct,180);te.text(lt,10,We),We+=lt.length*5+3}),We=Math.max(We,te.internal.pageSize.height-30);const dt=te.splitTextToSize("Catatan: Hasil deteksi ini dihasilkan oleh model AI dan ditujukan sebagai panduan awal. Untuk diagnosis dan penanganan yang lebih akurat, sangat disarankan untuk berkonsultasi dengan ahli pertanian atau agronomis.",180);te.setFontSize(8),te.setTextColor(100),te.text(dt,10,We),te.save(`Laporan_Deteksi_Daun_Jagung_${j.toISOString().slice(0,10)}.pdf`)},pe.onerror=()=>{alert("Gagal memuat gambar untuk PDF.")}}else{let pe=ce+7;te.setFontSize(14),te.text("Hasil Deteksi:",10,pe),pe+=10,te.setFontSize(12),te.text(`Penyakit Teridentifikasi: ${le} ${V}`,10,pe),pe+=7,te.text(`Deskripsi: ${Z}`,10,pe),pe+=7,te.text(`Tingkat Keyakinan: ${(r.probability*100).toFixed(2)}%`,10,pe),pe+=17,te.setFontSize(14),te.text("Rekomendasi Penanganan:",10,pe),pe+=10,te.setFontSize(12),Q.forEach((Me,ze)=>{const We=`${ze+1}. ${Me}`,tt=te.splitTextToSize(We,180);te.text(tt,10,pe),pe+=tt.length*5+3}),pe=Math.max(pe,te.internal.pageSize.height-30);const xe=te.splitTextToSize("Catatan: Hasil deteksi ini dihasilkan oleh model AI dan ditujukan sebagai panduan awal. Untuk diagnosis dan penanganan yang lebih akurat, sangat disarankan untuk berkonsultasi dengan ahli pertanian atau agronomis.",180);te.setFontSize(8),te.setTextColor(100),te.text(xe,10,pe),te.save(`Laporan_Deteksi_Daun_Jagung_${j.toISOString().slice(0,10)}.pdf`)}},H=Ee.useCallback(te=>{const j=new FileReader;j.onload=ue=>{h(ue.target.result);const Q=new Image;Q.src=ue.target.result,Q.onload=()=>{o(e,Q)}},j.readAsDataURL(te)},[e,o]),{videoRef:U,canvasRef:O,isCameraOpen:z,cameraError:T,openCamera:R,closeCamera:W,capturePhoto:K}=vCe(te=>{H(te),d("upload")}),re=Ee.useCallback(()=>{h(null),l(),C("")},[l]),P=te=>{const j=te.target.files[0];if(!j){re();return}re(),H(j)},Y=te=>{d(te),z&&W(),te!==f&&(re(),h(null))};if(t)return F.jsx(x1,{text:"Memuat model AI, mohon tunggu..."});const J=f==="camera"&&!z&&u;return F.jsxs("div",{className:"relative w-full min-h-screen flex flex-col items-center justify-center overflow-hidden bg-white py-12 px-4 sm:px-6",children:[" ",F.jsxs("div",{className:"absolute inset-0",children:[F.jsxs("div",{className:"absolute top-20 left-10 animate-bounce delay-100 hidden sm:block",children:[" ",F.jsx(Qr,{className:"w-8 h-8 text-green-300 opacity-60"})]}),F.jsxs("div",{className:"absolute top-40 right-20 animate-bounce delay-300 hidden sm:block",children:[" ",F.jsx(Qr,{className:"w-6 h-6 text-emerald-300 opacity-40"})]}),F.jsx("div",{className:"absolute top-32 right-32 w-20 h-20 bg-gradient-to-br from-green-200 to-emerald-200 rounded-full opacity-30 animate-pulse hidden sm:block"})," "]}),F.jsxs("div",{className:"relative z-10 w-full max-w-sm sm:max-w-md md:max-w-lg lg:max-w-4xl mx-auto text-center",children:[" ",F.jsx("div",{className:"flex justify-center lg:justify-center mb-6",children:F.jsxs("div",{className:"flex items-center gap-1 bg-green-100 px-3 py-1 rounded-full",children:[F.jsx(W3,{className:"w-4 h-4 text-green-600"}),F.jsx("span",{className:"text-sm font-medium text-green-700",children:"Teknologi AI"})]})}),F.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4 leading-tight",children:[" ","Daun Jagung "," ",F.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-emerald-600 py-2",children:"Scanner"})]}),F.jsxs("p",{className:"text-sm sm:text-base text-gray-600 mb-8 max-w-xs sm:max-w-md mx-auto",children:[" ","Unggah gambar atau gunakan kamera untuk analisis penyakit instan."]}),F.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden mb-8",children:[F.jsxs("div",{className:"flex border-b border-gray-200",children:[F.jsxs("button",{onClick:()=>Y("upload"),className:`flex-1 py-3 px-4 sm:py-4 sm:px-6 font-medium text-sm sm:text-base transition-colors ${f==="upload"?"bg-green-50 text-green-600 border-b-2 border-green-500":"text-gray-600 hover:text-gray-800"}`,children:[" ",F.jsx(X3,{className:"w-4 h-4 inline mr-2 sm:w-5 sm:h-5"})," Unggah Gambar"]}),F.jsxs("button",{onClick:()=>Y("camera"),className:`flex-1 py-3 px-4 sm:py-4 sm:px-6 font-medium text-sm sm:text-base transition-colors ${f==="camera"?"bg-green-50 text-green-600 border-b-2 border-green-500":"text-gray-600 hover:text-gray-800"}`,children:[" ",F.jsx(Vc,{className:"w-4 h-4 inline mr-2 sm:w-5 sm:h-5"})," Gunakan Kamera"]})]}),F.jsxs("div",{className:"p-4 sm:p-6",children:[" ",f==="upload"&&F.jsx(NCe,{model:e,isPredicting:a,error:i||s,result:r,preview:u,onImageUpload:P,onReset:re}),f==="camera"&&F.jsxs(F.Fragment,{children:[F.jsx(ICe,{videoRef:U,isCameraOpen:z,cameraError:T||s,openCamera:R,closeCamera:W,capturePhoto:K,isPredicting:a,modelReady:!!e}),J&&F.jsxs(F.Fragment,{children:[F.jsx(E6,{preview:u,onReset:re}),F.jsx(k6,{result:r,error:i})]})]}),r&&!i&&F.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 text-center",children:[" ",F.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-4 mb-4",children:[" ",m&&F.jsxs("button",{onClick:L,disabled:w||!!b,className:"group w-full text-sm sm:w-auto bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-4 py-2 sm:px-6 sm:py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center justify-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[" ",F.jsx(L2,{className:"w-4 h-4 sm:w-5 sm:h-5"}),w?"Menyimpan...":"Simpan Hasil ke Riwayat"]}),F.jsxs("button",{onClick:$,className:"group w-full text-sm sm:w-auto bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white px-4 py-2 sm:px-6 sm:py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center justify-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:!r||!u,children:[" ",F.jsx(jC,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Unduh Laporan PDF"]})]}),b&&F.jsxs("p",{className:`mt-3 text-xs sm:text-sm font-medium ${b.includes("berhasil")?"text-green-600":"text-red-600"}`,children:[" ",b]}),!m&&F.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[" ",F.jsxs("div",{className:"flex items-center justify-center",children:[F.jsx(RS,{className:"w-5 h-5 mr-2 text-blue-600 sm:w-6 sm:h-6 sm:mr-3"})," ",F.jsxs("p",{className:"text-sm text-gray-700",children:[" ","Silakan"," ",F.jsx(Bi,{to:"/login",className:"font-bold text-blue-600 hover:underline",children:"login"})," ","untuk menyimpan hasil pindai ini."]})]})]})]})]})]}),F.jsx(CCe,{model:e,isLoadingModel:t,error:s}),F.jsx("canvas",{ref:O,style:{display:"none"}})]})]})},kCe=({text:n})=>F.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[F.jsx("div",{className:"w-16 h-16 border-4 border-green-500 border-t-transparent border-solid rounded-full animate-spin"}),n&&F.jsx("p",{className:"mt-4 text-lg text-gray-600",children:n})]}),FCe=()=>{const[n,e]=Ee.useState(""),[t,s]=Ee.useState(null),[r,a]=Ee.useState(!0),[i,o]=Ee.useState(null),l=$A();Ee.useEffect(()=>{const h=localStorage.getItem("user");if(h){const d=JSON.parse(h);e(d.fullName||"Pengguna")}(async()=>{const d=localStorage.getItem("token");if(!d){l("/login");return}try{const m=await fetch(Sl.stats,{headers:{Authorization:`Bearer ${d}`}});if(m.status===401||m.status===403){localStorage.removeItem("token"),localStorage.removeItem("user"),l("/login");return}if(!m.ok){const w=await m.json();throw new Error(w.message||"Gagal memuat statistik.")}const g=await m.json();s(g)}catch(m){o(m.message)}finally{a(!1)}})()},[l]);const u=({children:h})=>F.jsx("div",{className:"flex-grow p-6 sm:p-8 bg-gradient-to-br from-green-50 to-blue-50 min-h-screen",children:F.jsx("div",{className:"max-w-7xl mx-auto",children:h})});return r?F.jsx(u,{children:F.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-10rem)]",children:F.jsx(kCe,{text:"Memuat Statistik..."})})}):i?F.jsx(u,{children:F.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg text-center",children:[F.jsx(op,{className:"w-12 h-12 mx-auto text-red-500 mb-4"}),F.jsx("h3",{className:"text-xl font-semibold text-red-600",children:"Terjadi Kesalahan"}),F.jsx("p",{className:"text-gray-600 mt-2",children:i})]})}):F.jsxs(u,{children:[F.jsxs("div",{className:"mb-10",children:[F.jsxs("h2",{className:"text-4xl font-bold text-gray-800",children:["Selamat Datang, ",F.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-blue-600",children:[n,"!"]})]}),F.jsx("p",{className:"text-gray-600 mt-2 text-lg",children:"Ringkasan aktivitas CornLeaf AI Anda."})]}),F.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10",children:[F.jsx(A2,{icon:F.jsx(k8,{size:32}),title:"Total Pindai",value:t.totalScans}),F.jsx(A2,{icon:F.jsx(Qr,{size:32}),title:"Penyakit Terdeteksi",value:t.diseasesDetected}),F.jsx(A2,{icon:F.jsx(G3,{size:32}),title:"Akurasi Rata-rata",value:t.totalScans>0?`${(t.averageAccuracy*100).toFixed(1)}%`:"N/A"}),F.jsx(A2,{icon:F.jsx(VC,{size:32}),title:"Pindai Bulan Ini",value:t.scansThisMonth})]}),F.jsxs("div",{className:"bg-white/70 backdrop-blur-sm p-6 sm:p-8 rounded-2xl shadow-lg border border-gray-200",children:[F.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Aksi Cepat"}),F.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[F.jsx(u2,{icon:F.jsx(JP,{size:28}),label:"Mulai Pindai Baru",to:"/cornLeafScanner"}),F.jsx(u2,{icon:F.jsx(VC,{size:28}),label:"Lihat Riwayat",to:"/riwayat"}),F.jsx(u2,{icon:F.jsx($S,{size:28}),label:"Profil Tim",to:"/team"}),F.jsx(u2,{icon:F.jsx(U8,{size:28}),label:"Tentang Aplikasi",to:"/about"})]})]})]})},A2=({icon:n,title:e,value:t})=>F.jsxs("div",{className:"bg-white/70 backdrop-blur-sm p-6 rounded-2xl shadow-lg border border-gray-200 flex items-center space-x-4 hover:shadow-xl hover:-translate-y-1.5 transition-all duration-300",children:[F.jsx("div",{className:"bg-gradient-to-br from-green-100 to-blue-200 text-green-700 p-4 rounded-full",children:n}),F.jsxs("div",{children:[F.jsx("h3",{className:"text-sm font-medium text-gray-600",children:e}),F.jsx("div",{className:"text-2xl lg:text-3xl font-bold text-gray-800",children:typeof t=="number"?t.toLocaleString("id-ID"):t})]})]}),u2=({icon:n,label:e,to:t})=>F.jsxs(Bi,{to:t,className:"group flex flex-col items-center justify-center p-4 bg-white rounded-xl shadow-md hover:shadow-lg hover:bg-green-50 transition-all duration-300 text-gray-700 hover:text-green-700 text-center border border-gray-200 hover:border-green-300 hover:-translate-y-1",children:[F.jsx("div",{className:"mb-3 text-gray-500 group-hover:text-green-600 transition-colors duration-300",children:n}),F.jsx("span",{className:"text-sm font-semibold",children:e})]}),TCe=()=>{const n=$A(),[e,t]=Ee.useState([]),[s,r]=Ee.useState(!0),[a,i]=Ee.useState(null),[o,l]=Ee.useState(!1),[u,h]=Ee.useState(null),[f,d]=Ee.useState(!1),[m,g]=Ee.useState(!1),[w,v]=Ee.useState(null),[b,C]=Ee.useState(""),[N,I]=Ee.useState("newest"),L=Ee.useCallback(async()=>{r(!0),i(null);const P=localStorage.getItem("token");if(!P){i("Anda harus login untuk melihat riwayat."),r(!1);return}try{const Y=await fetch(Sl.history,{headers:{Authorization:`Bearer ${P}`}});if(Y.status===401||Y.status===403){localStorage.removeItem("token"),localStorage.removeItem("user"),n("/login");return}if(!Y.ok){const te=await Y.json();throw new Error(te.message||`Gagal mengambil data riwayat: ${Y.status} ${Y.statusText}`)}const J=await Y.json();t(J)}catch(Y){console.error("Fetch history error:",Y),i(`Gagal memuat riwayat: ${Y.message}. Pastikan server berjalan dan koneksi internet stabil.`)}finally{r(!1)}},[n]);Ee.useEffect(()=>{L()},[L]);const $=Ee.useMemo(()=>{let P=[...e];return b&&(P=P.filter(Y=>Y.detection_result.toLowerCase().includes(b.toLowerCase()))),P.sort((Y,J)=>{switch(N){case"oldest":return new Date(Y.scanned_at)-new Date(J.scanned_at);case"disease":return Y.detection_result.localeCompare(J.detection_result);case"accuracy":return J.accuracy-Y.accuracy;case"newest":default:return new Date(J.scanned_at)-new Date(Y.scanned_at)}}),P},[e,b,N]),H=P=>{h(P),l(!0)},U=()=>{h(null),l(!1)},O=P=>{v(P),g(!0)},z=()=>{v(null),g(!1)},T=async()=>{if(!u)return;d(!0),i(null);const P=[...e];t(J=>J.filter(te=>te.id!==u.id)),U();const Y=localStorage.getItem("token");try{const J=await fetch(Sl.historyItem(u.id),{method:"DELETE",headers:{Authorization:`Bearer ${Y}`}});if(!J.ok){const te=await J.json();throw new Error(te.message||"Gagal menghapus data di server.")}}catch(J){i(`Gagal menghapus riwayat: ${J.message}. Item telah dikembalikan, silakan coba lagi.`),t(P),console.error("Delete failed:",J)}finally{d(!1)}},R=async P=>{if(!P){alert("Tidak ada data riwayat untuk diunduh.");return}const Y=new Vt,J=new Date(P.scanned_at),te=qg(P.detection_result),j=te&&Array.isArray(te.actions)?te.actions:["Tidak ada rekomendasi penanganan yang tersedia."],ue=te.title||P.detection_result,Q=te.description||"Tidak ada deskripsi tersedia.",V=te.icon||"";Y.setFontSize(22),Y.text("Laporan Deteksi Penyakit Daun Jagung",10,20),Y.setFontSize(10),Y.text("Aplikasi Scanner Daun Jagung - Riwayat",10,27),Y.setLineWidth(.5),Y.line(10,30,200,30),Y.setFontSize(12),Y.text(`Tanggal Deteksi: ${J.toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})}`,10,40),Y.text(`Waktu Deteksi: ${J.toLocaleTimeString("id-ID")}`,10,47),Y.text("Sumber Gambar: Riwayat Pindai",10,54);const Z=63;if(Y.setFontSize(14),Y.text("Gambar yang Dideteksi:",10,Z),P.image_data){const le=new Image;le.src=P.image_data,le.onload=()=>{const pe=le.height*80/le.width,ye=10,xe=Z+7;Y.addImage(P.image_data,"JPEG",ye,xe,80,pe);let Me=xe+pe+10;Y.setFontSize(14),Y.text("Hasil Deteksi:",10,Me),Me+=10,Y.setFontSize(12),Y.text(`Penyakit Teridentifikasi: ${V} ${ue}`,10,Me),Me+=7;const ze=Y.splitTextToSize(`Deskripsi: ${Q}`,180);Y.text(ze,10,Me),Me+=ze.length*5+3,Y.text(`Tingkat Keyakinan: ${(P.accuracy*100).toFixed(2)}%`,10,Me),Me+=17,Y.setFontSize(14),Y.text("Rekomendasi Penanganan:",10,Me),Me+=10,Y.setFontSize(12),j.forEach((dt,_e)=>{const fe=`${_e+1}. ${dt}`,ct=Y.splitTextToSize(fe,180);Y.text(ct,10,Me),Me+=ct.length*5+3}),Me=Math.max(Me,Y.internal.pageSize.height-30);const tt=Y.splitTextToSize("Catatan: Hasil deteksi ini dihasilkan oleh model AI dan ditujukan sebagai panduan awal. Untuk diagnosis dan penanganan yang lebih akurat, sangat disarankan untuk berkonsultasi dengan ahli pertanian atau agronomis.",180);Y.setFontSize(8),Y.setTextColor(100),Y.text(tt,10,Me),Y.save(`Riwayat_Deteksi_${P.detection_result}_${J.toISOString().slice(0,10)}.pdf`)},le.onerror=()=>{alert("Gagal memuat gambar untuk PDF.")}}else alert("Data gambar tidak ditemukan untuk membuat PDF."),console.warn("No image data found for PDF generation for item:",P)},W=P=>new Date(P).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),K=P=>P==="Sehat"||P==="Healthy"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",re=P=>P==="Sehat"||P==="Healthy"?"Sehat":"Tindakan Diperlukan";return s?F.jsx(x1,{text:"Memuat riwayat Anda..."}):F.jsxs(F.Fragment,{children:[F.jsx("div",{className:"min-h-screen py-12 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-green-50 to-blue-50",children:F.jsxs("div",{className:"max-w-7xl mx-auto",children:[F.jsxs("div",{className:"text-center mb-12",children:[F.jsx(d8,{className:"w-12 h-12 mx-auto text-green-600 mb-4"}),F.jsx("h1",{className:"text-4xl sm:text-5xl py-2 font-bold text-gray-800 mb-4 bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"Riwayat Pindai"}),F.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Tinjau, unduh, dan kelola semua deteksi penyakit daun jagung Anda sebelumnya."})]}),a&&F.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md mb-6",role:"alert",children:[F.jsx("p",{className:"font-bold",children:"Error"}),F.jsx("p",{children:a})]}),F.jsx("div",{className:"mb-8 p-4 bg-white/80 backdrop-blur-sm rounded-2xl shadow-md",children:F.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[F.jsxs("div",{className:"relative",children:[F.jsx(mF,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),F.jsx("input",{type:"text",placeholder:"Cari berdasarkan nama penyakit...",value:b,onChange:P=>C(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition"})]}),F.jsxs("div",{className:"relative",children:[F.jsx(IP,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),F.jsxs("select",{value:N,onChange:P=>I(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition appearance-none",children:[F.jsx("option",{value:"newest",children:"Urutkan: Terbaru"}),F.jsx("option",{value:"oldest",children:"Urutkan: Terlama"}),F.jsx("option",{value:"disease",children:"Urutkan: Nama Penyakit"}),F.jsx("option",{value:"accuracy",children:"Urutkan: Akurasi Tertinggi"})]})]})]})}),$.length>0?F.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:$.map(P=>F.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden flex flex-col transition-transform transform hover:-translate-y-1",children:[F.jsx("img",{src:P.image_data,alt:P.detection_result,className:"w-full h-48 object-cover"}),F.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[F.jsx("p",{className:"text-sm text-gray-500 mb-1",children:W(P.scanned_at).split(",")[0]}),F.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:P.detection_result}),F.jsxs("div",{className:"flex justify-between items-center mt-2 mb-4",children:[F.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${K(P.detection_result)}`,children:re(P.detection_result)}),F.jsxs("span",{className:"font-semibold text-gray-700",children:[(P.accuracy*100).toFixed(1),"% Akurasi"]})]}),F.jsxs("div",{className:"mt-auto border-t pt-4 flex justify-around items-center",children:[F.jsxs("button",{onClick:()=>O(P),className:"flex flex-col items-center text-blue-600 hover:text-blue-900 transition-colors",title:"Lihat Detail",children:[F.jsx(u8,{size:20})," ",F.jsx("span",{className:"text-xs mt-1",children:"Detail"})]}),F.jsxs("button",{onClick:()=>R(P),className:"flex flex-col items-center text-green-600 hover:text-green-900 transition-colors",title:"Unduh PDF",children:[F.jsx(jC,{size:20})," ",F.jsx("span",{className:"text-xs mt-1",children:"Unduh"})]}),F.jsxs("button",{onClick:()=>H(P),className:"flex flex-col items-center text-red-600 hover:text-red-900 transition-colors",title:"Hapus",children:[F.jsx(H8,{size:20})," ",F.jsx("span",{className:"text-xs mt-1",children:"Hapus"})]})]})]})]},P.id))}):F.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl shadow-lg",children:[F.jsx(mF,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),F.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"Tidak Ada Hasil"}),F.jsx("p",{className:"text-gray-500 mt-2",children:e.length===0?"Anda belum memiliki riwayat pemindaian.":"Tidak ada riwayat yang cocok dengan pencarian Anda."})]})]})}),o&&F.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 transition-opacity animate-fade-in",children:F.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4 transform transition-all animate-scale-up",children:[F.jsxs("div",{className:"flex items-start",children:[F.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:F.jsx(op,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),F.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[F.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Hapus Riwayat Pindai"}),F.jsx("div",{className:"mt-2",children:F.jsx("p",{className:"text-sm text-gray-500",children:"Apakah Anda yakin ingin menghapus riwayat ini secara permanen? Tindakan ini tidak dapat diurungkan."})})]})]}),F.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[F.jsx("button",{onClick:T,disabled:f,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50",children:f?"Menghapus...":"Ya, Hapus"}),F.jsx("button",{onClick:U,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",disabled:f,children:"Batal"})]})]})}),m&&w&&F.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 animate-fade-in",children:F.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto transform transition-all animate-scale-up",children:[F.jsxs("div",{className:"p-6 md:p-8",children:[F.jsxs("div",{className:"flex justify-between items-start mb-4",children:[F.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Detail Hasil Pindai"}),F.jsx("button",{onClick:z,className:"text-gray-400 hover:text-gray-600 transition-colors",children:F.jsx(_S,{size:24})})]}),F.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[F.jsxs("div",{children:[F.jsx("img",{src:w.image_data,alt:"Hasil Pindai",className:"w-full h-auto object-cover rounded-lg shadow-md mb-4"}),F.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[F.jsxs("p",{children:[F.jsx("strong",{children:"Tanggal:"})," ",W(w.scanned_at)]}),F.jsxs("p",{children:[F.jsx("strong",{children:"Akurasi:"})," ",F.jsxs("span",{className:"font-bold text-gray-800",children:[(w.accuracy*100).toFixed(1),"%"]})]})]})]}),F.jsx("div",{className:"space-y-4",children:(()=>{const P=qg(w.detection_result);return F.jsxs(F.Fragment,{children:[F.jsxs("div",{children:[F.jsx("h4",{className:"font-bold text-lg text-gray-800",children:"Penyakit Teridentifikasi:"}),F.jsxs("div",{className:"flex items-center mt-1",children:[F.jsxs("p",{className:"text-xl font-bold text-gray-800",children:[P.icon," ",P.title||w.detection_result]}),F.jsx("span",{className:`ml-3 px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${K(w.detection_result)}`,children:re(w.detection_result)})]}),F.jsx("p",{className:"text-gray-600 mt-2",children:P.description})]}),F.jsxs("div",{children:[F.jsx("h4",{className:"font-bold text-lg text-gray-800 mt-4",children:"Rekomendasi Penanganan:"}),F.jsx("ul",{className:"list-disc list-inside text-gray-600 space-y-2 mt-2 pl-2",children:P.actions.map((Y,J)=>F.jsx("li",{children:Y},J))})]})]})})()})]})]}),F.jsxs("div",{className:"px-6 md:px-8 py-4 bg-gray-50 border-t border-gray-200 flex flex-col sm:flex-row-reverse sm:items-center",children:[F.jsxs("button",{onClick:()=>R(w),className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[F.jsx(jC,{size:18,className:"mr-2"})," Unduh Laporan PDF"]}),F.jsx("button",{onClick:z,className:"mt-3 sm:mt-0 sm:mr-3 w-full sm:w-auto inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm",children:"Tutup"})]})]})})]})},DCe=()=>{const n=$A(),[e,t]=Ee.useState({email:"",password:""}),[s,r]=Ee.useState(""),[a,i]=Ee.useState(!1),[o,l]=Ee.useState(!1),{email:u,password:h}=e,f=m=>{t({...e,[m.target.id]:m.target.value})},d=async m=>{m.preventDefault(),r(""),i(!1),l(!0);try{const g=await fetch(Sl.login,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u,password:h})}),w=await g.json();if(!g.ok)throw new Error(w.message||"Terjadi kesalahan");i(!1),r(w.message||"Login berhasil!"),localStorage.setItem("token",w.token),localStorage.setItem("user",JSON.stringify(w.user)),setTimeout(()=>{n("/dashboard")},1500)}catch(g){i(!0),r(g.message)}finally{l(!1)}};return F.jsxs("div",{className:"relative min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 overflow-hidden",children:[F.jsx("div",{className:"absolute top-20 left-10 animate-bounce delay-100",children:F.jsx(Qr,{className:"w-8 h-8 text-green-300 opacity-60"})}),F.jsx("div",{className:"absolute bottom-10 right-20 animate-bounce delay-300",children:F.jsx(Qr,{className:"w-10 h-10 text-emerald-300 opacity-50"})}),F.jsx("div",{className:"absolute top-1/4 right-1/4 w-20 h-20 bg-gradient-to-br from-green-200 to-emerald-200 rounded-full opacity-30 animate-pulse"}),F.jsxs("div",{className:"relative z-10 w-full max-w-md p-8 space-y-8 bg-white rounded-2xl shadow-lg",children:[F.jsxs("div",{className:"text-center",children:[F.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Selamat Datang Kembali!"}),F.jsx("p",{className:"mt-2 text-gray-600",children:"Silakan masuk untuk melanjutkan."})]}),F.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[F.jsxs("div",{className:"space-y-2",children:[F.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Alamat Email"}),F.jsx("input",{type:"email",id:"email",placeholder:"contoh@email.com",value:u,onChange:f,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition"})]}),F.jsxs("div",{className:"space-y-2",children:[F.jsx("div",{className:"flex items-center justify-between",children:F.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Kata Sandi"})}),F.jsx("input",{type:"password",id:"password",placeholder:"",value:h,onChange:f,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition"})]}),s&&F.jsx("p",{className:`text-center text-sm font-medium ${a?"text-red-600":"text-green-600"}`,children:s}),F.jsxs("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-semibold rounded-xl text-white bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed",disabled:o,children:[F.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:F.jsx(RS,{className:"h-5 w-5 text-green-300 group-hover:text-green-200"})}),F.jsx("span",{children:o?"Memproses...":"Login"})]}),F.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Belum punya akun?"," ",F.jsx(Bi,{to:"/register",className:"font-medium text-green-600 hover:text-green-500 hover:underline",children:"Daftar di sini"})]})]})]})]})},LCe=()=>{const n=$A(),[e,t]=Ee.useState({fullName:"",email:"",password:""}),[s,r]=Ee.useState(""),[a,i]=Ee.useState(!1),[o,l]=Ee.useState(!1),{fullName:u,email:h,password:f}=e,d=g=>{t({...e,[g.target.id]:g.target.value})},m=async g=>{g.preventDefault(),r(""),i(!1),l(!0);try{const w=await fetch(Sl.register,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:u,email:h,password:f})}),v=await w.json();if(!w.ok)throw new Error(v.message||"Terjadi kesalahan saat mendaftar.");i(!1),r(v.message||"Pendaftaran berhasil! Anda akan diarahkan ke halaman login."),setTimeout(()=>{n("/login")},2e3)}catch(w){i(!0),r(w.message)}finally{l(!1)}};return F.jsxs("div",{className:"relative min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 overflow-hidden",children:[F.jsx("div",{className:"absolute top-20 right-10 animate-bounce delay-200",children:F.jsx(Qr,{className:"w-8 h-8 text-green-300 opacity-60"})}),F.jsx("div",{className:"absolute bottom-10 left-20 animate-bounce delay-400",children:F.jsx(Qr,{className:"w-10 h-10 text-emerald-300 opacity-50"})}),F.jsx("div",{className:"absolute bottom-1/4 left-1/4 w-20 h-20 bg-gradient-to-br from-green-200 to-emerald-200 rounded-full opacity-30 animate-pulse"}),F.jsxs("div",{className:"relative z-10 w-full max-w-md p-8 space-y-8 bg-white rounded-2xl shadow-lg",children:[F.jsxs("div",{className:"text-center",children:[F.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Buat Akun Baru"}),F.jsx("p",{className:"mt-2 text-gray-600",children:"Isi form di bawah untuk mendaftar."})]}),F.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[F.jsxs("div",{className:"space-y-2",children:[F.jsx("label",{htmlFor:"fullName",className:"text-sm font-medium text-gray-700",children:"Nama Lengkap"}),F.jsx("input",{type:"text",id:"fullName",placeholder:"Masukkan nama lengkap Anda",value:u,onChange:d,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition"})]}),F.jsxs("div",{className:"space-y-2",children:[F.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Alamat Email"}),F.jsx("input",{type:"email",id:"email",placeholder:"contoh@email.com",value:h,onChange:d,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition"})]}),F.jsxs("div",{className:"space-y-2",children:[F.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Buat Kata Sandi"}),F.jsx("input",{type:"password",id:"password",placeholder:"",value:f,onChange:d,required:!0,minLength:"6",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition"})]}),s&&F.jsx("p",{className:`text-center text-sm font-medium ${a?"text-red-600":"text-green-600"}`,children:s}),F.jsxs("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-semibold rounded-xl text-white bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed",disabled:o,children:[F.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:F.jsx(Y3,{className:"h-5 w-5 text-green-300 group-hover:text-green-200"})}),F.jsx("span",{children:o?"Memproses...":"Daftar"})]}),F.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Sudah punya akun?"," ",F.jsx(Bi,{to:"/login",className:"font-medium text-green-600 hover:text-green-500 hover:underline",children:"Login di sini"})]})]})]})]})},UCe=()=>{const n=$A(),e=Ee.useRef(null),[t,s]=Ee.useState(null),[r,a]=Ee.useState(""),[i,o]=Ee.useState(null),[l,u]=Ee.useState(null),[h,f]=Ee.useState(""),[d,m]=Ee.useState(""),[g,w]=Ee.useState(""),[v,b]=Ee.useState(!0),[C,N]=Ee.useState(!1),[I,L]=Ee.useState(!1),[$,H]=Ee.useState({type:"",text:""}),U=(R,W)=>{H({type:R,text:W}),setTimeout(()=>H({type:"",text:""}),5e3)};Ee.useEffect(()=>{(async()=>{b(!0);const W=localStorage.getItem("token");if(!W){n("/login");return}try{const K=await fetch(Sl.profile,{headers:{Authorization:`Bearer ${W}`}});if(K.status===401||K.status===403){localStorage.clear(),n("/login"),U("error","Sesi Anda telah berakhir, silakan login kembali.");return}if(!K.ok){const P=await K.json().catch(()=>({message:"Server error."}));throw new Error(P.message||"Gagal memuat profil.")}const re=await K.json();s(re),a(re.full_name||""),o(re.profile_picture||"https://placehold.co/128x128/E2E8F0/4A5568?text=User")}catch(K){console.error("Error fetching profile:",K),U("error",`Gagal memuat profil: ${K.message}.`)}finally{b(!1)}})()},[n]);const O=R=>{const W=R.target.files[0];if(W){const K=new FileReader;K.onloadend=()=>{o(K.result),u(K.result)},K.readAsDataURL(W)}},z=async R=>{R.preventDefault(),N(!0),H({type:"",text:""});const W=localStorage.getItem("token"),K={fullName:r,profilePicture:l};console.log("Sending payload for profile details update:",K);try{const re=await fetch(Sl.profileDetails,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${W}`},body:JSON.stringify(K)});if(!re.ok){const Y=await re.json().catch(()=>({message:"Server error."}));throw new Error(Y.message||"Gagal memperbarui detail profil.")}const P=await re.json();P.token&&localStorage.setItem("token",P.token),P.user&&(localStorage.setItem("user",JSON.stringify(P.user)),s(P.user),a(P.user.full_name||P.user.fullName||"")),window.dispatchEvent(new Event("storage")),U("success","Detail profil berhasil diperbarui!"),u(null)}catch(re){console.error("Error saving details:",re),U("error",`Gagal memperbarui profil: ${re.message}.`)}finally{N(!1)}},T=async R=>{if(R.preventDefault(),d!==g){U("error","Konfirmasi kata sandi baru tidak cocok.");return}if(d.length<6){U("error","Kata sandi baru minimal harus 6 karakter.");return}L(!0),H({type:"",text:""});const W=localStorage.getItem("token");try{const K=await fetch(Sl.profilePassword,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${W}`},body:JSON.stringify({currentPassword:h,newPassword:d})});if(K.status===401||K.status===403){localStorage.clear(),n("/login"),U("error","Sesi Anda telah berakhir, silakan login kembali.");return}if(!K.ok){const P=await K.json().catch(()=>({message:"Server error."}));throw new Error(P.message||"Gagal mengubah kata sandi.")}const re=await K.json();U("success",re.message||"Kata sandi berhasil diubah!"),f(""),m(""),w("")}catch(K){console.error("Error changing password:",K),U("error",`Gagal mengubah kata sandi: ${K.message}.`)}finally{L(!1)}};return v?F.jsx(x1,{text:"Memuat Profil..."}):F.jsx("div",{className:"min-h-screen py-12 px-6 bg-gradient-to-br from-green-50 to-blue-50",children:F.jsxs("div",{className:"max-w-6xl mx-auto",children:[F.jsxs("div",{className:"text-center mb-12",children:[F.jsx("h1",{className:"text-4xl md:text-5xl py-2 font-bold text-gray-800 mb-4 bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"Pengaturan Profil"}),F.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-green-500 to-blue-500 mx-auto"})]}),$.text&&F.jsxs("div",{className:`rounded-lg p-4 mb-8 flex items-center space-x-3 ${$.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[$.type==="success"?F.jsx($p,{className:"w-5 h-5"}):F.jsx(Sw,{className:"w-5 h-5"}),F.jsx("span",{className:"font-medium",children:$.text})]}),F.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[F.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[F.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Detail Profil"}),F.jsxs("form",{onSubmit:z,children:[F.jsxs("div",{className:"flex flex-col items-center mb-6",children:[F.jsx("img",{src:i,alt:"Avatar",className:"w-32 h-32 rounded-full object-cover mb-4 border-4 border-gray-200",onError:R=>{R.target.onerror=null,R.target.src="https://placehold.co/128x128/E2E8F0/4A5568?text=User"}}),F.jsxs("button",{type:"button",className:"flex items-center space-x-2 bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300 transition-colors text-sm",onClick:()=>e.current.click(),children:[F.jsx(Vc,{size:16}),F.jsx("span",{children:"Ubah Foto"})]}),F.jsx("input",{type:"file",ref:e,onChange:O,style:{display:"none"},accept:"image/*"})]}),F.jsxs("div",{className:"mb-6",children:[F.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Lengkap"}),F.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-green-500",children:[F.jsx("span",{className:"pl-3 text-gray-400",children:F.jsx($S,{size:18})}),F.jsx("input",{type:"text",id:"fullName",value:r,onChange:R=>a(R.target.value),required:!0,className:"w-full p-2 border-none focus:ring-0"})]})]}),F.jsxs("div",{className:"mb-8",children:[F.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),F.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg overflow-hidden bg-gray-100",children:[F.jsx("span",{className:"pl-3 text-gray-400",children:F.jsx(GC,{size:18})}),F.jsx("input",{type:"email",id:"email",value:(t==null?void 0:t.email)||"",disabled:!0,className:"w-full p-2 border-none bg-gray-100 text-gray-500 cursor-not-allowed focus:ring-0"})]})]}),F.jsxs("button",{type:"submit",className:"w-full flex justify-center items-center space-x-2 bg-gradient-to-r from-green-600 to-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",disabled:C,children:[F.jsx(L2,{size:20}),F.jsx("span",{children:C?"Menyimpan...":"Simpan Perubahan"})]})]})]}),F.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[F.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Ubah Kata Sandi"}),F.jsxs("form",{onSubmit:T,children:[F.jsxs("div",{className:"mb-6",children:[F.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Kata Sandi Saat Ini"}),F.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-green-500",children:[F.jsx("span",{className:"pl-3 text-gray-400",children:F.jsx(bg,{size:18})}),F.jsx("input",{type:"password",id:"currentPassword",value:h,onChange:R=>f(R.target.value),required:!0,className:"w-full p-2 border-none focus:ring-0"})]})]}),F.jsxs("div",{className:"mb-6",children:[F.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Kata Sandi Baru"}),F.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-green-500",children:[F.jsx("span",{className:"pl-3 text-gray-400",children:F.jsx(bg,{size:18})}),F.jsx("input",{type:"password",id:"newPassword",value:d,onChange:R=>m(R.target.value),required:!0,minLength:"6",className:"w-full p-2 border-none focus:ring-0"})]})]}),F.jsxs("div",{className:"mb-8",children:[F.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Konfirmasi Kata Sandi Baru"}),F.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-green-500",children:[F.jsx("span",{className:"pl-3 text-gray-400",children:F.jsx(bg,{size:18})}),F.jsx("input",{type:"password",id:"confirmPassword",value:g,onChange:R=>w(R.target.value),required:!0,className:"w-full p-2 border-none focus:ring-0"})]})]}),F.jsxs("button",{type:"submit",className:"w-full flex justify-center items-center space-x-2 bg-gradient-to-r from-green-600 to-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",disabled:I,children:[F.jsx(L2,{size:20}),F.jsx("span",{children:I?"Menyimpan...":"Ubah Kata Sandi"})]})]})]})]})]})})},RCe=()=>{const[n,e]=Ee.useState(""),[t,s]=Ee.useState({type:"",text:""}),[r,a]=Ee.useState(!1),i=async o=>{o.preventDefault(),a(!0),s({type:"",text:""});try{const l=await fetch(Sl.forgotPassword,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})}),u=await l.json();if(!l.ok)throw new Error(u.message||"Gagal mengirim email pemulihan.");s({type:"success",text:u.message})}catch(l){s({type:"error",text:l.message})}finally{a(!1)}};return F.jsxs("div",{className:"relative min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 overflow-hidden",children:[F.jsx("div",{className:"absolute top-20 left-10 animate-bounce delay-100",children:F.jsx(Qr,{className:"w-8 h-8 text-green-300 opacity-60"})}),F.jsx("div",{className:"absolute bottom-10 right-20 animate-bounce delay-300",children:F.jsx(Qr,{className:"w-10 h-10 text-emerald-300 opacity-50"})}),F.jsxs("div",{className:"relative z-10 w-full max-w-md p-8 space-y-8 bg-white rounded-2xl shadow-lg",children:[F.jsxs("div",{className:"text-center",children:[F.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Lupa Kata Sandi?"}),F.jsx("p",{className:"mt-2 text-gray-600",children:"Jangan khawatir. Masukkan email Anda dan kami akan mengirimkan tautan untuk mengatur ulang kata sandi Anda."})]}),F.jsxs("form",{className:"mt-8 space-y-6",onSubmit:i,children:[t.text&&F.jsxs("div",{className:`p-4 rounded-md flex items-start space-x-3 ${t.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[t.type==="success"?F.jsx($p,{className:"w-5 h-5 flex-shrink-0"}):F.jsx(Sw,{className:"w-5 h-5 flex-shrink-0"}),F.jsx("span",{className:"text-sm font-medium",children:t.text})]}),t.type!=="success"&&F.jsxs(F.Fragment,{children:[F.jsxs("div",{className:"space-y-2",children:[F.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Alamat Email"}),F.jsxs("div",{className:"relative",children:[F.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400",children:F.jsx(GC,{size:18})}),F.jsx("input",{type:"email",id:"email",placeholder:"contoh@email.com",value:n,onChange:o=>e(o.target.value),required:!0,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition"})]})]}),F.jsxs("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-semibold rounded-xl text-white bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed",disabled:r,children:[F.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:F.jsx(GC,{className:"h-5 w-5 text-green-300 group-hover:text-green-200"})}),F.jsx("span",{children:r?"Mengirim...":"Kirim Tautan Pemulihan"})]})]}),F.jsx("div",{className:"text-center",children:F.jsxs(Bi,{to:"/login",className:"flex items-center justify-center space-x-2 font-medium text-green-600 hover:text-green-500 hover:underline",children:[F.jsx(kP,{size:16}),F.jsx("span",{children:"Kembali ke Login"})]})})]})]})]})},$Ce=()=>{const{token:n}=BH(),e=$A(),[t,s]=Ee.useState(""),[r,a]=Ee.useState(""),[i,o]=Ee.useState({type:"",text:""}),[l,u]=Ee.useState(!1),h=async f=>{if(f.preventDefault(),t.length<6){o({type:"error",text:"Kata sandi minimal harus 6 karakter."});return}if(t!==r){o({type:"error",text:"Konfirmasi kata sandi tidak cocok."});return}u(!0),o({type:"",text:""});try{const d=await fetch(Sl.resetPassword,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n,newPassword:t})}),m=await d.json();if(!d.ok)throw new Error(m.message||"Token tidak valid atau telah kedaluwarsa.");o({type:"success",text:`${m.message} Anda akan dialihkan ke halaman login...`}),setTimeout(()=>e("/login"),2500)}catch(d){o({type:"error",text:d.message})}finally{u(!1)}};return F.jsxs("div",{className:"relative min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 overflow-hidden",children:[F.jsx("div",{className:"absolute top-20 left-10 animate-bounce delay-100",children:F.jsx(Qr,{className:"w-8 h-8 text-green-300 opacity-60"})}),F.jsx("div",{className:"absolute bottom-10 right-20 animate-bounce delay-300",children:F.jsx(Qr,{className:"w-10 h-10 text-emerald-300 opacity-50"})}),F.jsxs("div",{className:"relative z-10 w-full max-w-md p-8 space-y-8 bg-white rounded-2xl shadow-lg",children:[F.jsxs("div",{className:"text-center",children:[F.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Atur Ulang Kata Sandi"}),F.jsx("p",{className:"mt-2 text-gray-600",children:"Buat kata sandi baru yang kuat dan mudah Anda ingat."})]}),F.jsxs("form",{className:"mt-8 space-y-6",onSubmit:h,children:[i.text&&F.jsxs("div",{className:`p-4 rounded-md flex items-start space-x-3 ${i.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[i.type==="success"?F.jsx($p,{className:"w-5 h-5 flex-shrink-0"}):F.jsx(Sw,{className:"w-5 h-5 flex-shrink-0"}),F.jsx("span",{className:"text-sm font-medium",children:i.text})]}),F.jsxs("div",{className:"space-y-2",children:[F.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Kata Sandi Baru"}),F.jsxs("div",{className:"relative",children:[F.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400",children:F.jsx(bg,{size:18})}),F.jsx("input",{type:"password",id:"password",placeholder:"",value:t,onChange:f=>s(f.target.value),required:!0,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition"})]})]}),F.jsxs("div",{className:"space-y-2",children:[F.jsx("label",{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-700",children:"Konfirmasi Kata Sandi Baru"}),F.jsxs("div",{className:"relative",children:[F.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400",children:F.jsx(bg,{size:18})}),F.jsx("input",{type:"password",id:"confirmPassword",placeholder:"",value:r,onChange:f=>a(f.target.value),required:!0,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition"})]})]}),F.jsxs("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-semibold rounded-xl text-white bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed",disabled:l||i.type==="success",children:[F.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:F.jsx(L2,{className:"h-5 w-5 text-green-300 group-hover:text-green-200"})}),F.jsx("span",{children:l?"Memproses...":"Simpan Kata Sandi"})]}),F.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Ingat kata sandi Anda?"," ",F.jsx(Bi,{to:"/login",className:"font-medium text-green-600 hover:text-green-500 hover:underline",children:"Kembali ke Login"})]})]})]})]})},_Ce=()=>{const[n,e]=Ee.useState(!1),[t,s]=Ee.useState(!1),r=$u(),a=$A();Ee.useEffect(()=>{const g=localStorage.getItem("token");s(!!g)},[r]);const i=[{path:"/",label:"Beranda",icon:m8},{path:"/cornLeafScanner",label:"Scanner",icon:Qr},{path:"/team",label:"Team",icon:$S},{path:"/about",label:"Tentang",icon:y8}],o=[{path:"/dashboard",label:"Dashboard",icon:G3},{path:"/riwayat",label:"Riwayat",icon:VC},{path:"/profile",label:"Profil",icon:e8}],l=[{path:"/login",label:"Login",icon:RS},{path:"/register",label:"Register",icon:Y3,isPrimary:!0}],u=t?[...i,...o]:i,h=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s(!1),e(!1),a("/login")},f=g=>r.pathname===g,d=({path:g,label:w,icon:v,isPrimary:b=!1,isMobileLink:C=!1})=>F.jsxs(Bi,{to:g,onClick:()=>e(!1),className:`flex items-center space-x-2 rounded-lg font-medium transition duration-200
        ${C?"px-4 py-3":"px-4 py-2"}
        ${b?"bg-green-600 text-white hover:bg-green-700 shadow-md":f(g)?"bg-green-100 text-green-700 shadow-sm":"text-gray-600 hover:text-green-600 hover:bg-green-50"}
      `,children:[F.jsx(v,{className:"w-5 h-5"}),F.jsx("span",{children:w})]}),m=({isMobile:g=!1})=>F.jsxs("button",{onClick:h,className:`flex items-center w-full rounded-lg font-medium transition duration-200
        ${g?"px-4 py-3 text-gray-600 hover:text-red-600 hover:bg-red-50":"px-3 py-2 text-gray-600 hover:text-red-600 hover:bg-red-50"}
      `,children:[F.jsx(C8,{className:"w-5 h-5"}),F.jsx("span",{children:"Logout"})]});return F.jsxs("nav",{className:"bg-white shadow-md sticky top-0 z-50",children:[F.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:F.jsxs("div",{className:"flex justify-between items-center h-16",children:[F.jsxs(Bi,{to:"/",className:"flex items-center space-x-2 text-xl font-bold text-[#039b62]",children:[F.jsx(Qr,{className:"w-7 h-7"}),F.jsx("span",{className:"bg-gradient-to-r from-green-500 to-green-600 bg-clip-text text-transparent",children:"CornLeaf AI"})]}),F.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[u.map(g=>F.jsx(d,{...g},g.path)),F.jsx("div",{className:"h-6 border-l border-gray-200 mx-2","aria-hidden":"true"}),t?F.jsx(m,{}):l.map(g=>F.jsx(d,{...g},g.path))]}),F.jsx("button",{onClick:()=>e(!n),"aria-controls":"mobile-menu","aria-expanded":n,"aria-label":n?"Close menu":"Open menu",className:"md:hidden p-2 rounded-md text-gray-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-green-500 transition",children:n?F.jsx(_S,{className:"w-6 h-6"}):F.jsx(N8,{className:"w-6 h-6"})})]})}),n&&F.jsx("div",{id:"mobile-menu",className:`md:hidden bg-gray-50 px-4 pb-4 overflow-hidden\r
                     animate-in slide-in-from-top fade-in duration-200 ease-out-quart\r
                     rounded-b-lg shadow-inner`,children:F.jsxs("div",{className:"flex flex-col space-y-2 pt-2 pb-4",children:[u.map(g=>F.jsx(d,{...g,isMobileLink:!0},g.path)),F.jsx("hr",{className:"my-2 border-gray-200"}),t?F.jsx(m,{isMobile:!0}):l.map(g=>F.jsx(d,{...g,isMobileLink:!0},g.path))]})})]})},OCe=()=>localStorage.getItem("token")?F.jsx(QH,{}):F.jsx(OH,{to:"/login",replace:!0});function QCe(){return F.jsx(cP,{children:F.jsxs("div",{className:"bg-white flex flex-col min-h-screen",children:[F.jsx(_Ce,{}),F.jsx("main",{className:"mx-auto flex-grow w-full",children:F.jsxs(HH,{children:[F.jsx(Xi,{path:"/",element:F.jsx(ez,{})}),F.jsx(Xi,{path:"/about",element:F.jsx(fz,{})}),F.jsx(Xi,{path:"/cornLeafScanner",element:F.jsx(ECe,{})}),F.jsx(Xi,{path:"/team",element:F.jsx(mz,{})}),F.jsx(Xi,{path:"/login",element:F.jsx(DCe,{})}),F.jsx(Xi,{path:"/register",element:F.jsx(LCe,{})}),F.jsx(Xi,{path:"/forgot-password",element:F.jsx(RCe,{})})," ",F.jsx(Xi,{path:"/reset-password/:token",element:F.jsx($Ce,{})})," ",F.jsxs(Xi,{element:F.jsx(OCe,{}),children:[F.jsx(Xi,{path:"/dashboard",element:F.jsx(FCe,{})}),F.jsx(Xi,{path:"/riwayat",element:F.jsx(TCe,{})}),F.jsx(Xi,{path:"/profile",element:F.jsx(UCe,{})})]})]})}),F.jsx("footer",{className:"bg-gradient-to-r from-gray-800 to-gray-900 text-white py-12",children:F.jsxs("div",{className:"container mx-auto px-4 text-center",children:[F.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-green-400 to-blue-400 bg-clip-text text-transparent",children:"CornLeaf AI"}),F.jsx("p",{className:"text-gray-400 mt-2",children:"Teknologi AI terdepan untuk deteksi penyakit daun jagung."}),F.jsx("div",{className:"border-t border-gray-700 mt-8 pt-8 text-center",children:F.jsxs("p",{className:"text-gray-400",children:[" ",new Date().getFullYear()," CornLeaf AI. Teknologi AI untuk pertanian yang lebih baik."]})})]})})]})})}const MCe=VM.createRoot(document.getElementById("root"));MCe.render(F.jsx(QCe,{}));export{Yn as _,HCe as c,k3 as g};
